(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"014b":function(e,t,n){"use strict";var r=n("e53d"),i=n("07e3"),o=n("8e60"),a=n("63b6"),s=n("9138"),c=n("ebfd").KEY,u=n("294c"),l=n("dbdb"),h=n("45f2"),d=n("62a0"),p=n("5168"),f=n("ccb9"),m=n("6718"),v=n("47ee"),g=n("9003"),y=n("e4ae"),b=n("f772"),A=n("241e"),w=n("36c3"),x=n("1bc3"),E=n("aebd"),_=n("a159"),M=n("0395"),T=n("bf0b"),C=n("9aa9"),S=n("d9f6"),L=n("c3a1"),R=T.f,P=S.f,O=M.f,D=r.Symbol,I=r.JSON,B=I&&I.stringify,k="prototype",F=p("_hidden"),N=p("toPrimitive"),U={}.propertyIsEnumerable,j=l("symbol-registry"),H=l("symbols"),z=l("op-symbols"),G=Object[k],V="function"==typeof D&&!!C.f,W=r.QObject,q=!W||!W[k]||!W[k].findChild,X=o&&u(function(){return 7!=_(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=R(G,t);r&&delete G[t],P(e,t,n),r&&e!==G&&P(G,t,r)}:P,Y=function(e){var t=H[e]=_(D[k]);return t._k=e,t},Q=V&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},K=function(e,t,n){return e===G&&K(z,t,n),y(e),t=x(t,!0),y(n),i(H,t)?(n.enumerable?(i(e,F)&&e[F][t]&&(e[F][t]=!1),n=_(n,{enumerable:E(0,!1)})):(i(e,F)||P(e,F,E(1,{})),e[F][t]=!0),X(e,t,n)):P(e,t,n)},Z=function(e,t){y(e);var n,r=v(t=w(t)),i=0,o=r.length;while(o>i)K(e,n=r[i++],t[n]);return e},$=function(e,t){return void 0===t?_(e):Z(_(e),t)},J=function(e){var t=U.call(this,e=x(e,!0));return!(this===G&&i(H,e)&&!i(z,e))&&(!(t||!i(this,e)||!i(H,e)||i(this,F)&&this[F][e])||t)},ee=function(e,t){if(e=w(e),t=x(t,!0),e!==G||!i(H,t)||i(z,t)){var n=R(e,t);return!n||!i(H,t)||i(e,F)&&e[F][t]||(n.enumerable=!0),n}},te=function(e){var t,n=O(w(e)),r=[],o=0;while(n.length>o)i(H,t=n[o++])||t==F||t==c||r.push(t);return r},ne=function(e){var t,n=e===G,r=O(n?z:w(e)),o=[],a=0;while(r.length>a)!i(H,t=r[a++])||n&&!i(G,t)||o.push(H[t]);return o};V||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(z,n),i(this,F)&&i(this[F],e)&&(this[F][e]=!1),X(this,e,E(1,n))};return o&&q&&X(G,e,{configurable:!0,set:t}),Y(e)},s(D[k],"toString",function(){return this._k}),T.f=ee,S.f=K,n("6abf").f=M.f=te,n("355d").f=J,C.f=ne,o&&!n("b8e3")&&s(G,"propertyIsEnumerable",J,!0),f.f=function(e){return Y(p(e))}),a(a.G+a.W+a.F*!V,{Symbol:D});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var oe=L(p.store),ae=0;oe.length>ae;)m(oe[ae++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=D(e)},keyFor:function(e){if(!Q(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!V,"Object",{create:$,defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var se=u(function(){C.f(1)});a(a.S+a.F*se,"Object",{getOwnPropertySymbols:function(e){return C.f(A(e))}}),I&&a(a.S+a.F*(!V||u(function(){var e=D();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))})),"JSON",{stringify:function(e){var t,n,r=[e],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Q(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Q(t))return t}),r[1]=t,B.apply(I,r)}}),D[k][N]||n("35e8")(D[k],N,D[k].valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},"01f9":function(e,t,n){"use strict";var r=n("2d00"),i=n("5ca1"),o=n("2aba"),a=n("32e9"),s=n("84f2"),c=n("41a0"),u=n("7f20"),l=n("38fd"),h=n("2b4c")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",m="values",v=function(){return this};e.exports=function(e,t,n,g,y,b,A){c(n,t,g);var w,x,E,_=function(e){if(!d&&e in S)return S[e];switch(e){case f:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",T=y==m,C=!1,S=e.prototype,L=S[h]||S[p]||y&&S[y],R=L||_(y),P=y?T?_("entries"):R:void 0,O="Array"==t&&S.entries||L;if(O&&(E=l(O.call(new e)),E!==Object.prototype&&E.next&&(u(E,M,!0),r||"function"==typeof E[h]||a(E,h,v))),T&&L&&L.name!==m&&(C=!0,R=function(){return L.call(this)}),r&&!A||!d&&!C&&S[h]||a(S,h,R),s[t]=R,s[M]=v,y)if(w={values:T?R:_(m),keys:b?R:_(f),entries:P},A)for(x in w)x in S||o(S,x,w[x]);else i(i.P+i.F*(d||C),t,w);return w}},"0293":function(e,t,n){var r=n("241e"),i=n("53e2");n("ce7e")("getPrototypeOf",function(){return function(e){return i(r(e))}})},"0395":function(t,n,r){var i=r("36c3"),o=r("6abf").f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return o(t)}catch(e){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==a.call(e)?c(e):o(i(e))}},"061b":function(e,t,n){e.exports=n("fa99")},"07e3":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"097d":function(e,t,n){"use strict";var r=n("5ca1"),i=n("8378"),o=n("7726"),a=n("ebd6"),s=n("bcaa");r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},"0d58":function(e,t,n){var r=n("ce10"),i=n("e11e");e.exports=Object.keys||function(e){return r(e,i)}},"0fc9":function(e,t,n){var r=n("3a38"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},1495:function(e,t,n){var r=n("86cc"),i=n("cb7c"),o=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(e,t){i(e);var n,a=o(t),s=a.length,c=0;while(s>c)r.f(e,n=a[c++],t[n]);return e}},1654:function(e,t,n){"use strict";var r=n("71c1")(!0);n("30f1")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},1691:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},1991:function(e,t,n){var r,i,o,a=n("9b43"),s=n("31f4"),c=n("fab2"),u=n("230e"),l=n("7726"),h=l.process,d=l.setImmediate,p=l.clearImmediate,f=l.MessageChannel,m=l.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},A=function(e){b.call(e.data)};d&&p||(d=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete g[e]},"process"==n("2d95")(h)?r=function(e){h.nextTick(a(b,e,1))}:m&&m.now?r=function(e){m.now(a(b,e,1))}:f?(i=new f,o=i.port2,i.port1.onmessage=A,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",A,!1)):r=y in u("script")?function(e){c.appendChild(u("script"))[y]=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:p}},"1bc3":function(e,t,n){var r=n("f772");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"1df8":function(e,t,n){var r=n("63b6");r(r.S,"Object",{setPrototypeOf:n("ead6").set})},"1ec9":function(e,t,n){var r=n("f772"),i=n("e53d").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"1fa8":function(t,n,r){var i=r("cb7c");t.exports=function(t,n,r,o){try{return o?n(i(r)[0],r[1]):n(r)}catch(e){var a=t["return"];throw void 0!==a&&i(a.call(t)),e}}},"230e":function(e,t,n){var r=n("d3f4"),i=n("7726").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"23c6":function(t,n,r){var i=r("2d95"),o=r("2b4c")("toStringTag"),a="Arguments"==i(function(){return arguments}()),s=function(t,n){try{return t[n]}catch(e){}};t.exports=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},"241e":function(e,t,n){var r=n("25eb");e.exports=function(e){return Object(r(e))}},"25b0":function(e,t,n){n("1df8"),e.exports=n("584a").Object.setPrototypeOf},"25eb":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"27ee":function(e,t,n){var r=n("23c6"),i=n("2b4c")("iterator"),o=n("84f2");e.exports=n("8378").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},2877:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:u}}n.d(t,"a",function(){return r})},"294c":function(t,n){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"2aba":function(e,t,n){var r=n("7726"),i=n("32e9"),o=n("69a8"),a=n("ca5a")("src"),s=n("fa5b"),c="toString",u=(""+s).split(c);n("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,c,function(){return"function"==typeof this&&this[a]||s.call(this)})},"2aeb":function(e,t,n){var r=n("cb7c"),i=n("1495"),o=n("e11e"),a=n("613b")("IE_PROTO"),s=function(){},c="prototype",u=function(){var e,t=n("230e")("iframe"),r=o.length,i="<",a=">";t.style.display="none",n("fab2").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),u=e.F;while(r--)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},"2b0e":function(t,n,r){"use strict";(function(t){
/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({});function i(e){return void 0===e||null===e}function o(e){return void 0!==e&&null!==e}function a(e){return!0===e}function s(e){return!1===e}function c(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function h(e){return"[object Object]"===l.call(e)}function d(e){return"[object RegExp]"===l.call(e)}function p(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function f(e){return o(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function m(e){return null==e?"":Array.isArray(e)||h(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function v(e){var t=parseFloat(e);return isNaN(t)?e:t}function g(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}g("slot,component",!0);var y=g("key,ref,slot,slot-scope,is");function b(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var A=Object.prototype.hasOwnProperty;function w(e,t){return A.call(e,t)}function x(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var E=/-(\w)/g,_=x(function(e){return e.replace(E,function(e,t){return t?t.toUpperCase():""})}),M=x(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),T=/\B([A-Z])/g,C=x(function(e){return e.replace(T,"-$1").toLowerCase()});function S(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function L(e,t){return e.bind(t)}var R=Function.prototype.bind?L:S;function P(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function O(e,t){for(var n in t)e[n]=t[n];return e}function D(e){for(var t={},n=0;n<e.length;n++)e[n]&&O(t,e[n]);return t}function I(e,t,n){}var B=function(e,t,n){return!1},k=function(e){return e};function F(t,n){if(t===n)return!0;var r=u(t),i=u(n);if(!r||!i)return!r&&!i&&String(t)===String(n);try{var o=Array.isArray(t),a=Array.isArray(n);if(o&&a)return t.length===n.length&&t.every(function(e,t){return F(e,n[t])});if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(o||a)return!1;var s=Object.keys(t),c=Object.keys(n);return s.length===c.length&&s.every(function(e){return F(t[e],n[e])})}catch(e){return!1}}function N(e,t){for(var n=0;n<e.length;n++)if(F(e[n],t))return n;return-1}function U(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var j="data-server-rendered",H=["component","directive","filter"],z=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],G={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:B,isReservedAttr:B,isUnknownElement:B,getTagNamespace:I,parsePlatformTagName:k,mustUseProp:B,async:!0,_lifecycleHooks:z},V=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function W(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function q(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var X=new RegExp("[^"+V.source+".$_\\d]");function Y(e){if(!X.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var Q,K="__proto__"in{},Z="undefined"!==typeof window,$="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=$&&WXEnvironment.platform.toLowerCase(),ee=Z&&window.navigator.userAgent.toLowerCase(),te=ee&&/msie|trident/.test(ee),ne=ee&&ee.indexOf("msie 9.0")>0,re=ee&&ee.indexOf("edge/")>0,ie=(ee&&ee.indexOf("android"),ee&&/iphone|ipad|ipod|ios/.test(ee)||"ios"===J),oe=(ee&&/chrome\/\d+/.test(ee),ee&&/phantomjs/.test(ee),ee&&ee.match(/firefox\/(\d+)/)),ae={}.watch,se=!1;if(Z)try{var ce={};Object.defineProperty(ce,"passive",{get:function(){se=!0}}),window.addEventListener("test-passive",null,ce)}catch(e){}var ue=function(){return void 0===Q&&(Q=!Z&&!$&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),Q},le=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function he(e){return"function"===typeof e&&/native code/.test(e.toString())}var de,pe="undefined"!==typeof Symbol&&he(Symbol)&&"undefined"!==typeof Reflect&&he(Reflect.ownKeys);de="undefined"!==typeof Set&&he(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var fe=I,me=0,ve=function(){this.id=me++,this.subs=[]};ve.prototype.addSub=function(e){this.subs.push(e)},ve.prototype.removeSub=function(e){b(this.subs,e)},ve.prototype.depend=function(){ve.target&&ve.target.addDep(this)},ve.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},ve.target=null;var ge=[];function ye(e){ge.push(e),ve.target=e}function be(){ge.pop(),ve.target=ge[ge.length-1]}var Ae=function(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},we={child:{configurable:!0}};we.child.get=function(){return this.componentInstance},Object.defineProperties(Ae.prototype,we);var xe=function(e){void 0===e&&(e="");var t=new Ae;return t.text=e,t.isComment=!0,t};function Ee(e){return new Ae(void 0,void 0,void 0,String(e))}function _e(e){var t=new Ae(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Me=Array.prototype,Te=Object.create(Me),Ce=["push","pop","shift","unshift","splice","sort","reverse"];Ce.forEach(function(e){var t=Me[e];q(Te,e,function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o})});var Se=Object.getOwnPropertyNames(Te),Le=!0;function Re(e){Le=e}var Pe=function(e){this.value=e,this.dep=new ve,this.vmCount=0,q(e,"__ob__",this),Array.isArray(e)?(K?Oe(e,Te):De(e,Te,Se),this.observeArray(e)):this.walk(e)};function Oe(e,t){e.__proto__=t}function De(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];q(e,o,t[o])}}function Ie(e,t){var n;if(u(e)&&!(e instanceof Ae))return w(e,"__ob__")&&e.__ob__ instanceof Pe?n=e.__ob__:Le&&!ue()&&(Array.isArray(e)||h(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Pe(e)),t&&n&&n.vmCount++,n}function Be(e,t,n,r,i){var o=new ve,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(n=e[t]);var u=!i&&Ie(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return ve.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(t)&&Ne(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!==t&&r!==r||s&&!c||(c?c.call(e,t):n=t,u=!i&&Ie(t),o.notify())}})}}function ke(e,t,n){if(Array.isArray(e)&&p(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Be(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Fe(e,t){if(Array.isArray(e)&&p(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||w(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ne(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Ne(t)}Pe.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Be(e,t[n])},Pe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ie(e[t])};var Ue=G.optionMergeStrategies;function je(e,t){if(!t)return e;for(var n,r,i,o=pe?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=e[n],i=t[n],w(e,n)?r!==i&&h(r)&&h(i)&&je(r,i):ke(e,n,i));return e}function He(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return r?je(r,i):i}:t?e?function(){return je("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function ze(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?Ge(n):n}function Ge(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Ve(e,t,n,r){var i=Object.create(e||null);return t?O(i,t):i}Ue.data=function(e,t,n){return n?He(e,t,n):t&&"function"!==typeof t?e:He(e,t)},z.forEach(function(e){Ue[e]=ze}),H.forEach(function(e){Ue[e+"s"]=Ve}),Ue.watch=function(e,t,n,r){if(e===ae&&(e=void 0),t===ae&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var o in O(i,e),t){var a=i[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Ue.props=Ue.methods=Ue.inject=Ue.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return O(i,e),t&&O(i,t),i},Ue.provide=He;var We=function(e,t){return void 0===t?e:t};function qe(e,t){var n=e.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=_(i),a[o]={type:null})}else if(h(n))for(var s in n)i=n[s],o=_(s),a[o]=h(i)?i:{type:i};else 0;e.props=a}}function Xe(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(h(n))for(var o in n){var a=n[o];r[o]=h(a)?O({from:o},a):{from:a}}else 0}}function Ye(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function Qe(e,t,n){if("function"===typeof t&&(t=t.options),qe(t,n),Xe(t,n),Ye(t),!t._base&&(t.extends&&(e=Qe(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Qe(e,t.mixins[r],n);var o,a={};for(o in e)s(o);for(o in t)w(e,o)||s(o);function s(r){var i=Ue[r]||We;a[r]=i(e[r],t[r],n,r)}return a}function Ke(e,t,n,r){if("string"===typeof n){var i=e[t];if(w(i,n))return i[n];var o=_(n);if(w(i,o))return i[o];var a=M(o);if(w(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function Ze(e,t,n,r){var i=t[e],o=!w(n,e),a=n[e],s=tt(Boolean,i.type);if(s>-1)if(o&&!w(i,"default"))a=!1;else if(""===a||a===C(e)){var c=tt(String,i.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=$e(r,i,e);var u=Le;Re(!0),Ie(a),Re(u)}return a}function $e(e,t,n){if(w(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Je(t.type)?r.call(e):r}}function Je(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function et(e,t){return Je(e)===Je(t)}function tt(e,t){if(!Array.isArray(t))return et(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(et(t[n],e))return n;return-1}function nt(t,n,r){ye();try{if(n){var i=n;while(i=i.$parent){var o=i.$options.errorCaptured;if(o)for(var a=0;a<o.length;a++)try{var s=!1===o[a].call(i,t,n,r);if(s)return}catch(e){it(e,i,"errorCaptured hook")}}}it(t,n,r)}finally{be()}}function rt(t,n,r,i,o){var a;try{a=r?t.apply(n,r):t.call(n),a&&!a._isVue&&f(a)&&!a._handled&&(a.catch(function(e){return nt(e,i,o+" (Promise/async)")}),a._handled=!0)}catch(e){nt(e,i,o)}return a}function it(t,n,r){if(G.errorHandler)try{return G.errorHandler.call(null,t,n,r)}catch(e){e!==t&&ot(e,null,"config.errorHandler")}ot(t,n,r)}function ot(e,t,n){if(!Z&&!$||"undefined"===typeof console)throw e;console.error(e)}var at,st=!1,ct=[],ut=!1;function lt(){ut=!1;var e=ct.slice(0);ct.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&he(Promise)){var ht=Promise.resolve();at=function(){ht.then(lt),ie&&setTimeout(I)},st=!0}else if(te||"undefined"===typeof MutationObserver||!he(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())at="undefined"!==typeof setImmediate&&he(setImmediate)?function(){setImmediate(lt)}:function(){setTimeout(lt,0)};else{var dt=1,pt=new MutationObserver(lt),ft=document.createTextNode(String(dt));pt.observe(ft,{characterData:!0}),at=function(){dt=(dt+1)%2,ft.data=String(dt)},st=!0}function mt(t,n){var r;if(ct.push(function(){if(t)try{t.call(n)}catch(e){nt(e,n,"nextTick")}else r&&r(n)}),ut||(ut=!0,at()),!t&&"undefined"!==typeof Promise)return new Promise(function(e){r=e})}var vt=new de;function gt(e){yt(e,vt),vt.clear()}function yt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!u(e)||Object.isFrozen(e)||e instanceof Ae)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i){n=e.length;while(n--)yt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)yt(e[r[n]],t)}}}var bt=x(function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}});function At(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return rt(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)rt(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function wt(e,t,n,r,o,s){var c,u,l,h;for(c in e)u=e[c],l=t[c],h=bt(c),i(u)||(i(l)?(i(u.fns)&&(u=e[c]=At(u,s)),a(h.once)&&(u=e[c]=o(h.name,u,h.capture)),n(h.name,u,h.capture,h.passive,h.params)):u!==l&&(l.fns=u,e[c]=l));for(c in t)i(e[c])&&(h=bt(c),r(h.name,t[c],h.capture))}function xt(e,t,n){var r;e instanceof Ae&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function c(){n.apply(this,arguments),b(r.fns,c)}i(s)?r=At([c]):o(s.fns)&&a(s.merged)?(r=s,r.fns.push(c)):r=At([s,c]),r.merged=!0,e[t]=r}function Et(e,t,n){var r=t.options.props;if(!i(r)){var a={},s=e.attrs,c=e.props;if(o(s)||o(c))for(var u in r){var l=C(u);_t(a,c,u,l,!0)||_t(a,s,u,l,!1)}return a}}function _t(e,t,n,r,i){if(o(t)){if(w(t,n))return e[n]=t[n],i||delete t[n],!0;if(w(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function Mt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function Tt(e){return c(e)?[Ee(e)]:Array.isArray(e)?St(e):void 0}function Ct(e){return o(e)&&o(e.text)&&s(e.isComment)}function St(e,t){var n,r,s,u,l=[];for(n=0;n<e.length;n++)r=e[n],i(r)||"boolean"===typeof r||(s=l.length-1,u=l[s],Array.isArray(r)?r.length>0&&(r=St(r,(t||"")+"_"+n),Ct(r[0])&&Ct(u)&&(l[s]=Ee(u.text+r[0].text),r.shift()),l.push.apply(l,r)):c(r)?Ct(u)?l[s]=Ee(u.text+r):""!==r&&l.push(Ee(r)):Ct(r)&&Ct(u)?l[s]=Ee(u.text+r.text):(a(e._isVList)&&o(r.tag)&&i(r.key)&&o(t)&&(r.key="__vlist"+t+"_"+n+"__"),l.push(r)));return l}function Lt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Rt(e){var t=Pt(e.$options.inject,e);t&&(Re(!1),Object.keys(t).forEach(function(n){Be(e,n,t[n])}),Re(!0))}function Pt(e,t){if(e){for(var n=Object.create(null),r=pe?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=e[o].from,s=t;while(s){if(s._provided&&w(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var c=e[o].default;n[o]="function"===typeof c?c.call(t):c}else 0}}return n}}function Ot(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(Dt)&&delete n[u];return n}function Dt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function It(e,t,n){var i,o=Object.keys(t).length>0,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==r&&s===n.$key&&!o&&!n.$hasNormal)return n;for(var c in i={},e)e[c]&&"$"!==c[0]&&(i[c]=Bt(t,c,e[c]))}else i={};for(var u in t)u in i||(i[u]=kt(t,u));return e&&Object.isExtensible(e)&&(e._normalized=i),q(i,"$stable",a),q(i,"$key",s),q(i,"$hasNormal",o),i}function Bt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:Tt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function kt(e,t){return function(){return e[t]}}function Ft(e,t){var n,r,i,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(u(e))if(pe&&e[Symbol.iterator]){n=[];var c=e[Symbol.iterator](),l=c.next();while(!l.done)n.push(t(l.value,n.length)),l=c.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],n[r]=t(e[s],s,r);return o(n)||(n=[]),n._isVList=!0,n}function Nt(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=O(O({},r),n)),i=o(n)||t):i=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Ut(e){return Ke(this.$options,"filters",e,!0)||k}function jt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Ht(e,t,n,r,i){var o=G.keyCodes[t]||n;return i&&r&&!G.keyCodes[t]?jt(i,r):o?jt(o,e):r?C(r)!==t:void 0}function zt(e,t,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=D(n));var a=function(a){if("class"===a||"style"===a||y(a))o=e;else{var s=e.attrs&&e.attrs.type;o=r||G.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=_(a),u=C(a);if(!(c in o)&&!(u in o)&&(o[a]=n[a],i)){var l=e.on||(e.on={});l["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else;return e}function Gt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t?r:(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Wt(r,"__static__"+e,!1),r)}function Vt(e,t,n){return Wt(e,"__once__"+t+(n?"_"+n:""),!0),e}function Wt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&qt(e[r],t+"_"+r,n);else qt(e,t,n)}function qt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Xt(e,t){if(t)if(h(t)){var n=e.on=e.on?O({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function Yt(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?Yt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function Qt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Kt(e,t){return"string"===typeof e?t+e:e}function Zt(e){e._o=Vt,e._n=v,e._s=m,e._l=Ft,e._t=Nt,e._q=F,e._i=N,e._m=Gt,e._f=Ut,e._k=Ht,e._b=zt,e._v=Ee,e._e=xe,e._u=Yt,e._g=Xt,e._d=Qt,e._p=Kt}function $t(e,t,n,i,o){var s,c=this,u=o.options;w(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=a(u._compiled),h=!l;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||r,this.injections=Pt(u.inject,i),this.slots=function(){return c.$slots||It(e.scopedSlots,c.$slots=Ot(n,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return It(e.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=It(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,r){var o=dn(s,e,t,n,r,h);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return dn(s,e,t,n,r,h)}}function Jt(e,t,n,i,a){var s=e.options,c={},u=s.props;if(o(u))for(var l in u)c[l]=Ze(l,u,t||r);else o(n.attrs)&&tn(c,n.attrs),o(n.props)&&tn(c,n.props);var h=new $t(n,c,a,i,e),d=s.render.call(null,h._c,h);if(d instanceof Ae)return en(d,n,h.parent,s,h);if(Array.isArray(d)){for(var p=Tt(d)||[],f=new Array(p.length),m=0;m<p.length;m++)f[m]=en(p[m],n,h.parent,s,h);return f}}function en(e,t,n,r,i){var o=_e(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function tn(e,t){for(var n in t)e[_(n)]=t[n]}Zt($t.prototype);var nn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;nn.prepatch(n,n)}else{var r=e.componentInstance=an(e,Pn);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;kn(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,jn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Jn(n):Nn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Un(t,!0):t.$destroy())}},rn=Object.keys(nn);function on(e,t,n,r,s){if(!i(e)){var c=n.$options._base;if(u(e)&&(e=c.extend(e)),"function"===typeof e){var l;if(i(e.cid)&&(l=e,e=xn(l,c),void 0===e))return wn(l,t,n,r,s);t=t||{},xr(e),o(t.model)&&un(e.options,t);var h=Et(t,e,s);if(a(e.options.functional))return Jt(e,h,t,n,r);var d=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}sn(t);var f=e.options.name||s,m=new Ae("vue-component-"+e.cid+(f?"-"+f:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:h,listeners:d,tag:s,children:r},l);return m}}}function an(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return o(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function sn(e){for(var t=e.hook||(e.hook={}),n=0;n<rn.length;n++){var r=rn[n],i=t[r],o=nn[r];i===o||i&&i._merged||(t[r]=i?cn(o,i):o)}}function cn(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function un(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),a=i[r],s=t.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[r]=[s].concat(a)):i[r]=s}var ln=1,hn=2;function dn(e,t,n,r,i,o){return(Array.isArray(n)||c(n))&&(i=r,r=n,n=void 0),a(o)&&(i=hn),pn(e,t,n,r,i)}function pn(e,t,n,r,i){if(o(n)&&o(n.__ob__))return xe();if(o(n)&&o(n.is)&&(t=n.is),!t)return xe();var a,s,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),i===hn?r=Tt(r):i===ln&&(r=Mt(r)),"string"===typeof t)?(s=e.$vnode&&e.$vnode.ns||G.getTagNamespace(t),a=G.isReservedTag(t)?new Ae(G.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!o(c=Ke(e.$options,"components",t))?new Ae(t,n,r,void 0,void 0,e):on(c,n,e,r,t)):a=on(t,n,e,r);return Array.isArray(a)?a:o(a)?(o(s)&&fn(a,s),o(n)&&mn(n),a):xe()}function fn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),o(e.children))for(var r=0,s=e.children.length;r<s;r++){var c=e.children[r];o(c.tag)&&(i(c.ns)||a(n)&&"svg"!==c.tag)&&fn(c,t,n)}}function mn(e){u(e.style)&&gt(e.style),u(e.class)&&gt(e.class)}function vn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=Ot(t._renderChildren,i),e.$scopedSlots=r,e._c=function(t,n,r,i){return dn(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return dn(e,t,n,r,i,!0)};var o=n&&n.data;Be(e,"$attrs",o&&o.attrs||r,null,!0),Be(e,"$listeners",t._parentListeners||r,null,!0)}var gn,yn=null;function bn(t){Zt(t.prototype),t.prototype.$nextTick=function(e){return mt(e,this)},t.prototype._render=function(){var t,n=this,r=n.$options,i=r.render,o=r._parentVnode;o&&(n.$scopedSlots=It(o.data.scopedSlots,n.$slots,n.$scopedSlots)),n.$vnode=o;try{yn=n,t=i.call(n._renderProxy,n.$createElement)}catch(e){nt(e,n,"render"),t=n._vnode}finally{yn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof Ae||(t=xe()),t.parent=o,t}}function An(e,t){return(e.__esModule||pe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function wn(e,t,n,r,i){var o=xe();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function xn(e,t){if(a(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var n=yn;if(n&&o(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),a(e.loading)&&o(e.loadingComp))return e.loadingComp;if(n&&!o(e.owners)){var r=e.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",function(){return b(r,n)});var h=function(e){for(var t=0,n=r.length;t<n;t++)r[t].$forceUpdate();e&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},d=U(function(n){e.resolved=An(n,t),s?r.length=0:h(!0)}),p=U(function(t){o(e.errorComp)&&(e.error=!0,h(!0))}),m=e(d,p);return u(m)&&(f(m)?i(e.resolved)&&m.then(d,p):f(m.component)&&(m.component.then(d,p),o(m.error)&&(e.errorComp=An(m.error,t)),o(m.loading)&&(e.loadingComp=An(m.loading,t),0===m.delay?e.loading=!0:c=setTimeout(function(){c=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,h(!1))},m.delay||200)),o(m.timeout)&&(l=setTimeout(function(){l=null,i(e.resolved)&&p(null)},m.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function En(e){return e.isComment&&e.asyncFactory}function _n(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(o(n)&&(o(n.componentOptions)||En(n)))return n}}function Mn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Ln(e,t)}function Tn(e,t){gn.$on(e,t)}function Cn(e,t){gn.$off(e,t)}function Sn(e,t){var n=gn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function Ln(e,t,n){gn=e,wt(t,n||{},Tn,Cn,Sn,e),gn=void 0}function Rn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var s=a.length;while(s--)if(o=a[s],o===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?P(n):n;for(var r=P(arguments,1),i='event handler for "'+e+'"',o=0,a=n.length;o<a;o++)rt(n[o],t,r,t,i)}return t}}var Pn=null;function On(e){var t=Pn;return Pn=e,function(){Pn=t}}function Dn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function In(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=On(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){jn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||b(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),jn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Bn(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=xe),jn(e,"beforeMount"),r=function(){e._update(e._render(),n)},new rr(e,r,I,{before:function(){e._isMounted&&!e._isDestroyed&&jn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,jn(e,"mounted")),e}function kn(e,t,n,i,o){var a=i.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==r&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),u=!!(o||e.$options._renderChildren||c);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o,e.$attrs=i.data.attrs||r,e.$listeners=n||r,t&&e.$options.props){Re(!1);for(var l=e._props,h=e.$options._propKeys||[],d=0;d<h.length;d++){var p=h[d],f=e.$options.props;l[p]=Ze(p,f,t,e)}Re(!0),e.$options.propsData=t}n=n||r;var m=e.$options._parentListeners;e.$options._parentListeners=n,Ln(e,n,m),u&&(e.$slots=Ot(o,i.context),e.$forceUpdate())}function Fn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Nn(e,t){if(t){if(e._directInactive=!1,Fn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Nn(e.$children[n]);jn(e,"activated")}}function Un(e,t){if((!t||(e._directInactive=!0,!Fn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Un(e.$children[n]);jn(e,"deactivated")}}function jn(e,t){ye();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)rt(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),be()}var Hn=[],zn=[],Gn={},Vn=!1,Wn=!1,qn=0;function Xn(){qn=Hn.length=zn.length=0,Gn={},Vn=Wn=!1}var Yn=0,Qn=Date.now;if(Z&&!te){var Kn=window.performance;Kn&&"function"===typeof Kn.now&&Qn()>document.createEvent("Event").timeStamp&&(Qn=function(){return Kn.now()})}function Zn(){var e,t;for(Yn=Qn(),Wn=!0,Hn.sort(function(e,t){return e.id-t.id}),qn=0;qn<Hn.length;qn++)e=Hn[qn],e.before&&e.before(),t=e.id,Gn[t]=null,e.run();var n=zn.slice(),r=Hn.slice();Xn(),er(n),$n(r),le&&G.devtools&&le.emit("flush")}function $n(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&jn(r,"updated")}}function Jn(e){e._inactive=!1,zn.push(e)}function er(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Nn(e[t],!0)}function tr(e){var t=e.id;if(null==Gn[t]){if(Gn[t]=!0,Wn){var n=Hn.length-1;while(n>qn&&Hn[n].id>e.id)n--;Hn.splice(n+1,0,e)}else Hn.push(e);Vn||(Vn=!0,mt(Zn))}}var nr=0,rr=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++nr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new de,this.newDepIds=new de,this.expression="","function"===typeof t?this.getter=t:(this.getter=Y(t),this.getter||(this.getter=I)),this.value=this.lazy?void 0:this.get()};rr.prototype.get=function(){var t;ye(this);var n=this.vm;try{t=this.getter.call(n,n)}catch(e){if(!this.user)throw e;nt(e,n,'getter for watcher "'+this.expression+'"')}finally{this.deep&&gt(t),be(),this.cleanupDeps()}return t},rr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},rr.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},rr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},rr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var n=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,n)}catch(e){nt(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,n)}}},rr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},rr.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},rr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||b(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var ir={enumerable:!0,configurable:!0,get:I,set:I};function or(e,t,n){ir.get=function(){return this[t][n]},ir.set=function(e){this[t][n]=e},Object.defineProperty(e,n,ir)}function ar(e){e._watchers=[];var t=e.$options;t.props&&sr(e,t.props),t.methods&&mr(e,t.methods),t.data?cr(e):Ie(e._data={},!0),t.computed&&hr(e,t.computed),t.watch&&t.watch!==ae&&vr(e,t.watch)}function sr(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;o||Re(!1);var a=function(o){i.push(o);var a=Ze(o,t,n,e);Be(r,o,a),o in e||or(e,"_props",o)};for(var s in t)a(s);Re(!0)}function cr(e){var t=e.$options.data;t=e._data="function"===typeof t?ur(t,e):t||{},h(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);while(i--){var o=n[i];0,r&&w(r,o)||W(o)||or(e,"_data",o)}Ie(t,!0)}function ur(t,n){ye();try{return t.call(n,n)}catch(e){return nt(e,n,"data()"),{}}finally{be()}}var lr={lazy:!0};function hr(e,t){var n=e._computedWatchers=Object.create(null),r=ue();for(var i in t){var o=t[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new rr(e,a||I,I,lr)),i in e||dr(e,i,o)}}function dr(e,t,n){var r=!ue();"function"===typeof n?(ir.get=r?pr(t):fr(n),ir.set=I):(ir.get=n.get?r&&!1!==n.cache?pr(t):fr(n.get):I,ir.set=n.set||I),Object.defineProperty(e,t,ir)}function pr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ve.target&&t.depend(),t.value}}function fr(e){return function(){return e.call(this,this)}}function mr(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?I:R(t[n],e)}function vr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)gr(e,n,r[i]);else gr(e,n,r)}}function gr(e,t,n,r){return h(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function yr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=ke,e.prototype.$delete=Fe,e.prototype.$watch=function(e,t,n){var r=this;if(h(t))return gr(r,e,t,n);n=n||{},n.user=!0;var i=new rr(r,e,t,n);if(n.immediate)try{t.call(r,i.value)}catch(o){nt(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var br=0;function Ar(e){e.prototype._init=function(e){var t=this;t._uid=br++,t._isVue=!0,e&&e._isComponent?wr(t,e):t.$options=Qe(xr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Dn(t),Mn(t),vn(t),jn(t,"beforeCreate"),Rt(t),ar(t),Lt(t),jn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function wr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function xr(e){var t=e.options;if(e.super){var n=xr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=Er(e);i&&O(e.extendOptions,i),t=e.options=Qe(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Er(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function _r(e){this._init(e)}function Mr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=P(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Tr(e){e.mixin=function(e){return this.options=Qe(this.options,e),this}}function Cr(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Qe(n.options,e),a["super"]=n,a.options.props&&Sr(a),a.options.computed&&Lr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,H.forEach(function(e){a[e]=n[e]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=O({},a.options),i[r]=a,a}}function Sr(e){var t=e.options.props;for(var n in t)or(e.prototype,"_props",n)}function Lr(e){var t=e.options.computed;for(var n in t)dr(e.prototype,n,t[n])}function Rr(e){H.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&h(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}function Pr(e){return e&&(e.Ctor.options.name||e.tag)}function Or(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Dr(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=Pr(a.componentOptions);s&&!t(s)&&Ir(n,o,r,i)}}}function Ir(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,b(n,t)}Ar(_r),yr(_r),Rn(_r),In(_r),bn(_r);var Br=[String,RegExp,Array],kr={name:"keep-alive",abstract:!0,props:{include:Br,exclude:Br,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Ir(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){Dr(e,function(e){return Or(t,e)})}),this.$watch("exclude",function(t){Dr(e,function(e){return!Or(t,e)})})},render:function(){var e=this.$slots.default,t=_n(e),n=t&&t.componentOptions;if(n){var r=Pr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Or(o,r))||a&&r&&Or(a,r))return t;var s=this,c=s.cache,u=s.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[l]?(t.componentInstance=c[l].componentInstance,b(u,l),u.push(l)):(c[l]=t,u.push(l),this.max&&u.length>parseInt(this.max)&&Ir(c,u[0],u,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Fr={KeepAlive:kr};function Nr(e){var t={get:function(){return G}};Object.defineProperty(e,"config",t),e.util={warn:fe,extend:O,mergeOptions:Qe,defineReactive:Be},e.set=ke,e.delete=Fe,e.nextTick=mt,e.observable=function(e){return Ie(e),e},e.options=Object.create(null),H.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,O(e.options.components,Fr),Mr(e),Tr(e),Cr(e),Rr(e)}Nr(_r),Object.defineProperty(_r.prototype,"$isServer",{get:ue}),Object.defineProperty(_r.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(_r,"FunctionalRenderContext",{value:$t}),_r.version="2.6.10";var Ur=g("style,class"),jr=g("input,textarea,option,select,progress"),Hr=function(e,t,n){return"value"===n&&jr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},zr=g("contenteditable,draggable,spellcheck"),Gr=g("events,caret,typing,plaintext-only"),Vr=function(e,t){return Qr(t)||"false"===t?"false":"contenteditable"===e&&Gr(t)?t:"true"},Wr=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),qr="http://www.w3.org/1999/xlink",Xr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Yr=function(e){return Xr(e)?e.slice(6,e.length):""},Qr=function(e){return null==e||!1===e};function Kr(e){var t=e.data,n=e,r=e;while(o(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=Zr(r.data,t));while(o(n=n.parent))n&&n.data&&(t=Zr(t,n.data));return $r(t.staticClass,t.class)}function Zr(e,t){return{staticClass:Jr(e.staticClass,t.staticClass),class:o(e.class)?[e.class,t.class]:t.class}}function $r(e,t){return o(e)||o(t)?Jr(e,ei(t)):""}function Jr(e,t){return e?t?e+" "+t:e:t||""}function ei(e){return Array.isArray(e)?ti(e):u(e)?ni(e):"string"===typeof e?e:""}function ti(e){for(var t,n="",r=0,i=e.length;r<i;r++)o(t=ei(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ni(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var ri={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ii=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),oi=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ai=function(e){return ii(e)||oi(e)};function si(e){return oi(e)?"svg":"math"===e?"math":void 0}var ci=Object.create(null);function ui(e){if(!Z)return!0;if(ai(e))return!1;if(e=e.toLowerCase(),null!=ci[e])return ci[e];var t=document.createElement(e);return e.indexOf("-")>-1?ci[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ci[e]=/HTMLUnknownElement/.test(t.toString())}var li=g("text,number,password,search,email,tel,url");function hi(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function di(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function pi(e,t){return document.createElementNS(ri[e],t)}function fi(e){return document.createTextNode(e)}function mi(e){return document.createComment(e)}function vi(e,t,n){e.insertBefore(t,n)}function gi(e,t){e.removeChild(t)}function yi(e,t){e.appendChild(t)}function bi(e){return e.parentNode}function Ai(e){return e.nextSibling}function wi(e){return e.tagName}function xi(e,t){e.textContent=t}function Ei(e,t){e.setAttribute(t,"")}var _i=Object.freeze({createElement:di,createElementNS:pi,createTextNode:fi,createComment:mi,insertBefore:vi,removeChild:gi,appendChild:yi,parentNode:bi,nextSibling:Ai,tagName:wi,setTextContent:xi,setStyleScope:Ei}),Mi={create:function(e,t){Ti(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Ti(e,!0),Ti(t))},destroy:function(e){Ti(e,!0)}};function Ti(e,t){var n=e.data.ref;if(o(n)){var r=e.context,i=e.componentInstance||e.elm,a=r.$refs;t?Array.isArray(a[n])?b(a[n],i):a[n]===i&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var Ci=new Ae("",{},[]),Si=["create","activate","update","remove","destroy"];function Li(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&o(e.data)===o(t.data)&&Ri(e,t)||a(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&i(t.asyncFactory.error))}function Ri(e,t){if("input"!==e.tag)return!0;var n,r=o(n=e.data)&&o(n=n.attrs)&&n.type,i=o(n=t.data)&&o(n=n.attrs)&&n.type;return r===i||li(r)&&li(i)}function Pi(e,t,n){var r,i,a={};for(r=t;r<=n;++r)i=e[r].key,o(i)&&(a[i]=r);return a}function Oi(e){var t,n,r={},s=e.modules,u=e.nodeOps;for(t=0;t<Si.length;++t)for(r[Si[t]]=[],n=0;n<s.length;++n)o(s[n][Si[t]])&&r[Si[t]].push(s[n][Si[t]]);function l(e){return new Ae(u.tagName(e).toLowerCase(),{},[],void 0,e)}function h(e,t){function n(){0===--n.listeners&&d(e)}return n.listeners=t,n}function d(e){var t=u.parentNode(e);o(t)&&u.removeChild(t,e)}function p(e,t,n,r,i,s,c){if(o(e.elm)&&o(s)&&(e=s[c]=_e(e)),e.isRootInsert=!i,!f(e,t,n,r)){var l=e.data,h=e.children,d=e.tag;o(d)?(e.elm=e.ns?u.createElementNS(e.ns,d):u.createElement(d,e),x(e),b(e,h,t),o(l)&&w(e,t),y(n,e.elm,r)):a(e.isComment)?(e.elm=u.createComment(e.text),y(n,e.elm,r)):(e.elm=u.createTextNode(e.text),y(n,e.elm,r))}}function f(e,t,n,r){var i=e.data;if(o(i)){var s=o(e.componentInstance)&&i.keepAlive;if(o(i=i.hook)&&o(i=i.init)&&i(e,!1),o(e.componentInstance))return m(e,t),y(n,e.elm,r),a(s)&&v(e,t,n,r),!0}}function m(e,t){o(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,A(e)?(w(e,t),x(e)):(Ti(e),t.push(e))}function v(e,t,n,i){var a,s=e;while(s.componentInstance)if(s=s.componentInstance._vnode,o(a=s.data)&&o(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](Ci,s);t.push(s);break}y(n,e.elm,i)}function y(e,t,n){o(e)&&(o(n)?u.parentNode(n)===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function b(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)p(t[r],n,e.elm,null,!0,t,r)}else c(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function A(e){while(e.componentInstance)e=e.componentInstance._vnode;return o(e.tag)}function w(e,n){for(var i=0;i<r.create.length;++i)r.create[i](Ci,e);t=e.data.hook,o(t)&&(o(t.create)&&t.create(Ci,e),o(t.insert)&&n.push(e))}function x(e){var t;if(o(t=e.fnScopeId))u.setStyleScope(e.elm,t);else{var n=e;while(n)o(t=n.context)&&o(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t),n=n.parent}o(t=Pn)&&t!==e.context&&t!==e.fnContext&&o(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t)}function E(e,t,n,r,i,o){for(;r<=i;++r)p(n[r],o,e,t,!1,n,r)}function _(e){var t,n,i=e.data;if(o(i))for(o(t=i.hook)&&o(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(o(t=e.children))for(n=0;n<e.children.length;++n)_(e.children[n])}function M(e,t,n,r){for(;n<=r;++n){var i=t[n];o(i)&&(o(i.tag)?(T(i),_(i)):d(i.elm))}}function T(e,t){if(o(t)||o(e.data)){var n,i=r.remove.length+1;for(o(t)?t.listeners+=i:t=h(e.elm,i),o(n=e.componentInstance)&&o(n=n._vnode)&&o(n.data)&&T(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);o(n=e.data.hook)&&o(n=n.remove)?n(e,t):t()}else d(e.elm)}function C(e,t,n,r,a){var s,c,l,h,d=0,f=0,m=t.length-1,v=t[0],g=t[m],y=n.length-1,b=n[0],A=n[y],w=!a;while(d<=m&&f<=y)i(v)?v=t[++d]:i(g)?g=t[--m]:Li(v,b)?(L(v,b,r,n,f),v=t[++d],b=n[++f]):Li(g,A)?(L(g,A,r,n,y),g=t[--m],A=n[--y]):Li(v,A)?(L(v,A,r,n,y),w&&u.insertBefore(e,v.elm,u.nextSibling(g.elm)),v=t[++d],A=n[--y]):Li(g,b)?(L(g,b,r,n,f),w&&u.insertBefore(e,g.elm,v.elm),g=t[--m],b=n[++f]):(i(s)&&(s=Pi(t,d,m)),c=o(b.key)?s[b.key]:S(b,t,d,m),i(c)?p(b,r,e,v.elm,!1,n,f):(l=t[c],Li(l,b)?(L(l,b,r,n,f),t[c]=void 0,w&&u.insertBefore(e,l.elm,v.elm)):p(b,r,e,v.elm,!1,n,f)),b=n[++f]);d>m?(h=i(n[y+1])?null:n[y+1].elm,E(e,h,n,f,y,r)):f>y&&M(e,t,d,m)}function S(e,t,n,r){for(var i=n;i<r;i++){var a=t[i];if(o(a)&&Li(e,a))return i}}function L(e,t,n,s,c,l){if(e!==t){o(t.elm)&&o(s)&&(t=s[c]=_e(t));var h=t.elm=e.elm;if(a(e.isAsyncPlaceholder))o(t.asyncFactory.resolved)?O(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var d,p=t.data;o(p)&&o(d=p.hook)&&o(d=d.prepatch)&&d(e,t);var f=e.children,m=t.children;if(o(p)&&A(t)){for(d=0;d<r.update.length;++d)r.update[d](e,t);o(d=p.hook)&&o(d=d.update)&&d(e,t)}i(t.text)?o(f)&&o(m)?f!==m&&C(h,f,m,n,l):o(m)?(o(e.text)&&u.setTextContent(h,""),E(h,null,m,0,m.length-1,n)):o(f)?M(h,f,0,f.length-1):o(e.text)&&u.setTextContent(h,""):e.text!==t.text&&u.setTextContent(h,t.text),o(p)&&o(d=p.hook)&&o(d=d.postpatch)&&d(e,t)}}}function R(e,t,n){if(a(n)&&o(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var P=g("attrs,class,staticClass,staticStyle,key");function O(e,t,n,r){var i,s=t.tag,c=t.data,u=t.children;if(r=r||c&&c.pre,t.elm=e,a(t.isComment)&&o(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(o(c)&&(o(i=c.hook)&&o(i=i.init)&&i(t,!0),o(i=t.componentInstance)))return m(t,n),!0;if(o(s)){if(o(u))if(e.hasChildNodes())if(o(i=c)&&o(i=i.domProps)&&o(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{for(var l=!0,h=e.firstChild,d=0;d<u.length;d++){if(!h||!O(h,u[d],n,r)){l=!1;break}h=h.nextSibling}if(!l||h)return!1}else b(t,u,n);if(o(c)){var p=!1;for(var f in c)if(!P(f)){p=!0,w(t,n);break}!p&&c["class"]&&gt(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!i(t)){var c=!1,h=[];if(i(e))c=!0,p(t,h);else{var d=o(e.nodeType);if(!d&&Li(e,t))L(e,t,h,null,null,s);else{if(d){if(1===e.nodeType&&e.hasAttribute(j)&&(e.removeAttribute(j),n=!0),a(n)&&O(e,t,h))return R(t,h,!0),e;e=l(e)}var f=e.elm,m=u.parentNode(f);if(p(t,h,f._leaveCb?null:m,u.nextSibling(f)),o(t.parent)){var v=t.parent,g=A(t);while(v){for(var y=0;y<r.destroy.length;++y)r.destroy[y](v);if(v.elm=t.elm,g){for(var b=0;b<r.create.length;++b)r.create[b](Ci,v);var w=v.data.hook.insert;if(w.merged)for(var x=1;x<w.fns.length;x++)w.fns[x]()}else Ti(v);v=v.parent}}o(m)?M(m,[e],0,0):o(e.tag)&&_(e)}}return R(t,h,c),t.elm}o(e)&&_(e)}}var Di={create:Ii,update:Ii,destroy:function(e){Ii(e,Ci)}};function Ii(e,t){(e.data.directives||t.data.directives)&&Bi(e,t)}function Bi(e,t){var n,r,i,o=e===Ci,a=t===Ci,s=Fi(e.data.directives,e.context),c=Fi(t.data.directives,t.context),u=[],l=[];for(n in c)r=s[n],i=c[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Ui(i,"update",t,e),i.def&&i.def.componentUpdated&&l.push(i)):(Ui(i,"bind",t,e),i.def&&i.def.inserted&&u.push(i));if(u.length){var h=function(){for(var n=0;n<u.length;n++)Ui(u[n],"inserted",t,e)};o?xt(t,"insert",h):h()}if(l.length&&xt(t,"postpatch",function(){for(var n=0;n<l.length;n++)Ui(l[n],"componentUpdated",t,e)}),!o)for(n in s)c[n]||Ui(s[n],"unbind",e,e,a)}var ki=Object.create(null);function Fi(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=ki),i[Ni(r)]=r,r.def=Ke(t.$options,"directives",r.name,!0);return i}function Ni(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Ui(t,n,r,i,o){var a=t.def&&t.def[n];if(a)try{a(r.elm,t,r,i,o)}catch(e){nt(e,r.context,"directive "+t.name+" "+n+" hook")}}var ji=[Mi,Di];function Hi(e,t){var n=t.componentOptions;if((!o(n)||!1!==n.Ctor.options.inheritAttrs)&&(!i(e.data.attrs)||!i(t.data.attrs))){var r,a,s,c=t.elm,u=e.data.attrs||{},l=t.data.attrs||{};for(r in o(l.__ob__)&&(l=t.data.attrs=O({},l)),l)a=l[r],s=u[r],s!==a&&zi(c,r,a);for(r in(te||re)&&l.value!==u.value&&zi(c,"value",l.value),u)i(l[r])&&(Xr(r)?c.removeAttributeNS(qr,Yr(r)):zr(r)||c.removeAttribute(r))}}function zi(e,t,n){e.tagName.indexOf("-")>-1?Gi(e,t,n):Wr(t)?Qr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):zr(t)?e.setAttribute(t,Vr(t,n)):Xr(t)?Qr(n)?e.removeAttributeNS(qr,Yr(t)):e.setAttributeNS(qr,t,n):Gi(e,t,n)}function Gi(e,t,n){if(Qr(n))e.removeAttribute(t);else{if(te&&!ne&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Vi={create:Hi,update:Hi};function Wi(e,t){var n=t.elm,r=t.data,a=e.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=Kr(t),c=n._transitionClasses;o(c)&&(s=Jr(s,ei(c))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var qi,Xi={create:Wi,update:Wi},Yi="__r",Qi="__c";function Ki(e){if(o(e[Yi])){var t=te?"change":"input";e[t]=[].concat(e[Yi],e[t]||[]),delete e[Yi]}o(e[Qi])&&(e.change=[].concat(e[Qi],e.change||[]),delete e[Qi])}function Zi(e,t,n){var r=qi;return function i(){var o=t.apply(null,arguments);null!==o&&eo(e,i,n,r)}}var $i=st&&!(oe&&Number(oe[1])<=53);function Ji(e,t,n,r){if($i){var i=Yn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}qi.addEventListener(e,t,se?{capture:n,passive:r}:n)}function eo(e,t,n,r){(r||qi).removeEventListener(e,t._wrapper||t,n)}function to(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},r=e.data.on||{};qi=t.elm,Ki(n),wt(n,r,Ji,eo,Zi,t.context),qi=void 0}}var no,ro={create:to,update:to};function io(t,n){if(!i(t.data.domProps)||!i(n.data.domProps)){var r,a,s=n.elm,c=t.data.domProps||{},u=n.data.domProps||{};for(r in o(u.__ob__)&&(u=n.data.domProps=O({},u)),c)r in u||(s[r]="");for(r in u){if(a=u[r],"textContent"===r||"innerHTML"===r){if(n.children&&(n.children.length=0),a===c[r])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===r&&"PROGRESS"!==s.tagName){s._value=a;var l=i(a)?"":String(a);oo(s,l)&&(s.value=l)}else if("innerHTML"===r&&oi(s.tagName)&&i(s.innerHTML)){no=no||document.createElement("div"),no.innerHTML="<svg>"+a+"</svg>";var h=no.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(h.firstChild)s.appendChild(h.firstChild)}else if(a!==c[r])try{s[r]=a}catch(e){}}}}function oo(e,t){return!e.composing&&("OPTION"===e.tagName||ao(e,t)||so(e,t))}function ao(t,n){var r=!0;try{r=document.activeElement!==t}catch(e){}return r&&t.value!==n}function so(e,t){var n=e.value,r=e._vModifiers;if(o(r)){if(r.number)return v(n)!==v(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var co={create:io,update:io},uo=x(function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach(function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t});function lo(e){var t=ho(e.style);return e.staticStyle?O(e.staticStyle,t):t}function ho(e){return Array.isArray(e)?D(e):"string"===typeof e?uo(e):e}function po(e,t){var n,r={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=lo(i.data))&&O(r,n)}(n=lo(e.data))&&O(r,n);var o=e;while(o=o.parent)o.data&&(n=lo(o.data))&&O(r,n);return r}var fo,mo=/^--/,vo=/\s*!important$/,go=function(e,t,n){if(mo.test(t))e.style.setProperty(t,n);else if(vo.test(n))e.style.setProperty(C(t),n.replace(vo,""),"important");else{var r=bo(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},yo=["Webkit","Moz","ms"],bo=x(function(e){if(fo=fo||document.createElement("div").style,e=_(e),"filter"!==e&&e in fo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<yo.length;n++){var r=yo[n]+t;if(r in fo)return r}});function Ao(e,t){var n=t.data,r=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var a,s,c=t.elm,u=r.staticStyle,l=r.normalizedStyle||r.style||{},h=u||l,d=ho(t.data.style)||{};t.data.normalizedStyle=o(d.__ob__)?O({},d):d;var p=po(t,!0);for(s in h)i(p[s])&&go(c,s,"");for(s in p)a=p[s],a!==h[s]&&go(c,s,null==a?"":a)}}var wo={create:Ao,update:Ao},xo=/\s+/;function Eo(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(xo).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function _o(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(xo).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function Mo(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&O(t,To(e.name||"v")),O(t,e),t}return"string"===typeof e?To(e):void 0}}var To=x(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),Co=Z&&!ne,So="transition",Lo="animation",Ro="transition",Po="transitionend",Oo="animation",Do="animationend";Co&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ro="WebkitTransition",Po="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Oo="WebkitAnimation",Do="webkitAnimationEnd"));var Io=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Bo(e){Io(function(){Io(e)})}function ko(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Eo(e,t))}function Fo(e,t){e._transitionClasses&&b(e._transitionClasses,t),_o(e,t)}function No(e,t,n){var r=jo(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===So?Po:Do,c=0,u=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++c>=a&&u()};setTimeout(function(){c<a&&u()},o+1),e.addEventListener(s,l)}var Uo=/\b(transform|all)(,|$)/;function jo(e,t){var n,r=window.getComputedStyle(e),i=(r[Ro+"Delay"]||"").split(", "),o=(r[Ro+"Duration"]||"").split(", "),a=Ho(i,o),s=(r[Oo+"Delay"]||"").split(", "),c=(r[Oo+"Duration"]||"").split(", "),u=Ho(s,c),l=0,h=0;t===So?a>0&&(n=So,l=a,h=o.length):t===Lo?u>0&&(n=Lo,l=u,h=c.length):(l=Math.max(a,u),n=l>0?a>u?So:Lo:null,h=n?n===So?o.length:c.length:0);var d=n===So&&Uo.test(r[Ro+"Property"]);return{type:n,timeout:l,propCount:h,hasTransform:d}}function Ho(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return zo(t)+zo(e[n])}))}function zo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Go(e,t){var n=e.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Mo(e.data.transition);if(!i(r)&&!o(n._enterCb)&&1===n.nodeType){var a=r.css,s=r.type,c=r.enterClass,l=r.enterToClass,h=r.enterActiveClass,d=r.appearClass,p=r.appearToClass,f=r.appearActiveClass,m=r.beforeEnter,g=r.enter,y=r.afterEnter,b=r.enterCancelled,A=r.beforeAppear,w=r.appear,x=r.afterAppear,E=r.appearCancelled,_=r.duration,M=Pn,T=Pn.$vnode;while(T&&T.parent)M=T.context,T=T.parent;var C=!M._isMounted||!e.isRootInsert;if(!C||w||""===w){var S=C&&d?d:c,L=C&&f?f:h,R=C&&p?p:l,P=C&&A||m,O=C&&"function"===typeof w?w:g,D=C&&x||y,I=C&&E||b,B=v(u(_)?_.enter:_);0;var k=!1!==a&&!ne,F=qo(O),N=n._enterCb=U(function(){k&&(Fo(n,R),Fo(n,L)),N.cancelled?(k&&Fo(n,S),I&&I(n)):D&&D(n),n._enterCb=null});e.data.show||xt(e,"insert",function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),O&&O(n,N)}),P&&P(n),k&&(ko(n,S),ko(n,L),Bo(function(){Fo(n,S),N.cancelled||(ko(n,R),F||(Wo(B)?setTimeout(N,B):No(n,s,N)))})),e.data.show&&(t&&t(),O&&O(n,N)),k||F||N()}}}function Vo(e,t){var n=e.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=Mo(e.data.transition);if(i(r)||1!==n.nodeType)return t();if(!o(n._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,l=r.leaveToClass,h=r.leaveActiveClass,d=r.beforeLeave,p=r.leave,f=r.afterLeave,m=r.leaveCancelled,g=r.delayLeave,y=r.duration,b=!1!==a&&!ne,A=qo(p),w=v(u(y)?y.leave:y);0;var x=n._leaveCb=U(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),b&&(Fo(n,l),Fo(n,h)),x.cancelled?(b&&Fo(n,c),m&&m(n)):(t(),f&&f(n)),n._leaveCb=null});g?g(E):E()}function E(){x.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),d&&d(n),b&&(ko(n,c),ko(n,h),Bo(function(){Fo(n,c),x.cancelled||(ko(n,l),A||(Wo(w)?setTimeout(x,w):No(n,s,x)))})),p&&p(n,x),b||A||x())}}function Wo(e){return"number"===typeof e&&!isNaN(e)}function qo(e){if(i(e))return!1;var t=e.fns;return o(t)?qo(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Xo(e,t){!0!==t.data.show&&Go(t)}var Yo=Z?{create:Xo,activate:Xo,remove:function(e,t){!0!==e.data.show?Vo(e,t):t()}}:{},Qo=[Vi,Xi,ro,co,wo,Yo],Ko=Qo.concat(ji),Zo=Oi({nodeOps:_i,modules:Ko});ne&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&oa(e,"input")});var $o={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?xt(n,"postpatch",function(){$o.componentUpdated(e,t,n)}):Jo(e,t,n.context),e._vOptions=[].map.call(e.options,na)):("textarea"===n.tag||li(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",ra),e.addEventListener("compositionend",ia),e.addEventListener("change",ia),ne&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Jo(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,na);if(i.some(function(e,t){return!F(e,r[t])})){var o=e.multiple?t.value.some(function(e){return ta(e,i)}):t.value!==t.oldValue&&ta(t.value,i);o&&oa(e,"change")}}}};function Jo(e,t,n){ea(e,t,n),(te||re)&&setTimeout(function(){ea(e,t,n)},0)}function ea(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)o=N(r,na(a))>-1,a.selected!==o&&(a.selected=o);else if(F(na(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function ta(e,t){return t.every(function(t){return!F(t,e)})}function na(e){return"_value"in e?e._value:e.value}function ra(e){e.target.composing=!0}function ia(e){e.target.composing&&(e.target.composing=!1,oa(e.target,"input"))}function oa(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function aa(e){return!e.componentInstance||e.data&&e.data.transition?e:aa(e.componentInstance._vnode)}var sa={bind:function(e,t,n){var r=t.value;n=aa(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Go(n,function(){e.style.display=o})):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!==!i){n=aa(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Go(n,function(){e.style.display=e.__vOriginalDisplay}):Vo(n,function(){e.style.display="none"})):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},ca={model:$o,show:sa},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function la(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?la(_n(t.children)):e}function ha(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[_(o)]=i[o];return t}function da(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function pa(e){while(e=e.parent)if(e.data.transition)return!0}function fa(e,t){return t.key===e.key&&t.tag===e.tag}var ma=function(e){return e.tag||En(e)},va=function(e){return"show"===e.name},ga={name:"transition",props:ua,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(ma),n.length)){0;var r=this.mode;0;var i=n[0];if(pa(this.$vnode))return i;var o=la(i);if(!o)return i;if(this._leaving)return da(e,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:c(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var s=(o.data||(o.data={})).transition=ha(this),u=this._vnode,l=la(u);if(o.data.directives&&o.data.directives.some(va)&&(o.data.show=!0),l&&l.data&&!fa(o,l)&&!En(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=O({},s);if("out-in"===r)return this._leaving=!0,xt(h,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),da(e,i);if("in-out"===r){if(En(o))return u;var d,p=function(){d()};xt(s,"afterEnter",p),xt(s,"enterCancelled",p),xt(h,"delayLeave",function(e){d=e})}}return i}}},ya=O({tag:String,moveClass:String},ua);delete ya.mode;var ba={props:ya,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=On(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=ha(this),s=0;s<i.length;s++){var c=i[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){for(var u=[],l=[],h=0;h<r.length;h++){var d=r[h];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?u.push(d):l.push(d)}this.kept=e(t,null,u),this.removed=l}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Aa),e.forEach(wa),e.forEach(xa),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var n=e.elm,r=n.style;ko(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Po,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Po,e),n._moveCb=null,Fo(n,t))})}}))},methods:{hasMove:function(e,t){if(!Co)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){_o(n,e)}),Eo(n,t),n.style.display="none",this.$el.appendChild(n);var r=jo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function Aa(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function wa(e){e.data.newPos=e.elm.getBoundingClientRect()}function xa(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var Ea={Transition:ga,TransitionGroup:ba};_r.config.mustUseProp=Hr,_r.config.isReservedTag=ai,_r.config.isReservedAttr=Ur,_r.config.getTagNamespace=si,_r.config.isUnknownElement=ui,O(_r.options.directives,ca),O(_r.options.components,Ea),_r.prototype.__patch__=Z?Zo:I,_r.prototype.$mount=function(e,t){return e=e&&Z?hi(e):void 0,Bn(this,e,t)},Z&&setTimeout(function(){G.devtools&&le&&le.emit("init",_r)},0),n["a"]=_r}).call(this,r("c8ba"))},"2b4c":function(e,t,n){var r=n("5537")("wks"),i=n("ca5a"),o=n("7726").Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"2ef0":function(t,n,r){(function(t,i){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a,s="4.17.14",c=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",f=1,m=2,v=4,g=1,y=2,b=1,A=2,w=4,x=8,E=16,_=32,M=64,T=128,C=256,S=512,L=30,R="...",P=800,O=16,D=1,I=2,B=3,k=1/0,F=9007199254740991,N=17976931348623157e292,U=NaN,j=4294967295,H=j-1,z=j>>>1,G=[["ary",T],["bind",b],["bindKey",A],["curry",x],["curryRight",E],["flip",S],["partial",_],["partialRight",M],["rearg",C]],V="[object Arguments]",W="[object Array]",q="[object AsyncFunction]",X="[object Boolean]",Y="[object Date]",Q="[object DOMException]",K="[object Error]",Z="[object Function]",$="[object GeneratorFunction]",J="[object Map]",ee="[object Number]",te="[object Null]",ne="[object Object]",re="[object Promise]",ie="[object Proxy]",oe="[object RegExp]",ae="[object Set]",se="[object String]",ce="[object Symbol]",ue="[object Undefined]",le="[object WeakMap]",he="[object WeakSet]",de="[object ArrayBuffer]",pe="[object DataView]",fe="[object Float32Array]",me="[object Float64Array]",ve="[object Int8Array]",ge="[object Int16Array]",ye="[object Int32Array]",be="[object Uint8Array]",Ae="[object Uint8ClampedArray]",we="[object Uint16Array]",xe="[object Uint32Array]",Ee=/\b__p \+= '';/g,_e=/\b(__p \+=) '' \+/g,Me=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Te=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,Se=RegExp(Te.source),Le=RegExp(Ce.source),Re=/<%-([\s\S]+?)%>/g,Pe=/<%([\s\S]+?)%>/g,Oe=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ke=/[\\^$.*+?()[\]{}|]/g,Fe=RegExp(ke.source),Ne=/^\s+|\s+$/g,Ue=/^\s+/,je=/\s+$/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Ge=/,? & /,Ve=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,We=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xe=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,Qe=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,et=/($^)/,tt=/['\n\r\u2028\u2029\\]/g,nt="\\ud800-\\udfff",rt="\\u0300-\\u036f",it="\\ufe20-\\ufe2f",ot="\\u20d0-\\u20ff",at=rt+it+ot,st="\\u2700-\\u27bf",ct="a-z\\xdf-\\xf6\\xf8-\\xff",ut="\\xac\\xb1\\xd7\\xf7",lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ht="\\u2000-\\u206f",dt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="A-Z\\xc0-\\xd6\\xd8-\\xde",ft="\\ufe0e\\ufe0f",mt=ut+lt+ht+dt,vt="[']",gt="["+nt+"]",yt="["+mt+"]",bt="["+at+"]",At="\\d+",wt="["+st+"]",xt="["+ct+"]",Et="[^"+nt+mt+At+st+ct+pt+"]",_t="\\ud83c[\\udffb-\\udfff]",Mt="(?:"+bt+"|"+_t+")",Tt="[^"+nt+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",St="[\\ud800-\\udbff][\\udc00-\\udfff]",Lt="["+pt+"]",Rt="\\u200d",Pt="(?:"+xt+"|"+Et+")",Ot="(?:"+Lt+"|"+Et+")",Dt="(?:"+vt+"(?:d|ll|m|re|s|t|ve))?",It="(?:"+vt+"(?:D|LL|M|RE|S|T|VE))?",Bt=Mt+"?",kt="["+ft+"]?",Ft="(?:"+Rt+"(?:"+[Tt,Ct,St].join("|")+")"+kt+Bt+")*",Nt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ut="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jt=kt+Bt+Ft,Ht="(?:"+[wt,Ct,St].join("|")+")"+jt,zt="(?:"+[Tt+bt+"?",bt,Ct,St,gt].join("|")+")",Gt=RegExp(vt,"g"),Vt=RegExp(bt,"g"),Wt=RegExp(_t+"(?="+_t+")|"+zt+jt,"g"),qt=RegExp([Lt+"?"+xt+"+"+Dt+"(?="+[yt,Lt,"$"].join("|")+")",Ot+"+"+It+"(?="+[yt,Lt+Pt,"$"].join("|")+")",Lt+"?"+Pt+"+"+Dt,Lt+"+"+It,Ut,Nt,At,Ht].join("|"),"g"),Xt=RegExp("["+Rt+nt+at+ft+"]"),Yt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,Zt={};Zt[fe]=Zt[me]=Zt[ve]=Zt[ge]=Zt[ye]=Zt[be]=Zt[Ae]=Zt[we]=Zt[xe]=!0,Zt[V]=Zt[W]=Zt[de]=Zt[X]=Zt[pe]=Zt[Y]=Zt[K]=Zt[Z]=Zt[J]=Zt[ee]=Zt[ne]=Zt[oe]=Zt[ae]=Zt[se]=Zt[le]=!1;var $t={};$t[V]=$t[W]=$t[de]=$t[pe]=$t[X]=$t[Y]=$t[fe]=$t[me]=$t[ve]=$t[ge]=$t[ye]=$t[J]=$t[ee]=$t[ne]=$t[oe]=$t[ae]=$t[se]=$t[ce]=$t[be]=$t[Ae]=$t[we]=$t[xe]=!0,$t[K]=$t[Z]=$t[le]=!1;var Jt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},en={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rn=parseFloat,on=parseInt,an="object"==typeof t&&t&&t.Object===Object&&t,sn="object"==typeof self&&self&&self.Object===Object&&self,cn=an||sn||Function("return this")(),un=n&&!n.nodeType&&n,ln=un&&"object"==typeof i&&i&&!i.nodeType&&i,hn=ln&&ln.exports===un,dn=hn&&an.process,pn=function(){try{var t=ln&&ln.require&&ln.require("util").types;return t||dn&&dn.binding&&dn.binding("util")}catch(e){}}(),fn=pn&&pn.isArrayBuffer,mn=pn&&pn.isDate,vn=pn&&pn.isMap,gn=pn&&pn.isRegExp,yn=pn&&pn.isSet,bn=pn&&pn.isTypedArray;function An(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function wn(e,t,n,r){var i=-1,o=null==e?0:e.length;while(++i<o){var a=e[i];t(r,a,n(a),e)}return r}function xn(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!1===t(e[n],n,e))break;return e}function En(e,t){var n=null==e?0:e.length;while(n--)if(!1===t(e[n],n,e))break;return e}function _n(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!t(e[n],n,e))return!1;return!0}function Mn(e,t){var n=-1,r=null==e?0:e.length,i=0,o=[];while(++n<r){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Tn(e,t){var n=null==e?0:e.length;return!!n&&Nn(e,t,0)>-1}function Cn(e,t,n){var r=-1,i=null==e?0:e.length;while(++r<i)if(n(t,e[r]))return!0;return!1}function Sn(e,t){var n=-1,r=null==e?0:e.length,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function Ln(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function Rn(e,t,n,r){var i=-1,o=null==e?0:e.length;r&&o&&(n=e[++i]);while(++i<o)n=t(n,e[i],i,e);return n}function Pn(e,t,n,r){var i=null==e?0:e.length;r&&i&&(n=e[--i]);while(i--)n=t(n,e[i],i,e);return n}function On(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}var Dn=zn("length");function In(e){return e.split("")}function Bn(e){return e.match(Ve)||[]}function kn(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Fn(e,t,n,r){var i=e.length,o=n+(r?1:-1);while(r?o--:++o<i)if(t(e[o],o,e))return o;return-1}function Nn(e,t,n){return t===t?pr(e,t,n):Fn(e,jn,n)}function Un(e,t,n,r){var i=n-1,o=e.length;while(++i<o)if(r(e[i],t))return i;return-1}function jn(e){return e!==e}function Hn(e,t){var n=null==e?0:e.length;return n?qn(e,t)/n:U}function zn(e){return function(t){return null==t?a:t[e]}}function Gn(e){return function(t){return null==e?a:e[t]}}function Vn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Wn(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function qn(e,t){var n,r=-1,i=e.length;while(++r<i){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function Xn(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function Yn(e,t){return Sn(t,function(t){return[t,e[t]]})}function Qn(e){return function(t){return e(t)}}function Kn(e,t){return Sn(t,function(t){return e[t]})}function Zn(e,t){return e.has(t)}function $n(e,t){var n=-1,r=e.length;while(++n<r&&Nn(t,e[n],0)>-1);return n}function Jn(e,t){var n=e.length;while(n--&&Nn(t,e[n],0)>-1);return n}function er(e,t){var n=e.length,r=0;while(n--)e[n]===t&&++r;return r}var tr=Gn(Jt),nr=Gn(en);function rr(e){return"\\"+nn[e]}function ir(e,t){return null==e?a:e[t]}function or(e){return Xt.test(e)}function ar(e){return Yt.test(e)}function sr(e){var t,n=[];while(!(t=e.next()).done)n.push(t.value);return n}function cr(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function ur(e,t){return function(n){return e(t(n))}}function lr(e,t){var n=-1,r=e.length,i=0,o=[];while(++n<r){var a=e[n];a!==t&&a!==p||(e[n]=p,o[i++]=n)}return o}function hr(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function dr(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function pr(e,t,n){var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function fr(e,t,n){var r=n+1;while(r--)if(e[r]===t)return r;return r}function mr(e){return or(e)?yr(e):Dn(e)}function vr(e){return or(e)?br(e):In(e)}var gr=Gn(tn);function yr(e){var t=Wt.lastIndex=0;while(Wt.test(e))++t;return t}function br(e){return e.match(Wt)||[]}function Ar(e){return e.match(qt)||[]}var wr=function t(n){n=null==n?cn:xr.defaults(cn.Object(),n,xr.pick(cn,Qt));var r=n.Array,i=n.Date,o=n.Error,Ve=n.Function,nt=n.Math,rt=n.Object,it=n.RegExp,ot=n.String,at=n.TypeError,st=r.prototype,ct=Ve.prototype,ut=rt.prototype,lt=n["__core-js_shared__"],ht=ct.toString,dt=ut.hasOwnProperty,pt=0,ft=function(){var e=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mt=ut.toString,vt=ht.call(rt),gt=cn._,yt=it("^"+ht.call(dt).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=hn?n.Buffer:a,At=n.Symbol,wt=n.Uint8Array,xt=bt?bt.allocUnsafe:a,Et=ur(rt.getPrototypeOf,rt),_t=rt.create,Mt=ut.propertyIsEnumerable,Tt=st.splice,Ct=At?At.isConcatSpreadable:a,St=At?At.iterator:a,Lt=At?At.toStringTag:a,Rt=function(){try{var t=qa(rt,"defineProperty");return t({},"",{}),t}catch(e){}}(),Pt=n.clearTimeout!==cn.clearTimeout&&n.clearTimeout,Ot=i&&i.now!==cn.Date.now&&i.now,Dt=n.setTimeout!==cn.setTimeout&&n.setTimeout,It=nt.ceil,Bt=nt.floor,kt=rt.getOwnPropertySymbols,Ft=bt?bt.isBuffer:a,Nt=n.isFinite,Ut=st.join,jt=ur(rt.keys,rt),Ht=nt.max,zt=nt.min,Wt=i.now,qt=n.parseInt,Xt=nt.random,Yt=st.reverse,Jt=qa(n,"DataView"),en=qa(n,"Map"),tn=qa(n,"Promise"),nn=qa(n,"Set"),an=qa(n,"WeakMap"),sn=qa(rt,"create"),un=an&&new an,ln={},dn=Ps(Jt),pn=Ps(en),Dn=Ps(tn),In=Ps(nn),Gn=Ps(an),pr=At?At.prototype:a,yr=pr?pr.valueOf:a,br=pr?pr.toString:a;function wr(e){if(_l(e)&&!sl(e)&&!(e instanceof Tr)){if(e instanceof Mr)return e;if(dt.call(e,"__wrapped__"))return Ds(e)}return new Mr(e)}var Er=function(){function e(){}return function(t){if(!El(t))return{};if(_t)return _t(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function _r(){}function Mr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Tr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function Cr(){var e=new Tr(this.__wrapped__);return e.__actions__=ra(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ra(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ra(this.__views__),e}function Sr(){if(this.__filtered__){var e=new Tr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Lr(){var e=this.__wrapped__.value(),t=this.__dir__,n=sl(e),r=t<0,i=n?e.length:0,o=Za(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,h=l.length,d=0,p=zt(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return No(e,this.__actions__);var f=[];e:while(c--&&d<p){u+=t;var m=-1,v=e[u];while(++m<h){var g=l[m],y=g.iteratee,b=g.type,A=y(v);if(b==I)v=A;else if(!A){if(b==D)continue e;break e}}f[d++]=v}return f}function Rr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Pr(){this.__data__=sn?sn(null):{},this.size=0}function Or(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Dr(e){var t=this.__data__;if(sn){var n=t[e];return n===h?a:n}return dt.call(t,e)?t[e]:a}function Ir(e){var t=this.__data__;return sn?t[e]!==a:dt.call(t,e)}function Br(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sn&&t===a?h:t,this}function kr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Fr(){this.__data__=[],this.size=0}function Nr(e){var t=this.__data__,n=ui(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Tt.call(t,n,1),--this.size,!0}function Ur(e){var t=this.__data__,n=ui(t,e);return n<0?a:t[n][1]}function jr(e){return ui(this.__data__,e)>-1}function Hr(e,t){var n=this.__data__,r=ui(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function zr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Gr(){this.size=0,this.__data__={hash:new Rr,map:new(en||kr),string:new Rr}}function Vr(e){var t=Va(this,e)["delete"](e);return this.size-=t?1:0,t}function Wr(e){return Va(this,e).get(e)}function qr(e){return Va(this,e).has(e)}function Xr(e,t){var n=Va(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Yr(e){var t=-1,n=null==e?0:e.length;this.__data__=new zr;while(++t<n)this.add(e[t])}function Qr(e){return this.__data__.set(e,h),this}function Kr(e){return this.__data__.has(e)}function Zr(e){var t=this.__data__=new kr(e);this.size=t.size}function $r(){this.__data__=new kr,this.size=0}function Jr(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}function ei(e){return this.__data__.get(e)}function ti(e){return this.__data__.has(e)}function ni(e,t){var n=this.__data__;if(n instanceof kr){var r=n.__data__;if(!en||r.length<c-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zr(r)}return n.set(e,t),this.size=n.size,this}function ri(e,t){var n=sl(e),r=!n&&al(e),i=!n&&!r&&dl(e),o=!n&&!r&&!i&&Ul(e),a=n||r||i||o,s=a?Xn(e.length,ot):[],c=s.length;for(var u in e)!t&&!dt.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||os(u,c))||s.push(u);return s}function ii(e){var t=e.length;return t?e[go(0,t-1)]:a}function oi(e,t){return Ss(ra(e),mi(t,0,e.length))}function ai(e){return Ss(ra(e))}function si(e,t,n){(n===a||rl(e[t],n))&&(n!==a||t in e)||pi(e,t,n)}function ci(e,t,n){var r=e[t];dt.call(e,t)&&rl(r,n)&&(n!==a||t in e)||pi(e,t,n)}function ui(e,t){var n=e.length;while(n--)if(rl(e[n][0],t))return n;return-1}function li(e,t,n,r){return wi(e,function(e,i,o){t(r,e,n(e),o)}),r}function hi(e,t){return e&&ia(t,wh(t),e)}function di(e,t){return e&&ia(t,xh(t),e)}function pi(e,t,n){"__proto__"==t&&Rt?Rt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function fi(e,t){var n=-1,i=t.length,o=r(i),s=null==e;while(++n<i)o[n]=s?a:mh(e,t[n]);return o}function mi(e,t,n){return e===e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function vi(e,t,n,r,i,o){var s,c=t&f,u=t&m,l=t&v;if(n&&(s=i?n(e,r,i,o):n(e)),s!==a)return s;if(!El(e))return e;var h=sl(e);if(h){if(s=es(e),!c)return ra(e,s)}else{var d=Ka(e),p=d==Z||d==$;if(dl(e))return Xo(e,c);if(d==ne||d==V||p&&!i){if(s=u||p?{}:ts(e),!c)return u?aa(e,di(s,e)):oa(e,hi(s,e))}else{if(!$t[d])return i?e:{};s=ns(e,d,c)}}o||(o=new Zr);var g=o.get(e);if(g)return g;o.set(e,s),kl(e)?e.forEach(function(r){s.add(vi(r,t,n,r,e,o))}):Ml(e)&&e.forEach(function(r,i){s.set(i,vi(r,t,n,i,e,o))});var y=l?u?Ua:Na:u?xh:wh,b=h?a:y(e);return xn(b||e,function(r,i){b&&(i=r,r=e[i]),ci(s,i,vi(r,t,n,i,e,o))}),s}function gi(e){var t=wh(e);return function(n){return yi(n,e,t)}}function yi(e,t,n){var r=n.length;if(null==e)return!r;e=rt(e);while(r--){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function bi(e,t,n){if("function"!=typeof e)throw new at(l);return _s(function(){e.apply(a,n)},t)}function Ai(e,t,n,r){var i=-1,o=Tn,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=Sn(t,Qn(n))),r?(o=Cn,a=!1):t.length>=c&&(o=Zn,a=!1,t=new Yr(t));e:while(++i<s){var h=e[i],d=null==n?h:n(h);if(h=r||0!==h?h:0,a&&d===d){var p=l;while(p--)if(t[p]===d)continue e;u.push(h)}else o(t,d,r)||u.push(h)}return u}wr.templateSettings={escape:Re,evaluate:Pe,interpolate:Oe,variable:"",imports:{_:wr}},wr.prototype=_r.prototype,wr.prototype.constructor=wr,Mr.prototype=Er(_r.prototype),Mr.prototype.constructor=Mr,Tr.prototype=Er(_r.prototype),Tr.prototype.constructor=Tr,Rr.prototype.clear=Pr,Rr.prototype["delete"]=Or,Rr.prototype.get=Dr,Rr.prototype.has=Ir,Rr.prototype.set=Br,kr.prototype.clear=Fr,kr.prototype["delete"]=Nr,kr.prototype.get=Ur,kr.prototype.has=jr,kr.prototype.set=Hr,zr.prototype.clear=Gr,zr.prototype["delete"]=Vr,zr.prototype.get=Wr,zr.prototype.has=qr,zr.prototype.set=Xr,Yr.prototype.add=Yr.prototype.push=Qr,Yr.prototype.has=Kr,Zr.prototype.clear=$r,Zr.prototype["delete"]=Jr,Zr.prototype.get=ei,Zr.prototype.has=ti,Zr.prototype.set=ni;var wi=ua(Ri),xi=ua(Pi,!0);function Ei(e,t){var n=!0;return wi(e,function(e,r,i){return n=!!t(e,r,i),n}),n}function _i(e,t,n){var r=-1,i=e.length;while(++r<i){var o=e[r],s=t(o);if(null!=s&&(c===a?s===s&&!Nl(s):n(s,c)))var c=s,u=o}return u}function Mi(e,t,n,r){var i=e.length;n=Xl(n),n<0&&(n=-n>i?0:i+n),r=r===a||r>i?i:Xl(r),r<0&&(r+=i),r=n>r?0:Yl(r);while(n<r)e[n++]=t;return e}function Ti(e,t){var n=[];return wi(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Ci(e,t,n,r,i){var o=-1,a=e.length;n||(n=is),i||(i=[]);while(++o<a){var s=e[o];t>0&&n(s)?t>1?Ci(s,t-1,n,r,i):Ln(i,s):r||(i[i.length]=s)}return i}var Si=la(),Li=la(!0);function Ri(e,t){return e&&Si(e,t,wh)}function Pi(e,t){return e&&Li(e,t,wh)}function Oi(e,t){return Mn(t,function(t){return Al(e[t])})}function Di(e,t){t=Go(t,e);var n=0,r=t.length;while(null!=e&&n<r)e=e[Rs(t[n++])];return n&&n==r?e:a}function Ii(e,t,n){var r=t(e);return sl(e)?r:Ln(r,n(e))}function Bi(e){return null==e?e===a?ue:te:Lt&&Lt in rt(e)?Xa(e):ys(e)}function ki(e,t){return e>t}function Fi(e,t){return null!=e&&dt.call(e,t)}function Ni(e,t){return null!=e&&t in rt(e)}function Ui(e,t,n){return e>=zt(t,n)&&e<Ht(t,n)}function ji(e,t,n){var i=n?Cn:Tn,o=e[0].length,s=e.length,c=s,u=r(s),l=1/0,h=[];while(c--){var d=e[c];c&&t&&(d=Sn(d,Qn(t))),l=zt(d.length,l),u[c]=!n&&(t||o>=120&&d.length>=120)?new Yr(c&&d):a}d=e[0];var p=-1,f=u[0];e:while(++p<o&&h.length<l){var m=d[p],v=t?t(m):m;if(m=n||0!==m?m:0,!(f?Zn(f,v):i(h,v,n))){c=s;while(--c){var g=u[c];if(!(g?Zn(g,v):i(e[c],v,n)))continue e}f&&f.push(v),h.push(m)}}return h}function Hi(e,t,n,r){return Ri(e,function(e,i,o){t(r,n(e),i,o)}),r}function zi(e,t,n){t=Go(t,e),e=As(e,t);var r=null==e?e:e[Rs(ic(t))];return null==r?a:An(r,e,n)}function Gi(e){return _l(e)&&Bi(e)==V}function Vi(e){return _l(e)&&Bi(e)==de}function Wi(e){return _l(e)&&Bi(e)==Y}function qi(e,t,n,r,i){return e===t||(null==e||null==t||!_l(e)&&!_l(t)?e!==e&&t!==t:Xi(e,t,n,r,qi,i))}function Xi(e,t,n,r,i,o){var a=sl(e),s=sl(t),c=a?W:Ka(e),u=s?W:Ka(t);c=c==V?ne:c,u=u==V?ne:u;var l=c==ne,h=u==ne,d=c==u;if(d&&dl(e)){if(!dl(t))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new Zr),a||Ul(e)?Ia(e,t,n,r,i,o):Ba(e,t,c,n,r,i,o);if(!(n&g)){var p=l&&dt.call(e,"__wrapped__"),f=h&&dt.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,v=f?t.value():t;return o||(o=new Zr),i(m,v,n,r,o)}}return!!d&&(o||(o=new Zr),ka(e,t,n,r,i,o))}function Yi(e){return _l(e)&&Ka(e)==J}function Qi(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;e=rt(e);while(i--){var c=n[i];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}while(++i<o){c=n[i];var u=c[0],l=e[u],h=c[1];if(s&&c[2]){if(l===a&&!(u in e))return!1}else{var d=new Zr;if(r)var p=r(l,h,u,e,t,d);if(!(p===a?qi(h,l,g|y,r,d):p))return!1}}return!0}function Ki(e){if(!El(e)||ls(e))return!1;var t=Al(e)?yt:Ke;return t.test(Ps(e))}function Zi(e){return _l(e)&&Bi(e)==oe}function $i(e){return _l(e)&&Ka(e)==ae}function Ji(e){return _l(e)&&xl(e.length)&&!!Zt[Bi(e)]}function eo(e){return"function"==typeof e?e:null==e?Ld:"object"==typeof e?sl(e)?ao(e[0],e[1]):oo(e):zd(e)}function to(e){if(!ds(e))return jt(e);var t=[];for(var n in rt(e))dt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function no(e){if(!El(e))return gs(e);var t=ds(e),n=[];for(var r in e)("constructor"!=r||!t&&dt.call(e,r))&&n.push(r);return n}function ro(e,t){return e<t}function io(e,t){var n=-1,i=ul(e)?r(e.length):[];return wi(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function oo(e){var t=Wa(e);return 1==t.length&&t[0][2]?fs(t[0][0],t[0][1]):function(n){return n===e||Qi(n,e,t)}}function ao(e,t){return ss(e)&&ps(t)?fs(Rs(e),t):function(n){var r=mh(n,e);return r===a&&r===t?gh(n,e):qi(t,r,g|y)}}function so(e,t,n,r,i){e!==t&&Si(t,function(o,s){if(i||(i=new Zr),El(o))co(e,t,s,n,so,r,i);else{var c=r?r(xs(e,s),o,s+"",e,t,i):a;c===a&&(c=o),si(e,s,c)}},xh)}function co(e,t,n,r,i,o,s){var c=xs(e,n),u=xs(t,n),l=s.get(u);if(l)si(e,n,l);else{var h=o?o(c,u,n+"",e,t,s):a,d=h===a;if(d){var p=sl(u),f=!p&&dl(u),m=!p&&!f&&Ul(u);h=u,p||f||m?sl(c)?h=c:ll(c)?h=ra(c):f?(d=!1,h=Xo(u,!0)):m?(d=!1,h=$o(u,!0)):h=[]:Dl(u)||al(u)?(h=c,al(c)?h=Kl(c):El(c)&&!Al(c)||(h=ts(u))):d=!1}d&&(s.set(u,h),i(h,u,r,o,s),s["delete"](u)),si(e,n,h)}}function uo(e,t){var n=e.length;if(n)return t+=t<0?n:0,os(t,n)?e[t]:a}function lo(e,t,n){var r=-1;t=Sn(t.length?t:[Ld],Qn(Ga()));var i=io(e,function(e,n,i){var o=Sn(t,function(t){return t(e)});return{criteria:o,index:++r,value:e}});return Wn(i,function(e,t){return ea(e,t,n)})}function ho(e,t){return po(e,t,function(t,n){return gh(e,n)})}function po(e,t,n){var r=-1,i=t.length,o={};while(++r<i){var a=t[r],s=Di(e,a);n(s,a)&&Eo(o,Go(a,e),s)}return o}function fo(e){return function(t){return Di(t,e)}}function mo(e,t,n,r){var i=r?Un:Nn,o=-1,a=t.length,s=e;e===t&&(t=ra(t)),n&&(s=Sn(e,Qn(n)));while(++o<a){var c=0,u=t[o],l=n?n(u):u;while((c=i(s,l,c,r))>-1)s!==e&&Tt.call(s,c,1),Tt.call(e,c,1)}return e}function vo(e,t){var n=e?t.length:0,r=n-1;while(n--){var i=t[n];if(n==r||i!==o){var o=i;os(i)?Tt.call(e,i,1):Bo(e,i)}}return e}function go(e,t){return e+Bt(Xt()*(t-e+1))}function yo(e,t,n,i){var o=-1,a=Ht(It((t-e)/(n||1)),0),s=r(a);while(a--)s[i?a:++o]=e,e+=n;return s}function bo(e,t){var n="";if(!e||t<1||t>F)return n;do{t%2&&(n+=e),t=Bt(t/2),t&&(e+=e)}while(t);return n}function Ao(e,t){return Ms(bs(e,t,Ld),e+"")}function wo(e){return ii(jh(e))}function xo(e,t){var n=jh(e);return Ss(n,mi(t,0,n.length))}function Eo(e,t,n,r){if(!El(e))return e;t=Go(t,e);var i=-1,o=t.length,s=o-1,c=e;while(null!=c&&++i<o){var u=Rs(t[i]),l=n;if(i!=s){var h=c[u];l=r?r(h,u,c):a,l===a&&(l=El(h)?h:os(t[i+1])?[]:{})}ci(c,u,l),c=c[u]}return e}var _o=un?function(e,t){return un.set(e,t),e}:Ld,Mo=Rt?function(e,t){return Rt(e,"toString",{configurable:!0,enumerable:!1,value:Md(t),writable:!0})}:Ld;function To(e){return Ss(jh(e))}function Co(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;var a=r(o);while(++i<o)a[i]=e[i+t];return a}function So(e,t){var n;return wi(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Lo(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=z){while(r<i){var o=r+i>>>1,a=e[o];null!==a&&!Nl(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Ro(e,t,Ld,n)}function Ro(e,t,n,r){t=n(t);var i=0,o=null==e?0:e.length,s=t!==t,c=null===t,u=Nl(t),l=t===a;while(i<o){var h=Bt((i+o)/2),d=n(e[h]),p=d!==a,f=null===d,m=d===d,v=Nl(d);if(s)var g=r||m;else g=l?m&&(r||p):c?m&&p&&(r||!f):u?m&&p&&!f&&(r||!v):!f&&!v&&(r?d<=t:d<t);g?i=h+1:o=h}return zt(o,H)}function Po(e,t){var n=-1,r=e.length,i=0,o=[];while(++n<r){var a=e[n],s=t?t(a):a;if(!n||!rl(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function Oo(e){return"number"==typeof e?e:Nl(e)?U:+e}function Do(e){if("string"==typeof e)return e;if(sl(e))return Sn(e,Do)+"";if(Nl(e))return br?br.call(e):"";var t=e+"";return"0"==t&&1/e==-k?"-0":t}function Io(e,t,n){var r=-1,i=Tn,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=Cn;else if(o>=c){var l=t?null:Sa(e);if(l)return hr(l);a=!1,i=Zn,u=new Yr}else u=t?[]:s;e:while(++r<o){var h=e[r],d=t?t(h):h;if(h=n||0!==h?h:0,a&&d===d){var p=u.length;while(p--)if(u[p]===d)continue e;t&&u.push(d),s.push(h)}else i(u,d,n)||(u!==s&&u.push(d),s.push(h))}return s}function Bo(e,t){return t=Go(t,e),e=As(e,t),null==e||delete e[Rs(ic(t))]}function ko(e,t,n,r){return Eo(e,t,n(Di(e,t)),r)}function Fo(e,t,n,r){var i=e.length,o=r?i:-1;while((r?o--:++o<i)&&t(e[o],o,e));return n?Co(e,r?0:o,r?o+1:i):Co(e,r?o+1:0,r?i:o)}function No(e,t){var n=e;return n instanceof Tr&&(n=n.value()),Rn(t,function(e,t){return t.func.apply(t.thisArg,Ln([e],t.args))},n)}function Uo(e,t,n){var i=e.length;if(i<2)return i?Io(e[0]):[];var o=-1,a=r(i);while(++o<i){var s=e[o],c=-1;while(++c<i)c!=o&&(a[o]=Ai(a[o]||s,e[c],t,n))}return Io(Ci(a,1),t,n)}function jo(e,t,n){var r=-1,i=e.length,o=t.length,s={};while(++r<i){var c=r<o?t[r]:a;n(s,e[r],c)}return s}function Ho(e){return ll(e)?e:[]}function zo(e){return"function"==typeof e?e:Ld}function Go(e,t){return sl(e)?e:ss(e,t)?[e]:Ls($l(e))}var Vo=Ao;function Wo(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:Co(e,t,n)}var qo=Pt||function(e){return cn.clearTimeout(e)};function Xo(e,t){if(t)return e.slice();var n=e.length,r=xt?xt(n):new e.constructor(n);return e.copy(r),r}function Yo(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function Qo(e,t){var n=t?Yo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ko(e){var t=new e.constructor(e.source,Xe.exec(e));return t.lastIndex=e.lastIndex,t}function Zo(e){return yr?rt(yr.call(e)):{}}function $o(e,t){var n=t?Yo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Jo(e,t){if(e!==t){var n=e!==a,r=null===e,i=e===e,o=Nl(e),s=t!==a,c=null===t,u=t===t,l=Nl(t);if(!c&&!l&&!o&&e>t||o&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||c&&n&&i||!s&&i||!u)return-1}return 0}function ea(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;while(++r<a){var c=Jo(i[r],o[r]);if(c){if(r>=s)return c;var u=n[r];return c*("desc"==u?-1:1)}}return e.index-t.index}function ta(e,t,n,i){var o=-1,a=e.length,s=n.length,c=-1,u=t.length,l=Ht(a-s,0),h=r(u+l),d=!i;while(++c<u)h[c]=t[c];while(++o<s)(d||o<a)&&(h[n[o]]=e[o]);while(l--)h[c++]=e[o++];return h}function na(e,t,n,i){var o=-1,a=e.length,s=-1,c=n.length,u=-1,l=t.length,h=Ht(a-c,0),d=r(h+l),p=!i;while(++o<h)d[o]=e[o];var f=o;while(++u<l)d[f+u]=t[u];while(++s<c)(p||o<a)&&(d[f+n[s]]=e[o++]);return d}function ra(e,t){var n=-1,i=e.length;t||(t=r(i));while(++n<i)t[n]=e[n];return t}function ia(e,t,n,r){var i=!n;n||(n={});var o=-1,s=t.length;while(++o<s){var c=t[o],u=r?r(n[c],e[c],c,n,e):a;u===a&&(u=e[c]),i?pi(n,c,u):ci(n,c,u)}return n}function oa(e,t){return ia(e,Ya(e),t)}function aa(e,t){return ia(e,Qa(e),t)}function sa(e,t){return function(n,r){var i=sl(n)?wn:li,o=t?t():{};return i(n,e,Ga(r,2),o)}}function ca(e){return Ao(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;o=e.length>3&&"function"==typeof o?(i--,o):a,s&&as(n[0],n[1],s)&&(o=i<3?a:o,i=1),t=rt(t);while(++r<i){var c=n[r];c&&e(t,c,r,o)}return t})}function ua(e,t){return function(n,r){if(null==n)return n;if(!ul(n))return e(n,r);var i=n.length,o=t?i:-1,a=rt(n);while(t?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function la(e){return function(t,n,r){var i=-1,o=rt(t),a=r(t),s=a.length;while(s--){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function ha(e,t,n){var r=t&b,i=fa(e);function o(){var t=this&&this!==cn&&this instanceof o?i:e;return t.apply(r?n:this,arguments)}return o}function da(e){return function(t){t=$l(t);var n=or(t)?vr(t):a,r=n?n[0]:t.charAt(0),i=n?Wo(n,1).join(""):t.slice(1);return r[e]()+i}}function pa(e){return function(t){return Rn(Ad(Xh(t).replace(Gt,"")),e,"")}}function fa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Er(e.prototype),r=e.apply(n,t);return El(r)?r:n}}function ma(e,t,n){var i=fa(e);function o(){var s=arguments.length,c=r(s),u=s,l=za(o);while(u--)c[u]=arguments[u];var h=s<3&&c[0]!==l&&c[s-1]!==l?[]:lr(c,l);if(s-=h.length,s<n)return Ta(e,t,ya,o.placeholder,a,c,h,a,a,n-s);var d=this&&this!==cn&&this instanceof o?i:e;return An(d,this,c)}return o}function va(e){return function(t,n,r){var i=rt(t);if(!ul(t)){var o=Ga(n,3);t=wh(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function ga(e){return Fa(function(t){var n=t.length,r=n,i=Mr.prototype.thru;e&&t.reverse();while(r--){var o=t[r];if("function"!=typeof o)throw new at(l);if(i&&!s&&"wrapper"==Ha(o))var s=new Mr([],!0)}r=s?r:n;while(++r<n){o=t[r];var c=Ha(o),u="wrapper"==c?ja(o):a;s=u&&us(u[0])&&u[1]==(T|x|_|C)&&!u[4].length&&1==u[9]?s[Ha(u[0])].apply(s,u[3]):1==o.length&&us(o)?s[c]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&sl(r))return s.plant(r).value();var i=0,o=n?t[i].apply(this,e):r;while(++i<n)o=t[i].call(this,o);return o}})}function ya(e,t,n,i,o,s,c,u,l,h){var d=t&T,p=t&b,f=t&A,m=t&(x|E),v=t&S,g=f?a:fa(e);function y(){var a=arguments.length,b=r(a),A=a;while(A--)b[A]=arguments[A];if(m)var w=za(y),x=er(b,w);if(i&&(b=ta(b,i,o,m)),s&&(b=na(b,s,c,m)),a-=x,m&&a<h){var E=lr(b,w);return Ta(e,t,ya,y.placeholder,n,b,E,u,l,h-a)}var _=p?n:this,M=f?_[e]:e;return a=b.length,u?b=ws(b,u):v&&a>1&&b.reverse(),d&&l<a&&(b.length=l),this&&this!==cn&&this instanceof y&&(M=g||fa(M)),M.apply(_,b)}return y}function ba(e,t){return function(n,r){return Hi(n,e,t(r),{})}}function Aa(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=Do(n),r=Do(r)):(n=Oo(n),r=Oo(r)),i=e(n,r)}return i}}function wa(e){return Fa(function(t){return t=Sn(t,Qn(Ga())),Ao(function(n){var r=this;return e(t,function(e){return An(e,r,n)})})})}function xa(e,t){t=t===a?" ":Do(t);var n=t.length;if(n<2)return n?bo(t,e):t;var r=bo(t,It(e/mr(t)));return or(t)?Wo(vr(r),0,e).join(""):r.slice(0,e)}function Ea(e,t,n,i){var o=t&b,a=fa(e);function s(){var t=-1,c=arguments.length,u=-1,l=i.length,h=r(l+c),d=this&&this!==cn&&this instanceof s?a:e;while(++u<l)h[u]=i[u];while(c--)h[u++]=arguments[++t];return An(d,o?n:this,h)}return s}function _a(e){return function(t,n,r){return r&&"number"!=typeof r&&as(t,n,r)&&(n=r=a),t=ql(t),n===a?(n=t,t=0):n=ql(n),r=r===a?t<n?1:-1:ql(r),yo(t,n,r,e)}}function Ma(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ql(t),n=Ql(n)),e(t,n)}}function Ta(e,t,n,r,i,o,s,c,u,l){var h=t&x,d=h?s:a,p=h?a:s,f=h?o:a,m=h?a:o;t|=h?_:M,t&=~(h?M:_),t&w||(t&=~(b|A));var v=[e,t,i,f,d,m,p,c,u,l],g=n.apply(a,v);return us(e)&&Es(g,v),g.placeholder=r,Ts(g,e,t)}function Ca(e){var t=nt[e];return function(e,n){if(e=Ql(e),n=null==n?0:zt(Xl(n),292),n&&Nt(e)){var r=($l(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return r=($l(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}var Sa=nn&&1/hr(new nn([,-0]))[1]==k?function(e){return new nn(e)}:Fd;function La(e){return function(t){var n=Ka(t);return n==J?cr(t):n==ae?dr(t):Yn(t,e(t))}}function Ra(e,t,n,r,i,o,s,c){var u=t&A;if(!u&&"function"!=typeof e)throw new at(l);var h=r?r.length:0;if(h||(t&=~(_|M),r=i=a),s=s===a?s:Ht(Xl(s),0),c=c===a?c:Xl(c),h-=i?i.length:0,t&M){var d=r,p=i;r=i=a}var f=u?a:ja(e),m=[e,t,n,r,i,d,p,o,s,c];if(f&&vs(m,f),e=m[0],t=m[1],n=m[2],r=m[3],i=m[4],c=m[9]=m[9]===a?u?0:e.length:Ht(m[9]-h,0),!c&&t&(x|E)&&(t&=~(x|E)),t&&t!=b)v=t==x||t==E?ma(e,t,c):t!=_&&t!=(b|_)||i.length?ya.apply(a,m):Ea(e,t,n,r);else var v=ha(e,t,n);var g=f?_o:Es;return Ts(g(v,m),e,t)}function Pa(e,t,n,r){return e===a||rl(e,ut[n])&&!dt.call(r,n)?t:e}function Oa(e,t,n,r,i,o){return El(e)&&El(t)&&(o.set(t,e),so(e,t,a,Oa,o),o["delete"](t)),e}function Da(e){return Dl(e)?a:e}function Ia(e,t,n,r,i,o){var s=n&g,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var h=-1,d=!0,p=n&y?new Yr:a;o.set(e,t),o.set(t,e);while(++h<c){var f=e[h],m=t[h];if(r)var v=s?r(m,f,h,t,e,o):r(f,m,h,e,t,o);if(v!==a){if(v)continue;d=!1;break}if(p){if(!On(t,function(e,t){if(!Zn(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)})){d=!1;break}}else if(f!==m&&!i(f,m,n,r,o)){d=!1;break}}return o["delete"](e),o["delete"](t),d}function Ba(e,t,n,r,i,o,a){switch(n){case pe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case de:return!(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t)));case X:case Y:case ee:return rl(+e,+t);case K:return e.name==t.name&&e.message==t.message;case oe:case se:return e==t+"";case J:var s=cr;case ae:var c=r&g;if(s||(s=hr),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=y,a.set(e,t);var l=Ia(s(e),s(t),r,i,o,a);return a["delete"](e),l;case ce:if(yr)return yr.call(e)==yr.call(t)}return!1}function ka(e,t,n,r,i,o){var s=n&g,c=Na(e),u=c.length,l=Na(t),h=l.length;if(u!=h&&!s)return!1;var d=u;while(d--){var p=c[d];if(!(s?p in t:dt.call(t,p)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var m=!0;o.set(e,t),o.set(t,e);var v=s;while(++d<u){p=c[d];var y=e[p],b=t[p];if(r)var A=s?r(b,y,p,t,e,o):r(y,b,p,e,t,o);if(!(A===a?y===b||i(y,b,n,r,o):A)){m=!1;break}v||(v="constructor"==p)}if(m&&!v){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(m=!1)}return o["delete"](e),o["delete"](t),m}function Fa(e){return Ms(bs(e,a,Xs),e+"")}function Na(e){return Ii(e,wh,Ya)}function Ua(e){return Ii(e,xh,Qa)}var ja=un?function(e){return un.get(e)}:Fd;function Ha(e){var t=e.name+"",n=ln[t],r=dt.call(ln,t)?n.length:0;while(r--){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function za(e){var t=dt.call(wr,"placeholder")?wr:e;return t.placeholder}function Ga(){var e=wr.iteratee||Rd;return e=e===Rd?eo:e,arguments.length?e(arguments[0],arguments[1]):e}function Va(e,t){var n=e.__data__;return cs(t)?n["string"==typeof t?"string":"hash"]:n.map}function Wa(e){var t=wh(e),n=t.length;while(n--){var r=t[n],i=e[r];t[n]=[r,i,ps(i)]}return t}function qa(e,t){var n=ir(e,t);return Ki(n)?n:a}function Xa(t){var n=dt.call(t,Lt),r=t[Lt];try{t[Lt]=a;var i=!0}catch(e){}var o=mt.call(t);return i&&(n?t[Lt]=r:delete t[Lt]),o}var Ya=kt?function(e){return null==e?[]:(e=rt(e),Mn(kt(e),function(t){return Mt.call(e,t)}))}:qd,Qa=kt?function(e){var t=[];while(e)Ln(t,Ya(e)),e=Et(e);return t}:qd,Ka=Bi;function Za(e,t,n){var r=-1,i=n.length;while(++r<i){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=zt(t,e+a);break;case"takeRight":e=Ht(e,t-a);break}}return{start:e,end:t}}function $a(e){var t=e.match(ze);return t?t[1].split(Ge):[]}function Ja(e,t,n){t=Go(t,e);var r=-1,i=t.length,o=!1;while(++r<i){var a=Rs(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=null==e?0:e.length,!!i&&xl(i)&&os(a,i)&&(sl(e)||al(e)))}function es(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&dt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ts(e){return"function"!=typeof e.constructor||ds(e)?{}:Er(Et(e))}function ns(e,t,n){var r=e.constructor;switch(t){case de:return Yo(e);case X:case Y:return new r(+e);case pe:return Qo(e,n);case fe:case me:case ve:case ge:case ye:case be:case Ae:case we:case xe:return $o(e,n);case J:return new r;case ee:case se:return new r(e);case oe:return Ko(e);case ae:return new r;case ce:return Zo(e)}}function rs(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(He,"{\n/* [wrapped with "+t+"] */\n")}function is(e){return sl(e)||al(e)||!!(Ct&&e&&e[Ct])}function os(e,t){var n=typeof e;return t=null==t?F:t,!!t&&("number"==n||"symbol"!=n&&$e.test(e))&&e>-1&&e%1==0&&e<t}function as(e,t,n){if(!El(n))return!1;var r=typeof t;return!!("number"==r?ul(n)&&os(t,n.length):"string"==r&&t in n)&&rl(n[t],e)}function ss(e,t){if(sl(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Nl(e))||(Ie.test(e)||!De.test(e)||null!=t&&e in rt(t))}function cs(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function us(e){var t=Ha(e),n=wr[t];if("function"!=typeof n||!(t in Tr.prototype))return!1;if(e===n)return!0;var r=ja(n);return!!r&&e===r[0]}function ls(e){return!!ft&&ft in e}(Jt&&Ka(new Jt(new ArrayBuffer(1)))!=pe||en&&Ka(new en)!=J||tn&&Ka(tn.resolve())!=re||nn&&Ka(new nn)!=ae||an&&Ka(new an)!=le)&&(Ka=function(e){var t=Bi(e),n=t==ne?e.constructor:a,r=n?Ps(n):"";if(r)switch(r){case dn:return pe;case pn:return J;case Dn:return re;case In:return ae;case Gn:return le}return t});var hs=lt?Al:Xd;function ds(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||ut;return e===n}function ps(e){return e===e&&!El(e)}function fs(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in rt(n)))}}function ms(e){var t=Uu(e,function(e){return n.size===d&&n.clear(),e}),n=t.cache;return t}function vs(e,t){var n=e[1],r=t[1],i=n|r,o=i<(b|A|T),a=r==T&&n==x||r==T&&n==C&&e[7].length<=t[8]||r==(T|C)&&t[7].length<=t[8]&&n==x;if(!o&&!a)return e;r&b&&(e[2]=t[2],i|=n&b?0:w);var s=t[3];if(s){var c=e[3];e[3]=c?ta(c,s,t[4]):s,e[4]=c?lr(e[3],p):t[4]}return s=t[5],s&&(c=e[5],e[5]=c?na(c,s,t[6]):s,e[6]=c?lr(e[5],p):t[6]),s=t[7],s&&(e[7]=s),r&T&&(e[8]=null==e[8]?t[8]:zt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function gs(e){var t=[];if(null!=e)for(var n in rt(e))t.push(n);return t}function ys(e){return mt.call(e)}function bs(e,t,n){return t=Ht(t===a?e.length-1:t,0),function(){var i=arguments,o=-1,a=Ht(i.length-t,0),s=r(a);while(++o<a)s[o]=i[t+o];o=-1;var c=r(t+1);while(++o<t)c[o]=i[o];return c[t]=n(s),An(e,this,c)}}function As(e,t){return t.length<2?e:Di(e,Co(t,0,-1))}function ws(e,t){var n=e.length,r=zt(t.length,n),i=ra(e);while(r--){var o=t[r];e[r]=os(o,n)?i[o]:a}return e}function xs(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Es=Cs(_o),_s=Dt||function(e,t){return cn.setTimeout(e,t)},Ms=Cs(Mo);function Ts(e,t,n){var r=t+"";return Ms(e,rs(r,Os($a(r),n)))}function Cs(e){var t=0,n=0;return function(){var r=Wt(),i=O-(r-n);if(n=r,i>0){if(++t>=P)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Ss(e,t){var n=-1,r=e.length,i=r-1;t=t===a?r:t;while(++n<t){var o=go(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ls=ms(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Be,function(e,n,r,i){t.push(r?i.replace(We,"$1"):n||e)}),t});function Rs(e){if("string"==typeof e||Nl(e))return e;var t=e+"";return"0"==t&&1/e==-k?"-0":t}function Ps(t){if(null!=t){try{return ht.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Os(e,t){return xn(G,function(n){var r="_."+n[0];t&n[1]&&!Tn(e,r)&&e.push(r)}),e.sort()}function Ds(e){if(e instanceof Tr)return e.clone();var t=new Mr(e.__wrapped__,e.__chain__);return t.__actions__=ra(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Is(e,t,n){t=(n?as(e,t,n):t===a)?1:Ht(Xl(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];var o=0,s=0,c=r(It(i/t));while(o<i)c[s++]=Co(e,o,o+=t);return c}function Bs(e){var t=-1,n=null==e?0:e.length,r=0,i=[];while(++t<n){var o=e[t];o&&(i[r++]=o)}return i}function ks(){var e=arguments.length;if(!e)return[];var t=r(e-1),n=arguments[0],i=e;while(i--)t[i-1]=arguments[i];return Ln(sl(n)?ra(n):[n],Ci(t,1))}var Fs=Ao(function(e,t){return ll(e)?Ai(e,Ci(t,1,ll,!0)):[]}),Ns=Ao(function(e,t){var n=ic(t);return ll(n)&&(n=a),ll(e)?Ai(e,Ci(t,1,ll,!0),Ga(n,2)):[]}),Us=Ao(function(e,t){var n=ic(t);return ll(n)&&(n=a),ll(e)?Ai(e,Ci(t,1,ll,!0),a,n):[]});function js(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===a?1:Xl(t),Co(e,t<0?0:t,r)):[]}function Hs(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===a?1:Xl(t),t=r-t,Co(e,0,t<0?0:t)):[]}function zs(e,t){return e&&e.length?Fo(e,Ga(t,3),!0,!0):[]}function Gs(e,t){return e&&e.length?Fo(e,Ga(t,3),!0):[]}function Vs(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&as(e,t,n)&&(n=0,r=i),Mi(e,t,n,r)):[]}function Ws(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Xl(n);return i<0&&(i=Ht(r+i,0)),Fn(e,Ga(t,3),i)}function qs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=Xl(n),i=n<0?Ht(r+i,0):zt(i,r-1)),Fn(e,Ga(t,3),i,!0)}function Xs(e){var t=null==e?0:e.length;return t?Ci(e,1):[]}function Ys(e){var t=null==e?0:e.length;return t?Ci(e,k):[]}function Qs(e,t){var n=null==e?0:e.length;return n?(t=t===a?1:Xl(t),Ci(e,t)):[]}function Ks(e){var t=-1,n=null==e?0:e.length,r={};while(++t<n){var i=e[t];r[i[0]]=i[1]}return r}function Zs(e){return e&&e.length?e[0]:a}function $s(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Xl(n);return i<0&&(i=Ht(r+i,0)),Nn(e,t,i)}function Js(e){var t=null==e?0:e.length;return t?Co(e,0,-1):[]}var ec=Ao(function(e){var t=Sn(e,Ho);return t.length&&t[0]===e[0]?ji(t):[]}),tc=Ao(function(e){var t=ic(e),n=Sn(e,Ho);return t===ic(n)?t=a:n.pop(),n.length&&n[0]===e[0]?ji(n,Ga(t,2)):[]}),nc=Ao(function(e){var t=ic(e),n=Sn(e,Ho);return t="function"==typeof t?t:a,t&&n.pop(),n.length&&n[0]===e[0]?ji(n,a,t):[]});function rc(e,t){return null==e?"":Ut.call(e,t)}function ic(e){var t=null==e?0:e.length;return t?e[t-1]:a}function oc(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=Xl(n),i=i<0?Ht(r+i,0):zt(i,r-1)),t===t?fr(e,t,i):Fn(e,jn,i,!0)}function ac(e,t){return e&&e.length?uo(e,Xl(t)):a}var sc=Ao(cc);function cc(e,t){return e&&e.length&&t&&t.length?mo(e,t):e}function uc(e,t,n){return e&&e.length&&t&&t.length?mo(e,t,Ga(n,2)):e}function lc(e,t,n){return e&&e.length&&t&&t.length?mo(e,t,a,n):e}var hc=Fa(function(e,t){var n=null==e?0:e.length,r=fi(e,t);return vo(e,Sn(t,function(e){return os(e,n)?+e:e}).sort(Jo)),r});function dc(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;t=Ga(t,3);while(++r<o){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return vo(e,i),n}function pc(e){return null==e?e:Yt.call(e)}function fc(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&as(e,t,n)?(t=0,n=r):(t=null==t?0:Xl(t),n=n===a?r:Xl(n)),Co(e,t,n)):[]}function mc(e,t){return Lo(e,t)}function vc(e,t,n){return Ro(e,t,Ga(n,2))}function gc(e,t){var n=null==e?0:e.length;if(n){var r=Lo(e,t);if(r<n&&rl(e[r],t))return r}return-1}function yc(e,t){return Lo(e,t,!0)}function bc(e,t,n){return Ro(e,t,Ga(n,2),!0)}function Ac(e,t){var n=null==e?0:e.length;if(n){var r=Lo(e,t,!0)-1;if(rl(e[r],t))return r}return-1}function wc(e){return e&&e.length?Po(e):[]}function xc(e,t){return e&&e.length?Po(e,Ga(t,2)):[]}function Ec(e){var t=null==e?0:e.length;return t?Co(e,1,t):[]}function _c(e,t,n){return e&&e.length?(t=n||t===a?1:Xl(t),Co(e,0,t<0?0:t)):[]}function Mc(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===a?1:Xl(t),t=r-t,Co(e,t<0?0:t,r)):[]}function Tc(e,t){return e&&e.length?Fo(e,Ga(t,3),!1,!0):[]}function Cc(e,t){return e&&e.length?Fo(e,Ga(t,3)):[]}var Sc=Ao(function(e){return Io(Ci(e,1,ll,!0))}),Lc=Ao(function(e){var t=ic(e);return ll(t)&&(t=a),Io(Ci(e,1,ll,!0),Ga(t,2))}),Rc=Ao(function(e){var t=ic(e);return t="function"==typeof t?t:a,Io(Ci(e,1,ll,!0),a,t)});function Pc(e){return e&&e.length?Io(e):[]}function Oc(e,t){return e&&e.length?Io(e,Ga(t,2)):[]}function Dc(e,t){return t="function"==typeof t?t:a,e&&e.length?Io(e,a,t):[]}function Ic(e){if(!e||!e.length)return[];var t=0;return e=Mn(e,function(e){if(ll(e))return t=Ht(e.length,t),!0}),Xn(t,function(t){return Sn(e,zn(t))})}function Bc(e,t){if(!e||!e.length)return[];var n=Ic(e);return null==t?n:Sn(n,function(e){return An(t,a,e)})}var kc=Ao(function(e,t){return ll(e)?Ai(e,t):[]}),Fc=Ao(function(e){return Uo(Mn(e,ll))}),Nc=Ao(function(e){var t=ic(e);return ll(t)&&(t=a),Uo(Mn(e,ll),Ga(t,2))}),Uc=Ao(function(e){var t=ic(e);return t="function"==typeof t?t:a,Uo(Mn(e,ll),a,t)}),jc=Ao(Ic);function Hc(e,t){return jo(e||[],t||[],ci)}function zc(e,t){return jo(e||[],t||[],Eo)}var Gc=Ao(function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,Bc(e,n)});function Vc(e){var t=wr(e);return t.__chain__=!0,t}function Wc(e,t){return t(e),e}function qc(e,t){return t(e)}var Xc=Fa(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return fi(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Tr&&os(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:qc,args:[i],thisArg:a}),new Mr(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(a),e})):this.thru(i)});function Yc(){return Vc(this)}function Qc(){return new Mr(this.value(),this.__chain__)}function Kc(){this.__values__===a&&(this.__values__=Wl(this.value()));var e=this.__index__>=this.__values__.length,t=e?a:this.__values__[this.__index__++];return{done:e,value:t}}function Zc(){return this}function $c(e){var t,n=this;while(n instanceof _r){var r=Ds(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function Jc(){var e=this.__wrapped__;if(e instanceof Tr){var t=e;return this.__actions__.length&&(t=new Tr(this)),t=t.reverse(),t.__actions__.push({func:qc,args:[pc],thisArg:a}),new Mr(t,this.__chain__)}return this.thru(pc)}function eu(){return No(this.__wrapped__,this.__actions__)}var tu=sa(function(e,t,n){dt.call(e,n)?++e[n]:pi(e,n,1)});function nu(e,t,n){var r=sl(e)?_n:Ei;return n&&as(e,t,n)&&(t=a),r(e,Ga(t,3))}function ru(e,t){var n=sl(e)?Mn:Ti;return n(e,Ga(t,3))}var iu=va(Ws),ou=va(qs);function au(e,t){return Ci(mu(e,t),1)}function su(e,t){return Ci(mu(e,t),k)}function cu(e,t,n){return n=n===a?1:Xl(n),Ci(mu(e,t),n)}function uu(e,t){var n=sl(e)?xn:wi;return n(e,Ga(t,3))}function lu(e,t){var n=sl(e)?En:xi;return n(e,Ga(t,3))}var hu=sa(function(e,t,n){dt.call(e,n)?e[n].push(t):pi(e,n,[t])});function du(e,t,n,r){e=ul(e)?e:jh(e),n=n&&!r?Xl(n):0;var i=e.length;return n<0&&(n=Ht(i+n,0)),Fl(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Nn(e,t,n)>-1}var pu=Ao(function(e,t,n){var i=-1,o="function"==typeof t,a=ul(e)?r(e.length):[];return wi(e,function(e){a[++i]=o?An(t,e,n):zi(e,t,n)}),a}),fu=sa(function(e,t,n){pi(e,n,t)});function mu(e,t){var n=sl(e)?Sn:io;return n(e,Ga(t,3))}function vu(e,t,n,r){return null==e?[]:(sl(t)||(t=null==t?[]:[t]),n=r?a:n,sl(n)||(n=null==n?[]:[n]),lo(e,t,n))}var gu=sa(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function yu(e,t,n){var r=sl(e)?Rn:Vn,i=arguments.length<3;return r(e,Ga(t,4),n,i,wi)}function bu(e,t,n){var r=sl(e)?Pn:Vn,i=arguments.length<3;return r(e,Ga(t,4),n,i,xi)}function Au(e,t){var n=sl(e)?Mn:Ti;return n(e,ju(Ga(t,3)))}function wu(e){var t=sl(e)?ii:wo;return t(e)}function xu(e,t,n){t=(n?as(e,t,n):t===a)?1:Xl(t);var r=sl(e)?oi:xo;return r(e,t)}function Eu(e){var t=sl(e)?ai:To;return t(e)}function _u(e){if(null==e)return 0;if(ul(e))return Fl(e)?mr(e):e.length;var t=Ka(e);return t==J||t==ae?e.size:to(e).length}function Mu(e,t,n){var r=sl(e)?On:So;return n&&as(e,t,n)&&(t=a),r(e,Ga(t,3))}var Tu=Ao(function(e,t){if(null==e)return[];var n=t.length;return n>1&&as(e,t[0],t[1])?t=[]:n>2&&as(t[0],t[1],t[2])&&(t=[t[0]]),lo(e,Ci(t,1),[])}),Cu=Ot||function(){return cn.Date.now()};function Su(e,t){if("function"!=typeof t)throw new at(l);return e=Xl(e),function(){if(--e<1)return t.apply(this,arguments)}}function Lu(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,Ra(e,T,a,a,a,a,t)}function Ru(e,t){var n;if("function"!=typeof t)throw new at(l);return e=Xl(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Pu=Ao(function(e,t,n){var r=b;if(n.length){var i=lr(n,za(Pu));r|=_}return Ra(e,r,t,n,i)}),Ou=Ao(function(e,t,n){var r=b|A;if(n.length){var i=lr(n,za(Ou));r|=_}return Ra(t,r,e,n,i)});function Du(e,t,n){t=n?a:t;var r=Ra(e,x,a,a,a,a,a,t);return r.placeholder=Du.placeholder,r}function Iu(e,t,n){t=n?a:t;var r=Ra(e,E,a,a,a,a,a,t);return r.placeholder=Iu.placeholder,r}function Bu(e,t,n){var r,i,o,s,c,u,h=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new at(l);function m(t){var n=r,o=i;return r=i=a,h=t,s=e.apply(o,n),s}function v(e){return h=e,c=_s(b,t),d?m(e):s}function g(e){var n=e-u,r=e-h,i=t-n;return p?zt(i,o-r):i}function y(e){var n=e-u,r=e-h;return u===a||n>=t||n<0||p&&r>=o}function b(){var e=Cu();if(y(e))return A(e);c=_s(b,g(e))}function A(e){return c=a,f&&r?m(e):(r=i=a,s)}function w(){c!==a&&qo(c),h=0,r=u=i=c=a}function x(){return c===a?s:A(Cu())}function E(){var e=Cu(),n=y(e);if(r=arguments,i=this,u=e,n){if(c===a)return v(u);if(p)return qo(c),c=_s(b,t),m(u)}return c===a&&(c=_s(b,t)),s}return t=Ql(t)||0,El(n)&&(d=!!n.leading,p="maxWait"in n,o=p?Ht(Ql(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),E.cancel=w,E.flush=x,E}var ku=Ao(function(e,t){return bi(e,1,t)}),Fu=Ao(function(e,t,n){return bi(e,Ql(t)||0,n)});function Nu(e){return Ra(e,S)}function Uu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new at(l);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Uu.Cache||zr),n}function ju(e){if("function"!=typeof e)throw new at(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Hu(e){return Ru(2,e)}Uu.Cache=zr;var zu=Vo(function(e,t){t=1==t.length&&sl(t[0])?Sn(t[0],Qn(Ga())):Sn(Ci(t,1),Qn(Ga()));var n=t.length;return Ao(function(r){var i=-1,o=zt(r.length,n);while(++i<o)r[i]=t[i].call(this,r[i]);return An(e,this,r)})}),Gu=Ao(function(e,t){var n=lr(t,za(Gu));return Ra(e,_,a,t,n)}),Vu=Ao(function(e,t){var n=lr(t,za(Vu));return Ra(e,M,a,t,n)}),Wu=Fa(function(e,t){return Ra(e,C,a,a,a,t)});function qu(e,t){if("function"!=typeof e)throw new at(l);return t=t===a?t:Xl(t),Ao(e,t)}function Xu(e,t){if("function"!=typeof e)throw new at(l);return t=null==t?0:Ht(Xl(t),0),Ao(function(n){var r=n[t],i=Wo(n,0,t);return r&&Ln(i,r),An(e,this,i)})}function Yu(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new at(l);return El(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Bu(e,t,{leading:r,maxWait:t,trailing:i})}function Qu(e){return Lu(e,1)}function Ku(e,t){return Gu(zo(t),e)}function Zu(){if(!arguments.length)return[];var e=arguments[0];return sl(e)?e:[e]}function $u(e){return vi(e,v)}function Ju(e,t){return t="function"==typeof t?t:a,vi(e,v,t)}function el(e){return vi(e,f|v)}function tl(e,t){return t="function"==typeof t?t:a,vi(e,f|v,t)}function nl(e,t){return null==t||yi(e,t,wh(t))}function rl(e,t){return e===t||e!==e&&t!==t}var il=Ma(ki),ol=Ma(function(e,t){return e>=t}),al=Gi(function(){return arguments}())?Gi:function(e){return _l(e)&&dt.call(e,"callee")&&!Mt.call(e,"callee")},sl=r.isArray,cl=fn?Qn(fn):Vi;function ul(e){return null!=e&&xl(e.length)&&!Al(e)}function ll(e){return _l(e)&&ul(e)}function hl(e){return!0===e||!1===e||_l(e)&&Bi(e)==X}var dl=Ft||Xd,pl=mn?Qn(mn):Wi;function fl(e){return _l(e)&&1===e.nodeType&&!Dl(e)}function ml(e){if(null==e)return!0;if(ul(e)&&(sl(e)||"string"==typeof e||"function"==typeof e.splice||dl(e)||Ul(e)||al(e)))return!e.length;var t=Ka(e);if(t==J||t==ae)return!e.size;if(ds(e))return!to(e).length;for(var n in e)if(dt.call(e,n))return!1;return!0}function vl(e,t){return qi(e,t)}function gl(e,t,n){n="function"==typeof n?n:a;var r=n?n(e,t):a;return r===a?qi(e,t,a,n):!!r}function yl(e){if(!_l(e))return!1;var t=Bi(e);return t==K||t==Q||"string"==typeof e.message&&"string"==typeof e.name&&!Dl(e)}function bl(e){return"number"==typeof e&&Nt(e)}function Al(e){if(!El(e))return!1;var t=Bi(e);return t==Z||t==$||t==q||t==ie}function wl(e){return"number"==typeof e&&e==Xl(e)}function xl(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=F}function El(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function _l(e){return null!=e&&"object"==typeof e}var Ml=vn?Qn(vn):Yi;function Tl(e,t){return e===t||Qi(e,t,Wa(t))}function Cl(e,t,n){return n="function"==typeof n?n:a,Qi(e,t,Wa(t),n)}function Sl(e){return Ol(e)&&e!=+e}function Ll(e){if(hs(e))throw new o(u);return Ki(e)}function Rl(e){return null===e}function Pl(e){return null==e}function Ol(e){return"number"==typeof e||_l(e)&&Bi(e)==ee}function Dl(e){if(!_l(e)||Bi(e)!=ne)return!1;var t=Et(e);if(null===t)return!0;var n=dt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ht.call(n)==vt}var Il=gn?Qn(gn):Zi;function Bl(e){return wl(e)&&e>=-F&&e<=F}var kl=yn?Qn(yn):$i;function Fl(e){return"string"==typeof e||!sl(e)&&_l(e)&&Bi(e)==se}function Nl(e){return"symbol"==typeof e||_l(e)&&Bi(e)==ce}var Ul=bn?Qn(bn):Ji;function jl(e){return e===a}function Hl(e){return _l(e)&&Ka(e)==le}function zl(e){return _l(e)&&Bi(e)==he}var Gl=Ma(ro),Vl=Ma(function(e,t){return e<=t});function Wl(e){if(!e)return[];if(ul(e))return Fl(e)?vr(e):ra(e);if(St&&e[St])return sr(e[St]());var t=Ka(e),n=t==J?cr:t==ae?hr:jh;return n(e)}function ql(e){if(!e)return 0===e?e:0;if(e=Ql(e),e===k||e===-k){var t=e<0?-1:1;return t*N}return e===e?e:0}function Xl(e){var t=ql(e),n=t%1;return t===t?n?t-n:t:0}function Yl(e){return e?mi(Xl(e),0,j):0}function Ql(e){if("number"==typeof e)return e;if(Nl(e))return U;if(El(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=El(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ne,"");var n=Qe.test(e);return n||Ze.test(e)?on(e.slice(2),n?2:8):Ye.test(e)?U:+e}function Kl(e){return ia(e,xh(e))}function Zl(e){return e?mi(Xl(e),-F,F):0===e?e:0}function $l(e){return null==e?"":Do(e)}var Jl=ca(function(e,t){if(ds(t)||ul(t))ia(t,wh(t),e);else for(var n in t)dt.call(t,n)&&ci(e,n,t[n])}),eh=ca(function(e,t){ia(t,xh(t),e)}),th=ca(function(e,t,n,r){ia(t,xh(t),e,r)}),nh=ca(function(e,t,n,r){ia(t,wh(t),e,r)}),rh=Fa(fi);function ih(e,t){var n=Er(e);return null==t?n:hi(n,t)}var oh=Ao(function(e,t){e=rt(e);var n=-1,r=t.length,i=r>2?t[2]:a;i&&as(t[0],t[1],i)&&(r=1);while(++n<r){var o=t[n],s=xh(o),c=-1,u=s.length;while(++c<u){var l=s[c],h=e[l];(h===a||rl(h,ut[l])&&!dt.call(e,l))&&(e[l]=o[l])}}return e}),ah=Ao(function(e){return e.push(a,Oa),An(Th,a,e)});function sh(e,t){return kn(e,Ga(t,3),Ri)}function ch(e,t){return kn(e,Ga(t,3),Pi)}function uh(e,t){return null==e?e:Si(e,Ga(t,3),xh)}function lh(e,t){return null==e?e:Li(e,Ga(t,3),xh)}function hh(e,t){return e&&Ri(e,Ga(t,3))}function dh(e,t){return e&&Pi(e,Ga(t,3))}function ph(e){return null==e?[]:Oi(e,wh(e))}function fh(e){return null==e?[]:Oi(e,xh(e))}function mh(e,t,n){var r=null==e?a:Di(e,t);return r===a?n:r}function vh(e,t){return null!=e&&Ja(e,t,Fi)}function gh(e,t){return null!=e&&Ja(e,t,Ni)}var yh=ba(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=mt.call(t)),e[t]=n},Md(Ld)),bh=ba(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=mt.call(t)),dt.call(e,t)?e[t].push(n):e[t]=[n]},Ga),Ah=Ao(zi);function wh(e){return ul(e)?ri(e):to(e)}function xh(e){return ul(e)?ri(e,!0):no(e)}function Eh(e,t){var n={};return t=Ga(t,3),Ri(e,function(e,r,i){pi(n,t(e,r,i),e)}),n}function _h(e,t){var n={};return t=Ga(t,3),Ri(e,function(e,r,i){pi(n,r,t(e,r,i))}),n}var Mh=ca(function(e,t,n){so(e,t,n)}),Th=ca(function(e,t,n,r){so(e,t,n,r)}),Ch=Fa(function(e,t){var n={};if(null==e)return n;var r=!1;t=Sn(t,function(t){return t=Go(t,e),r||(r=t.length>1),t}),ia(e,Ua(e),n),r&&(n=vi(n,f|m|v,Da));var i=t.length;while(i--)Bo(n,t[i]);return n});function Sh(e,t){return Rh(e,ju(Ga(t)))}var Lh=Fa(function(e,t){return null==e?{}:ho(e,t)});function Rh(e,t){if(null==e)return{};var n=Sn(Ua(e),function(e){return[e]});return t=Ga(t),po(e,n,function(e,n){return t(e,n[0])})}function Ph(e,t,n){t=Go(t,e);var r=-1,i=t.length;i||(i=1,e=a);while(++r<i){var o=null==e?a:e[Rs(t[r])];o===a&&(r=i,o=n),e=Al(o)?o.call(e):o}return e}function Oh(e,t,n){return null==e?e:Eo(e,t,n)}function Dh(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:Eo(e,t,n,r)}var Ih=La(wh),Bh=La(xh);function kh(e,t,n){var r=sl(e),i=r||dl(e)||Ul(e);if(t=Ga(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:El(e)&&Al(o)?Er(Et(e)):{}}return(i?xn:Ri)(e,function(e,r,i){return t(n,e,r,i)}),n}function Fh(e,t){return null==e||Bo(e,t)}function Nh(e,t,n){return null==e?e:ko(e,t,zo(n))}function Uh(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ko(e,t,zo(n),r)}function jh(e){return null==e?[]:Kn(e,wh(e))}function Hh(e){return null==e?[]:Kn(e,xh(e))}function zh(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=Ql(n),n=n===n?n:0),t!==a&&(t=Ql(t),t=t===t?t:0),mi(Ql(e),t,n)}function Gh(e,t,n){return t=ql(t),n===a?(n=t,t=0):n=ql(n),e=Ql(e),Ui(e,t,n)}function Vh(e,t,n){if(n&&"boolean"!=typeof n&&as(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=ql(e),t===a?(t=e,e=0):t=ql(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Xt();return zt(e+i*(t-e+rn("1e-"+((i+"").length-1))),t)}return go(e,t)}var Wh=pa(function(e,t,n){return t=t.toLowerCase(),e+(n?qh(t):t)});function qh(e){return bd($l(e).toLowerCase())}function Xh(e){return e=$l(e),e&&e.replace(Je,tr).replace(Vt,"")}function Yh(e,t,n){e=$l(e),t=Do(t);var r=e.length;n=n===a?r:mi(Xl(n),0,r);var i=n;return n-=t.length,n>=0&&e.slice(n,i)==t}function Qh(e){return e=$l(e),e&&Le.test(e)?e.replace(Ce,nr):e}function Kh(e){return e=$l(e),e&&Fe.test(e)?e.replace(ke,"\\$&"):e}var Zh=pa(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),$h=pa(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Jh=da("toLowerCase");function ed(e,t,n){e=$l(e),t=Xl(t);var r=t?mr(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return xa(Bt(i),n)+e+xa(It(i),n)}function td(e,t,n){e=$l(e),t=Xl(t);var r=t?mr(e):0;return t&&r<t?e+xa(t-r,n):e}function nd(e,t,n){e=$l(e),t=Xl(t);var r=t?mr(e):0;return t&&r<t?xa(t-r,n)+e:e}function rd(e,t,n){return n||null==t?t=0:t&&(t=+t),qt($l(e).replace(Ue,""),t||0)}function id(e,t,n){return t=(n?as(e,t,n):t===a)?1:Xl(t),bo($l(e),t)}function od(){var e=arguments,t=$l(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var ad=pa(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function sd(e,t,n){return n&&"number"!=typeof n&&as(e,t,n)&&(t=n=a),n=n===a?j:n>>>0,n?(e=$l(e),e&&("string"==typeof t||null!=t&&!Il(t))&&(t=Do(t),!t&&or(e))?Wo(vr(e),0,n):e.split(t,n)):[]}var cd=pa(function(e,t,n){return e+(n?" ":"")+bd(t)});function ud(e,t,n){return e=$l(e),n=null==n?0:mi(Xl(n),0,e.length),t=Do(t),e.slice(n,n+t.length)==t}function ld(e,t,n){var r=wr.templateSettings;n&&as(e,t,n)&&(t=a),e=$l(e),t=th({},t,r,Pa);var i,o,s=th({},t.imports,r.imports,Pa),c=wh(s),u=Kn(s,c),l=0,h=t.interpolate||et,d="__p += '",p=it((t.escape||et).source+"|"+h.source+"|"+(h===Oe?qe:et).source+"|"+(t.evaluate||et).source+"|$","g"),f="//# sourceURL="+(dt.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Kt+"]")+"\n";e.replace(p,function(t,n,r,a,s,c){return r||(r=a),d+=e.slice(l,c).replace(tt,rr),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),d+="';\n";var m=dt.call(t,"variable")&&t.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(Ee,""):d).replace(_e,"$1").replace(Me,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=wd(function(){return Ve(c,f+"return "+d).apply(a,u)});if(v.source=d,yl(v))throw v;return v}function hd(e){return $l(e).toLowerCase()}function dd(e){return $l(e).toUpperCase()}function pd(e,t,n){if(e=$l(e),e&&(n||t===a))return e.replace(Ne,"");if(!e||!(t=Do(t)))return e;var r=vr(e),i=vr(t),o=$n(r,i),s=Jn(r,i)+1;return Wo(r,o,s).join("")}function fd(e,t,n){if(e=$l(e),e&&(n||t===a))return e.replace(je,"");if(!e||!(t=Do(t)))return e;var r=vr(e),i=Jn(r,vr(t))+1;return Wo(r,0,i).join("")}function md(e,t,n){if(e=$l(e),e&&(n||t===a))return e.replace(Ue,"");if(!e||!(t=Do(t)))return e;var r=vr(e),i=$n(r,vr(t));return Wo(r,i).join("")}function vd(e,t){var n=L,r=R;if(El(t)){var i="separator"in t?t.separator:i;n="length"in t?Xl(t.length):n,r="omission"in t?Do(t.omission):r}e=$l(e);var o=e.length;if(or(e)){var s=vr(e);o=s.length}if(n>=o)return e;var c=n-mr(r);if(c<1)return r;var u=s?Wo(s,0,c).join(""):e.slice(0,c);if(i===a)return u+r;if(s&&(c+=u.length-c),Il(i)){if(e.slice(c).search(i)){var l,h=u;i.global||(i=it(i.source,$l(Xe.exec(i))+"g")),i.lastIndex=0;while(l=i.exec(h))var d=l.index;u=u.slice(0,d===a?c:d)}}else if(e.indexOf(Do(i),c)!=c){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+r}function gd(e){return e=$l(e),e&&Se.test(e)?e.replace(Te,gr):e}var yd=pa(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),bd=da("toUpperCase");function Ad(e,t,n){return e=$l(e),t=n?a:t,t===a?ar(e)?Ar(e):Bn(e):e.match(t)||[]}var wd=Ao(function(t,n){try{return An(t,a,n)}catch(e){return yl(e)?e:new o(e)}}),xd=Fa(function(e,t){return xn(t,function(t){t=Rs(t),pi(e,t,Pu(e[t],e))}),e});function Ed(e){var t=null==e?0:e.length,n=Ga();return e=t?Sn(e,function(e){if("function"!=typeof e[1])throw new at(l);return[n(e[0]),e[1]]}):[],Ao(function(n){var r=-1;while(++r<t){var i=e[r];if(An(i[0],this,n))return An(i[1],this,n)}})}function _d(e){return gi(vi(e,f))}function Md(e){return function(){return e}}function Td(e,t){return null==e||e!==e?t:e}var Cd=ga(),Sd=ga(!0);function Ld(e){return e}function Rd(e){return eo("function"==typeof e?e:vi(e,f))}function Pd(e){return oo(vi(e,f))}function Od(e,t){return ao(e,vi(t,f))}var Dd=Ao(function(e,t){return function(n){return zi(n,e,t)}}),Id=Ao(function(e,t){return function(n){return zi(e,n,t)}});function Bd(e,t,n){var r=wh(t),i=Oi(t,r);null!=n||El(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Oi(t,wh(t)));var o=!(El(n)&&"chain"in n)||!!n.chain,a=Al(e);return xn(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=ra(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ln([this.value()],arguments))})}),e}function kd(){return cn._===this&&(cn._=gt),this}function Fd(){}function Nd(e){return e=Xl(e),Ao(function(t){return uo(t,e)})}var Ud=wa(Sn),jd=wa(_n),Hd=wa(On);function zd(e){return ss(e)?zn(Rs(e)):fo(e)}function Gd(e){return function(t){return null==e?a:Di(e,t)}}var Vd=_a(),Wd=_a(!0);function qd(){return[]}function Xd(){return!1}function Yd(){return{}}function Qd(){return""}function Kd(){return!0}function Zd(e,t){if(e=Xl(e),e<1||e>F)return[];var n=j,r=zt(e,j);t=Ga(t),e-=j;var i=Xn(r,t);while(++n<e)t(n);return i}function $d(e){return sl(e)?Sn(e,Rs):Nl(e)?[e]:ra(Ls($l(e)))}function Jd(e){var t=++pt;return $l(e)+t}var ep=Aa(function(e,t){return e+t},0),tp=Ca("ceil"),np=Aa(function(e,t){return e/t},1),rp=Ca("floor");function ip(e){return e&&e.length?_i(e,Ld,ki):a}function op(e,t){return e&&e.length?_i(e,Ga(t,2),ki):a}function ap(e){return Hn(e,Ld)}function sp(e,t){return Hn(e,Ga(t,2))}function cp(e){return e&&e.length?_i(e,Ld,ro):a}function up(e,t){return e&&e.length?_i(e,Ga(t,2),ro):a}var lp=Aa(function(e,t){return e*t},1),hp=Ca("round"),dp=Aa(function(e,t){return e-t},0);function pp(e){return e&&e.length?qn(e,Ld):0}function fp(e,t){return e&&e.length?qn(e,Ga(t,2)):0}return wr.after=Su,wr.ary=Lu,wr.assign=Jl,wr.assignIn=eh,wr.assignInWith=th,wr.assignWith=nh,wr.at=rh,wr.before=Ru,wr.bind=Pu,wr.bindAll=xd,wr.bindKey=Ou,wr.castArray=Zu,wr.chain=Vc,wr.chunk=Is,wr.compact=Bs,wr.concat=ks,wr.cond=Ed,wr.conforms=_d,wr.constant=Md,wr.countBy=tu,wr.create=ih,wr.curry=Du,wr.curryRight=Iu,wr.debounce=Bu,wr.defaults=oh,wr.defaultsDeep=ah,wr.defer=ku,wr.delay=Fu,wr.difference=Fs,wr.differenceBy=Ns,wr.differenceWith=Us,wr.drop=js,wr.dropRight=Hs,wr.dropRightWhile=zs,wr.dropWhile=Gs,wr.fill=Vs,wr.filter=ru,wr.flatMap=au,wr.flatMapDeep=su,wr.flatMapDepth=cu,wr.flatten=Xs,wr.flattenDeep=Ys,wr.flattenDepth=Qs,wr.flip=Nu,wr.flow=Cd,wr.flowRight=Sd,wr.fromPairs=Ks,wr.functions=ph,wr.functionsIn=fh,wr.groupBy=hu,wr.initial=Js,wr.intersection=ec,wr.intersectionBy=tc,wr.intersectionWith=nc,wr.invert=yh,wr.invertBy=bh,wr.invokeMap=pu,wr.iteratee=Rd,wr.keyBy=fu,wr.keys=wh,wr.keysIn=xh,wr.map=mu,wr.mapKeys=Eh,wr.mapValues=_h,wr.matches=Pd,wr.matchesProperty=Od,wr.memoize=Uu,wr.merge=Mh,wr.mergeWith=Th,wr.method=Dd,wr.methodOf=Id,wr.mixin=Bd,wr.negate=ju,wr.nthArg=Nd,wr.omit=Ch,wr.omitBy=Sh,wr.once=Hu,wr.orderBy=vu,wr.over=Ud,wr.overArgs=zu,wr.overEvery=jd,wr.overSome=Hd,wr.partial=Gu,wr.partialRight=Vu,wr.partition=gu,wr.pick=Lh,wr.pickBy=Rh,wr.property=zd,wr.propertyOf=Gd,wr.pull=sc,wr.pullAll=cc,wr.pullAllBy=uc,wr.pullAllWith=lc,wr.pullAt=hc,wr.range=Vd,wr.rangeRight=Wd,wr.rearg=Wu,wr.reject=Au,wr.remove=dc,wr.rest=qu,wr.reverse=pc,wr.sampleSize=xu,wr.set=Oh,wr.setWith=Dh,wr.shuffle=Eu,wr.slice=fc,wr.sortBy=Tu,wr.sortedUniq=wc,wr.sortedUniqBy=xc,wr.split=sd,wr.spread=Xu,wr.tail=Ec,wr.take=_c,wr.takeRight=Mc,wr.takeRightWhile=Tc,wr.takeWhile=Cc,wr.tap=Wc,wr.throttle=Yu,wr.thru=qc,wr.toArray=Wl,wr.toPairs=Ih,wr.toPairsIn=Bh,wr.toPath=$d,wr.toPlainObject=Kl,wr.transform=kh,wr.unary=Qu,wr.union=Sc,wr.unionBy=Lc,wr.unionWith=Rc,wr.uniq=Pc,wr.uniqBy=Oc,wr.uniqWith=Dc,wr.unset=Fh,wr.unzip=Ic,wr.unzipWith=Bc,wr.update=Nh,wr.updateWith=Uh,wr.values=jh,wr.valuesIn=Hh,wr.without=kc,wr.words=Ad,wr.wrap=Ku,wr.xor=Fc,wr.xorBy=Nc,wr.xorWith=Uc,wr.zip=jc,wr.zipObject=Hc,wr.zipObjectDeep=zc,wr.zipWith=Gc,wr.entries=Ih,wr.entriesIn=Bh,wr.extend=eh,wr.extendWith=th,Bd(wr,wr),wr.add=ep,wr.attempt=wd,wr.camelCase=Wh,wr.capitalize=qh,wr.ceil=tp,wr.clamp=zh,wr.clone=$u,wr.cloneDeep=el,wr.cloneDeepWith=tl,wr.cloneWith=Ju,wr.conformsTo=nl,wr.deburr=Xh,wr.defaultTo=Td,wr.divide=np,wr.endsWith=Yh,wr.eq=rl,wr.escape=Qh,wr.escapeRegExp=Kh,wr.every=nu,wr.find=iu,wr.findIndex=Ws,wr.findKey=sh,wr.findLast=ou,wr.findLastIndex=qs,wr.findLastKey=ch,wr.floor=rp,wr.forEach=uu,wr.forEachRight=lu,wr.forIn=uh,wr.forInRight=lh,wr.forOwn=hh,wr.forOwnRight=dh,wr.get=mh,wr.gt=il,wr.gte=ol,wr.has=vh,wr.hasIn=gh,wr.head=Zs,wr.identity=Ld,wr.includes=du,wr.indexOf=$s,wr.inRange=Gh,wr.invoke=Ah,wr.isArguments=al,wr.isArray=sl,wr.isArrayBuffer=cl,wr.isArrayLike=ul,wr.isArrayLikeObject=ll,wr.isBoolean=hl,wr.isBuffer=dl,wr.isDate=pl,wr.isElement=fl,wr.isEmpty=ml,wr.isEqual=vl,wr.isEqualWith=gl,wr.isError=yl,wr.isFinite=bl,wr.isFunction=Al,wr.isInteger=wl,wr.isLength=xl,wr.isMap=Ml,wr.isMatch=Tl,wr.isMatchWith=Cl,wr.isNaN=Sl,wr.isNative=Ll,wr.isNil=Pl,wr.isNull=Rl,wr.isNumber=Ol,wr.isObject=El,wr.isObjectLike=_l,wr.isPlainObject=Dl,wr.isRegExp=Il,wr.isSafeInteger=Bl,wr.isSet=kl,wr.isString=Fl,wr.isSymbol=Nl,wr.isTypedArray=Ul,wr.isUndefined=jl,wr.isWeakMap=Hl,wr.isWeakSet=zl,wr.join=rc,wr.kebabCase=Zh,wr.last=ic,wr.lastIndexOf=oc,wr.lowerCase=$h,wr.lowerFirst=Jh,wr.lt=Gl,wr.lte=Vl,wr.max=ip,wr.maxBy=op,wr.mean=ap,wr.meanBy=sp,wr.min=cp,wr.minBy=up,wr.stubArray=qd,wr.stubFalse=Xd,wr.stubObject=Yd,wr.stubString=Qd,wr.stubTrue=Kd,wr.multiply=lp,wr.nth=ac,wr.noConflict=kd,wr.noop=Fd,wr.now=Cu,wr.pad=ed,wr.padEnd=td,wr.padStart=nd,wr.parseInt=rd,wr.random=Vh,wr.reduce=yu,wr.reduceRight=bu,wr.repeat=id,wr.replace=od,wr.result=Ph,wr.round=hp,wr.runInContext=t,wr.sample=wu,wr.size=_u,wr.snakeCase=ad,wr.some=Mu,wr.sortedIndex=mc,wr.sortedIndexBy=vc,wr.sortedIndexOf=gc,wr.sortedLastIndex=yc,wr.sortedLastIndexBy=bc,wr.sortedLastIndexOf=Ac,wr.startCase=cd,wr.startsWith=ud,wr.subtract=dp,wr.sum=pp,wr.sumBy=fp,wr.template=ld,wr.times=Zd,wr.toFinite=ql,wr.toInteger=Xl,wr.toLength=Yl,wr.toLower=hd,wr.toNumber=Ql,wr.toSafeInteger=Zl,wr.toString=$l,wr.toUpper=dd,wr.trim=pd,wr.trimEnd=fd,wr.trimStart=md,wr.truncate=vd,wr.unescape=gd,wr.uniqueId=Jd,wr.upperCase=yd,wr.upperFirst=bd,wr.each=uu,wr.eachRight=lu,wr.first=Zs,Bd(wr,function(){var e={};return Ri(wr,function(t,n){dt.call(wr.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),wr.VERSION=s,xn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){wr[e].placeholder=wr}),xn(["drop","take"],function(e,t){Tr.prototype[e]=function(n){n=n===a?1:Ht(Xl(n),0);var r=this.__filtered__&&!t?new Tr(this):this.clone();return r.__filtered__?r.__takeCount__=zt(n,r.__takeCount__):r.__views__.push({size:zt(n,j),type:e+(r.__dir__<0?"Right":"")}),r},Tr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),xn(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==D||n==B;Tr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ga(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),xn(["head","last"],function(e,t){var n="take"+(t?"Right":"");Tr.prototype[e]=function(){return this[n](1).value()[0]}}),xn(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Tr.prototype[e]=function(){return this.__filtered__?new Tr(this):this[n](1)}}),Tr.prototype.compact=function(){return this.filter(Ld)},Tr.prototype.find=function(e){return this.filter(e).head()},Tr.prototype.findLast=function(e){return this.reverse().find(e)},Tr.prototype.invokeMap=Ao(function(e,t){return"function"==typeof e?new Tr(this):this.map(function(n){return zi(n,e,t)})}),Tr.prototype.reject=function(e){return this.filter(ju(Ga(e)))},Tr.prototype.slice=function(e,t){e=Xl(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Tr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(t=Xl(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Tr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Tr.prototype.toArray=function(){return this.take(j)},Ri(Tr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=wr[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(wr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof Tr,u=s[0],l=c||sl(t),h=function(e){var t=i.apply(wr,Ln([e],s));return r&&d?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,p=!!this.__actions__.length,f=o&&!d,m=c&&!p;if(!o&&l){t=m?t:new Tr(this);var v=e.apply(t,s);return v.__actions__.push({func:qc,args:[h],thisArg:a}),new Mr(v,d)}return f&&m?e.apply(this,s):(v=this.thru(h),f?r?v.value()[0]:v.value():v)})}),xn(["pop","push","shift","sort","splice","unshift"],function(e){var t=st[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);wr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(sl(i)?i:[],e)}return this[n](function(n){return t.apply(sl(n)?n:[],e)})}}),Ri(Tr.prototype,function(e,t){var n=wr[t];if(n){var r=n.name+"";dt.call(ln,r)||(ln[r]=[]),ln[r].push({name:t,func:n})}}),ln[ya(a,A).name]=[{name:"wrapper",func:a}],Tr.prototype.clone=Cr,Tr.prototype.reverse=Sr,Tr.prototype.value=Lr,wr.prototype.at=Xc,wr.prototype.chain=Yc,wr.prototype.commit=Qc,wr.prototype.next=Kc,wr.prototype.plant=$c,wr.prototype.reverse=Jc,wr.prototype.toJSON=wr.prototype.valueOf=wr.prototype.value=eu,wr.prototype.first=wr.prototype.head,St&&(wr.prototype[St]=Zc),wr},xr=wr();cn._=xr,o=function(){return xr}.call(n,r,n,i),o===a||(i.exports=o)}).call(this)}).call(this,r("c8ba"),r("62e4")(t))},"2f62":function(t,n,r){"use strict";(function(t){
/**
 * vuex v3.1.1
 * (c) 2019 Evan You
 * @license MIT
 */
function r(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:r});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[r].concat(e.init):r,n.call(this,e)}}function r(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}var i="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},o=i.__VUE_DEVTOOLS_GLOBAL_HOOK__;function a(e){o&&(e._devtoolHook=o,o.emit("vuex:init",e),o.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(e,t){o.emit("vuex:mutation",e,t)}))}function s(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function c(e){return null!==e&&"object"===typeof e}function u(e){return e&&"function"===typeof e.then}function l(e,t){return function(){return e(t)}}var h=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},d={namespaced:{configurable:!0}};d.namespaced.get=function(){return!!this._rawModule.namespaced},h.prototype.addChild=function(e,t){this._children[e]=t},h.prototype.removeChild=function(e){delete this._children[e]},h.prototype.getChild=function(e){return this._children[e]},h.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},h.prototype.forEachChild=function(e){s(this._children,e)},h.prototype.forEachGetter=function(e){this._rawModule.getters&&s(this._rawModule.getters,e)},h.prototype.forEachAction=function(e){this._rawModule.actions&&s(this._rawModule.actions,e)},h.prototype.forEachMutation=function(e){this._rawModule.mutations&&s(this._rawModule.mutations,e)},Object.defineProperties(h.prototype,d);var p=function(e){this.register([],e,!1)};function f(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void 0;f(e.concat(r),t.getChild(r),n.modules[r])}}p.prototype.get=function(e){return e.reduce(function(e,t){return e.getChild(t)},this.root)},p.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")},"")},p.prototype.update=function(e){f([],this.root,e)},p.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new h(t,n);if(0===e.length)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}t.modules&&s(t.modules,function(t,i){r.register(e.concat(i),t,n)})},p.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];t.getChild(n).runtime&&t.removeChild(n)};var m;var v=function(e){var t=this;void 0===e&&(e={}),!m&&"undefined"!==typeof window&&window.Vue&&R(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new p(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m;var i=this,o=this,s=o.dispatch,c=o.commit;this.dispatch=function(e,t){return s.call(i,e,t)},this.commit=function(e,t,n){return c.call(i,e,t,n)},this.strict=r;var u=this._modules.root.state;w(this,u,[],this._modules.root),A(this,u),n.forEach(function(e){return e(t)});var l=void 0!==e.devtools?e.devtools:m.config.devtools;l&&a(this)},g={state:{configurable:!0}};function y(e,t){return t.indexOf(e)<0&&t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function b(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;w(e,n,[],e._modules.root,!0),A(e,n,t)}function A(e,t,n){var r=e._vm;e.getters={};var i=e._wrappedGetters,o={};s(i,function(t,n){o[n]=l(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})});var a=m.config.silent;m.config.silent=!0,e._vm=new m({data:{$$state:t},computed:o}),m.config.silent=a,e.strict&&C(e),r&&(n&&e._withCommit(function(){r._data.$$state=null}),m.nextTick(function(){return r.$destroy()}))}function w(e,t,n,r,i){var o=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a]=r),!o&&!i){var s=S(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit(function(){m.set(s,c,r.state)})}var u=r.context=x(e,a,n);r.forEachMutation(function(t,n){var r=a+n;_(e,r,t,u)}),r.forEachAction(function(t,n){var r=t.root?n:a+n,i=t.handler||t;M(e,r,i,u)}),r.forEachGetter(function(t,n){var r=a+n;T(e,r,t,u)}),r.forEachChild(function(r,o){w(e,t,n.concat(o),r,i)})}function x(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=L(n,r,i),a=o.payload,s=o.options,c=o.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:r?e.commit:function(n,r,i){var o=L(n,r,i),a=o.payload,s=o.options,c=o.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return E(e,t)}},state:{get:function(){return S(e.state,n)}}}),i}function E(e,t){var n={},r=t.length;return Object.keys(e.getters).forEach(function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}}),n}function _(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(t){n.call(e,r.state,t)})}function M(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(t,i){var o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t,i);return u(o)||(o=Promise.resolve(o)),e._devtoolHook?o.catch(function(t){throw e._devtoolHook.emit("vuex:error",t),t}):o})}function T(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)})}function C(e){e._vm.$watch(function(){return this._data.$$state},function(){0},{deep:!0,sync:!0})}function S(e,t){return t.length?t.reduce(function(e,t){return e[t]},e):e}function L(e,t,n){return c(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function R(e){m&&e===m||(m=e,r(m))}g.state.get=function(){return this._vm._data.$$state},g.state.set=function(e){0},v.prototype.commit=function(e,t,n){var r=this,i=L(e,t,n),o=i.type,a=i.payload,s=(i.options,{type:o,payload:a}),c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(e){e(a)})}),this._subscribers.forEach(function(e){return e(s,r.state)}))},v.prototype.dispatch=function(t,n){var r=this,i=L(t,n),o=i.type,a=i.payload,s={type:o,payload:a},c=this._actions[o];if(c){try{this._actionSubscribers.filter(function(e){return e.before}).forEach(function(e){return e.before(s,r.state)})}catch(e){0}var u=c.length>1?Promise.all(c.map(function(e){return e(a)})):c[0](a);return u.then(function(t){try{r._actionSubscribers.filter(function(e){return e.after}).forEach(function(e){return e.after(s,r.state)})}catch(e){0}return t})}},v.prototype.subscribe=function(e){return y(e,this._subscribers)},v.prototype.subscribeAction=function(e){var t="function"===typeof e?{before:e}:e;return y(t,this._actionSubscribers)},v.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch(function(){return e(r.state,r.getters)},t,n)},v.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._vm._data.$$state=e})},v.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),w(this,this.state,e,this._modules.get(e),n.preserveState),A(this,this.state)},v.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var n=S(t.state,e.slice(0,-1));m.delete(n,e[e.length-1])}),b(this)},v.prototype.hotUpdate=function(e){this._modules.update(e),b(this,!0)},v.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(v.prototype,g);var P=F(function(e,t){var n={};return k(t).forEach(function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=N(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0}),n}),O=F(function(e,t){var n={};return k(t).forEach(function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=N(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}}),n}),D=F(function(e,t){var n={};return k(t).forEach(function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||N(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0}),n}),I=F(function(e,t){var n={};return k(t).forEach(function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=N(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}}),n}),B=function(e){return{mapState:P.bind(null,e),mapGetters:D.bind(null,e),mapMutations:O.bind(null,e),mapActions:I.bind(null,e)}};function k(e){return Array.isArray(e)?e.map(function(e){return{key:e,val:e}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}})}function F(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function N(e,t,n){var r=e._modulesNamespaceMap[n];return r}var U={Store:v,install:R,version:"3.1.1",mapState:P,mapMutations:O,mapGetters:D,mapActions:I,createNamespacedHelpers:B};n["a"]=U}).call(this,r("c8ba"))},"308d":function(e,t,n){"use strict";var r=n("5d58"),i=n.n(r),o=n("67bb"),a=n.n(o);function s(e){return s="function"===typeof a.a&&"symbol"===typeof i.a?function(e){return typeof e}:function(e){return e&&"function"===typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},s(e)}function c(e){return c="function"===typeof a.a&&"symbol"===s(i.a)?function(e){return s(e)}:function(e){return e&&"function"===typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":s(e)},c(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?u(e):t}n.d(t,"a",function(){return l})},"30f1":function(e,t,n){"use strict";var r=n("b8e3"),i=n("63b6"),o=n("9138"),a=n("35e8"),s=n("481b"),c=n("8f60"),u=n("45f2"),l=n("53e2"),h=n("5168")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",m="values",v=function(){return this};e.exports=function(e,t,n,g,y,b,A){c(n,t,g);var w,x,E,_=function(e){if(!d&&e in S)return S[e];switch(e){case f:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",T=y==m,C=!1,S=e.prototype,L=S[h]||S[p]||y&&S[y],R=L||_(y),P=y?T?_("entries"):R:void 0,O="Array"==t&&S.entries||L;if(O&&(E=l(O.call(new e)),E!==Object.prototype&&E.next&&(u(E,M,!0),r||"function"==typeof E[h]||a(E,h,v))),T&&L&&L.name!==m&&(C=!0,R=function(){return L.call(this)}),r&&!A||!d&&!C&&S[h]||a(S,h,R),s[t]=R,s[M]=v,y)if(w={values:T?R:_(m),keys:b?R:_(f),entries:P},A)for(x in w)x in S||o(S,x,w[x]);else i(i.P+i.F*(d||C),t,w);return w}},"31f4":function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},"32e9":function(e,t,n){var r=n("86cc"),i=n("4630");e.exports=n("9e1e")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"32fc":function(e,t,n){var r=n("e53d").document;e.exports=r&&r.documentElement},"335c":function(e,t,n){var r=n("6b4c");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"33a4":function(e,t,n){var r=n("84f2"),i=n("2b4c")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},"355d":function(e,t){t.f={}.propertyIsEnumerable},"35e8":function(e,t,n){var r=n("d9f6"),i=n("aebd");e.exports=n("8e60")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"36c3":function(e,t,n){var r=n("335c"),i=n("25eb");e.exports=function(e){return r(i(e))}},"38fd":function(e,t,n){var r=n("69a8"),i=n("4bf8"),o=n("613b")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"3a38":function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"41a0":function(e,t,n){"use strict";var r=n("2aeb"),i=n("4630"),o=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},"454f":function(e,t,n){n("46a7");var r=n("584a").Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},4588:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"45f2":function(e,t,n){var r=n("d9f6").f,i=n("07e3"),o=n("5168")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"46a7":function(e,t,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"47ee":function(e,t,n){var r=n("c3a1"),i=n("9aa9"),o=n("355d");e.exports=function(e){var t=r(e),n=i.f;if(n){var a,s=n(e),c=o.f,u=0;while(s.length>u)c.call(e,a=s[u++])&&t.push(a)}return t}},"481b":function(e,t){e.exports={}},"4a59":function(e,t,n){var r=n("9b43"),i=n("1fa8"),o=n("33a4"),a=n("cb7c"),s=n("9def"),c=n("27ee"),u={},l={};t=e.exports=function(e,t,n,h,d){var p,f,m,v,g=d?function(){return e}:c(e),y=r(n,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if(v=t?y(a(f=e[b])[0],f[1]):y(e[b]),v===u||v===l)return v}else for(m=g.call(e);!(f=m.next()).done;)if(v=i(m,y,f.value,t),v===u||v===l)return v};t.BREAK=u,t.RETURN=l},"4aa6":function(e,t,n){e.exports=n("dc62")},"4bf8":function(e,t,n){var r=n("be13");e.exports=function(e){return Object(r(e))}},"4d16":function(e,t,n){e.exports=n("25b0")},"4e2b":function(e,t,n){"use strict";var r=n("4aa6"),i=n.n(r),o=n("4d16"),a=n.n(o);function s(e,t){return s=a.a||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=i()(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}n.d(t,"a",function(){return c})},"50ed":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},5168:function(e,t,n){var r=n("dbdb")("wks"),i=n("62a0"),o=n("e53d").Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"53e2":function(e,t,n){var r=n("07e3"),i=n("241e"),o=n("5559")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"551c":function(t,n,r){"use strict";var i,o,a,s,c=r("2d00"),u=r("7726"),l=r("9b43"),h=r("23c6"),d=r("5ca1"),p=r("d3f4"),f=r("d8e8"),m=r("f605"),v=r("4a59"),g=r("ebd6"),y=r("1991").set,b=r("8079")(),A=r("a5b8"),w=r("9c80"),x=r("a25f"),E=r("bcaa"),_="Promise",M=u.TypeError,T=u.process,C=T&&T.versions,S=C&&C.v8||"",L=u[_],R="process"==h(T),P=function(){},O=o=A.f,D=!!function(){try{var t=L.resolve(1),n=(t.constructor={})[r("2b4c")("species")]=function(e){e(P,P)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof n&&0!==S.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},B=function(t,n){if(!t._n){t._n=!0;var r=t._c;b(function(){var i=t._v,o=1==t._s,a=0,s=function(n){var r,a,s,c=o?n.ok:n.fail,u=n.resolve,l=n.reject,h=n.domain;try{c?(o||(2==t._h&&N(t),t._h=1),!0===c?r=i:(h&&h.enter(),r=c(i),h&&(h.exit(),s=!0)),r===n.promise?l(M("Promise-chain cycle")):(a=I(r))?a.call(r,u,l):u(r)):l(i)}catch(e){h&&!s&&h.exit(),l(e)}};while(r.length>a)s(r[a++]);t._c=[],t._n=!1,n&&!t._h&&k(t)})}},k=function(e){y.call(u,function(){var t,n,r,i=e._v,o=F(e);if(o&&(t=w(function(){R?T.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=R||F(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){y.call(u,function(){var t;R?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),B(t,!0))},j=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw M("Promise can't be resolved itself");(n=I(t))?b(function(){var i={_w:r,_d:!1};try{n.call(t,l(j,i,1),l(U,i,1))}catch(e){U.call(i,e)}}):(r._v=t,r._s=1,B(r,!1))}catch(e){U.call({_w:r,_d:!1},e)}}};D||(L=function(e){m(this,L,_,"_h"),f(e),i.call(this);try{e(l(j,this,1),l(U,this,1))}catch(t){U.call(this,t)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=r("dcbc")(L.prototype,{then:function(e,t){var n=O(g(this,L));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&B(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i;this.promise=e,this.resolve=l(j,e,1),this.reject=l(U,e,1)},A.f=O=function(e){return e===L||e===s?new a(e):o(e)}),d(d.G+d.W+d.F*!D,{Promise:L}),r("7f20")(L,_),r("7a56")(_),s=r("8378")[_],d(d.S+d.F*!D,_,{reject:function(e){var t=O(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(c||!D),_,{resolve:function(e){return E(c&&this===s?L:this,e)}}),d(d.S+d.F*!(D&&r("5cc5")(function(e){L.all(e)["catch"](P)})),_,{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=w(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=w(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},5537:function(e,t,n){var r=n("8378"),i=n("7726"),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(e,t,n){var r=n("dbdb")("keys"),i=n("62a0");e.exports=function(e){return r[e]||(r[e]=i(e))}},"584a":function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},"5b4e":function(e,t,n){var r=n("36c3"),i=n("b447"),o=n("0fc9");e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},"5ca1":function(e,t,n){var r=n("7726"),i=n("8378"),o=n("32e9"),a=n("2aba"),s=n("9b43"),c="prototype",u=function(e,t,n){var l,h,d,p,f=e&u.F,m=e&u.G,v=e&u.S,g=e&u.P,y=e&u.B,b=m?r:v?r[t]||(r[t]={}):(r[t]||{})[c],A=m?i:i[t]||(i[t]={}),w=A[c]||(A[c]={});for(l in m&&(n=t),n)h=!f&&b&&void 0!==b[l],d=(h?b:n)[l],p=y&&h?s(d,r):g&&"function"==typeof d?s(Function.call,d):d,b&&a(b,l,d,e&u.U),A[l]!=d&&o(A,l,p),g&&w[l]!=d&&(w[l]=d)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},"5cc5":function(t,n,r){var i=r("2b4c")("iterator"),o=!1;try{var a=[7][i]();a["return"]=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var a=[7],s=a[i]();s.next=function(){return{done:r=!0}},a[i]=function(){return s},t(a)}catch(e){}return r}},"5d58":function(e,t,n){e.exports=n("d8d6")},"60a3":function(e,t,n){"use strict";var r=n("2b0e"),i="undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;
/**
  * vue-class-component v7.1.0
  * (c) 2015-present Evan You
  * @license MIT
  */function o(e,t){a(e,t),Object.getOwnPropertyNames(t.prototype).forEach(function(n){a(e.prototype,t.prototype,n)}),Object.getOwnPropertyNames(t).forEach(function(n){a(e,t,n)})}function a(e,t,n){var r=n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t);r.forEach(function(r){var i=n?Reflect.getOwnMetadata(r,t,n):Reflect.getOwnMetadata(r,t);n?Reflect.defineMetadata(r,i,e,n):Reflect.defineMetadata(r,i,e)})}var s={__proto__:[]},c=s instanceof Array;function u(e){return function(t,n,r){var i="function"===typeof t?t:t.constructor;i.__decorators__||(i.__decorators__=[]),"number"!==typeof r&&(r=void 0),i.__decorators__.push(function(t){return e(t,n,r)})}}function l(e){var t=typeof e;return null==e||"object"!==t&&"function"!==t}function h(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var r in e.$options.props)e.hasOwnProperty(r)||n.push(r);n.forEach(function(n){"_"!==n.charAt(0)&&Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})})};var r=new t;t.prototype._init=n;var i={};return Object.keys(r).forEach(function(e){void 0!==r[e]&&(i[e]=r[e])}),i}var d=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function p(e,t){void 0===t&&(t={}),t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach(function(e){if("constructor"!==e)if(d.indexOf(e)>-1)t[e]=n[e];else{var r=Object.getOwnPropertyDescriptor(n,e);void 0!==r.value?"function"===typeof r.value?(t.methods||(t.methods={}))[e]=r.value:(t.mixins||(t.mixins=[])).push({data:function(){var t;return t={},t[e]=r.value,t}}):(r.get||r.set)&&((t.computed||(t.computed={}))[e]={get:r.get,set:r.set})}}),(t.mixins||(t.mixins=[])).push({data:function(){return h(this,e)}});var a=e.__decorators__;a&&(a.forEach(function(e){return e(t)}),delete e.__decorators__);var s=Object.getPrototypeOf(e.prototype),c=s instanceof r["a"]?s.constructor:r["a"],u=c.extend(t);return m(u,e,c),i&&o(u,e),u}var f={prototype:!0,arguments:!0,callee:!0,caller:!0};function m(e,t,n){Object.getOwnPropertyNames(t).forEach(function(r){if(!f[r]){var i=Object.getOwnPropertyDescriptor(e,r);if(!i||i.configurable){var o=Object.getOwnPropertyDescriptor(t,r);if(!c){if("cid"===r)return;var a=Object.getOwnPropertyDescriptor(n,r);if(!l(o.value)&&a&&a.value===o.value)return}0,Object.defineProperty(e,r,o)}}})}function v(e){return"function"===typeof e?p(e):function(t){return p(t,e)}}v.registerHooks=function(e){d.push.apply(d,e)};var g=v;n.d(t,"b",function(){return A}),n.d(t,"a",function(){return g}),n.d(t,"c",function(){return r["a"]});var y="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function b(e,t,n){y&&(Array.isArray(e)||"function"===typeof e||"undefined"!==typeof e.type||(e.type=Reflect.getMetadata("design:type",t,n)))}function A(e){return void 0===e&&(e={}),function(t,n){b(e,t,n),u(function(t,n){(t.props||(t.props={}))[n]=e})(t,n)}}},"613b":function(e,t,n){var r=n("5537")("keys"),i=n("ca5a");e.exports=function(e){return r[e]||(r[e]=i(e))}},"626a":function(e,t,n){var r=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"62a0":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"63b6":function(e,t,n){var r=n("e53d"),i=n("584a"),o=n("d864"),a=n("35e8"),s=n("07e3"),c="prototype",u=function(e,t,n){var l,h,d,p=e&u.F,f=e&u.G,m=e&u.S,v=e&u.P,g=e&u.B,y=e&u.W,b=f?i:i[t]||(i[t]={}),A=b[c],w=f?r:m?r[t]:(r[t]||{})[c];for(l in f&&(n=t),n)h=!p&&w&&void 0!==w[l],h&&s(b,l)||(d=h?w[l]:n[l],b[l]=f&&"function"!=typeof w[l]?n[l]:g&&h?o(d,r):y&&w[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(d):v&&"function"==typeof d?o(Function.call,d):d,v&&((b.virtual||(b.virtual={}))[l]=d,e&u.R&&A&&!A[l]&&a(A,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},6718:function(e,t,n){var r=n("e53d"),i=n("584a"),o=n("b8e3"),a=n("ccb9"),s=n("d9f6").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},"67bb":function(e,t,n){e.exports=n("f921")},6821:function(e,t,n){var r=n("626a"),i=n("be13");e.exports=function(e){return r(i(e))}},"69a8":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"69d3":function(e,t,n){n("6718")("asyncIterator")},"6a99":function(e,t,n){var r=n("d3f4");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"6abf":function(e,t,n){var r=n("e6f3"),i=n("1691").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"6b4c":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"6bb5":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("061b"),i=n.n(r),o=n("4d16"),a=n.n(o);function s(e){return s=a.a?i.a:function(e){return e.__proto__||i()(e)},s(e)}},"6c1c":function(e,t,n){n("c367");for(var r=n("e53d"),i=n("35e8"),o=n("481b"),a=n("5168")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=r[u],h=l&&l.prototype;h&&!h[a]&&i(h,a,u),o[u]=o.Array}},"71c1":function(e,t,n){var r=n("3a38"),i=n("25eb");e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536)}}},7333:function(e,t,n){"use strict";var r=n("9e1e"),i=n("0d58"),o=n("2621"),a=n("52a7"),s=n("4bf8"),c=n("626a"),u=Object.assign;e.exports=!u||n("79e5")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){var n=s(e),u=arguments.length,l=1,h=o.f,d=a.f;while(u>l){var p,f=c(arguments[l++]),m=h?i(f).concat(h(f)):i(f),v=m.length,g=0;while(v>g)p=m[g++],r&&!d.call(f,p)||(n[p]=f[p])}return n}:u},"765d":function(e,t,n){n("6718")("observable")},7726:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(e,t,n){var r=n("4588"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},"794b":function(e,t,n){e.exports=!n("8e60")&&!n("294c")(function(){return 7!=Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"79e5":function(t,n){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7a56":function(e,t,n){"use strict";var r=n("7726"),i=n("86cc"),o=n("9e1e"),a=n("2b4c")("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},"7e90":function(e,t,n){var r=n("d9f6"),i=n("e4ae"),o=n("c3a1");e.exports=n("8e60")?Object.defineProperties:function(e,t){i(e);var n,a=o(t),s=a.length,c=0;while(s>c)r.f(e,n=a[c++],t[n]);return e}},"7f20":function(e,t,n){var r=n("86cc").f,i=n("69a8"),o=n("2b4c")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},8079:function(t,n,r){var i=r("7726"),o=r("1991").set,a=i.MutationObserver||i.WebKitMutationObserver,s=i.process,c=i.Promise,u="process"==r("2d95")(s);t.exports=function(){var t,n,r,l=function(){var i,o;u&&(i=s.domain)&&i.exit();while(t){o=t.fn,t=t.next;try{o()}catch(e){throw t?r():n=void 0,e}}n=void 0,i&&i.enter()};if(u)r=function(){s.nextTick(l)};else if(!a||i.navigator&&i.navigator.standalone)if(c&&c.resolve){var h=c.resolve(void 0);r=function(){h.then(l)}}else r=function(){o.call(i,l)};else{var d=!0,p=document.createTextNode("");new a(l).observe(p,{characterData:!0}),r=function(){p.data=d=!d}}return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},8378:function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},8436:function(e,t){e.exports=function(){}},"84f2":function(e,t){e.exports={}},"85f2":function(e,t,n){e.exports=n("454f")},"86cc":function(t,n,r){var i=r("cb7c"),o=r("c69a"),a=r("6a99"),s=Object.defineProperty;n.f=r("9e1e")?Object.defineProperty:function(t,n,r){if(i(t),n=a(n,!0),i(r),o)try{return s(t,n,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},"8c4f":function(t,n,r){"use strict";
/*!
  * vue-router v3.0.7
  * (c) 2019 Evan You
  * @license MIT
  */function i(e,t){0}function o(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function a(e,t){for(var n in t)e[n]=t[n];return e}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,r=t.children,i=t.parent,o=t.data;o.routerView=!0;var s=i.$createElement,u=n.name,l=i.$route,h=i._routerViewCache||(i._routerViewCache={}),d=0,p=!1;while(i&&i._routerRoot!==i){var f=i.$vnode&&i.$vnode.data;f&&(f.routerView&&d++,f.keepAlive&&i._inactive&&(p=!0)),i=i.$parent}if(o.routerViewDepth=d,p)return s(h[u],o,r);var m=l.matched[d];if(!m)return h[u]=null,s();var v=h[u]=m.components[u];o.registerRouteInstance=function(e,t){var n=m.instances[u];(t&&n!==e||!t&&n===e)&&(m.instances[u]=t)},(o.hook||(o.hook={})).prepatch=function(e,t){m.instances[u]=t.componentInstance},o.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[u]&&(m.instances[u]=e.componentInstance)};var g=o.props=c(l,m.props&&m.props[u]);if(g){g=o.props=a({},g);var y=o.attrs=o.attrs||{};for(var b in g)v.props&&b in v.props||(y[b]=g[b],delete g[b])}return s(v,o,r)}};function c(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}var u=/[!'()*]/g,l=function(e){return"%"+e.charCodeAt(0).toString(16)},h=/%2C/g,d=function(e){return encodeURIComponent(e).replace(u,l).replace(h,",")},p=decodeURIComponent;function f(t,n,r){void 0===n&&(n={});var i,o=r||m;try{i=o(t||"")}catch(e){i={}}for(var a in n)i[a]=n[a];return i}function m(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach(function(e){var n=e.replace(/\+/g," ").split("="),r=p(n.shift()),i=n.length>0?p(n.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]}),t):t}function v(e){var t=e?Object.keys(e).map(function(t){var n=e[t];if(void 0===n)return"";if(null===n)return d(t);if(Array.isArray(n)){var r=[];return n.forEach(function(e){void 0!==e&&(null===e?r.push(d(t)):r.push(d(t)+"="+d(e)))}),r.join("&")}return d(t)+"="+d(n)}).filter(function(e){return e.length>0}).join("&"):null;return t?"?"+t:""}var g=/\/?$/;function y(t,n,r,i){var o=i&&i.options.stringifyQuery,a=n.query||{};try{a=b(a)}catch(e){}var s={name:n.name||t&&t.name,meta:t&&t.meta||{},path:n.path||"/",hash:n.hash||"",query:a,params:n.params||{},fullPath:x(n,o),matched:t?w(t):[]};return r&&(s.redirectedFrom=x(r,o)),Object.freeze(s)}function b(e){if(Array.isArray(e))return e.map(b);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=b(e[n]);return t}return e}var A=y(null,{path:"/"});function w(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function x(e,t){var n=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;void 0===i&&(i="");var o=t||v;return(n||"/")+o(r)+i}function E(e,t){return t===A?e===t:!!t&&(e.path&&t.path?e.path.replace(g,"")===t.path.replace(g,"")&&e.hash===t.hash&&_(e.query,t.query):!(!e.name||!t.name)&&(e.name===t.name&&e.hash===t.hash&&_(e.query,t.query)&&_(e.params,t.params)))}function _(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){var r=e[n],i=t[n];return"object"===typeof r&&"object"===typeof i?_(r,i):String(r)===String(i)})}function M(e,t){return 0===e.path.replace(g,"/").indexOf(t.path.replace(g,"/"))&&(!t.hash||e.hash===t.hash)&&T(e.query,t.query)}function T(e,t){for(var n in t)if(!(n in e))return!1;return!0}var C,S=[String,Object],L=[String,Array],R={name:"RouterLink",props:{to:{type:S,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:L,default:"click"}},render:function(e){var t=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),o=i.location,s=i.route,c=i.href,u={},l=n.options.linkActiveClass,h=n.options.linkExactActiveClass,d=null==l?"router-link-active":l,p=null==h?"router-link-exact-active":h,f=null==this.activeClass?d:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,v=o.path?y(null,o,null,n):s;u[m]=E(r,v),u[f]=this.exact?u[m]:M(r,v);var g=function(e){P(e)&&(t.replace?n.replace(o):n.push(o))},b={click:P};Array.isArray(this.event)?this.event.forEach(function(e){b[e]=g}):b[this.event]=g;var A={class:u};if("a"===this.tag)A.on=b,A.attrs={href:c};else{var w=O(this.$slots.default);if(w){w.isStatic=!1;var x=w.data=a({},w.data);x.on=b;var _=w.data.attrs=a({},w.data.attrs);_.href=c}else A.on=b}return e(this.tag,A,this.$slots.default)}};function P(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function O(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=O(t.children)))return t}}function D(e){if(!D.installed||C!==e){D.installed=!0,C=e;var t=function(e){return void 0!==e},n=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",s),e.component("RouterLink",R);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var I="undefined"!==typeof window;function B(e,t,n){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var o=e.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function k(e){var t="",n="",r=e.indexOf("#");r>=0&&(t=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}function F(e){return e.replace(/\/\//g,"/")}var N=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},U=ie,j=W,H=q,z=Q,G=re,V=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function W(e,t){var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";while(null!=(n=V.exec(e))){var c=n[0],u=n[1],l=n.index;if(a+=e.slice(o,l),o=l+c.length,u)a+=u[1];else{var h=e[o],d=n[2],p=n[3],f=n[4],m=n[5],v=n[6],g=n[7];a&&(r.push(a),a="");var y=null!=d&&null!=h&&h!==d,b="+"===v||"*"===v,A="?"===v||"*"===v,w=n[2]||s,x=f||m;r.push({name:p||i++,prefix:d||"",delimiter:w,optional:A,repeat:b,partial:y,asterisk:!!g,pattern:x?Z(x):g?".*":"[^"+K(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function q(e,t){return Q(W(e,t))}function X(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Y(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Q(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=r||{},s=a.pretty?X:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var l,h=o[u.name];if(null==h){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(N(h)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(l=s(h[d]),!t[c].test(l))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===d?u.prefix:u.delimiter)+l}}else{if(l=u.asterisk?Y(h):s(h),!t[c].test(l))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+l+'"');i+=u.prefix+l}}else i+=u}return i}}function K(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Z(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function $(e,t){return e.keys=t,e}function J(e){return e.sensitive?"":"i"}function ee(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return $(e,t)}function te(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(ie(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",J(n));return $(o,t)}function ne(e,t,n){return re(W(e,n),t,n)}function re(e,t,n){N(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)o+=K(s);else{var c=K(s.prefix),u="(?:"+s.pattern+")";t.push(s),s.repeat&&(u+="(?:"+c+u+")*"),u=s.optional?s.partial?c+"("+u+")?":"(?:"+c+"("+u+"))?":c+"("+u+")",o+=u}}var l=K(n.delimiter||"/"),h=o.slice(-l.length)===l;return r||(o=(h?o.slice(0,-l.length):o)+"(?:"+l+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+l+"|$)",$(new RegExp("^"+o,J(n)),t)}function ie(e,t,n){return N(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?ee(e,t):N(e)?te(e,t,n):ne(e,t,n)}U.parse=j,U.compile=H,U.tokensToFunction=z,U.tokensToRegExp=G;var oe=Object.create(null);function ae(t,n,r){n=n||{};try{var i=oe[t]||(oe[t]=U.compile(t));return n.pathMatch&&(n[0]=n.pathMatch),i(n,{pretty:!0})}catch(e){return""}finally{delete n[0]}}function se(e,t,n,r){var i=t||[],o=n||Object.create(null),a=r||Object.create(null);e.forEach(function(e){ce(i,o,a,e)});for(var s=0,c=i.length;s<c;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),c--,s--);return{pathList:i,pathMap:o,nameMap:a}}function ce(e,t,n,r,i,o){var a=r.path,s=r.name;var c=r.pathToRegexpOptions||{},u=le(a,i,c.strict);"boolean"===typeof r.caseSensitive&&(c.sensitive=r.caseSensitive);var l={path:u,regex:ue(u,c),components:r.components||{default:r.component},instances:{},name:s,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach(function(r){var i=o?F(o+"/"+r.path):void 0;ce(e,t,n,r,l,i)}),void 0!==r.alias){var h=Array.isArray(r.alias)?r.alias:[r.alias];h.forEach(function(o){var a={path:o,children:r.children};ce(e,t,n,a,i,l.path||"/")})}t[l.path]||(e.push(l.path),t[l.path]=l),s&&(n[s]||(n[s]=l))}function ue(e,t){var n=U(e,[],t);return n}function le(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]?e:null==t?e:F(t.path+"/"+e)}function he(e,t,n,r){var i="string"===typeof e?{path:e}:e;if(i._normalized)return i;if(i.name)return a({},e);if(!i.path&&i.params&&t){i=a({},i),i._normalized=!0;var o=a(a({},t.params),i.params);if(t.name)i.name=t.name,i.params=o;else if(t.matched.length){var s=t.matched[t.matched.length-1].path;i.path=ae(s,o,"path "+t.path)}else 0;return i}var c=k(i.path||""),u=t&&t.path||"/",l=c.path?B(c.path,u,n||i.append):u,h=f(c.query,i.query,r&&r.options.parseQuery),d=i.hash||c.hash;return d&&"#"!==d.charAt(0)&&(d="#"+d),{_normalized:!0,path:l,query:h,hash:d}}function de(e,t){var n=se(e),r=n.pathList,i=n.pathMap,o=n.nameMap;function a(e){se(e,r,i,o)}function s(e,n,a){var s=he(e,n,!1,t),c=s.name;if(c){var u=o[c];if(!u)return l(null,s);var h=u.regex.keys.filter(function(e){return!e.optional}).map(function(e){return e.name});if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var d in n.params)!(d in s.params)&&h.indexOf(d)>-1&&(s.params[d]=n.params[d]);return s.path=ae(u.path,s.params,'named route "'+c+'"'),l(u,s,a)}if(s.path){s.params={};for(var p=0;p<r.length;p++){var f=r[p],m=i[f];if(pe(m.regex,s.path,s.params))return l(m,s,a)}}return l(null,s)}function c(e,n){var r=e.redirect,i="function"===typeof r?r(y(e,n,null,t)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return l(null,n);var a=i,c=a.name,u=a.path,h=n.query,d=n.hash,p=n.params;if(h=a.hasOwnProperty("query")?a.query:h,d=a.hasOwnProperty("hash")?a.hash:d,p=a.hasOwnProperty("params")?a.params:p,c){o[c];return s({_normalized:!0,name:c,query:h,hash:d,params:p},void 0,n)}if(u){var f=fe(u,e),m=ae(f,p,'redirect route with path "'+f+'"');return s({_normalized:!0,path:m,query:h,hash:d},void 0,n)}return l(null,n)}function u(e,t,n){var r=ae(n,t.params,'aliased route with path "'+n+'"'),i=s({_normalized:!0,path:r});if(i){var o=i.matched,a=o[o.length-1];return t.params=i.params,l(a,t)}return l(null,t)}function l(e,n,r){return e&&e.redirect?c(e,r||n):e&&e.matchAs?u(e,n,e.matchAs):y(e,n,r,t)}return{match:s,addRoutes:a}}function pe(e,t,n){var r=t.match(e);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=e.keys[i-1],s="string"===typeof r[i]?decodeURIComponent(r[i]):r[i];a&&(n[a.name||"pathMatch"]=s)}return!0}function fe(e,t){return B(e,t.parent?t.parent.path:"/",!0)}var me=Object.create(null);function ve(){var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,"");window.history.replaceState({key:Re()},"",t),window.addEventListener("popstate",function(e){ye(),e.state&&e.state.key&&Pe(e.state.key)})}function ge(e,t,n,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick(function(){var o=be(),a=i.call(e,t,n,r?o:null);a&&("function"===typeof a.then?a.then(function(e){Me(e,o)}).catch(function(e){0}):Me(a,o))})}}function ye(){var e=Re();e&&(me[e]={x:window.pageXOffset,y:window.pageYOffset})}function be(){var e=Re();if(e)return me[e]}function Ae(e,t){var n=document.documentElement,r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-r.left-t.x,y:i.top-r.top-t.y}}function we(e){return _e(e.x)||_e(e.y)}function xe(e){return{x:_e(e.x)?e.x:window.pageXOffset,y:_e(e.y)?e.y:window.pageYOffset}}function Ee(e){return{x:_e(e.x)?e.x:0,y:_e(e.y)?e.y:0}}function _e(e){return"number"===typeof e}function Me(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var r=document.querySelector(e.selector);if(r){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=Ee(i),t=Ae(r,i)}else we(e)&&(t=xe(e))}else n&&we(e)&&(t=xe(e));t&&window.scrollTo(t.x,t.y)}var Te=I&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),Ce=I&&window.performance&&window.performance.now?window.performance:Date,Se=Le();function Le(){return Ce.now().toFixed(3)}function Re(){return Se}function Pe(e){Se=e}function Oe(t,n){ye();var r=window.history;try{n?r.replaceState({key:Se},"",t):(Se=Le(),r.pushState({key:Se},"",t))}catch(e){window.location[n?"replace":"assign"](t)}}function De(e){Oe(e,!0)}function Ie(e,t,n){var r=function(i){i>=e.length?n():e[i]?t(e[i],function(){r(i+1)}):r(i+1)};r(0)}function Be(t){return function(n,r,i){var a=!1,s=0,c=null;ke(t,function(t,n,r,u){if("function"===typeof t&&void 0===t.cid){a=!0,s++;var l,h=je(function(e){Ue(e)&&(e=e.default),t.resolved="function"===typeof e?e:C.extend(e),r.components[u]=e,s--,s<=0&&i()}),d=je(function(e){var t="Failed to resolve async component "+u+": "+e;c||(c=o(e)?e:new Error(t),i(c))});try{l=t(h,d)}catch(e){d(e)}if(l)if("function"===typeof l.then)l.then(h,d);else{var p=l.component;p&&"function"===typeof p.then&&p.then(h,d)}}}),a||i()}}function ke(e,t){return Fe(e.map(function(e){return Object.keys(e.components).map(function(n){return t(e.components[n],e.instances[n],e,n)})}))}function Fe(e){return Array.prototype.concat.apply([],e)}var Ne="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Ue(e){return e.__esModule||Ne&&"Module"===e[Symbol.toStringTag]}function je(e){var t=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!t)return t=!0,e.apply(this,n)}}var He=function(e,t){this.router=e,this.base=ze(t),this.current=A,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function ze(e){if(!e)if(I){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function Ge(e,t){var n,r=Math.max(e.length,t.length);for(n=0;n<r;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function Ve(e,t,n,r){var i=ke(e,function(e,r,i,o){var a=We(e,t);if(a)return Array.isArray(a)?a.map(function(e){return n(e,r,i,o)}):n(a,r,i,o)});return Fe(r?i.reverse():i)}function We(e,t){return"function"!==typeof e&&(e=C.extend(e)),e.options[t]}function qe(e){return Ve(e,"beforeRouteLeave",Ye,!0)}function Xe(e){return Ve(e,"beforeRouteUpdate",Ye)}function Ye(e,t){if(t)return function(){return e.apply(t,arguments)}}function Qe(e,t,n){return Ve(e,"beforeRouteEnter",function(e,r,i,o){return Ke(e,i,o,t,n)})}function Ke(e,t,n,r,i){return function(o,a,s){return e(o,a,function(e){"function"===typeof e&&r.push(function(){Ze(e,t.instances,n,i)}),s(e)})}}function Ze(e,t,n,r){t[n]&&!t[n]._isBeingDestroyed?e(t[n]):r()&&setTimeout(function(){Ze(e,t,n,r)},16)}He.prototype.listen=function(e){this.cb=e},He.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},He.prototype.onError=function(e){this.errorCbs.push(e)},He.prototype.transitionTo=function(e,t,n){var r=this,i=this.router.match(e,this.current);this.confirmTransition(i,function(){r.updateRoute(i),t&&t(i),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach(function(e){e(i)}))},function(e){n&&n(e),e&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach(function(t){t(e)}))})},He.prototype.confirmTransition=function(t,n,r){var a=this,s=this.current,c=function(e){o(e)&&(a.errorCbs.length?a.errorCbs.forEach(function(t){t(e)}):(i(!1,"uncaught error during route navigation:"),console.error(e))),r&&r(e)};if(E(t,s)&&t.matched.length===s.matched.length)return this.ensureURL(),c();var u=Ge(this.current.matched,t.matched),l=u.updated,h=u.deactivated,d=u.activated,p=[].concat(qe(h),this.router.beforeHooks,Xe(l),d.map(function(e){return e.beforeEnter}),Be(d));this.pending=t;var f=function(n,r){if(a.pending!==t)return c();try{n(t,s,function(e){!1===e||o(e)?(a.ensureURL(!0),c(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(c(),"object"===typeof e&&e.replace?a.replace(e):a.push(e)):r(e)})}catch(e){c(e)}};Ie(p,f,function(){var e=[],r=function(){return a.current===t},i=Qe(d,e,r),o=i.concat(a.router.resolveHooks);Ie(o,f,function(){if(a.pending!==t)return c();a.pending=null,n(t),a.router.app&&a.router.app.$nextTick(function(){e.forEach(function(e){e()})})})})},He.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach(function(n){n&&n(e,t)})};var $e=function(e){function t(t,n){var r=this;e.call(this,t,n);var i=t.options.scrollBehavior,o=Te&&i;o&&ve();var a=Je(this.base);window.addEventListener("popstate",function(e){var n=r.current,i=Je(r.base);r.current===A&&i===a||r.transitionTo(i,function(e){o&&ge(t,e,n,!0)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){Oe(F(r.base+e.fullPath)),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){De(F(r.base+e.fullPath)),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.ensureURL=function(e){if(Je(this.base)!==this.current.fullPath){var t=F(this.base+this.current.fullPath);e?Oe(t):De(t)}},t.prototype.getCurrentLocation=function(){return Je(this.base)},t}(He);function Je(e){var t=decodeURI(window.location.pathname);return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var et=function(e){function t(t,n,r){e.call(this,t,n),r&&tt(this.base)||nt()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router,n=t.options.scrollBehavior,r=Te&&n;r&&ve(),window.addEventListener(Te?"popstate":"hashchange",function(){var t=e.current;nt()&&e.transitionTo(rt(),function(n){r&&ge(e.router,n,t,!0),Te||at(n.fullPath)})})},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){ot(e.fullPath),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,function(e){at(e.fullPath),ge(r.router,e,o,!1),t&&t(e)},n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;rt()!==t&&(e?ot(t):at(t))},t.prototype.getCurrentLocation=function(){return rt()},t}(He);function tt(e){var t=Je(e);if(!/^\/#/.test(t))return window.location.replace(F(e+"/#"+t)),!0}function nt(){var e=rt();return"/"===e.charAt(0)||(at("/"+e),!1)}function rt(){var e=window.location.href,t=e.indexOf("#");if(t<0)return"";e=e.slice(t+1);var n=e.indexOf("?");if(n<0){var r=e.indexOf("#");e=r>-1?decodeURI(e.slice(0,r))+e.slice(r):decodeURI(e)}else n>-1&&(e=decodeURI(e.slice(0,n))+e.slice(n));return e}function it(e){var t=window.location.href,n=t.indexOf("#"),r=n>=0?t.slice(0,n):t;return r+"#"+e}function ot(e){Te?Oe(it(e)):window.location.hash=e}function at(e){Te?De(it(e)):window.location.replace(it(e))}var st=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var r=this;this.transitionTo(e,function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,t&&t(e)},n)},t.prototype.replace=function(e,t,n){var r=this;this.transitionTo(e,function(e){r.stack=r.stack.slice(0,r.index).concat(e),t&&t(e)},n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,function(){t.index=n,t.updateRoute(r)})}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(He),ct=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=de(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Te&&!1!==e.fallback,this.fallback&&(t="hash"),I||(t="abstract"),this.mode=t,t){case"history":this.history=new $e(this,e.base);break;case"hash":this.history=new et(this,e.base,this.fallback);break;case"abstract":this.history=new st(this,e.base);break;default:0}},ut={currentRoute:{configurable:!0}};function lt(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function ht(e,t,n){var r="hash"===n?"#"+t:t;return e?F(e+"/"+r):r}ct.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},ut.currentRoute.get=function(){return this.history&&this.history.current},ct.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null)}),!this.app){this.app=e;var n=this.history;if(n instanceof $e)n.transitionTo(n.getCurrentLocation());else if(n instanceof et){var r=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen(function(e){t.apps.forEach(function(t){t._route=e})})}},ct.prototype.beforeEach=function(e){return lt(this.beforeHooks,e)},ct.prototype.beforeResolve=function(e){return lt(this.resolveHooks,e)},ct.prototype.afterEach=function(e){return lt(this.afterHooks,e)},ct.prototype.onReady=function(e,t){this.history.onReady(e,t)},ct.prototype.onError=function(e){this.history.onError(e)},ct.prototype.push=function(e,t,n){this.history.push(e,t,n)},ct.prototype.replace=function(e,t,n){this.history.replace(e,t,n)},ct.prototype.go=function(e){this.history.go(e)},ct.prototype.back=function(){this.go(-1)},ct.prototype.forward=function(){this.go(1)},ct.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map(function(e){return Object.keys(e.components).map(function(t){return e.components[t]})})):[]},ct.prototype.resolve=function(e,t,n){t=t||this.history.current;var r=he(e,t,n,this),i=this.match(r,t),o=i.redirectedFrom||i.fullPath,a=this.history.base,s=ht(a,o,this.mode);return{location:r,route:i,href:s,normalizedTo:r,resolved:i}},ct.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==A&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(ct.prototype,ut),ct.install=D,ct.version="3.0.7",I&&window.Vue&&window.Vue.use(ct),n["a"]=ct},"8e60":function(e,t,n){e.exports=!n("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"8f60":function(e,t,n){"use strict";var r=n("a159"),i=n("aebd"),o=n("45f2"),a={};n("35e8")(a,n("5168")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},9003:function(e,t,n){var r=n("6b4c");e.exports=Array.isArray||function(e){return"Array"==r(e)}},9138:function(e,t,n){e.exports=n("35e8")},9427:function(e,t,n){var r=n("63b6");r(r.S,"Object",{create:n("a159")})},"9aa9":function(e,t){t.f=Object.getOwnPropertySymbols},"9ab4":function(e,t,n){"use strict";n.d(t,"a",function(){return r});function r(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}},"9b43":function(e,t,n){var r=n("d8e8");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,n){var r=n("2b4c")("unscopables"),i=Array.prototype;void 0==i[r]&&n("32e9")(i,r,{}),e.exports=function(e){i[r][e]=!0}},"9c80":function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},"9def":function(e,t,n){var r=n("4588"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"9e1e":function(e,t,n){e.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a159:function(e,t,n){var r=n("e4ae"),i=n("7e90"),o=n("1691"),a=n("5559")("IE_PROTO"),s=function(){},c="prototype",u=function(){var e,t=n("1ec9")("iframe"),r=o.length,i="<",a=">";t.style.display="none",n("32fc").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),u=e.F;while(r--)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},a25f:function(e,t,n){var r=n("7726"),i=r.navigator;e.exports=i&&i.userAgent||""},a5b8:function(e,t,n){"use strict";var r=n("d8e8");function i(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},aebd:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},b048:function(t,n,r){(function(n){var r;(function(e){t.exports=e()})(function(){var t;return function(){function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return o(n||e)},h,h.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}return e}()({1:[function(e,t,n){var r=Object.prototype.toString;function i(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===r.call(e.buffer)||Array.isArray(e)}t.exports=i},{}],2:[function(e,t,n){t.exports=function(e,t){return"number"===typeof e?e:"number"===typeof t?t:0}},{}],3:[function(e,t,n){"use strict";n.byteLength=l,n.toByteArray=h,n.fromByteArray=f;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function l(e){return 3*e.length/4-u(e)}function h(e){var t,n,r,a,s,c=e.length;a=u(e),s=new o(3*c/4-a),n=a>0?c-4:c;var l=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;return 2===a?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[l++]=255&r):1===a&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r),s}function d(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function p(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(d(r));return i.join("")}function f(e){for(var t,n=e.length,i=n%3,o="",a=[],s=16383,c=0,u=n-i;c<u;c+=s)a.push(p(e,c,c+s>u?u:c+s));return 1===i?(t=e[n-1],o+=r[t>>2],o+=r[t<<4&63],o+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],o+=r[t>>10],o+=r[t>>4&63],o+=r[t<<2&63],o+="="),a.push(o),a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],4:[function(e,t,n){"use strict";t.exports={createLink:function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("link");for(var i in r.href=e,r.rel="stylesheet",t)if(t.hasOwnProperty(i)){var o=t[i];r.setAttribute("data-"+i,o)}n.appendChild(r)},createStyle:function(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");for(var i in r.type="text/css",t)if(t.hasOwnProperty(i)){var o=t[i];r.setAttribute("data-"+i,o)}r.sheet?(r.innerHTML=e,r.sheet.cssText=e,n.appendChild(r)):r.styleSheet?(n.appendChild(r),r.styleSheet.cssText=e):(r.appendChild(document.createTextNode(e)),n.appendChild(r))}}},{}],5:[function(e,t,n){var r=e("buffer").Buffer;t.exports=function(e,t){if(r.isBuffer(e)&&r.isBuffer(t)){if("function"===typeof e.equals)return e.equals(t);if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}},{buffer:6}],6:[function(t,r,i){(function(n){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
"use strict";var r=t("base64-js"),o=t("ieee754"),a=t("isarray");function s(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function c(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(c()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return h(this,e,t,n)}function h(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,n,r):"string"===typeof t?m(e,t,n):y(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t,n,r){return d(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}function f(e,t){if(d(t),e=u(e,t<0?0:0|b(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function m(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|w(t,n);e=u(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function v(e,t){var n=t.length<0?0:0|b(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function g(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=v(e,t),e}function y(e,t){if(l.isBuffer(t)){var n=0|b(t.length);return e=u(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||ne(t.length)?u(e,0):v(e,t);if("Buffer"===t.type&&a(t.data))return v(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(e){if(e>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|e}function A(e){return+e!=e&&(e=0),l.alloc(+e)}function w(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ee(e).length;default:if(r)return Z(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return D(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return F(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function E(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:M(e,t,n,r,i);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):M(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function M(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(u(e,o+d)!==u(t,d)){h=!1;break}if(h)return o}return-1}function T(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function C(e,t,n,r){return te(Z(t,e.length-n),e,n,r)}function S(e,t,n,r){return te($(t),e,n,r)}function L(e,t,n,r){return S(e,t,n,r)}function R(e,t,n,r){return te(ee(t),e,n,r)}function P(e,t,n,r){return te(J(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function D(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var o,a,s,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:o=e[i+1],128===(192&o)&&(c=(31&u)<<6|63&o,c>127&&(l=c));break;case 3:o=e[i+1],a=e[i+2],128===(192&o)&&128===(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return B(r)}i.Buffer=l,i.SlowBuffer=A,i.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:s(),i.kMaxLength=c(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return h(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return p(null,e,t,n)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},l.byteLength=w,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?D(this,0,e):x.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n),h=0;h<s;++h)if(c[h]!==u[h]){o=c[h],a=u[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return T(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return L(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function B(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function F(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=K(e[o]);return i}function U(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function z(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function G(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function V(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(e,t,n,r,i){return i||V(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function q(e,t,n,r,i){return i||V(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var r=this[e+--t],i=1;while(t>0&&(i*=256))r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var r=this[e],i=1,o=0;while(++o<t&&(i*=256))r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var r=t,i=1,o=this[e+--r];while(r>0&&(i*=256))o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var o=1,a=0;this[t]=255&e;while(++a<n&&(o*=256))this[t+a]=e/o&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var o=n-1,a=1;this[t+o]=255&e;while(--o>=0&&(a*=256))this[t+o]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;this[t]=255&e;while(++o<n&&(a*=256))e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;this[t+o]=255&e;while(--o>=0&&(a*=256))e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return W(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return W(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:Z(new l(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var X=/[^+\/0-9A-Za-z-_]/g;function Y(e){if(e=Q(e).replace(X,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function Q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function Z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,r,i,o=[],a=0;a<e.length;++a){if((t-=2)<0)break;n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function ee(e){return r.toByteArray(Y(e))}function te(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function ne(e){return e!==e}}).call(this,"undefined"!==typeof n?n:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"base64-js":3,ieee754:16,isarray:21}],7:[function(t,n,r){(function(){if("undefined"!==typeof window)try{var t=new window.CustomEvent("test",{cancelable:!0});if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var n=function(e,n){var r,i;return n=n||{bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent"),r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i=r.preventDefault,r.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},r};n.prototype=window.Event.prototype,window.CustomEvent=n}})()},{}],8:[function(t,n,r){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" "),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n),e}function a(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?r.storage.removeItem("debug"):r.storage.debug=t}catch(e){}}function c(){var t;try{t=r.storage.debug}catch(e){}return t}function u(){try{return window.localStorage}catch(e){}}r=n.exports=t("./debug"),r.log=a,r.formatArgs=o,r.save=s,r.load=c,r.useColors=i,r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(c())},{"./debug":9}],9:[function(e,t,n){n=t.exports=o,n.coerce=u,n.disable=s,n.enable=a,n.enabled=c,n.names=[],n.skips=[],n.formatters={};var r=0;function i(){return n.colors[r++%n.colors.length]}function o(e){function t(){}function r(){var e=r;null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var t=Array.prototype.slice.call(arguments);t[0]=n.coerce(t[0]),"string"!==typeof t[0]&&(t=["%o"].concat(t));var o=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,i){if("%%"===r)return r;o++;var a=n.formatters[i];if("function"===typeof a){var s=t[o];r=a.call(e,s),t.splice(o,1),o--}return r}),"function"===typeof n.formatArgs&&(t=n.formatArgs.apply(e,t));var a=r.log||n.log||console.log.bind(console);a.apply(e,t)}t.enabled=!1,r.enabled=!0;var o=n.enabled(e)?r:t;return o.namespace=e,o}function a(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function c(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}},{}],10:[function(e,t,n){"use strict";var r=e("is-obj"),i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function s(e,t,n){var o=t[n];if(void 0!==o&&null!==o){if(i.call(e,n)&&(void 0===e[n]||null===e[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");i.call(e,n)&&r(o)?e[n]=c(Object(e[n]),t[n]):e[n]=o}}function c(e,t){if(e===t)return e;for(var n in t=Object(t),t)i.call(t,n)&&s(e,t,n);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),a=0;a<r.length;a++)o.call(t,r[a])&&s(e,t,r[a]);return e}t.exports=function(e){e=a(e);for(var t=1;t<arguments.length;t++)c(e,arguments[t]);return e}},{"is-obj":20}],11:[function(t,n,r){
/*! (C) WebReflection Mit Style License */
(function(t,n,r,i){"use strict";function o(e,t){for(var n=0,r=e.length;n<r;n++)g(e[n],t)}function a(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],_(t,j[c(t)])}function s(e){return function(t){ie(t)&&(g(t,e),o(t.querySelectorAll(H),e))}}function c(e){var t=se.call(e,"is"),n=e.nodeName.toUpperCase(),r=G.call(U,t?k+t.toUpperCase():B+n);return t&&-1<r&&!u(n,t)?-1:r}function u(e,t){return-1<H.indexOf(e+'[is="'+t+'"]')}function l(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,i=e.target;ge&&(!i||i===t)&&t.attributeChangedCallback&&"style"!==r&&e.prevValue!==e.newValue&&t.attributeChangedCallback(r,n===e[L]?null:e.prevValue,n===e[P]?null:e.newValue)}function h(e){var t=s(e);return function(e){y.push(t,e.target)}}function d(e){ve&&(ve=!1,e.currentTarget.removeEventListener(D,d)),o((e.target||n).querySelectorAll(H),e.detail===C?C:T),re&&m()}function p(e,t){var n=this;ce.call(n,e,t),b.call(n,{target:n})}function f(e,t){ee(e,t),x?x.observe(e,he):(me&&(e.setAttribute=p,e[M]=w(e),e.addEventListener(I,b)),e.addEventListener(O,l)),e.createdCallback&&ge&&(e.created=!0,e.createdCallback(),e.created=!1)}function m(){for(var e,t=0,n=oe.length;t<n;t++)e=oe[t],z.contains(e)||(n--,oe.splice(t--,1),g(e,C))}function v(e){throw new Error("A "+e+" type is already registered")}function g(e,t){var n,r=c(e);-1<r&&(E(e,j[r]),r=0,t!==T||e[T]?t===C&&!e[C]&&(e[T]=!1,e[C]=!0,r=1):(e[C]=!1,e[T]=!0,r=1,re&&G.call(oe,e)<0&&oe.push(e)),r&&(n=e[t+"Callback"])&&n.call(e))}if(!(i in n)){var y,b,A,w,x,E,_,M="__"+i+(1e5*Math.random()>>0),T="attached",C="detached",S="extends",L="ADDITION",R="MODIFICATION",P="REMOVAL",O="DOMAttrModified",D="DOMContentLoaded",I="DOMSubtreeModified",B="<",k="=",F=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,N=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],U=[],j=[],H="",z=n.documentElement,G=U.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},V=r.prototype,W=V.hasOwnProperty,q=V.isPrototypeOf,X=r.defineProperty,Y=r.getOwnPropertyDescriptor,Q=r.getOwnPropertyNames,K=r.getPrototypeOf,Z=r.setPrototypeOf,$=!!r.__proto__,J=r.create||function e(t){return t?(e.prototype=t,new e):this},ee=Z||($?function(e,t){return e.__proto__=t,e}:Q&&Y?function(){function e(e,t){for(var n,r=Q(t),i=0,o=r.length;i<o;i++)n=r[i],W.call(e,n)||X(e,n,Y(t,n))}return function(t,n){do{e(t,n)}while((n=K(n))&&!q.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),te=t.MutationObserver||t.WebKitMutationObserver,ne=(t.HTMLElement||t.Element||t.Node).prototype,re=!q.call(ne,z),ie=re?function(e){return 1===e.nodeType}:function(e){return q.call(ne,e)},oe=re&&[],ae=ne.cloneNode,se=ne.getAttribute,ce=ne.setAttribute,ue=ne.removeAttribute,le=n.createElement,he=te&&{attributes:!0,characterData:!0,attributeOldValue:!0},de=te||function(e){me=!1,z.removeEventListener(O,de)},pe=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,10)},fe=!1,me=!0,ve=!0,ge=!0;Z||$?(E=function(e,t){q.call(t,e)||f(e,t)},_=f):(E=function(e,t){e[M]||(e[M]=r(!0),f(e,t))},_=E),re?(me=!1,function(){var t=Y(ne,"addEventListener"),n=t.value,r=function(e){var t=new CustomEvent(O,{bubbles:!0});t.attrName=e,t.prevValue=se.call(this,e),t.newValue=null,t[P]=t.attrChange=2,ue.call(this,e),this.dispatchEvent(t)},i=function(t,n){var r=this.hasAttribute(t),i=r&&se.call(this,t);e=new CustomEvent(O,{bubbles:!0}),ce.call(this,t,n),e.attrName=t,e.prevValue=r?i:null,e.newValue=n,r?e[R]=e.attrChange=1:e[L]=e.attrChange=0,this.dispatchEvent(e)},o=function(e){var t,n=e.currentTarget,r=n[M],i=e.propertyName;r.hasOwnProperty(i)&&(r=r[i],t=new CustomEvent(O,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[i]||null,null==t.prevValue?t[L]=t.attrChange=0:t[R]=t.attrChange=1,n.dispatchEvent(t))};t.value=function(e,t,a){e===O&&this.attributeChangedCallback&&this.setAttribute!==i&&(this[M]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=r,n.call(this,"propertychange",o)),n.call(this,e,t,a)},X(ne,"addEventListener",t)}()):te||(z.addEventListener(O,de),z.setAttribute(M,1),z.removeAttribute(M),me&&(b=function(e){var t,n,r,i=this;if(i===e.target){for(r in t=i[M],i[M]=n=w(i),n){if(!(r in t))return A(0,i,r,t[r],n[r],L);if(n[r]!==t[r])return A(1,i,r,t[r],n[r],R)}for(r in t)if(!(r in n))return A(2,i,r,t[r],n[r],P)}},A=function(e,t,n,r,i,o){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};a[o]=e,l(a)},w=function(e){for(var t,n,r={},i=e.attributes,o=0,a=i.length;o<a;o++)t=i[o],n=t.name,"setAttribute"!==n&&(r[n]=t.value);return r})),n[i]=function(e,t){if(r=e.toUpperCase(),fe||(fe=!0,te?(x=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new te(function(r){for(var i,o,a,s=0,c=r.length;s<c;s++)i=r[s],"childList"===i.type?(n(i.addedNodes,e),n(i.removedNodes,t)):(o=i.target,ge&&o.attributeChangedCallback&&"style"!==i.attributeName&&(a=se.call(o,i.attributeName),a!==i.oldValue&&o.attributeChangedCallback(i.attributeName,i.oldValue,a)))})}(s(T),s(C)),x.observe(n,{childList:!0,subtree:!0})):(y=[],pe(function e(){while(y.length)y.shift().call(null,y.shift());pe(e)}),n.addEventListener("DOMNodeInserted",h(T)),n.addEventListener("DOMNodeRemoved",h(C))),n.addEventListener(D,d),n.addEventListener("readystatechange",d),n.createElement=function(e,t){var r=le.apply(n,arguments),i=""+e,o=G.call(U,(t?k:B)+(t||i).toUpperCase()),a=-1<o;return t&&(r.setAttribute("is",t=t.toLowerCase()),a&&(a=u(i.toUpperCase(),t))),ge=!n.createElement.innerHTMLHelper,a&&_(r,j[o]),r},ne.cloneNode=function(e){var t=ae.call(this,!!e),n=c(t);return-1<n&&_(t,j[n]),e&&a(t.querySelectorAll(H)),t}),-2<G.call(U,k+r)+G.call(U,B+r)&&v(e),!F.test(r)||-1<G.call(N,r))throw new Error("The type "+e+" is invalid");var r,i,l=function(){return f?n.createElement(m,r):n.createElement(m)},p=t||V,f=W.call(p,S),m=f?t[S].toUpperCase():r;return f&&-1<G.call(U,B+m)&&v(m),i=U.push((f?k:B)+r)-1,H=H.concat(H.length?",":"",f?m+'[is="'+e.toLowerCase()+'"]':m),l.prototype=j[i]=W.call(p,"prototype")?p.prototype:J(ne),o(n.querySelectorAll(H),T),l}}})(window,document,Object,"registerElement")},{}],12:[function(e,t,n){t.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],13:[function(e,t,n){var r=e("dtype");function i(e,t,n){if(!e)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(e)&&Array.isArray(e[0])){var i=e[0].length,o=e.length*i;t&&"string"!==typeof t||(t=new(r(t||"float32"))(o+n));var a=t.length-n;if(o!==a)throw new Error("source length "+o+" ("+i+"x"+e.length+") does not match destination length "+a);for(var s=0,c=n;s<e.length;s++)for(var u=0;u<i;u++)t[c++]=e[s][u]}else if(t&&"string"!==typeof t)t.set(e,n);else{var l=r(t||"float32");0===n?t=new l(e):(t=new l(e.length+n),t.set(e,n))}return t}t.exports=i},{dtype:12}],14:[function(e,t,n){var r=e("is-function");t.exports=a;var i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;function a(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===i.call(e)?s(e,t,n):"string"===typeof e?c(e,t,n):u(e,t,n)}function s(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&t.call(n,e[r],r,e)}function c(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e.charAt(r),r,e)}function u(e,t,n){for(var r in e)o.call(e,r)&&t.call(n,e[r],r,e)}},{"is-function":19}],15:[function(e,t,r){(function(e){var n;n="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},t.exports=n}).call(this,"undefined"!==typeof n?n:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],16:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,h=n?i-1:0,d=n?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+h],h+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+h],h+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+h>=1?d/c:d*Math.pow(2,1-h),t*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*c-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=f,a/=256,u-=8);e[n+p-f]|=128*m}},{}],17:[function(e,t,n){"function"===typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],18:[function(e,t,n){function r(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&r(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],19:[function(e,t,n){t.exports=i;var r=Object.prototype.toString;function i(e){var t=r.call(e);return"[object Function]"===t||"function"===typeof e&&"[object RegExp]"!==t||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},{}],20:[function(e,t,n){"use strict";t.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},{}],21:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],22:[function(e,t,n){var r=e("word-wrapper"),i=e("xtend"),o=e("as-number"),a=["x","e","a","o","n","s","r","c","u","m","v","w","z"],s=["m","w"],c=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],u="\t".charCodeAt(0),l=" ".charCodeAt(0),h=0,d=1,p=2;function f(e){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}function m(e){Object.defineProperty(f.prototype,e,{get:v(e),configurable:!0})}function v(e){return new Function(["return function "+e+"() {","  return this._"+e,"}"].join("\n"))()}function g(e,t){if(!e.chars||0===e.chars.length)return null;var n=E(e.chars,t);return n>=0?e.chars[n]:null}function y(e){for(var t=0;t<a.length;t++){var n=a[t].charCodeAt(0),r=E(e.chars,n);if(r>=0)return e.chars[r].height}return 0}function b(e){for(var t=0;t<s.length;t++){var n=s[t].charCodeAt(0),r=E(e.chars,n);if(r>=0)return e.chars[r]}return 0}function A(e){for(var t=0;t<c.length;t++){var n=c[t].charCodeAt(0),r=E(e.chars,n);if(r>=0)return e.chars[r].height}return 0}function w(e,t,n){if(!e.kernings||0===e.kernings.length)return 0;for(var r=e.kernings,i=0;i<r.length;i++){var o=r[i];if(o.first===t&&o.second===n)return o.amount}return 0}function x(e){return"center"===e?d:"right"===e?p:h}function E(e,t,n){n=n||0;for(var r=n;r<e.length;r++)if(e[r].id===t)return r;return-1}t.exports=function(e){return new f(e)},f.prototype.update=function(e){if(e=i({measure:this._measure},e),this._opt=e,this._opt.tabSize=o(this._opt.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,n=e.text||"",a=e.font;this._setupSpaceGlyphs(a);var s=r.lines(n,e),c=e.width||0;t.length=0;var u=s.reduce(function(e,t){return Math.max(e,t.width,c)},0),l=0,h=0,f=o(e.lineHeight,a.common.lineHeight),m=a.common.base,v=f-m,g=e.letterSpacing||0,b=f*s.length-v,E=x(this._opt.align);h-=b,this._width=u,this._height=b,this._descender=f-m,this._baseline=m,this._xHeight=y(a),this._capHeight=A(a),this._lineHeight=f,this._ascender=f-v-this._xHeight;var _=this;s.forEach(function(e,r){for(var i,o=e.start,s=e.end,c=e.width,m=o;m<s;m++){var v=n.charCodeAt(m),y=_.getGlyph(a,v);if(y){i&&(l+=w(a,i.id,y.id));var b=l;E===d?b+=(u-c)/2:E===p&&(b+=u-c),t.push({position:[b,h],data:y,index:m,line:r}),l+=y.xadvance+g,i=y}}h+=f,l=0}),this._linesTotal=s.length},f.prototype._setupSpaceGlyphs=function(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,e.chars&&0!==e.chars.length){var t=g(e,l)||b(e)||e.chars[0],n=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=i(t,{x:0,y:0,xadvance:n,id:u,xoffset:0,yoffset:0,width:0,height:0})}},f.prototype.getGlyph=function(e,t){var n=g(e,t);return n||(t===u?this._fallbackTabGlyph:t===l?this._fallbackSpaceGlyph:null)},f.prototype.computeMetrics=function(e,t,n,r){var i,o=this._opt.letterSpacing||0,a=this._opt.font,s=0,c=0,u=0;if(!a.chars||0===a.chars.length)return{start:t,end:t,width:0};n=Math.min(e.length,n);for(var l=t;l<n;l++){var h=e.charCodeAt(l),d=this.getGlyph(a,h);if(d){d.xoffset;var p=i?w(a,i.id,d.id):0;s+=p;var f=s+d.xadvance+o,m=s+d.width;if(m>=r||f>=r)break;s=f,c=m,i=d}u++}return i&&(c+=i.xoffset),{start:t,end:t+u,width:c}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(m)},{"as-number":2,"word-wrapper":47,xtend:50}],23:[function(t,n,r){(function(r){var i=t("xhr"),o=function(){},a=t("parse-bmfont-ascii"),s=t("parse-bmfont-xml"),c=t("parse-bmfont-binary"),u=t("./lib/is-binary"),l=t("xtend"),h=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();function d(e){var t=Object.prototype.toString;return"[object ArrayBuffer]"===t.call(e)}function p(e){if(h)return l(e,{responseType:"arraybuffer"});if("undefined"===typeof self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var t=new self.XMLHttpRequest;return t.overrideMimeType("text/plain; charset=x-user-defined"),l({xhr:t},e)}n.exports=function(t,n){n="function"===typeof n?n:o,"string"===typeof t?t={uri:t}:t||(t={});var l=t.binary;l&&(t=p(t)),i(t,function(i,l,h){if(i)return n(i);if(!/^2/.test(l.statusCode))return n(new Error("http status code: "+l.statusCode));if(!h)return n(new Error("no body result"));var p,f=!1;if(d(h)){var m=new Uint8Array(h);h=new r(m,"binary")}u(h)&&(f=!0,"string"===typeof h&&(h=new r(h,"binary"))),f||(r.isBuffer(h)&&(h=h.toString(t.encoding)),h=h.trim());try{var v=l.headers["content-type"];p=f?c(h):/json/.test(v)||"{"===h.charAt(0)?JSON.parse(h):/xml/.test(v)||"<"===h.charAt(0)?s(h):a(h)}catch(e){n(new Error("error parsing font "+e.message)),n=o}n(null,p)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":24,buffer:6,"parse-bmfont-ascii":26,"parse-bmfont-binary":27,"parse-bmfont-xml":28,xhr:48,xtend:50}],24:[function(e,t,n){(function(n){var r=e("buffer-equal"),i=new n([66,77,70,3]);t.exports=function(e){return"string"===typeof e?"BMF"===e.substring(0,3):e.length>4&&r(e.slice(0,4),i)}}).call(this,e("buffer").Buffer)},{buffer:6,"buffer-equal":5}],25:[function(e,t,n){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}t.exports=s()?Object.assign:function(e,t){for(var n,s,c=a(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]),n)i.call(n,l)&&(c[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(c[s[h]]=n[s[h]])}}return c}},{}],26:[function(e,t,n){function r(e,t){if(e=e.replace(/\t+/g," ").trim(),!e)return null;var n=e.indexOf(" ");if(-1===n)throw new Error("no named row at line "+t);var r=e.substring(0,n);e=e.substring(n+1),e=e.replace(/letter=[\'\"]\S+[\'\"]/gi,""),e=e.split("="),e=e.map(function(e){return e.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var o=[],a=0;a<e.length;a++){var s=e[a];0===a?o.push({key:s[0],data:""}):a===e.length-1?o[o.length-1].data=i(s[0]):(o[o.length-1].data=i(s[0]),o.push({key:s[1],data:""}))}var c={key:r,data:{}};return o.forEach(function(e){c.data[e.key]=e.data}),c}function i(e){return e&&0!==e.length?0===e.indexOf('"')||0===e.indexOf("'")?e.substring(1,e.length-1):-1!==e.indexOf(",")?o(e):parseInt(e,10):""}function o(e){return e.split(",").map(function(e){return parseInt(e,10)})}t.exports=function(e){if(!e)throw new Error("no data provided");e=e.toString().trim();var t={pages:[],chars:[],kernings:[]},n=e.split(/\r\n?|\n/g);if(0===n.length)throw new Error("no data in BMFont file");for(var i=0;i<n.length;i++){var o=r(n[i],i);if(o)if("page"===o.key){if("number"!==typeof o.data.id)throw new Error("malformed file at line "+i+" -- needs page id=N");if("string"!==typeof o.data.file)throw new Error("malformed file at line "+i+' -- needs page file="path"');t.pages[o.data.id]=o.data.file}else"chars"===o.key||"kernings"===o.key||("char"===o.key?t.chars.push(o.data):"kerning"===o.key?t.kernings.push(o.data):t[o.key]=o.data)}return t}},{}],27:[function(e,t,n){var r=[66,77,70];function i(e,t,n){if(n>t.length-1)return 0;var r=t.readUInt8(n++),i=t.readInt32LE(n);switch(n+=4,r){case 1:e.info=o(t,n);break;case 2:e.common=a(t,n);break;case 3:e.pages=s(t,n,i);break;case 4:e.chars=c(t,n,i);break;case 5:e.kernings=u(t,n,i);break}return 5+i}function o(e,t){var n={};n.size=e.readInt16LE(t);var r=e.readUInt8(t+2);return n.smooth=r>>7&1,n.unicode=r>>6&1,n.italic=r>>5&1,n.bold=r>>4&1,r>>3&1&&(n.fixedHeight=1),n.charset=e.readUInt8(t+3)||"",n.stretchH=e.readUInt16LE(t+4),n.aa=e.readUInt8(t+6),n.padding=[e.readInt8(t+7),e.readInt8(t+8),e.readInt8(t+9),e.readInt8(t+10)],n.spacing=[e.readInt8(t+11),e.readInt8(t+12)],n.outline=e.readUInt8(t+13),n.face=h(e,t+14),n}function a(e,t){var n={};n.lineHeight=e.readUInt16LE(t),n.base=e.readUInt16LE(t+2),n.scaleW=e.readUInt16LE(t+4),n.scaleH=e.readUInt16LE(t+6),n.pages=e.readUInt16LE(t+8);e.readUInt8(t+10);return n.packed=0,n.alphaChnl=e.readUInt8(t+11),n.redChnl=e.readUInt8(t+12),n.greenChnl=e.readUInt8(t+13),n.blueChnl=e.readUInt8(t+14),n}function s(e,t,n){for(var r=[],i=l(e,t),o=i.length+1,a=n/o,s=0;s<a;s++)r[s]=e.slice(t,t+i.length).toString("utf8"),t+=o;return r}function c(e,t,n){for(var r=[],i=n/20,o=0;o<i;o++){var a={},s=20*o;a.id=e.readUInt32LE(t+0+s),a.x=e.readUInt16LE(t+4+s),a.y=e.readUInt16LE(t+6+s),a.width=e.readUInt16LE(t+8+s),a.height=e.readUInt16LE(t+10+s),a.xoffset=e.readInt16LE(t+12+s),a.yoffset=e.readInt16LE(t+14+s),a.xadvance=e.readInt16LE(t+16+s),a.page=e.readUInt8(t+18+s),a.chnl=e.readUInt8(t+19+s),r[o]=a}return r}function u(e,t,n){for(var r=[],i=n/10,o=0;o<i;o++){var a={},s=10*o;a.first=e.readUInt32LE(t+0+s),a.second=e.readUInt32LE(t+4+s),a.amount=e.readInt16LE(t+8+s),r[o]=a}return r}function l(e,t){for(var n=t;n<e.length;n++)if(0===e[n])break;return e.slice(t,n)}function h(e,t){return l(e,t).toString("utf8")}t.exports=function(e){if(e.length<6)throw new Error("invalid buffer length for BMFont");var t=r.every(function(t,n){return e.readUInt8(n)===t});if(!t)throw new Error("BMFont missing BMF byte header");var n=3,o=e.readUInt8(n++);if(o>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var a={kernings:[],chars:[]},s=0;s<5;s++)n+=i(a,e,n);return a}},{}],28:[function(e,t,n){var r=e("./parse-attribs"),i=e("xml-parse-from-string"),o={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function a(e){var t=s(e);return t.reduce(function(e,t){var n=c(t.nodeName);return e[n]=t.nodeValue,e},{})}function s(e){for(var t=[],n=0;n<e.attributes.length;n++)t.push(e.attributes[n]);return t}function c(e){return o[e.toLowerCase()]||e}t.exports=function(e){e=e.toString();var t=i(e),n={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(e){var i=t.getElementsByTagName(e)[0];i&&(n[e]=r(a(i)))});var o=t.getElementsByTagName("pages")[0];if(!o)throw new Error("malformed file -- no <pages> element");for(var s=o.getElementsByTagName("page"),c=0;c<s.length;c++){var u=s[c],l=parseInt(u.getAttribute("id"),10),h=u.getAttribute("file");if(isNaN(l))throw new Error('malformed file -- page "id" attribute is NaN');if(!h)throw new Error('malformed file -- needs page "file" attribute');n.pages[parseInt(l,10)]=h}return["chars","kernings"].forEach(function(e){var i=t.getElementsByTagName(e)[0];if(i)for(var o=e.substring(0,e.length-1),s=i.getElementsByTagName(o),c=0;c<s.length;c++){var u=s[c];n[e].push(r(a(u)))}}),n}},{"./parse-attribs":29,"xml-parse-from-string":49}],29:[function(e,t,n){var r="chasrset";function i(e){return e.split(",").map(function(e){return parseInt(e,10)})}t.exports=function(e){for(var t in r in e&&(e["charset"]=e[r],delete e[r]),e)"face"!==t&&"charset"!==t&&(e[t]="padding"===t||"spacing"===t?i(e[t]):parseInt(e[t],10));return e}},{}],30:[function(e,t,n){var r=e("trim"),i=e("for-each"),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),function(e){var n=e.indexOf(":"),i=r(e.slice(0,n)).toLowerCase(),a=r(e.slice(n+1));"undefined"===typeof t[i]?t[i]=a:o(t[i])?t[i].push(a):t[i]=[t[i],a]}),t}},{"for-each":14,trim:45}],31:[function(e,t,r){(function(e){var n=e.performance||{},r=function(){var e=["now","webkitNow","msNow","mozNow","oNow"];while(e.length){var t=e.shift();if(t in n)return n[t].bind(n)}var r=Date.now||function(){return(new Date).getTime()},i=(n.timing||{}).navigationStart||r();return function(){return r()-i}}();r.performanceNow=n.now,r.noConflict=function(){n.now=r.performanceNow},r.conflict=function(){n.now=r},r.conflict(),t.exports=r}).call(this,"undefined"!==typeof n?n:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],32:[function(t,n,r){var i,o,a=n.exports={};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function u(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}function l(t){if(o===clearTimeout)return clearTimeout(t);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{return o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(function(){try{i="function"===typeof setTimeout?setTimeout:s}catch(e){i=s}try{o="function"===typeof clearTimeout?clearTimeout:c}catch(e){o=c}})();var h,d=[],p=!1,f=-1;function m(){p&&h&&(p=!1,h.length?d=h.concat(d):f=-1,d.length&&v())}function v(){if(!p){var e=u(m);p=!0;var t=d.length;while(t){h=d,d=[];while(++f<t)h&&h[f].run();f=-1,t=d.length}h=null,p=!1,l(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new g(e,t)),1!==d.length||p||u(v)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],33:[function(t,n,r){(function(t){var r=setTimeout,i="function"===typeof setImmediate&&setImmediate||function(e){r(e,1)};function o(e,t){return function(){e.apply(t,arguments)}}var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],p(e,o(u,this),o(l,this))}function c(t){var n=this;null!==this._state?i(function(){var r=n._state?t.onFulfilled:t.onRejected;if(null!==r){var i;try{i=r(n._value)}catch(e){return void t.reject(e)}t.resolve(i)}else(n._state?t.resolve:t.reject)(n._value)}):this._deferreds.push(t)}function u(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if("function"===typeof n)return void p(o(n,t),o(u,this),o(l,this))}this._state=!0,this._value=t,h.call(this)}catch(e){l.call(this,e)}}function l(e){this._state=!1,this._value=e,h.call(this)}function h(){for(var e=0,t=this._deferreds.length;e<t;e++)c.call(this,this._deferreds[e]);this._deferreds=null}function d(e,t,n,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r}function p(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(i){if(r)return;r=!0,n(i)}}s.prototype["catch"]=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=this;return new s(function(r,i){c.call(n,new d(e,t,r,i))})},s.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&a(arguments[0])?arguments[0]:arguments);return new s(function(t,n){if(0===e.length)return t([]);var r=e.length;function i(o,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,function(e){i(o,e)},n)}e[o]=a,0===--r&&t(e)}catch(c){n(c)}}for(var o=0;o<e.length;o++)i(o,e[o])})},s.resolve=function(e){return e&&"object"===typeof e&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.race=function(e){return new s(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},s._setImmediateFn=function(e){i=e},"undefined"!==typeof n&&n.exports?n.exports=s:t.Promise||(t.Promise=s)})(this)},{}],34:[function(e,t,n){var r=e("dtype"),i=e("an-array"),o=e("is-buffer"),a=[0,2,3],s=[2,1,3];t.exports=function(e,t){e&&(i(e)||o(e))||(t=e||{},e=null),t="number"===typeof t?{count:t}:t||{};for(var n="string"===typeof t.type?t.type:"uint16",c="number"===typeof t.count?t.count:1,u=t.start||0,l=!1!==t.clockwise?a:s,h=l[0],d=l[1],p=l[2],f=6*c,m=e||new(r(n))(f),v=0,g=0;v<f;v+=6,g+=4){var y=v+u;m[y+0]=g+0,m[y+1]=g+1,m[y+2]=g+2,m[y+3]=g+h,m[y+4]=g+d,m[y+5]=g+p}return m}},{"an-array":1,dtype:12,"is-buffer":18}],35:[function(t,n,r){"use strict";var i={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},o={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},a=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],s={CSS:{},springs:{}};function c(e,t,n){return Math.min(Math.max(e,t),n)}function u(e,t){return e.indexOf(t)>-1}function l(e,t){return e.apply(null,t)}var h=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,d=/^rgb/,p=/^hsl/,f={arr:function(e){return Array.isArray(e)},obj:function(e){return u(Object.prototype.toString.call(e),"Object")},pth:function(e){return f.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||f.svg(e)},str:function(e){return"string"===typeof e},fnc:function(e){return"function"===typeof e},und:function(e){return"undefined"===typeof e},hex:function(e){return h.test(e)},rgb:function(e){return d.test(e)},hsl:function(e){return p.test(e)},col:function(e){return f.hex(e)||f.rgb(e)||f.hsl(e)},key:function(e){return!i.hasOwnProperty(e)&&!o.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}},m=/\(([^)]+)\)/;function v(e){var t=m.exec(e);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function g(e,t){var n=v(e),r=c(f.und(n[0])?1:n[0],.1,100),i=c(f.und(n[1])?100:n[1],.1,100),o=c(f.und(n[2])?10:n[2],.1,100),a=c(f.und(n[3])?0:n[3],.1,100),u=Math.sqrt(i/r),l=o/(2*Math.sqrt(i*r)),h=l<1?u*Math.sqrt(1-l*l):0,d=1,p=l<1?(l*u-a)/h:-a+u;function m(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*u)*(d*Math.cos(h*n)+p*Math.sin(h*n)):(d+p*n)*Math.exp(-n*u),0===e||1===e?e:1-n}function g(){var t=s.springs[e];if(t)return t;var n=1/6,r=0,i=0;while(1)if(r+=n,1===m(r)){if(i++,i>=16)break}else i=0;var o=r*n*1e3;return s.springs[e]=o,o}return t?m:g}function y(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=c(e,1,10),r=c(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}function b(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var A=function(){var e=11,t=1/(e-1);function n(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function i(e){return 3*e}function o(e,t,o){return((n(t,o)*e+r(t,o))*e+i(t))*e}function a(e,t,o){return 3*n(t,o)*e*e+2*r(t,o)*e+i(t)}function s(e,t,n,r,i){var a,s,c=0;do{s=t+(n-t)/2,a=o(s,r,i)-e,a>0?n=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}function c(e,t,n,r){for(var i=0;i<4;++i){var s=a(t,n,r);if(0===s)return t;var c=o(t,n,r)-e;t-=c/s}return t}function u(n,r,i,u){if(0<=n&&n<=1&&0<=i&&i<=1){var l=new Float32Array(e);if(n!==r||i!==u)for(var h=0;h<e;++h)l[h]=o(h*t,n,i);return function(e){return n===r&&i===u?e:0===e||1===e?e:o(d(e),r,u)}}function d(r){for(var o=0,u=1,h=e-1;u!==h&&l[u]<=r;++u)o+=t;--u;var d=(r-l[u])/(l[u+1]-l[u]),p=o+d*t,f=a(p,n,i);return f>=.001?c(r,p,n,i):0===f?p:s(r,o,o+t,n,i)}}return u}(),w=function(){var e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],y],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,t){return function(n){return 1-y(e,t)(1-n)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,t){return function(n){return n<.5?y(e,t)(2*n)/2:1-y(e,t)(-2*n+2)/2}}]},n={linear:[.25,.25,.75,.75]};for(var r in t)for(var i=0,o=t[r].length;i<o;i++)n["ease"+r+e[i]]=t[r][i];return n}();function x(e,t){if(f.fnc(e))return e;var n=e.split("(")[0],r=w[n],i=v(e);switch(n){case"spring":return g(e,t);case"cubicBezier":return l(A,i);case"steps":return l(b,i);default:return f.fnc(r)?l(r,i):l(A,r)}}function E(t){try{var n=document.querySelectorAll(t);return n}catch(e){return}}var _=[];function M(e,t){for(var n=_,r=e.length,i=arguments.length>=2?arguments[1]:void 0,o=0;o<r;o++)if(o in e){var a=e[o];t.call(i,a,o,e)&&n.push(a)}return _=e,_.length=0,n}var T=[];function C(e){if(!e.length)return e;var t=T,n=e.pop();do{if(n.constructor===Array)for(var r=0;r<n.length;r++)e.push(n[r]);else t.push(n)}while(e.length&&void 0!==(n=e.pop()));return t.reverse(),T=e,_.length=0,t}function S(e){return f.arr(e)?e:(f.str(e)&&(e=E(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function L(e,t){return e.some(function(e){return e===t})}function R(e){var t={};for(var n in e)t[n]=e[n];return t}function P(e,t){var n=R(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function O(e,t){var n=R(e);for(var r in t)n[r]=f.und(e[r])?t[r]:e[r];return n}var D=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function I(e){var t=D.exec(e);return t?"rgba("+t[1]+",1)":e}var B=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function F(e){var t=e.replace(B,function(e,t,n,r){return t+t+n+n+r+r}),n=k.exec(t),r=parseInt(n[1],16),i=parseInt(n[2],16),o=parseInt(n[3],16);return"rgba("+r+","+i+","+o+",1)"}var N=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,U=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function j(e){var t,n,r,i=N.exec(e)||U.exec(e),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,c=i[4]||1;function u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var l=s<.5?s*(1+a):s+a-s*a,h=2*s-l;t=u(h,l,o+1/3),n=u(h,l,o),r=u(h,l,o-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+c+")"}function H(e){return f.rgb(e)?I(e):f.hex(e)?F(e):f.hsl(e)?j(e):void 0}var z=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function G(e){var t=z.exec(e);if(t)return t[2]}function V(e){return u(e,"translate")||"perspective"===e?"px":u(e,"rotate")||u(e,"skew")?"deg":void 0}function W(e,t){return f.fnc(e)?e(t.target,t.id,t.total):e}function q(e,t){return e.getAttribute(t)}function X(e,t,n){var r=G(t);if(L([n,"deg","rad","turn"],r))return t;var i=s.CSS[t+n];if(!f.und(i))return i;var o=100,a=document.createElement(e.tagName),c=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;c.appendChild(a),a.style.position="absolute",a.style.width=o+n;var u=o/a.offsetWidth;c.removeChild(a);var l=u*parseFloat(t);return s.CSS[t+n]=l,l}function Y(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?X(e,i,n):i}}function Q(e,t){return f.dom(e)&&!f.inp(e)&&(q(e,t)||f.svg(e)&&e[t])?"attribute":f.dom(e)&&L(a,t)?"transform":f.dom(e)&&"transform"!==t&&Y(e,t)?"css":null!=e[t]?"object":void 0}var K=/(\w+)\(([^)]*)\)/g;function Z(e){if(f.dom(e)){var t,n=e.style.transform||"",r=new Map;while(t=K.exec(n))r.set(t[1],t[2]);return r}}function $(e,t,n,r){var i=u(t,"scale")?1:0+V(t),o=Z(e).get(t)||i;return n&&(n.transforms.list.set(t,o),n.transforms["last"]=t),r?X(e,o,r):o}function J(e,t,n,r){switch(Q(e,t)){case"transform":return $(e,t,r,n);case"css":return Y(e,t,n);case"attribute":return q(e,t);default:return e[t]||0}}var ee=/^(\*=|\+=|-=)/;function te(e,t){var n=ee.exec(e);if(!n)return e;var r=G(e)||0,i=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}var ne=/\s/g;function re(e,t){if(f.col(e))return H(e);var n=G(e),r=n?e.substr(0,e.length-n.length):e;return t&&!ne.test(e)?r+t:r}function ie(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function oe(e){return 2*Math.PI*q(e,"r")}function ae(e){return 2*q(e,"width")+2*q(e,"height")}function se(e){return ie({x:q(e,"x1"),y:q(e,"y1")},{x:q(e,"x2"),y:q(e,"y2")})}function ce(e){for(var t,n=e.points,r=0,i=0;i<n.numberOfItems;i++){var o=n.getItem(i);i>0&&(r+=ie(t,o)),t=o}return r}function ue(e){var t=e.points;return ce(e)+ie(t.getItem(t.numberOfItems-1),t.getItem(0))}function le(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return oe(e);case"rect":return ae(e);case"line":return se(e);case"polyline":return ce(e);case"polygon":return ue(e)}}function he(e){var t=le(e);return e.setAttribute("stroke-dasharray",t),t}function de(e){var t=e.parentNode;while(f.svg(t))if(t=t.parentNode,!f.svg(t.parentNode))break;return t}function pe(e,t){var n=t||{},r=n.el||de(e),i=r.getBoundingClientRect(),o=q(r,"viewBox"),a=i.width,s=i.height,c=n.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:s/c[3]}}function fe(e,t){var n=f.str(e)?E(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:pe(n),totalLength:le(n)*(r/100)}}}function me(e,t){function n(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var r=pe(e.el,e.svg),i=n(),o=n(-1),a=n(1);switch(e.property){case"x":return(i.x-r.x)*r.w;case"y":return(i.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}var ve=/-?\d*\.?\d+/g;function ge(e,t){var n=re(f.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(ve)?n.match(ve).map(Number):[0],strings:f.str(e)||t?n.split(ve):[]}}function ye(e){var t=e?C(f.arr(e)?e.map(S):S(e)):[];return M(t,function(e,t,n){return n.indexOf(e)===t})}function be(e){var t=ye(e);return t.map(function(e,n){return{target:e,id:n,total:t.length,transforms:{list:Z(e)}}})}var Ae=/^spring/;function we(e,t){var n=R(t);if(Ae.test(n.easing)&&(n.duration=g(n.easing)),f.arr(e)){var r=e.length,i=2===r&&!f.obj(e[0]);i?e={value:e}:f.fnc(t.duration)||(n.duration=t.duration/r)}var o=f.arr(e)?e:[e];return o.map(function(e,n){var r=f.obj(e)&&!f.pth(e)?e:{value:e};return f.und(r.delay)&&(r.delay=n?0:t.delay),f.und(r.endDelay)&&(r.endDelay=n===o.length-1?t.endDelay:0),r}).map(function(e){return O(e,n)})}function xe(e){for(var t=M(C(e.map(function(e){return Object.keys(e)})),function(e){return f.key(e)}).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),n={},r=function(r){var i=t[r];n[i]=e.map(function(e){var t={};for(var n in e)f.key(n)?n==i&&(t.value=e[n]):t[n]=e[n];return t})},i=0;i<t.length;i++)r(i);return n}function Ee(e,t){var n=[],r=t.keyframes;for(var i in r&&(t=O(xe(r),t)),t)f.key(i)&&n.push({name:i,tweens:we(t[i],e)});return n}function _e(e,t){var n={};for(var r in e){var i=W(e[r],t);f.arr(i)&&(i=i.map(function(e){return W(e,t)}),1===i.length&&(i=i[0])),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function Me(e,t){var n;return e.tweens.map(function(r){var i=_e(r,t),o=i.value,a=f.arr(o)?o[1]:o,s=G(a),c=J(t.target,e.name,s,t),u=n?n.to.original:c,l=f.arr(o)?o[0]:u,h=G(l)||G(c),d=s||h;return f.und(a)&&(a=u),i.from=ge(l,d),i.to=ge(te(a,l),d),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=x(i.easing,i.duration),i.isPath=f.pth(o),i.isColor=f.col(i.from.original),i.isColor&&(i.round=1),n=i,i})}var Te={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,i){if(r.list.set(t,n),t===r.last||i){var o="";r.list.forEach(function(e,t){o+=t+"("+e+") "}),e.style.transform=o}}};function Ce(e,t){for(var n=be(e),r=0,i=n.length;r<i;r++){var o=n[r];for(var a in t){var s=W(t[a],o),c=o.target,u=G(s),l=J(c,a,u,o),h=u||G(l),d=te(re(s,h),l),p=Q(c,a);Te[p](c,a,d,o.transforms,!0)}}}function Se(e,t){var n=Q(e.target,t.name);if(n){var r=Me(t,e),i=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}function Le(e,t){return M(C(e.map(function(e){return t.map(function(t){return Se(e,t)})})),function(e){return!f.und(e)})}function Re(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,e.map(function(e){return r(e)+e.duration})):t.duration,i.delay=n?Math.min.apply(Math,e.map(function(e){return r(e)+e.delay})):t.delay,i.endDelay=n?i.duration-Math.max.apply(Math,e.map(function(e){return r(e)+e.duration-e.endDelay})):t.endDelay,i}var Pe=0;function Oe(e){var t=P(i,e),n=P(o,e),r=Ee(n,e),a=be(e.targets),s=Le(a,r),c=Re(s,n),u=Pe;return Pe++,O(t,{id:u,children:[],animatables:a,animations:s,duration:c.duration,delay:c.delay,endDelay:c.endDelay})}var De,Ie=[],Be=[],ke=function(){function e(){De=requestAnimationFrame(t)}function t(t){var n=Ie.length;if(n){var r=0;while(r<n){var i=Ie[r];if(i.paused){var o=Ie.indexOf(i);o>-1&&(Ie.splice(o,1),n=Ie.length)}else i.tick(t);r++}e()}else De=cancelAnimationFrame(De)}return e}();function Fe(){if(document.hidden){for(var e=0,t=Ie.length;e<t;e++)activeInstance[e].pause();Be=Ie.slice(0),Ie=[]}else for(var n=0,r=Be.length;n<r;n++)Be[n].play()}function Ne(e){void 0===e&&(e={});var t,n=0,r=0,i=0,o=0,a=null;function s(){return window.Promise&&new Promise(function(e){return a=e})}var u=s(),l=Oe(e);function h(){l.reversed=!l.reversed;for(var e=0,n=t.length;e<n;e++)t[e].reversed=l.reversed}function d(e){return l.reversed?l.duration-e:e}function p(){n=0,r=d(l.currentTime)*(1/Ne.speed)}function f(e,t){t&&t.seek(e-t.timelineOffset)}function m(e){if(l.reversePlayback)for(var n=o;n--;)f(e,t[n]);else for(var r=0;r<o;r++)f(e,t[r])}function v(e){var t=0,n=l.animations,r=n.length;while(t<r){var i=n[t],o=i.animatable,a=i.tweens,s=a.length-1,u=a[s];s&&(u=M(a,function(t){return e<t.end})[0]||u);for(var h=c(e-u.start-u.delay,0,u.duration)/u.duration,d=isNaN(h)?1:u.easing(h),p=u.to.strings,f=u.round,m=[],v=u.to.numbers.length,g=void 0,y=0;y<v;y++){var b=void 0,A=u.to.numbers[y],w=u.from.numbers[y]||0;b=u.isPath?me(u.value,d*A):w+d*(A-w),f&&(u.isColor&&y>2||(b=Math.round(b*f)/f)),m.push(b)}var x=p.length;if(x){g=p[0];for(var E=0;E<x;E++){p[E];var _=p[E+1],T=m[E];isNaN(T)||(g+=_?T+_:T+" ")}}else g=m[0];Te[i.type](o.target,i.property,g,o.transforms),i.currentValue=g,t++}}function g(e){l[e]&&!l.passThrough&&l[e](l)}function y(){l.remaining&&!0!==l.remaining&&l.remaining--}function b(e){var o=l.duration,p=l.delay,f=o-l.endDelay,b=d(e);l.progress=c(b/o*100,0,100),l.reversePlayback=b<l.currentTime,t&&m(b),!l.began&&l.currentTime>0&&(l.began=!0,g("begin"),g("loopBegin")),b<=p&&0!==l.currentTime&&v(0),(b>=f&&l.currentTime!==o||!o)&&v(o),b>p&&b<f?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,g("changeBegin")),g("change"),v(b)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,g("changeComplete")),l.currentTime=c(b,0,o),l.began&&g("update"),e>=o&&(r=0,y(),l.remaining?(n=i,g("loopComplete"),g("loopBegin"),"alternate"===l.direction&&h()):(l.paused=!0,l.completed||(l.completed=!0,g("loopComplete"),g("complete"),"Promise"in window&&(a(),u=s()))))}return l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children,o=t.length;for(var n=o;n--;)l.children[n].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,v(0)},l.set=function(e,t){return Ce(e,t),l},l.tick=function(e){i=e,n||(n=i),b((i+(r-n))*Ne.speed)},l.seek=function(e){b(d(e))},l.pause=function(){l.paused=!0,p()},l.play=function(){l.paused&&(l.paused=!1,Ie.push(l),p(),De||ke())},l.reverse=function(){h(),p()},l.restart=function(){l.reset(),l.play()},l.finished=u,l.reset(),l.autoplay&&l.play(),l}function Ue(e,t){for(var n=t.length;n--;)L(e,t[n].animatable.target)&&t.splice(n,1)}function je(e){for(var t=ye(e),n=Ie.length;n--;){var r=Ie[n],i=r.animations,o=r.children;Ue(t,i);for(var a=o.length;a--;){var s=o[a],c=s.animations;Ue(t,c),c.length||s.children.length||o.splice(a,1)}i.length||o.length||r.pause()}}function He(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?x(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s="first"===a,c="center"===a,u="last"===a,l=f.arr(e),h=l?parseFloat(e[0]):parseFloat(e),d=l?parseFloat(e[1]):0,p=G(l?e[1]:e)||0,m=t.start||0+(l?h:0),v=[],g=0;return function(e,t,f){if(s&&(a=0),c&&(a=(f-1)/2),u&&(a=f-1),!v.length){for(var y=0;y<f;y++){if(i){var b=c?(i[0]-1)/2:a%i[0],A=c?(i[1]-1)/2:Math.floor(a/i[0]),w=y%i[0],x=Math.floor(y/i[0]),E=b-w,_=A-x,M=Math.sqrt(E*E+_*_);"x"===o&&(M=-E),"y"===o&&(M=-_),v.push(M)}else v.push(Math.abs(a-y));g=Math.max.apply(Math,v)}r&&(v=v.map(function(e){return r(e/g)*g})),"reverse"===n&&(v=v.map(function(e){return o?e<0?-1*e:-e:Math.abs(g-e)}))}var T=l?(d-h)/g:h;return m+T*(Math.round(100*v[t])/100)+p}}function ze(e){void 0===e&&(e={});var t=Ne(e);return t.duration=0,t.add=function(n,r){var i=Ie.indexOf(t),a=t.children;function s(e){e.passThrough=!0}i>-1&&Ie.splice(i,1);for(var c=0;c<a.length;c++)s(a[c]);var u=O(n,P(o,e));u.targets=u.targets||e.targets;var l=t.duration;u.autoplay=!1,u.direction=t.direction,u.timelineOffset=f.und(r)?l:te(r,l),s(t),t.seek(u.timelineOffset);var h=Ne(u);s(h),a.push(h);var d=Re(a,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}document.addEventListener("visibilitychange",Fe),Ne.version="3.0.0",Ne.speed=1,Ne.running=Ie,Ne.remove=je,Ne.get=J,Ne.set=Ce,Ne.convertPx=X,Ne.path=fe,Ne.setDashoffset=he,Ne.stagger=He,Ne.timeline=ze,Ne.easing=x,Ne.penner=w,Ne.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},n.exports=Ne},{}],36:[function(n,r,i){(function(e,n){"object"===typeof i&&"undefined"!==typeof r?n(i):"function"===typeof t&&t.amd?t(["exports"],n):(e=e||self,n(e.THREE={}))})(this,function(t){"use strict";function n(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}(),Object.assign(n.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}});var r,i="103dev",o={LEFT:0,MIDDLE:1,RIGHT:2},a=0,s=1,c=2,u=3,l=0,h=1,d=0,p=1,f=2,m=0,v=1,g=2,y=1,b=2,A=0,w=1,x=2,E=0,_=1,M=2,T=3,C=4,S=5,L=100,R=101,P=102,O=103,D=104,I=200,B=201,k=202,F=203,N=204,U=205,j=206,H=207,z=208,G=209,V=210,W=0,q=1,X=2,Y=3,Q=4,K=5,Z=6,$=7,J=0,ee=1,te=2,ne=0,re=1,ie=2,oe=3,ae=4,se=5,ce=300,ue=301,le=302,he=303,de=304,pe=305,fe=306,me=307,ve=1e3,ge=1001,ye=1002,be=1003,Ae=1004,we=1005,xe=1006,Ee=1007,_e=1008,Me=1009,Te=1010,Ce=1011,Se=1012,Le=1013,Re=1014,Pe=1015,Oe=1016,De=1017,Ie=1018,Be=1019,ke=1020,Fe=1021,Ne=1022,Ue=1023,je=1024,He=1025,ze=Ue,Ge=1026,Ve=1027,We=1028,qe=33776,Xe=33777,Ye=33778,Qe=33779,Ke=35840,Ze=35841,$e=35842,Je=35843,et=36196,tt=37808,nt=37809,rt=37810,it=37811,ot=37812,at=37813,st=37814,ct=37815,ut=37816,lt=37817,ht=37818,dt=37819,pt=37820,ft=37821,mt=2200,vt=2201,gt=2202,yt=2300,bt=2301,At=2302,wt=2400,xt=2401,Et=2402,_t=0,Mt=1,Tt=2,Ct=3e3,St=3001,Lt=3007,Rt=3002,Pt=3003,Ot=3004,Dt=3005,It=3006,Bt=3200,kt=3201,Ft=0,Nt=1,Ut={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0,o=e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255];return o.toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ut.DEG2RAD},radToDeg:function(e){return e*Ut.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function jt(e,t){this.x=e||0,this.y=t||0}function Ht(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function zt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function Gt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Vt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(jt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(jt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new jt,t=new jt;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(Ht.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,u,l,h,d,p,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=u,v[10]=l,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ht).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new Gt;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*u,d=o*l,p=a*u,f=a*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=d+p*c,t[5]=h-f*c,t[9]=-a*s,t[2]=f-h*c,t[6]=p+d*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*c,t[1]=o*l,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*u,d=o*l,p=a*u,f=a*l;t[0]=s*u,t[4]=p*c-d,t[8]=h*c+f,t[1]=s*l,t[5]=f*c+h,t[9]=d*c-p,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,A=o*c,w=a*s,x=a*c;t[0]=s*u,t[4]=x-b*l,t[8]=w*l+A,t[1]=l,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=A*l+w,t[10]=b-x*l}else if("XZY"===e.order){b=o*s,A=o*c,w=a*s,x=a*c;t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=b*l+x,t[5]=o*u,t[9]=A*l-w,t[2]=w*l-A,t[6]=a*u,t[10]=x*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new Gt(0,0,0),t=new Gt(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new Gt,t=new Gt,n=new Gt;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],u=n[1],l=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],A=n[15],w=r[0],x=r[4],E=r[8],_=r[12],M=r[1],T=r[5],C=r[9],S=r[13],L=r[2],R=r[6],P=r[10],O=r[14],D=r[3],I=r[7],B=r[11],k=r[15];return i[0]=o*w+a*M+s*L+c*D,i[4]=o*x+a*T+s*R+c*I,i[8]=o*E+a*C+s*P+c*B,i[12]=o*_+a*S+s*O+c*k,i[1]=u*w+l*M+h*L+d*D,i[5]=u*x+l*T+h*R+d*I,i[9]=u*E+l*C+h*P+d*B,i[13]=u*_+l*S+h*O+d*k,i[2]=p*w+f*M+m*L+v*D,i[6]=p*x+f*T+m*R+v*I,i[10]=p*E+f*C+m*P+v*B,i[14]=p*_+f*S+m*O+v*k,i[3]=g*w+y*M+b*L+A*D,i[7]=g*x+y*T+b*R+A*I,i[11]=g*E+y*C+b*P+A*B,i[15]=g*_+y*S+b*O+A*k,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Gt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],h=e[10],d=e[14],p=e[3],f=e[7],m=e[11],v=e[15];return p*(+i*s*l-r*c*l-i*a*h+n*c*h+r*a*d-n*s*d)+f*(+t*s*d-t*c*h+i*o*h-r*o*d+r*c*u-i*s*u)+m*(+t*c*l-t*a*d-i*o*l+n*o*d+i*a*u-n*c*u)+v*(-r*a*u-t*s*l+t*a*h+r*o*l-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[5],l=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],A=p*y*h-g*f*h+g*l*m-u*y*m-p*l*b+u*f*b,w=v*f*h-d*y*h-v*l*m+c*y*m+d*l*b-c*f*b,x=d*g*h-v*p*h+v*u*m-c*g*m-d*u*b+c*p*b,E=v*p*l-d*g*l-v*u*f+c*g*f+d*u*y-c*p*y,_=i*A+o*w+a*x+s*E;if(0===_){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(M);return console.warn(M),this.identity()}var T=1/_;return n[0]=A*T,n[1]=(g*f*s-p*y*s-g*a*m+o*y*m+p*a*b-o*f*b)*T,n[2]=(u*y*s-g*l*s+g*a*h-o*y*h-u*a*b+o*l*b)*T,n[3]=(p*l*s-u*f*s-p*a*h+o*f*h+u*a*m-o*l*m)*T,n[4]=w*T,n[5]=(d*y*s-v*f*s+v*a*m-i*y*m-d*a*b+i*f*b)*T,n[6]=(v*l*s-c*y*s-v*a*h+i*y*h+c*a*b-i*l*b)*T,n[7]=(c*f*s-d*l*s+d*a*h-i*f*h-c*a*m+i*l*m)*T,n[8]=x*T,n[9]=(v*p*s-d*g*s-v*o*m+i*g*m+d*o*b-i*p*b)*T,n[10]=(c*g*s-v*u*s+v*o*h-i*g*h-c*o*b+i*u*b)*T,n[11]=(d*u*s-c*p*s-d*o*h+i*p*h+c*o*m-i*u*m)*T,n[12]=E*T,n[13]=(d*g*a-v*p*a+v*o*f-i*g*f-d*o*y+i*p*y)*T,n[14]=(v*u*a-c*g*a-v*o*l+i*g*l+c*o*y-i*u*y)*T,n[15]=(c*p*a-d*u*a+d*o*l-i*p*l-c*o*f+i*u*f)*T,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,u=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,u*a+n,u*s-r*o,0,c*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,u=o+o,l=a+a,h=i*c,d=i*u,p=i*l,f=o*u,m=o*l,v=a*l,g=s*c,y=s*u,b=s*l,A=n.x,w=n.y,x=n.z;return r[0]=(1-(f+v))*A,r[1]=(d+b)*A,r[2]=(p-y)*A,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(p+y)*x,r[9]=(m-g)*x,r[10]=(1-(h+f))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new Gt,t=new Ht;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length(),u=this.determinant();u<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var l=1/a,h=1/s,d=1/c;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=c,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),u=1/(o-i),l=(t+e)*s,h=(n+r)*c,d=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(zt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(l!==f||s!==h||c!==d||u!==p){var m=1-a,v=s*h+c*d+u*p+l*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),A=Math.atan2(b,v*g);m=Math.sin(m*A)/b,a=Math.sin(a*A)/b}var w=a*g;if(s=s*m+h*w,c=c*m+d*w,u=u*m+p*w,l=l*m+f*w,m===1-a){var x=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=x,c*=x,u*=x,l*=x}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l}}),Object.defineProperties(zt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(zt.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(n/2),u=a(r/2),l=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=h*u*l+c*d*p,this._y=c*d*l-h*u*p,this._z=c*u*p+h*d*l,this._w=c*u*l-h*d*p):"YXZ"===o?(this._x=h*u*l+c*d*p,this._y=c*d*l-h*u*p,this._z=c*u*p-h*d*l,this._w=c*u*l+h*d*p):"ZXY"===o?(this._x=h*u*l-c*d*p,this._y=c*d*l+h*u*p,this._z=c*u*p+h*d*l,this._w=c*u*l-h*d*p):"ZYX"===o?(this._x=h*u*l-c*d*p,this._y=c*d*l+h*u*p,this._z=c*u*p-h*d*l,this._w=c*u*l+h*d*p):"YZX"===o?(this._x=h*u*l+c*d*p,this._y=c*d*l+h*u*p,this._z=c*u*p-h*d*l,this._w=c*u*l-h*d*p):"XZY"===o&&(this._x=h*u*l-c*d*p,this._y=c*d*l-h*u*p,this._z=c*u*p+h*d*l,this._w=c*u*l+h*d*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],u=n[2],l=n[6],h=n[10],d=r+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(l-c)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(c+l)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Gt,n=1e-6;return function(r,i){return void 0===t&&(t=new Gt),e=r.dot(i)+1,e<n?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(Ut.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-i*s,this._y=r*u+o*s+i*a-n*c,this._z=i*u+o*c+n*s-r*a,this._w=o*u-n*a-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var c=1-t;return this._w=c*o+t*this._w,this._x=c*n+t*this._x,this._y=c*r+t*this._y,this._z=c*i+t*this._z,this.normalize()}var u=Math.sqrt(s),l=Math.atan2(u,a),h=Math.sin((1-t)*l)/u,d=Math.sin(t*l)/u;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Gt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new zt;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new zt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,u=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+u*-a-l*-o,this.y=u*s+h*-o+l*-i-c*-a,this.z=l*s+h*-a+c*-o-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new Ht;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Gt,t=new Gt;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Gt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Gt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ut.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Vt.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Gt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],u=n[4],l=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],A=r[2],w=r[5],x=r[8];return i[0]=o*f+a*g+s*A,i[3]=o*m+a*y+s*w,i[6]=o*v+a*b+s*x,i[1]=c*f+u*g+l*A,i[4]=c*m+u*y+l*w,i[7]=c*v+u*b+l*x,i[2]=h*f+d*g+p*A,i[5]=h*m+d*y+p*w,i[8]=h*v+d*b+p*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*i*u+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],d=n[8],p=d*c-u*h,f=u*l-d*s,m=h*s-c*l,v=i*p+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=p*y,r[1]=(a*h-d*o)*y,r[2]=(u*o-a*c)*y,r[3]=f*y,r[4]=(d*i-a*l)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(c*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),c=Math.sin(i);this.set(n*s,n*c,-n*(s*o+c*a)+o+e,-r*c,r*s,-r*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],c=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*c,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*c,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Wt={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===r&&(r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),r.width=e.width,r.height=e.height;var n=r.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=r}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},qt=0;function Xt(e,t,n,r,i,o,a,s,c,u){Object.defineProperty(this,"id",{value:qt++}),this.uuid=Ut.generateUUID(),this.name="",this.image=void 0!==e?e:Xt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Xt.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ge,this.wrapT=void 0!==r?r:ge,this.magFilter=void 0!==i?i:xe,this.minFilter=void 0!==o?o:_e,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:Ue,this.type=void 0!==s?s:Me,this.offset=new jt(0,0),this.repeat=new jt(1,1),this.center=new jt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Ct,this.version=0,this.onUpdate=null}function Yt(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function Qt(e,t,n){this.width=e,this.height=t,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t),n=n||{},this.texture=new Xt(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:xe,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Kt(e,t,n){Qt.call(this,e,t,n),this.samples=4}function Zt(e,t,n){Qt.call(this,e,t,n)}function $t(e,t,n,r,i,o,a,s,c,u,l,h){Xt.call(this,null,o,a,s,c,u,r,i,l,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:be,this.minFilter=void 0!==u?u:be,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Jt(e,t){this.min=void 0!==e?e:new Gt(1/0,1/0,1/0),this.max=void 0!==t?t:new Gt(-1/0,-1/0,-1/0)}function en(e,t){this.center=void 0!==e?e:new Gt,this.radius=void 0!==t?t:0}function tn(e,t){this.normal=void 0!==e?e:new Gt(1,0,0),this.constant=void 0!==t?t:0}function nn(e,t,n,r,i,o){this.planes=[void 0!==e?e:new tn,void 0!==t?t:new tn,void 0!==n?n:new tn,void 0!==r?r:new tn,void 0!==i?i:new tn,void 0!==o?o:new tn]}Xt.DEFAULT_IMAGE=void 0,Xt.DEFAULT_MAPPING=ce,Xt.prototype=Object.assign(Object.create(n.prototype),{constructor:Xt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Ut.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Wt.getDataURL(r[o]))}else i=Wt.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ce)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ve:e.x=e.x-Math.floor(e.x);break;case ge:e.x=e.x<0?0:1;break;case ye:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ve:e.y=e.y-Math.floor(e.y);break;case ge:e.y=e.y<0?0:1;break;case ye:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Xt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Yt.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,c=s[0],u=s[4],l=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(u-h)<o&&Math.abs(l-f)<o&&Math.abs(p-m)<o){if(Math.abs(u+h)<a&&Math.abs(l+f)<a&&Math.abs(p+m)<a&&Math.abs(c+d+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(c+1)/2,y=(d+1)/2,b=(v+1)/2,A=(u+h)/4,w=(l+f)/4,x=(p+m)/4;return g>y&&g>b?g<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=A/n,i=w/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=A/r,i=x/r):b<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=w/i,r=x/i),this.set(n,r,i,t),this}var E=Math.sqrt((m-p)*(m-p)+(l-f)*(l-f)+(h-u)*(h-u));return Math.abs(E)<.001&&(E=1),this.x=(m-p)/E,this.y=(l-f)/E,this.z=(h-u)/E,this.w=Math.acos((c+d+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new Yt,t=new Yt),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Qt.prototype=Object.assign(Object.create(n.prototype),{constructor:Qt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Kt.prototype=Object.assign(Object.create(Qt.prototype),{constructor:Kt,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Qt.prototype.copy.call(this,e),this.samples=e.samples,this}}),Zt.prototype=Object.create(Qt.prototype),Zt.prototype.constructor=Zt,Zt.prototype.isWebGLRenderTargetCube=!0,$t.prototype=Object.create(Xt.prototype),$t.prototype.constructor=$t,$t.prototype.isDataTexture=!0,Object.assign(Jt.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],h=e[s+2];u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),h=e.getZ(s);u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Gt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Gt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Gt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new Gt;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Gt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Gt;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new Gt,t=new Gt,n=new Gt,r=new Gt,i=new Gt,o=new Gt,a=new Gt,s=new Gt,c=new Gt,u=new Gt;function l(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=c.x*Math.abs(a.x)+c.y*Math.abs(a.y)+c.z*Math.abs(a.z),u=e.dot(a),l=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(u,l,h),Math.min(u,l,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!l(h)&&(h=[1,0,0,0,1,0,0,0,1],!!l(h)&&(u.crossVectors(r,i),h=[u.x,u.y,u.z],l(h)))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Gt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Gt;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new Gt;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new en),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Gt,new Gt,new Gt,new Gt,new Gt,new Gt,new Gt,new Gt];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(en.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Jt;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Gt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Jt),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(tn.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Gt,t=new Gt;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Gt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Gt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Gt);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Gt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Gt,t=new Vt;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(nn.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,f-h,y-m).normalize(),t[1].setComponents(a+r,l+s,f+h,y+m).normalize(),t[2].setComponents(a+i,l+c,f+d,y+v).normalize(),t[3].setComponents(a-i,l-c,f-d,y-v).normalize(),t[4].setComponents(a-o,l-u,f-p,y-g).normalize(),t[5].setComponents(a+o,l+u,f+p,y+g).normalize(),this},intersectsObject:function(){var e=new en;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new en;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var o=t[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var e=new Gt;return function(t){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var rn="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",on="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",an="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",sn="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",cn="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",un="vec3 transformed = vec3( position );",ln="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",hn="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",dn="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",pn="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",fn="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",mn="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",vn="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",gn="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",yn="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",bn="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",An="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",wn="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",xn="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",En="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",_n="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Mn="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",Tn="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Cn="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Sn="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ln="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",Rn="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Pn="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",On="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Dn="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",In="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",Bn="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",kn="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Fn="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Nn="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",Un="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",jn="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Hn="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",zn="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",Gn="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",Vn="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Wn="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",qn="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",Xn="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Yn="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",Qn="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",Kn="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",Zn="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",$n="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",Jn="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",er="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",tr="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",nr="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",rr="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",ir="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",or="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",ar="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",sr="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",cr="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",ur="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",lr="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",hr="#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",dr="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",pr="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",fr="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",mr="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",vr="#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",gr="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",yr="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",br="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Ar="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",wr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",xr="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",Er="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",_r="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Mr="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",Tr="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Cr="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Sr="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Lr="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Rr="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Pr="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",Or="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",Dr="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",Ir="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Br="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",kr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",Fr="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",Nr="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",Ur="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",jr="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Hr="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",zr="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Gr="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",Vr="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",Wr="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",qr="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Xr="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Yr="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Qr="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Kr="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Zr="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",$r="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Jr="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ei="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ti="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",ni="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",ri="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ii="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",oi="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ai="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",si="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",ci="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",ui="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",li="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",hi="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",di="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",pi="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",fi="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",mi={alphamap_fragment:rn,alphamap_pars_fragment:on,alphatest_fragment:an,aomap_fragment:sn,aomap_pars_fragment:cn,begin_vertex:un,beginnormal_vertex:ln,bsdfs:hn,bumpmap_pars_fragment:dn,clipping_planes_fragment:pn,clipping_planes_pars_fragment:fn,clipping_planes_pars_vertex:mn,clipping_planes_vertex:vn,color_fragment:gn,color_pars_fragment:yn,color_pars_vertex:bn,color_vertex:An,common:wn,cube_uv_reflection_fragment:xn,defaultnormal_vertex:En,displacementmap_pars_vertex:_n,displacementmap_vertex:Mn,emissivemap_fragment:Tn,emissivemap_pars_fragment:Cn,encodings_fragment:Sn,encodings_pars_fragment:Ln,envmap_fragment:Rn,envmap_pars_fragment:Pn,envmap_pars_vertex:On,envmap_physical_pars_fragment:Gn,envmap_vertex:Dn,fog_vertex:In,fog_pars_vertex:Bn,fog_fragment:kn,fog_pars_fragment:Fn,gradientmap_pars_fragment:Nn,lightmap_fragment:Un,lightmap_pars_fragment:jn,lights_lambert_vertex:Hn,lights_pars_begin:zn,lights_phong_fragment:Vn,lights_phong_pars_fragment:Wn,lights_physical_fragment:qn,lights_physical_pars_fragment:Xn,lights_fragment_begin:Yn,lights_fragment_maps:Qn,lights_fragment_end:Kn,logdepthbuf_fragment:Zn,logdepthbuf_pars_fragment:$n,logdepthbuf_pars_vertex:Jn,logdepthbuf_vertex:er,map_fragment:tr,map_pars_fragment:nr,map_particle_fragment:rr,map_particle_pars_fragment:ir,metalnessmap_fragment:or,metalnessmap_pars_fragment:ar,morphnormal_vertex:sr,morphtarget_pars_vertex:cr,morphtarget_vertex:ur,normal_fragment_begin:lr,normal_fragment_maps:hr,normalmap_pars_fragment:dr,packing:pr,premultiplied_alpha_fragment:fr,project_vertex:mr,dithering_fragment:vr,dithering_pars_fragment:gr,roughnessmap_fragment:yr,roughnessmap_pars_fragment:br,shadowmap_pars_fragment:Ar,shadowmap_pars_vertex:wr,shadowmap_vertex:xr,shadowmask_pars_fragment:Er,skinbase_vertex:_r,skinning_pars_vertex:Mr,skinning_vertex:Tr,skinnormal_vertex:Cr,specularmap_fragment:Sr,specularmap_pars_fragment:Lr,tonemapping_fragment:Rr,tonemapping_pars_fragment:Pr,uv_pars_fragment:Or,uv_pars_vertex:Dr,uv_vertex:Ir,uv2_pars_fragment:Br,uv2_pars_vertex:kr,uv2_vertex:Fr,worldpos_vertex:Nr,background_frag:Ur,background_vert:jr,cube_frag:Hr,cube_vert:zr,depth_frag:Gr,depth_vert:Vr,distanceRGBA_frag:Wr,distanceRGBA_vert:qr,equirect_frag:Xr,equirect_vert:Yr,linedashed_frag:Qr,linedashed_vert:Kr,meshbasic_frag:Zr,meshbasic_vert:$r,meshlambert_frag:Jr,meshlambert_vert:ei,meshmatcap_frag:ti,meshmatcap_vert:ni,meshphong_frag:ri,meshphong_vert:ii,meshphysical_frag:oi,meshphysical_vert:ai,normal_frag:si,normal_vert:ci,points_frag:ui,points_vert:li,shadow_frag:hi,shadow_vert:di,sprite_frag:pi,sprite_vert:fi};function vi(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function gi(e){for(var t={},n=0;n<e.length;n++){var r=vi(e[n]);for(var i in r)t[i]=r[i]}return t}var yi={clone:vi,merge:gi},bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ai(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(Ai.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Ut.euclideanModulo(t,1),n=Ut.clamp(n,0,1),r=Ut.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,c)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){u=bi[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),c=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=c<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4;break}t/=6}return e.h=t,e.s=n,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,r){this.getHSL(e),n.getHSL(t);var i=Ut.lerp(e.h,t.h,r),o=Ut.lerp(e.s,t.s,r),a=Ut.lerp(e.l,t.l,r);return this.setHSL(i,o,a),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var wi={common:{diffuse:{value:new Ai(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Vt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ai(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ai(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new Ai(15658734)},opacity:{value:1},center:{value:new jt(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Vt}}},xi={basic:{uniforms:gi([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.fog]),vertexShader:mi.meshbasic_vert,fragmentShader:mi.meshbasic_frag},lambert:{uniforms:gi([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.fog,wi.lights,{emissive:{value:new Ai(0)}}]),vertexShader:mi.meshlambert_vert,fragmentShader:mi.meshlambert_frag},phong:{uniforms:gi([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.gradientmap,wi.fog,wi.lights,{emissive:{value:new Ai(0)},specular:{value:new Ai(1118481)},shininess:{value:30}}]),vertexShader:mi.meshphong_vert,fragmentShader:mi.meshphong_frag},standard:{uniforms:gi([wi.common,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.roughnessmap,wi.metalnessmap,wi.fog,wi.lights,{emissive:{value:new Ai(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag},matcap:{uniforms:gi([wi.common,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.fog,{matcap:{value:null}}]),vertexShader:mi.meshmatcap_vert,fragmentShader:mi.meshmatcap_frag},points:{uniforms:gi([wi.points,wi.fog]),vertexShader:mi.points_vert,fragmentShader:mi.points_frag},dashed:{uniforms:gi([wi.common,wi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mi.linedashed_vert,fragmentShader:mi.linedashed_frag},depth:{uniforms:gi([wi.common,wi.displacementmap]),vertexShader:mi.depth_vert,fragmentShader:mi.depth_frag},normal:{uniforms:gi([wi.common,wi.bumpmap,wi.normalmap,wi.displacementmap,{opacity:{value:1}}]),vertexShader:mi.normal_vert,fragmentShader:mi.normal_frag},sprite:{uniforms:gi([wi.sprite,wi.fog]),vertexShader:mi.sprite_vert,fragmentShader:mi.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null}},vertexShader:mi.background_vert,fragmentShader:mi.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mi.cube_vert,fragmentShader:mi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mi.equirect_vert,fragmentShader:mi.equirect_frag},distanceRGBA:{uniforms:gi([wi.common,wi.displacementmap,{referencePosition:{value:new Gt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mi.distanceRGBA_vert,fragmentShader:mi.distanceRGBA_frag},shadow:{uniforms:gi([wi.lights,wi.fog,{color:{value:new Ai(0)},opacity:{value:1}}]),vertexShader:mi.shadow_vert,fragmentShader:mi.shadow_frag}};function Ei(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function _i(e){var t=new WeakMap;function n(t,n){var r=t.array,i=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function r(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,35044):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function i(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)}function o(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))}function a(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var o=t.get(e);void 0===o?t.set(e,n(e,i)):o.version<e.version&&(r(o.buffer,e,i),o.version=e.version)}return{get:i,remove:o,update:a}}function Mi(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Gt,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Ai,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function Ti(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Ti.DefaultOrder}function Ci(){this.mask=1}xi.physical={uniforms:gi([xi.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag},Object.assign(Mi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),Ti.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ti.DefaultOrder="XYZ",Object.defineProperties(Ti.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Ti.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Ut.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],c=i[1],u=i[5],l=i[9],h=i[2],d=i[6],p=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Ht;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new zt;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Gt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Ci.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var Si=0;function Li(){Object.defineProperty(this,"id",{value:Si++}),this.uuid=Ut.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Li.DefaultUp.clone();var e=new Gt,t=new Ti,n=new zt,r=new Gt(1,1,1);function i(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t.onChange(i),n.onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ht},normalMatrix:{value:new Vt}}),this.matrix=new Ht,this.matrixWorld=new Ht,this.matrixAutoUpdate=Li.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ci,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Li.DefaultUp=new Gt(0,1,0),Li.DefaultMatrixAutoUpdate=!0,Li.prototype=Object.assign(Object.create(n.prototype),{constructor:Li,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new zt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new zt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Gt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Gt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Gt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Gt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Gt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Gt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Gt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Ht;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new zt,t=new Ht,n=new Gt,r=new Gt;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Gt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Gt,t=new Gt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new zt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new Gt,t=new zt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Gt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Gt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==_t&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,c=this.material.length;s<c;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),p=m(e.textures),f=m(e.images);a=m(e.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var Ri=0;function Pi(){Object.defineProperty(this,"id",{value:Ri+=2}),this.uuid=Ut.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Oi(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Di(e,t,n){Oi.call(this,new Int8Array(e),t,n)}function Ii(e,t,n){Oi.call(this,new Uint8Array(e),t,n)}function Bi(e,t,n){Oi.call(this,new Uint8ClampedArray(e),t,n)}function ki(e,t,n){Oi.call(this,new Int16Array(e),t,n)}function Fi(e,t,n){Oi.call(this,new Uint16Array(e),t,n)}function Ni(e,t,n){Oi.call(this,new Int32Array(e),t,n)}function Ui(e,t,n){Oi.call(this,new Uint32Array(e),t,n)}function ji(e,t,n){Oi.call(this,new Float32Array(e),t,n)}function Hi(e,t,n){Oi.call(this,new Float64Array(e),t,n)}function zi(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Gi(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Pi.prototype=Object.assign(Object.create(n.prototype),{constructor:Pi,isGeometry:!0,applyMatrix:function(e){for(var t=(new Vt).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(t).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++)o.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Ht;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ht;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ht;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ht;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new Ht;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Li;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,c=void 0!==r.uv2?r.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var u=0,l=0;u<i.length;u+=3,l+=2)t.vertices.push((new Gt).fromArray(i,u)),void 0!==a&&t.colors.push((new Ai).fromArray(a,u));function h(e,n,r,i){var u=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],l=void 0===o?[]:[(new Gt).fromArray(o,3*e),(new Gt).fromArray(o,3*n),(new Gt).fromArray(o,3*r)],h=new Mi(e,n,r,l,u,i);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([(new jt).fromArray(s,2*e),(new jt).fromArray(s,2*n),(new jt).fromArray(s,2*r)]),void 0!==c&&t.faceVertexUvs[1].push([(new jt).fromArray(c,2*e),(new jt).fromArray(c,2*n),(new jt).fromArray(c,2*r)])}var d=e.groups;if(d.length>0)for(u=0;u<d.length;u++)for(var p=d[u],f=p.start,m=p.count,v=(l=f,f+m);l<v;l+=3)void 0!==n?h(n[l],n[l+1],n[l+2],p.materialIndex):h(l,l+1,l+2,p.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)h(n[u],n[u+1],n[u+2]);else for(u=0;u<i.length/3;u+=3)h(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new Gt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Ht;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Gt,t=new Gt,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Gt;if(e){var s,c,u,l=new Gt,h=new Gt;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],l.subVectors(u,c),h.subVectors(s,c),l.cross(h),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var d=o.vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Pi;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)c=new Gt,u={a:new Gt,b:new Gt,c:new Gt},a.push(c),s.push(u)}var c,u,l=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],c=l.faceNormals[n],u=l.vertexNormals[n],c.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Jt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new en),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Vt).getNormalMatrix(t));for(var p=0,f=a.length;p<f;p++){var m=a[p],v=m.clone();void 0!==t&&v.applyMatrix4(t),o.push(v)}for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=c.length;p<f;p++){var g,y,b,A=c[p],w=A.vertexNormals,x=A.vertexColors;g=new Mi(A.a+i,A.b+i,A.c+i),g.normal.copy(A.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var E=0,_=w.length;E<_;E++)y=w[E].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),g.vertexNormals.push(y);g.color.copy(A.color);for(E=0,_=x.length;E<_;E++)b=x[E],g.vertexColors.push(b.clone());g.materialIndex=A.materialIndex+n,s.push(g)}for(p=0,f=l.length;p<f;p++){var M=l[p],T=[];if(void 0!==M){for(E=0,_=M.length;E<_;E++)T.push(M[E].clone());u.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,c={},u=[],l=[],h=4,d=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d),void 0===c[t]?(c[t]=n,u.push(this.vertices[n]),l[n]=u.length-1):l[n]=l[c[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var m=p[n];for(this.faces.splice(m,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(m,1)}var v=this.vertices.length-u.length;return this.vertices=u,v},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Gt(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;function r(e,t){return e.materialIndex-t.materialIndex}e.sort(r);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),s&&s.length===t&&(o=[]);for(n=0;n<t;n++){var c=e[n]._id;i&&i.push(a[c]),o&&o.push(s[c])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],c={},u=[],l={},h=[],d={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],f=!0,m=!1,v=void 0!==this.faceVertexUvs[0][i],g=p.normal.length()>0,y=p.vertexNormals.length>0,b=1!==p.color.r||1!==p.color.g||1!==p.color.b,A=p.vertexColors.length>0,w=0;if(w=M(w,0,0),w=M(w,1,f),w=M(w,2,m),w=M(w,3,v),w=M(w,4,g),w=M(w,5,y),w=M(w,6,b),w=M(w,7,A),a.push(w),a.push(p.a,p.b,p.c),a.push(p.materialIndex),v){var x=this.faceVertexUvs[0][i];a.push(S(x[0]),S(x[1]),S(x[2]))}if(g&&a.push(T(p.normal)),y){var E=p.vertexNormals;a.push(T(E[0]),T(E[1]),T(E[2]))}if(b&&a.push(C(p.color)),A){var _=p.vertexColors;a.push(C(_[0]),C(_[1]),C(_[2]))}}function M(e,t,n){return n?e|1<<t:e&~(1<<t)}function T(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function C(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]?l[t]:(l[t]=u.length,u.push(e.getHex()),l[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Pi).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var h=l[r],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],r=0,i=f[t].vertices.length;r<i;r++)m.vertices.push(f[t].vertices[r].clone());if(void 0!==f[t].normals)for(m.normals=[],r=0,i=f[t].normals.length;r<i;r++)m.normals.push(f[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var A=e.skinWeights;for(t=0,n=A.length;t<n;t++)this.skinWeights.push(A[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var _=e.boundingSphere;return null!==_&&(this.boundingSphere=_.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Oi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Oi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Ai),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new jt),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Gt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Yt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Di.prototype=Object.create(Oi.prototype),Di.prototype.constructor=Di,Ii.prototype=Object.create(Oi.prototype),Ii.prototype.constructor=Ii,Bi.prototype=Object.create(Oi.prototype),Bi.prototype.constructor=Bi,ki.prototype=Object.create(Oi.prototype),ki.prototype.constructor=ki,Fi.prototype=Object.create(Oi.prototype),Fi.prototype.constructor=Fi,Ni.prototype=Object.create(Oi.prototype),Ni.prototype.constructor=Ni,Ui.prototype=Object.create(Oi.prototype),Ui.prototype.constructor=Ui,ji.prototype=Object.create(Oi.prototype),ji.prototype.constructor=ji,Hi.prototype=Object.create(Oi.prototype),Hi.prototype.constructor=Hi,Object.assign(zi.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var l,h=e.morphNormals,d=h.length;if(d>0){l=[];for(u=0;u<d;u++)l[u]={name:h[u].name,data:[]};this.morphTargets.normal=l}var p=e.skinIndices,f=e.skinWeights,m=p.length===r.length,v=f.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var A=g.vertexColors;if(3===A.length)this.colors.push(A[0],A[1],A[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o){var x=i[0][u];void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new jt,new jt,new jt))}if(!0===a){x=i[1][u];void 0!==x?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new jt,new jt,new jt))}for(var E=0;E<c;E++){var _=s[E].vertices;t[E].data.push(_[g.a],_[g.b],_[g.c])}for(E=0;E<d;E++){var M=h[E].vertexNormals[u];l[E].data.push(M.a,M.b,M.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Vi=1;function Wi(){Object.defineProperty(this,"id",{value:Vi+=2}),this.uuid=Ut.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function qi(e,t,n,r,i,o){Pi.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Xi(e,t,n,r,i,o)),this.mergeVertices()}function Xi(e,t,n,r,i,o){Wi.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],c=[],u=[],l=[],h=0,d=0;function p(e,t,n,r,i,o,p,f,m,v,g){var y,b,A=o/m,w=p/v,x=o/2,E=p/2,_=f/2,M=m+1,T=v+1,C=0,S=0,L=new Gt;for(b=0;b<T;b++){var R=b*w-E;for(y=0;y<M;y++){var P=y*A-x;L[e]=P*r,L[t]=R*i,L[n]=_,c.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[n]=f>0?1:-1,u.push(L.x,L.y,L.z),l.push(y/m),l.push(1-b/v),C+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var O=h+y+M*b,D=h+y+M*(b+1),I=h+(y+1)+M*(b+1),B=h+(y+1)+M*b;s.push(O,D,B),s.push(D,I,B),S+=6}a.addGroup(d,S,g),d+=S,h+=C}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new ji(c,3)),this.addAttribute("normal",new ji(u,3)),this.addAttribute("uv",new ji(l,2))}function Yi(e,t,n,r){Pi.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Qi(e,t,n,r)),this.mergeVertices()}function Qi(e,t,n,r){Wi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var i,o,a=e/2,s=t/2,c=Math.floor(n)||1,u=Math.floor(r)||1,l=c+1,h=u+1,d=e/c,p=t/u,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<l;i++){var b=i*d-a;m.push(b,-y,0),v.push(0,0,1),g.push(i/c),g.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<c;i++){var A=i+l*o,w=i+l*(o+1),x=i+1+l*(o+1),E=i+1+l*o;f.push(A,w,E),f.push(w,x,E)}this.setIndex(f),this.addAttribute("position",new ji(m,3)),this.addAttribute("normal",new ji(v,3)),this.addAttribute("uv",new ji(g,2))}Wi.prototype=Object.assign(Object.create(n.prototype),{constructor:Wi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Gi(e)>65535?Ui:Fi)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new Oi(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Vt).getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}var i=this.attributes.tangent;if(void 0!==i){r=(new Vt).getNormalMatrix(e);r.applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Ht;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Ht;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Ht;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Ht;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new Ht;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Li;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Gt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new ji(3*t.vertices.length,3),r=new ji(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new ji(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new ji(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(t=this.attributes.position,void 0!==t&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(t=this.attributes.normal,void 0!==t&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(t=this.attributes.color,void 0!==t&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(t=this.attributes.uv,void 0!==t&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(t=this.attributes.lineDistance,void 0!==t&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new zi).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Oi(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Oi(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new Oi(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Oi(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Oi(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[a],u=0,l=c.length;u<l;u++){var h=c[u],d=new ji(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new ji(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new ji(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new Jt;return function(){null===this.boundingBox&&(this.boundingBox=new Jt);var t=this.attributes.position,n=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(var r=0,i=n.length;r<i;r++){var o=n[r];e.setFromBufferAttribute(o),this.boundingBox.expandByPoint(e.min),this.boundingBox.expandByPoint(e.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new Jt,t=new Jt,n=new Gt;return function(){null===this.boundingSphere&&(this.boundingSphere=new en);var r=this.attributes.position,i=this.morphAttributes.position;if(r){var o=this.boundingSphere.center;if(e.setFromBufferAttribute(r),i)for(var a=0,s=i.length;a<s;a++){var c=i[a];t.setFromBufferAttribute(c),e.expandByPoint(t.min),e.expandByPoint(t.max)}e.getCenter(o);var u=0;for(a=0,s=r.count;a<s;a++)n.fromBufferAttribute(r,a),u=Math.max(u,o.distanceToSquared(n));if(i)for(a=0,s=i.length;a<s;a++){c=i[a];for(var l=0,h=c.count;l<h;l++)n.fromBufferAttribute(c,a),u=Math.max(u,o.distanceToSquared(n))}this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Oi(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,c,u=t.normal.array,l=new Gt,h=new Gt,d=new Gt,p=new Gt,f=new Gt;if(e){var m=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],c=3*m[i+2],l.fromArray(n,a),h.fromArray(n,s),d.fromArray(n,c),p.subVectors(d,h),f.subVectors(l,h),p.cross(f),u[a]+=p.x,u[a+1]+=p.y,u[a+2]+=p.z,u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[c]+=p.x,u[c+1]+=p.y,u[c+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)l.fromArray(n,i),h.fromArray(n,i+3),d.fromArray(n,i+6),p.subVectors(d,h),f.subVectors(l,h),p.cross(f),u[i]=p.x,u[i+1]=p.y,u[i+2]=p.z,u[i+3]=p.x,u[i+4]=p.y,u[i+5]=p.z,u[i+6]=p.x,u[i+7]=p.y,u[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r],o=i.array,a=e.attributes[r],s=a.array,c=a.itemSize,u=0,l=c*t;u<s.length;u++,l++)o[l]=s[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Gt;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),o=0,a=0,s=0,c=t.length;s<c;s++){o=t[s]*r;for(var u=0;u<r;u++)i[a++]=n[o++]}return new Oi(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Wi,n=this.index.array,r=this.attributes;for(var i in r){var o=r[i],a=e(o,n);t.addAttribute(i,a)}var s=this.morphAttributes;for(i in s){for(var c=[],u=s[i],l=0,h=u.length;l<h;l++){o=u[l],a=e(o,n);c.push(a)}t.morphAttributes[i]=c}for(var d=this.groups,p=(l=0,d.length);l<p;l++){var f=d[l];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=i[n],a={itemSize:o.itemSize,type:o.array.constructor.name,array:Array.prototype.slice.call(o.array),normalized:o.normalized};""!==o.name&&(a.name=o.name),e.data.attributes[n]=a}var s={},c=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],l=[],h=0,d=u.length;h<d;h++){o=u[h],a={itemSize:o.itemSize,type:o.array.constructor.name,array:Array.prototype.slice.call(o.array),normalized:o.normalized};""!==o.name&&(a.name=o.name),l.push(a)}l.length>0&&(s[n]=l,c=!0)}c&&(e.data.morphAttributes=s);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new Wi).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var c=[],u=s[t];for(n=0,r=u.length;n<r;n++)c.push(u[n].clone());this.morphAttributes[t]=c}var l=e.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),qi.prototype=Object.create(Pi.prototype),qi.prototype.constructor=qi,Xi.prototype=Object.create(Wi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(Pi.prototype),Yi.prototype.constructor=Yi,Qi.prototype=Object.create(Wi.prototype),Qi.prototype.constructor=Qi;var Ki=0;function Zi(){Object.defineProperty(this,"id",{value:Ki++}),this.uuid=Ut.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=_,this.side=m,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=A,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=U,this.blendEquation=L,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Y,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}Zi.prototype=Object.assign(Object.create(n.prototype),{constructor:Zi,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===y;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==m&&(n.side=this.side),this.vertexColors!==A&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var $i="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Ji="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function eo(e){Zi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=$i,this.fragmentShader=Ji,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function to(e,t){this.origin=void 0!==e?e:new Gt,this.direction=void 0!==t?t:new Gt}function no(e,t,n){this.a=void 0!==e?e:new Gt,this.b=void 0!==t?t:new Gt,this.c=void 0!==n?n:new Gt}function ro(e){Zi.call(this),this.type="MeshBasicMaterial",this.color=new Ai(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function io(e,t){Li.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Wi,this.material=void 0!==t?t:new ro({color:16777215*Math.random()}),this.drawMode=_t,this.updateMorphTargets()}function oo(e,t,n,r){var i,o,a=new Ai(0),s=0,c=null,u=0;function l(t,r,l,d){var p=r.background,f=e.vr,g=f.getSession&&f.getSession();if(g&&"additive"===g.environmentBlendMode&&(p=null),null===p?(h(a,s),c=null,u=0):p&&p.isColor&&(h(p,1),d=!0,c=null,u=0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===o&&(o=new io(new Xi(1,1,1),new eo({type:"BackgroundCubeMaterial",uniforms:vi(xi.cube.uniforms),vertexShader:xi.cube.vertexShader,fragmentShader:xi.cube.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var y=p.isWebGLRenderTargetCube?p.texture:p;o.material.uniforms.tCube.value=y,o.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,c===p&&u===y.version||(o.material.needsUpdate=!0,c=p,u=y.version),t.unshift(o,o.geometry,o.material,0,0,null)}else p&&p.isTexture&&(void 0===i&&(i=new io(new Qi(2,2),new eo({type:"BackgroundMaterial",uniforms:vi(xi.background.uniforms),vertexShader:xi.background.vertexShader,fragmentShader:xi.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),i.geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&u===p.version||(i.material.needsUpdate=!0,c=p,u=p.version),t.unshift(i,i.geometry,i.material,0,0,null))}function h(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),s=void 0!==t?t:1,h(a,s)},getClearAlpha:function(){return s},setClearAlpha:function(e){s=e,h(a,s)},render:l}}function ao(e,t,n,r){var i;function o(e){i=e}function a(t,r){e.drawArrays(i,t,r),n.update(r,i)}function s(o,a,s){var c;if(r.isWebGL2)c=e;else if(c=t.get("ANGLE_instanced_arrays"),null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}this.setMode=o,this.render=a,this.renderInstances=s}function so(e,t,n){var r;function i(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r}function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",c=o(s);c!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",c,"instead."),s=c);var u=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),y=h>0,b=a||!!t.get("OES_texture_float"),A=y&&b,w=a?e.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:A,maxSamples:w}}function co(){var e=this,t=null,n=0,r=!1,i=!1,o=new tn,a=new Vt,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var c=null!==t?t.length:0,u=null;if(0!==c){if(u=s.value,!0!==i||null===u){var l=r+4*c,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<l)&&(u=new Float32Array(l));for(var d=0,p=r;d!==c;++d,p+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(u,p),u[p+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=c,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,o,a,l,h,d){if(!r||null===e||0===e.length||i&&!a)i?u(null):c();else{var p=i?0:n,f=4*p,m=h.clippingState||null;s.value=m,m=u(e,l,f,d);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function uo(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function lo(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);a.removeEventListener("dispose",o),delete r[a.id];var u=i[s.id];u&&(t.remove(u),delete i[s.id]),n.memory.geometries--}function a(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Wi).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)}function s(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,c=a.length;s<c;s++)t.update(a[s],34962)}function c(e){var n=i[e.id];if(n)return n;var r=[],o=e.index,a=e.attributes;if(null!==o)for(var s=o.array,c=0,u=s.length;c<u;c+=3){var l=s[c+0],h=s[c+1],d=s[c+2];r.push(l,h,h,d,d,l)}else for(s=a.position.array,c=0,u=s.length/3-1;c<u;c+=3){l=c+0,h=c+1,d=c+2;r.push(l,h,h,d,d,l)}return n=new(Gi(r)>65535?Ui:Fi)(r,1),t.update(n,34963),i[e.id]=n,n}return{get:a,update:s,getWireframeAttribute:c}}function ho(e,t,n,r){var i,o,a;function s(e){i=e}function c(e){o=e.type,a=e.bytesPerElement}function u(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)}function l(s,c,u){if(r.isWebGL2)l=e;else{var l=t.get("ANGLE_instanced_arrays");if(null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}l[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,u,o,c*a,s.maxInstancedCount),n.update(u,i,s.maxInstancedCount)}this.setMode=s,this.setIndex=c,this.render=u,this.renderInstances=l}function po(e){var t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,t,r){switch(r=r||1,n.calls++,t){case 4:n.triangles+=r*(e/3);break;case 5:case 6:n.triangles+=r*(e-2);break;case 1:n.lines+=r*(e/2);break;case 3:n.lines+=r*(e-1);break;case 2:n.lines+=r*e;break;case 0:n.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function fo(e,t){return Math.abs(t[1])-Math.abs(e[1])}function mo(e){var t={},n=new Float32Array(8);function r(r,i,o,a){var s=r.morphTargetInfluences,c=s.length,u=t[i.id];if(void 0===u){u=[];for(var l=0;l<c;l++)u[l]=[l,0];t[i.id]=u}var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<c;l++){var p=u[l];0!==p[1]&&(h&&i.removeAttribute("morphTarget"+l),d&&i.removeAttribute("morphNormal"+l))}for(l=0;l<c;l++){p=u[l];p[0]=l,p[1]=s[l]}u.sort(fo);for(l=0;l<8;l++){p=u[l];if(p){var f=p[0],m=p[1];if(m){h&&i.addAttribute("morphTarget"+l,h[f]),d&&i.addAttribute("morphNormal"+l,d[f]),n[l]=m;continue}}n[l]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function vo(e,t){var n={};function r(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a}function i(){n={}}return{update:r,dispose:i}}function go(e,t,n,r,i,o,a,s,c,u){e=void 0!==e?e:[],t=void 0!==t?t:ue,a=void 0!==a?a:Ne,Xt.call(this,e,t,n,r,i,o,a,s,c,u),this.flipY=!1}function yo(e,t,n,r){Xt.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=be,this.minFilter=be,this.wrapR=ge,this.generateMipmaps=!1,this.flipY=!1}function bo(e,t,n,r){Xt.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=be,this.minFilter=be,this.wrapR=ge,this.generateMipmaps=!1,this.flipY=!1}eo.prototype=Object.create(Zi.prototype),eo.prototype.constructor=eo,eo.prototype.isShaderMaterial=!0,eo.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vi(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},eo.prototype.toJSON=function(e){var t=Zi.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n],i=r.value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(t.extensions=o),t},Object.assign(to.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Gt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Gt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Gt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Gt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Gt,t=new Gt,n=new Gt;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,c,u,l,h=.5*r.distanceTo(i),d=-this.direction.dot(t),p=n.dot(this.direction),f=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(s=d*f-p,c=d*p-f,l=h*v,s>=0)if(c>=-l)if(c<=l){var g=1/v;s*=g,c*=g,u=s*(s+d*c+2*p)+c*(d*s+c+2*f)+m}else c=h,s=Math.max(0,-(d*c+p)),u=-s*s+c*(c+2*f)+m;else c=-h,s=Math.max(0,-(d*c+p)),u=-s*s+c*(c+2*f)+m;else c<=-l?(s=Math.max(0,-(-d*h+p)),c=s>0?-h:Math.min(Math.max(-h,-f),h),u=-s*s+c*(c+2*f)+m):c<=l?(s=0,c=Math.min(Math.max(-h,-f),h),u=c*(c+2*f)+m):(s=Math.max(0,-(d*h+p)),c=s>0?h:Math.min(Math.max(-h,-f),h),u=-s*s+c*(c+2*f)+m);else c=d>0?-h:h,s=Math.max(0,-(d*c+p)),u=-s*s+c*(c+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(c).add(e),u}}(),intersectSphere:function(){var e=new Gt;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new Gt;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new Gt,t=new Gt,n=new Gt,r=new Gt;return function(i,o,a,s,c){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,l=this.direction.dot(r);if(l>0){if(s)return null;u=1}else{if(!(l<0))return null;u=-1,l=-l}e.subVectors(this.origin,i);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=u*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>l)return null;var p=-u*e.dot(r);return p<0?null:this.at(p/l,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(no,{getNormal:function(){var e=new Gt;return function(t,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Gt),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new Gt,t=new Gt,n=new Gt;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var c=e.dot(e),u=e.dot(t),l=e.dot(n),h=t.dot(t),d=t.dot(n),p=c*h-u*u;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Gt),0===p)return s.set(-2,-1,-1);var f=1/p,m=(h*l-u*d)*f,v=(c*d-u*l)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new Gt;return function(t,n,r,i){return no.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new Gt;return function(t,n,r,i,o,a,s,c){return this.getBarycoord(t,n,r,i,e),c.set(0,0),c.addScaledVector(o,e.x),c.addScaledVector(a,e.y),c.addScaledVector(s,e.z),c}}()}),Object.assign(no.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Gt,t=new Gt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Gt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return no.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Gt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return no.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return no.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,r,i){return no.getUV(e,this.a,this.b,this.c,t,n,r,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new Gt,t=new Gt,n=new Gt,r=new Gt,i=new Gt,o=new Gt;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new Gt);var c,u,l=this.a,h=this.b,d=this.c;e.subVectors(h,l),t.subVectors(d,l),r.subVectors(a,l);var p=e.dot(r),f=t.dot(r);if(p<=0&&f<=0)return s.copy(l);i.subVectors(a,h);var m=e.dot(i),v=t.dot(i);if(m>=0&&v<=m)return s.copy(h);var g=p*v-m*f;if(g<=0&&p>=0&&m<=0)return c=p/(p-m),s.copy(l).addScaledVector(e,c);o.subVectors(a,d);var y=e.dot(o),b=t.dot(o);if(b>=0&&y<=b)return s.copy(d);var A=y*f-p*b;if(A<=0&&f>=0&&b<=0)return u=f/(f-b),s.copy(l).addScaledVector(t,u);var w=m*b-y*v;if(w<=0&&v-m>=0&&y-b>=0)return n.subVectors(d,h),u=(v-m)/(v-m+(y-b)),s.copy(h).addScaledVector(n,u);var x=1/(w+A+g);return c=A*x,u=g*x,s.copy(l).addScaledVector(e,c).addScaledVector(t,u)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),ro.prototype=Object.create(Zi.prototype),ro.prototype.constructor=ro,ro.prototype.isMeshBasicMaterial=!0,ro.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},io.prototype=Object.assign(Object.create(Li.prototype),{constructor:io,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Li.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var e=new Ht,t=new to,n=new en,r=new Gt,i=new Gt,o=new Gt,a=new Gt,s=new Gt,c=new Gt,u=new Gt,l=new Gt,h=new Gt,d=new jt,p=new jt,f=new jt,m=new Gt,y=new Gt;function b(e,t,n,r,i,o,a,s){var c;if(c=t.side===v?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==g,s),null===c)return null;y.copy(s),y.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(y);return u<n.near||u>n.far?null:{distance:u,point:y.clone(),object:e}}function A(e,t,n,v,g,y,A,w,x,E){r.fromBufferAttribute(g,w),i.fromBufferAttribute(g,x),o.fromBufferAttribute(g,E);var _=e.morphTargetInfluences;if(t.morphTargets&&y&&_){u.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var M=0,T=y.length;M<T;M++){var C=_[M],S=y[M];0!==C&&(a.fromBufferAttribute(S,w),s.fromBufferAttribute(S,x),c.fromBufferAttribute(S,E),u.addScaledVector(a.sub(r),C),l.addScaledVector(s.sub(i),C),h.addScaledVector(c.sub(o),C))}r.add(u),i.add(l),o.add(h)}var L=b(e,t,n,v,r,i,o,m);if(L){A&&(d.fromBufferAttribute(A,w),p.fromBufferAttribute(A,x),f.fromBufferAttribute(A,E),L.uv=no.getUV(m,r,i,o,d,p,f,new jt));var R=new Mi(w,x,E);no.getNormal(r,i,o,R.normal),L.face=R}return L}return function(r,i){var o,a=this.geometry,s=this.material,c=this.matrixWorld;if(void 0!==s&&(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(c),!1!==r.ray.intersectsSphere(n)&&(e.getInverse(c),t.copy(r.ray).applyMatrix4(e),null===a.boundingBox||!1!==t.intersectsBox(a.boundingBox))))if(a.isBufferGeometry){var u,l,h,v,g,y,w,x,E,_,M,T=a.index,C=a.attributes.position,S=a.morphAttributes.position,L=a.attributes.uv,R=a.groups,P=a.drawRange;if(null!==T)if(Array.isArray(s))for(v=0,y=R.length;v<y;v++)for(x=R[v],E=s[x.materialIndex],_=Math.max(x.start,P.start),M=Math.min(x.start+x.count,P.start+P.count),g=_,w=M;g<w;g+=3)u=T.getX(g),l=T.getX(g+1),h=T.getX(g+2),o=A(this,E,r,t,C,S,L,u,l,h),o&&(o.faceIndex=Math.floor(g/3),o.face.materialIndex=x.materialIndex,i.push(o));else for(_=Math.max(0,P.start),M=Math.min(T.count,P.start+P.count),v=_,y=M;v<y;v+=3)u=T.getX(v),l=T.getX(v+1),h=T.getX(v+2),o=A(this,s,r,t,C,S,L,u,l,h),o&&(o.faceIndex=Math.floor(v/3),i.push(o));else if(void 0!==C)if(Array.isArray(s))for(v=0,y=R.length;v<y;v++)for(x=R[v],E=s[x.materialIndex],_=Math.max(x.start,P.start),M=Math.min(x.start+x.count,P.start+P.count),g=_,w=M;g<w;g+=3)u=g,l=g+1,h=g+2,o=A(this,E,r,t,C,S,L,u,l,h),o&&(o.faceIndex=Math.floor(g/3),o.face.materialIndex=x.materialIndex,i.push(o));else for(_=Math.max(0,P.start),M=Math.min(C.count,P.start+P.count),v=_,y=M;v<y;v+=3)u=v,l=v+1,h=v+2,o=A(this,s,r,t,C,S,L,u,l,h),o&&(o.faceIndex=Math.floor(v/3),i.push(o))}else if(a.isGeometry){var O,D,I,B,k=Array.isArray(s),F=a.vertices,N=a.faces,U=a.faceVertexUvs[0];U.length>0&&(B=U);for(var j=0,H=N.length;j<H;j++){var z=N[j],G=k?s[z.materialIndex]:s;if(void 0!==G&&(O=F[z.a],D=F[z.b],I=F[z.c],o=b(this,G,r,t,O,D,I,m),o)){if(B&&B[j]){var V=B[j];d.copy(V[0]),p.copy(V[1]),f.copy(V[2]),o.uv=no.getUV(m,O,D,I,d,p,f,new jt)}o.face=z,o.faceIndex=j,i.push(o)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),go.prototype=Object.create(Xt.prototype),go.prototype.constructor=go,go.prototype.isCubeTexture=!0,Object.defineProperty(go.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),yo.prototype=Object.create(Xt.prototype),yo.prototype.constructor=yo,yo.prototype.isDataTexture2DArray=!0,bo.prototype=Object.create(Xt.prototype),bo.prototype.constructor=bo,bo.prototype.isDataTexture3D=!0;var Ao=new Xt,wo=new yo,xo=new bo,Eo=new go;function _o(){this.seq=[],this.map={}}var Mo=[],To=[],Co=new Float32Array(16),So=new Float32Array(9),Lo=new Float32Array(4);function Ro(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Mo[i];if(void 0===o&&(o=new Float32Array(i),Mo[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Po(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Oo(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Do(e,t){var n=To[t];void 0===n&&(n=new Int32Array(t),To[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function Io(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Bo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ko(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Po(n,t))return;e.uniform2fv(this.addr,t),Oo(n,t)}}function Fo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Po(n,t))return;e.uniform3fv(this.addr,t),Oo(n,t)}}function No(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Po(n,t))return;e.uniform4fv(this.addr,t),Oo(n,t)}}function Uo(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Po(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Oo(n,t)}else{if(Po(n,r))return;Lo.set(r),e.uniformMatrix2fv(this.addr,!1,Lo),Oo(n,r)}}function jo(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Po(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Oo(n,t)}else{if(Po(n,r))return;So.set(r),e.uniformMatrix3fv(this.addr,!1,So),Oo(n,r)}}function Ho(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Po(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Oo(n,t)}else{if(Po(n,r))return;Co.set(r),e.uniformMatrix4fv(this.addr,!1,Co),Oo(n,r)}}function zo(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Ao,i)}function Go(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||wo,i)}function Vo(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||xo,i)}function Wo(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Eo,i)}function qo(e,t){var n=this.cache;Po(n,t)||(e.uniform2iv(this.addr,t),Oo(n,t))}function Xo(e,t){var n=this.cache;Po(n,t)||(e.uniform3iv(this.addr,t),Oo(n,t))}function Yo(e,t){var n=this.cache;Po(n,t)||(e.uniform4iv(this.addr,t),Oo(n,t))}function Qo(e){switch(e){case 5126:return Io;case 35664:return ko;case 35665:return Fo;case 35666:return No;case 35674:return Uo;case 35675:return jo;case 35676:return Ho;case 35678:case 36198:return zo;case 35679:return Vo;case 35680:return Wo;case 36289:return Go;case 5124:case 35670:return Bo;case 35667:case 35671:return qo;case 35668:case 35672:return Xo;case 35669:case 35673:return Yo}}function Ko(e,t){var n=this.cache;Po(n,t)||(e.uniform1fv(this.addr,t),Oo(n,t))}function Zo(e,t){var n=this.cache;Po(n,t)||(e.uniform1iv(this.addr,t),Oo(n,t))}function $o(e,t){var n=this.cache,r=Ro(t,this.size,2);Po(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function Jo(e,t){var n=this.cache,r=Ro(t,this.size,3);Po(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function ea(e,t){var n=this.cache,r=Ro(t,this.size,4);Po(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function ta(e,t){var n=this.cache,r=Ro(t,this.size,4);Po(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function na(e,t){var n=this.cache,r=Ro(t,this.size,9);Po(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function ra(e,t){var n=this.cache,r=Ro(t,this.size,16);Po(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function ia(e,t,n){var r=this.cache,i=t.length,o=Do(n,i);!1===Po(r,o)&&(e.uniform1iv(this.addr,o),Oo(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||Ao,o[a])}function oa(e,t,n){var r=this.cache,i=t.length,o=Do(n,i);!1===Po(r,o)&&(e.uniform1iv(this.addr,o),Oo(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||Eo,o[a])}function aa(e){switch(e){case 5126:return Ko;case 35664:return $o;case 35665:return Jo;case 35666:return ea;case 35674:return ta;case 35675:return na;case 35676:return ra;case 35678:return ia;case 35680:return oa;case 5124:case 35670:return Zo;case 35667:case 35671:return qo;case 35668:case 35672:return Xo;case 35669:case 35673:return Yo}}function sa(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Qo(t.type)}function ca(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=aa(t.type)}function ua(e){this.id=e,_o.call(this)}ca.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Oo(t,e)},ua.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var la=/([\w\d_]+)(\])?(\[|\.)?/g;function ha(e,t){e.seq.push(t),e.map[t.id]=t}function da(e,t,n){var r=e.name,i=r.length;la.lastIndex=0;while(1){var o=la.exec(r),a=la.lastIndex,s=o[1],c="]"===o[2],u=o[3];if(c&&(s|=0),void 0===u||"["===u&&a+2===i){ha(n,void 0===u?new sa(s,e,t):new ca(s,e,t));break}var l=n.map,h=l[s];void 0===h&&(h=new ua(s),ha(n,h)),n=h}}function pa(e,t,n){_o.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,35718),i=0;i<r;++i){var o=e.getActiveUniform(t,i),a=e.getUniformLocation(t,o.name);da(o,a,this)}}function fa(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function ma(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(r),fa(n)),r}pa.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},pa.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},pa.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},pa.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var va=0;function ga(e){switch(e){case Ct:return["Linear","( value )"];case St:return["sRGB","( value )"];case Rt:return["RGBE","( value )"];case Ot:return["RGBM","( value, 7.0 )"];case Dt:return["RGBM","( value, 16.0 )"];case It:return["RGBD","( value, 256.0 )"];case Lt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function ya(e,t){var n=ga(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ba(e,t){var n=ga(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Aa(e,t){var n;switch(t){case re:n="Linear";break;case ie:n="Reinhard";break;case oe:n="Uncharted2";break;case ae:n="OptimizedCineon";break;case se:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function wa(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(_a).join("\n")}function xa(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function Ea(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i),a=o.name;n[a]=e.getAttribLocation(t,a)}return n}function _a(e){return""!==e}function Ma(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Ta(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Ca(e){var t=/^[ \t]*#include +<([\w\d.\/]+)>/gm;function n(e,t){var n=mi[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ca(n)}return e.replace(t,n)}function Sa(e){var t=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function n(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}return e.replace(t,n)}function La(e,t,n,r,i,o,a){var s=e.context,c=r.defines,u=i.vertexShader,l=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===p?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===f&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",v="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case ue:case le:d="ENVMAP_TYPE_CUBE";break;case fe:case me:d="ENVMAP_TYPE_CUBE_UV";break;case he:case de:d="ENVMAP_TYPE_EQUIREC";break;case pe:d="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case le:case de:m="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case J:v="ENVMAP_BLENDING_MULTIPLY";break;case ee:v="ENVMAP_BLENDING_MIX";break;case te:v="ENVMAP_BLENDING_ADD";break}}var g,y,b=e.gammaFactor>0?e.gammaFactor:1,A=a.isWebGL2?"":wa(r.extensions,o,t),w=xa(c),x=s.createProgram();if(r.isRawShaderMaterial?(g=[w].filter(_a).join("\n"),g.length>0&&(g+="\n"),y=[A,w].filter(_a).join("\n"),y.length>0&&(y+="\n")):(g=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,w,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_a).join("\n"),y=[A,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,w,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+m:"",o.envMap?"#define "+v:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ne?"#define TONE_MAPPING":"",o.toneMapping!==ne?mi["tonemapping_pars_fragment"]:"",o.toneMapping!==ne?Aa("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?mi["encodings_pars_fragment"]:"",o.mapEncoding?ya("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?ya("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?ya("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?ya("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?ba("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(_a).join("\n")),u=Ca(u),u=Ma(u,o),u=Ta(u,o),l=Ca(l),l=Ma(l,o),l=Ta(l,o),u=Sa(u),l=Sa(l),a.isWebGL2&&!r.isRawShaderMaterial){var E=!1,_=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==u.match(_)&&null!==l.match(_)&&(E=!0,u=u.replace(_,""),l=l.replace(_,"")),g=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#version 300 es\n","#define varying in",E?"":"out highp vec4 pc_fragColor;",E?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y}var M=g+u,T=y+l,C=ma(s,35633,M),S=ma(s,35632,T);s.attachShader(x,C),s.attachShader(x,S),void 0!==r.index0AttributeName?s.bindAttribLocation(x,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);var L,R,P=s.getProgramInfoLog(x).trim(),O=s.getShaderInfoLog(C).trim(),D=s.getShaderInfoLog(S).trim(),I=!0,B=!0;return!1===s.getProgramParameter(x,35714)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(x,35715),"gl.getProgramInfoLog",P,O,D)):""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==O&&""!==D||(B=!1),B&&(this.diagnostics={runnable:I,material:r,programLog:P,vertexShader:{log:O,prefix:g},fragmentShader:{log:D,prefix:y}}),s.deleteShader(C),s.deleteShader(S),this.getUniforms=function(){return void 0===L&&(L=new pa(s,x,e)),L},this.getAttributes=function(){return void 0===R&&(R=Ea(s,x)),R},this.destroy=function(){s.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=va++,this.code=n,this.usedTimes=1,this.program=x,this.vertexShader=C,this.fragmentShader=S,this}function Ra(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e){var t=e.skeleton,r=t.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,o=Math.floor((i-20)/4),a=Math.min(o,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function s(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Ct,n===Ct&&t&&(n=Lt),n}this.getParameters=function(t,r,o,c,u,l,h){var d=i[t.type],p=h.isSkinnedMesh?a(h):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision),f!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead."));var m=e.getRenderTarget(),y={shaderID:d,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:s(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:s(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===fe||t.envMap.mapping===me),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Nt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,fog:!!c,useFog:t.fog,fogExp:c&&c.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===g,flipSided:t.side===v,depthPacking:void 0!==t.depthPacking&&t.depthPacking};return y},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.push(e.gammaFactor),r.join()},this.acquireProgram=function(i,o,a,s){for(var c,u=0,l=r.length;u<l;u++){var h=r[u];if(h.code===s){c=h,++c.usedTimes;break}}return void 0===c&&(c=new La(e,t,s,i,o,a,n),r.push(c)),c},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function Pa(){var e=new WeakMap;function t(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function r(t,n,r){e.get(t)[n]=r}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function Oa(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Da(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ia(){var e=[],t=0,n=[],r=[];function i(){t=0,n.length=0,r.length=0}function o(n,r,i,o,a,s){var c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:i,program:i.program,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=i,c.program=i.program,c.groupOrder=o,c.renderOrder=n.renderOrder,c.z=a,c.group=s),t++,c}function a(e,t,i,a,s,c){var u=o(e,t,i,a,s,c);(!0===i.transparent?r:n).push(u)}function s(e,t,i,a,s,c){var u=o(e,t,i,a,s,c);(!0===i.transparent?r:n).unshift(u)}function c(){n.length>1&&n.sort(Oa),r.length>1&&r.sort(Da)}return{opaque:n,transparent:r,init:i,push:a,unshift:s,sort:c}}function Ba(){var e={};function t(n){var r=n.target;r.removeEventListener("dispose",t),delete e[r.id]}function n(n,r){var i,o=e[n.id];return void 0===o?(i=new Ia,e[n.id]={},e[n.id][r.id]=i,n.addEventListener("dispose",t)):(i=o[r.id],void 0===i&&(i=new Ia,o[r.id]=i)),i}function r(){e={}}return{get:n,dispose:r}}function ka(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Gt,color:new Ai,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"SpotLight":n={position:new Gt,direction:new Gt,color:new Ai,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new jt};break;case"PointLight":n={position:new Gt,color:new Ai,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new jt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Gt,skyColor:new Ai,groundColor:new Ai};break;case"RectAreaLight":n={color:new Ai,position:new Gt,halfWidth:new Gt,halfHeight:new Gt};break}return e[t.id]=n,n}}}var Fa=0;function Na(){var e=new ka,t={id:Fa++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Gt,r=new Ht,i=new Ht;function o(o,a,s){for(var c=0,u=0,l=0,h=0,d=0,p=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var b=o[g],A=b.color,w=b.intensity,x=b.distance,E=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)c+=A.r*w,u+=A.g*w,l+=A.b*w;else if(b.isDirectionalLight){var _=e.get(b);if(_.color.copy(b.color).multiplyScalar(b.intensity),_.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),_.direction.sub(n),_.direction.transformDirection(v),_.shadow=b.castShadow,b.castShadow){var M=b.shadow;_.shadowBias=M.bias,_.shadowRadius=M.radius,_.shadowMapSize=M.mapSize}t.directionalShadowMap[h]=E,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=_,h++}else if(b.isSpotLight){_=e.get(b);if(_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(v),_.color.copy(A).multiplyScalar(w),_.distance=x,_.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),_.direction.sub(n),_.direction.transformDirection(v),_.coneCos=Math.cos(b.angle),_.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),_.decay=b.decay,_.shadow=b.castShadow,b.castShadow){M=b.shadow;_.shadowBias=M.bias,_.shadowRadius=M.radius,_.shadowMapSize=M.mapSize}t.spotShadowMap[p]=E,t.spotShadowMatrix[p]=b.shadow.matrix,t.spot[p]=_,p++}else if(b.isRectAreaLight){_=e.get(b);_.color.copy(A).multiplyScalar(w),_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(v),i.identity(),r.copy(b.matrixWorld),r.premultiply(v),i.extractRotation(r),_.halfWidth.set(.5*b.width,0,0),_.halfHeight.set(0,.5*b.height,0),_.halfWidth.applyMatrix4(i),_.halfHeight.applyMatrix4(i),t.rectArea[f]=_,f++}else if(b.isPointLight){_=e.get(b);if(_.position.setFromMatrixPosition(b.matrixWorld),_.position.applyMatrix4(v),_.color.copy(b.color).multiplyScalar(b.intensity),_.distance=b.distance,_.decay=b.decay,_.shadow=b.castShadow,b.castShadow){M=b.shadow;_.shadowBias=M.bias,_.shadowRadius=M.radius,_.shadowMapSize=M.mapSize,_.shadowCameraNear=M.camera.near,_.shadowCameraFar=M.camera.far}t.pointShadowMap[d]=E,t.pointShadowMatrix[d]=b.shadow.matrix,t.point[d]=_,d++}else if(b.isHemisphereLight){_=e.get(b);_.direction.setFromMatrixPosition(b.matrixWorld),_.direction.transformDirection(v),_.direction.normalize(),_.skyColor.copy(b.color).multiplyScalar(w),_.groundColor.copy(b.groundColor).multiplyScalar(w),t.hemi[m]=_,m++}}t.ambient[0]=c,t.ambient[1]=u,t.ambient[2]=l,t.directional.length=h,t.spot.length=p,t.rectArea.length=f,t.point.length=d,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=d,t.hash.spotLength=p,t.hash.rectAreaLength=f,t.hash.hemiLength=m,t.hash.shadowsLength=a.length}return{setup:o,state:t}}function Ua(){var e=new Na,t=[],n=[];function r(){t.length=0,n.length=0}function i(e){t.push(e)}function o(e){n.push(e)}function a(r){e.setup(t,n,r)}var s={lightsArray:t,shadowsArray:n,lights:e};return{init:r,state:s,setupLights:a,pushLight:i,pushShadow:o}}function ja(){var e={};function t(n){var r=n.target;r.removeEventListener("dispose",t),delete e[r.id]}function n(n,r){var i;return void 0===e[n.id]?(i=new Ua,e[n.id]={},e[n.id][r.id]=i,n.addEventListener("dispose",t)):void 0===e[n.id][r.id]?(i=new Ua,e[n.id][r.id]=i):i=e[n.id][r.id],i}function r(){e={}}return{get:n,dispose:r}}function Ha(e){Zi.call(this),this.type="MeshDepthMaterial",this.depthPacking=Bt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function za(e){Zi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Gt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Ga(e,t,n){for(var r=new nn,i=new Ht,o=new jt,a=new jt(n,n),s=new Gt,c=new Gt,u=1,l=2,h=1+(u|l),d=new Array(h),f=new Array(h),y={},b={0:v,1:m,2:g},A=[new Gt(1,0,0),new Gt(-1,0,0),new Gt(0,0,1),new Gt(0,0,-1),new Gt(0,1,0),new Gt(0,-1,0)],w=[new Gt(0,1,0),new Gt(0,1,0),new Gt(0,1,0),new Gt(0,1,0),new Gt(0,0,1),new Gt(0,0,-1)],x=[new Yt,new Yt,new Yt,new Yt,new Yt,new Yt],_=0;_!==h;++_){var M=0!==(_&u),T=0!==(_&l),C=new Ha({depthPacking:kt,morphTargets:M,skinning:T});d[_]=C;var S=new za({morphTargets:M,skinning:T});f[_]=S}var L=this;function R(t,n,r,i,o,a){var s=t.geometry,c=null,h=d,p=t.customDepthMaterial;if(r&&(h=f,p=t.customDistanceMaterial),p)c=p;else{var m=!1;n.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var v=t.isSkinnedMesh&&n.skinning,g=0;m&&(g|=u),v&&(g|=l),c=h[g]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var A=c.uuid,w=n.uuid,x=y[A];void 0===x&&(x={},y[A]=x);var E=x[w];void 0===E&&(E=c.clone(),x[w]=E),c=E}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:b[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,r&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=o,c.farDistance=a),c}function P(n,i,o,a){if(!1!==n.visible){var s=n.layers.test(i.layers);if(s&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var h=u.groups,d=0,p=h.length;d<p;d++){var f=h[d],m=l[f.materialIndex];if(m&&m.visible){var v=R(n,m,a,c,o.near,o.far);e.renderBufferDirect(o,null,u,v,n,f)}}else if(l.visible){v=R(n,l,a,c,o.near,o.far);e.renderBufferDirect(o,null,u,v,n,null)}}for(var g=n.children,y=0,b=g.length;y<b;y++)P(g[y],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(t,n,u){if(!1!==L.enabled&&(!1!==L.autoUpdate||!1!==L.needsUpdate)&&0!==t.length){var l,h=e.getRenderTarget(),d=e.state;d.setBlending(E),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var m=t[p],v=m.shadow,g=m&&m.isPointLight;if(void 0!==v){var y=v.camera;if(o.copy(v.mapSize),o.min(a),g){var b=o.x,_=o.y;x[0].set(2*b,_,b,_),x[1].set(0,_,b,_),x[2].set(3*b,_,b,_),x[3].set(b,_,b,_),x[4].set(3*b,0,b,_),x[5].set(b,0,b,_),o.x*=4,o.y*=2}if(null===v.map){var M={minFilter:be,magFilter:be,format:Ue};v.map=new Qt(o.x,o.y,M),v.map.texture.name=m.name+".shadowMap",y.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(m);var T=v.map,C=v.matrix;c.setFromMatrixPosition(m.matrixWorld),y.position.copy(c),g?(l=6,C.makeTranslation(-c.x,-c.y,-c.z)):(l=1,s.setFromMatrixPosition(m.target.matrixWorld),y.lookAt(s),y.updateMatrixWorld(),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(y.projectionMatrix),C.multiply(y.matrixWorldInverse)),e.setRenderTarget(T),e.clear();for(var S=0;S<l;S++){if(g){s.copy(y.position),s.add(A[S]),y.up.copy(w[S]),y.lookAt(s),y.updateMatrixWorld();var R=x[S];d.viewport(R)}i.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),r.setFromMatrix(i),P(n,u,y,g)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}L.needsUpdate=!1,e.setRenderTarget(h)}}}function Va(e,t,n,r){function i(){var t=!1,n=new Yt,r=null,i=new Yt(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function o(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?he(2929):de(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case W:e.depthFunc(512);break;case q:e.depthFunc(519);break;case X:e.depthFunc(513);break;case Y:e.depthFunc(515);break;case Q:e.depthFunc(514);break;case K:e.depthFunc(518);break;case Z:e.depthFunc(516);break;case $:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function u(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null;return{setTest:function(e){e?he(2960):de(2960)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&c===r||(e.stencilOp(t,n,r),a=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null}}}var l=new i,h=new o,d=new u,p=e.getParameter(34921),f=new Uint8Array(p),m=new Uint8Array(p),y=new Uint8Array(p),b={},A=null,w=null,x=null,R=null,P=null,O=null,D=null,I=null,B=null,k=null,F=!1,N=null,U=null,j=null,H=null,z=null,G=e.getParameter(35661),V=!1,J=0,ee=e.getParameter(7938);-1!==ee.indexOf("WebGL")?(J=parseFloat(/^WebGL\ ([0-9])/.exec(ee)[1]),V=J>=1):-1!==ee.indexOf("OpenGL ES")&&(J=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ee)[1]),V=J>=2);var te=null,ne={},re=new Yt,ie=new Yt;function oe(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var ae={};function se(){for(var e=0,t=f.length;e<t;e++)f[e]=0}function ce(e){ue(e,0)}function ue(n,i){if(f[n]=1,0===m[n]&&(e.enableVertexAttribArray(n),m[n]=1),y[n]!==i){var o=r.isWebGL2?e:t.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),y[n]=i}}function le(){for(var t=0,n=m.length;t!==n;++t)m[t]!==f[t]&&(e.disableVertexAttribArray(t),m[t]=0)}function he(t){!0!==b[t]&&(e.enable(t),b[t]=!0)}function de(t){!1!==b[t]&&(e.disable(t),b[t]=!1)}function pe(){if(null===A&&(A=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),r=0;r<n.length;r++)A.push(n[r]);return A}function fe(t){return w!==t&&(e.useProgram(t),w=t,!0)}function me(t,r,i,o,a,s,c,u){if(t!==E){if(x||(he(3042),x=!0),t===S)a=a||r,s=s||i,c=c||o,r===P&&a===I||(e.blendEquationSeparate(n.convert(r),n.convert(a)),P=r,I=a),i===O&&o===D&&s===B&&c===k||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(c)),O=i,D=o,B=s,k=c),R=t,F=null;else if(t!==R||u!==F){if(P===L&&I===L||(e.blendEquation(32774),P=L,I=L),u)switch(t){case _:e.blendFuncSeparate(1,771,1,771);break;case M:e.blendFunc(1,1);break;case T:e.blendFuncSeparate(0,0,769,771);break;case C:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case _:e.blendFuncSeparate(770,771,1,771);break;case M:e.blendFunc(770,1);break;case T:e.blendFunc(0,769);break;case C:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}O=null,D=null,B=null,k=null,R=t,F=u}}else x&&(de(3042),x=!1)}function ve(e,t){e.side===g?de(2884):he(2884);var n=e.side===v;t&&(n=!n),ge(n),e.blending===_&&!1===e.transparent?me(E):me(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),h.setFunc(e.depthFunc),h.setTest(e.depthTest),h.setMask(e.depthWrite),l.setMask(e.colorWrite),Ae(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function ge(t){N!==t&&(t?e.frontFace(2304):e.frontFace(2305),N=t)}function ye(t){t!==a?(he(2884),t!==U&&(t===s?e.cullFace(1029):t===c?e.cullFace(1028):e.cullFace(1032))):de(2884),U=t}function be(t){t!==j&&(V&&e.lineWidth(t),j=t)}function Ae(t,n,r){t?(he(32823),H===n&&z===r||(e.polygonOffset(n,r),H=n,z=r)):de(32823)}function we(e){e?he(3089):de(3089)}function xe(t){void 0===t&&(t=33984+G-1),te!==t&&(e.activeTexture(t),te=t)}function Ee(t,n){null===te&&xe();var r=ne[te];void 0===r&&(r={type:void 0,texture:void 0},ne[te]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||ae[t]),r.type=t,r.texture=n)}function _e(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Me(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Te(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ce(t){!1===re.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),re.copy(t))}function Se(t){!1===ie.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ie.copy(t))}function Le(){for(var t=0;t<m.length;t++)1===m[t]&&(e.disableVertexAttribArray(t),m[t]=0);b={},A=null,te=null,ne={},w=null,R=null,N=null,U=null,l.reset(),h.reset(),d.reset()}return ae[3553]=oe(3553,3553,1),ae[34067]=oe(34067,34069,6),l.setClear(0,0,0,1),h.setClear(1),d.setClear(0),he(2929),h.setFunc(Y),ge(!1),ye(s),he(2884),me(E),{buffers:{color:l,depth:h,stencil:d},initAttributes:se,enableAttribute:ce,enableAttributeAndDivisor:ue,disableUnusedAttributes:le,enable:he,disable:de,getCompressedTextureFormats:pe,useProgram:fe,setBlending:me,setMaterial:ve,setFlipSided:ge,setCullFace:ye,setLineWidth:be,setPolygonOffset:Ae,setScissorTest:we,activeTexture:xe,bindTexture:Ee,compressedTexImage2D:_e,texImage2D:Me,texImage3D:Te,scissor:Ce,viewport:Se,reset:Le}}function Wa(e,t,n,r,i,o,a){var s,c={},u="undefined"!==typeof OffscreenCanvas;function l(e,t){return u?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function h(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?Ut.floorPowerOfTwo:Math.floor,a=o(i*e.width),c=o(i*e.height);void 0===s&&(s=l(a,c));var u=n?l(a,c):s;u.width=a,u.height=c;var h=u.getContext("2d");return h.drawImage(e,0,0,a,c),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+c+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function d(e){return Ut.isPowerOfTwo(e.width)&&Ut.isPowerOfTwo(e.height)}function p(e){return!i.isWebGL2&&(e.wrapS!==ge||e.wrapT!==ge||e.minFilter!==be&&e.minFilter!==xe)}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==be&&e.minFilter!==xe}function m(t,n,i,o){e.generateMipmap(t);var a=r.get(n);a.__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function v(e,n){if(!i.isWebGL2)return e;var r=e;return 6403===e&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===e&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===e&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?t.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function g(e){return e===be||e===Ae||e===we?9728:9729}function y(e){var t=e.target;t.removeEventListener("dispose",y),A(t),t.isVideoTexture&&delete c[t.id],a.memory.textures--}function b(e){var t=e.target;t.removeEventListener("dispose",b),w(t),a.memory.textures--}function A(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}function w(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}function x(e,t){var i=r.get(e);if(e.isVideoTexture&&N(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function E(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))}function _(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))}function M(t,a){var s=r.get(t);if(6===t.image.length)if(t.version>0&&s.__version!==t.version){S(s,t),n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture),e.pixelStorei(37440,t.flipY);for(var c=t&&t.isCompressedTexture,u=t.image[0]&&t.image[0].isDataTexture,l=[],p=0;p<6;p++)l[p]=c||u?u?t.image[p].image:t.image[p]:h(t.image[p],!1,!0,i.maxCubemapSize);var g=l[0],y=d(g)||i.isWebGL2,b=o.convert(t.format),A=o.convert(t.type),w=v(b,A);C(34067,t,y);for(p=0;p<6;p++)if(c)for(var x,E=l[p].mipmaps,_=0,M=E.length;_<M;_++)x=E[_],t.format!==Ue&&t.format!==Ne?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+p,_,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+p,_,w,x.width,x.height,0,b,A,x.data);else u?n.texImage2D(34069+p,0,w,l[p].width,l[p].height,0,b,A,l[p].data):n.texImage2D(34069+p,0,w,b,A,l[p]);s.__maxMipLevel=c?E.length-1:0,f(t,y)&&m(34067,t,g.width,g.height),s.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture)}function T(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}function C(n,a,s){var c;if(s?(e.texParameteri(n,10242,o.convert(a.wrapS)),e.texParameteri(n,10243,o.convert(a.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,o.convert(a.wrapR)),e.texParameteri(n,10240,o.convert(a.magFilter)),e.texParameteri(n,10241,o.convert(a.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===ge&&a.wrapT===ge||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,g(a.magFilter)),e.texParameteri(n,10241,g(a.minFilter)),a.minFilter!==be&&a.minFilter!==xe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),c=t.get("EXT_texture_filter_anisotropic"),c){if(a.type===Pe&&null===t.get("OES_texture_float_linear"))return;if(a.type===Oe&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function S(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",y),t.__webglTexture=e.createTexture(),a.memory.textures++)}function L(t,r,a){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),S(t,r),n.activeTexture(33984+a),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var c=p(r)&&!1===d(r.image),u=h(r.image,c,!1,i.maxTextureSize),l=d(u)||i.isWebGL2,g=o.convert(r.format),y=o.convert(r.type),b=v(g,y);C(s,r,l);var A,w=r.mipmaps;if(r.isDepthTexture){if(b=6402,r.type===Pe){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");b=36012}else i.isWebGL2&&(b=33189);r.format===Ge&&6402===b&&r.type!==Se&&r.type!==Re&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Se,y=o.convert(r.type)),r.format===Ve&&(b=34041,r.type!==ke&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ke,y=o.convert(r.type))),n.texImage2D(3553,0,b,u.width,u.height,0,g,y,null)}else if(r.isDataTexture)if(w.length>0&&l){for(var x=0,E=w.length;x<E;x++)A=w[x],n.texImage2D(3553,x,b,A.width,A.height,0,g,y,A.data);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,u.width,u.height,0,g,y,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(x=0,E=w.length;x<E;x++)A=w[x],r.format!==Ue&&r.format!==Ne?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,x,b,A.width,A.height,0,A.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,x,b,A.width,A.height,0,g,y,A.data);t.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,b,u.width,u.height,u.depth,0,g,y,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,b,u.width,u.height,u.depth,0,g,y,u.data),t.__maxMipLevel=0;else if(w.length>0&&l){for(x=0,E=w.length;x<E;x++)A=w[x],n.texImage2D(3553,x,b,g,y,A);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,g,y,u),t.__maxMipLevel=0;f(r,l)&&m(3553,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,i,a,s){var c=o.convert(i.texture.format),u=o.convert(i.texture.type),l=v(c,u);n.texImage2D(s,0,l,i.width,i.height,0,c,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function P(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=F(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=F(n);e.renderbufferStorageMultisample(36161,i,34041,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var a=o.convert(n.texture.format),s=o.convert(n.texture.type),c=v(a,s);if(r){i=F(n);e.renderbufferStorageMultisample(36161,i,c,n.width,n.height)}else e.renderbufferStorage(36161,c,n.width,n.height)}e.bindRenderbuffer(36161,null)}function O(t,n){var i=n&&n.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),x(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ge)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(n.depthTexture.format!==Ve)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}function D(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");O(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),P(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),P(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function I(t){var s=r.get(t),c=r.get(t.texture);t.addEventListener("dispose",b),c.__webglTexture=e.createTexture(),a.memory.textures++;var u=!0===t.isWebGLRenderTargetCube,l=!0===t.isWebGLMultisampleRenderTarget,h=d(t)||i.isWebGL2;if(u){s.__webglFramebuffer=[];for(var p=0;p<6;p++)s.__webglFramebuffer[p]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),l)if(i.isWebGL2){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var g=o.convert(t.texture.format),y=o.convert(t.texture.type),A=v(g,y),w=F(t);e.renderbufferStorageMultisample(36161,w,A,t.width,t.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),P(s.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,c.__webglTexture),C(34067,t.texture,h);for(p=0;p<6;p++)R(s.__webglFramebuffer[p],t,36064,34069+p);f(t.texture,h)&&m(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,c.__webglTexture),C(3553,t.texture,h),R(s.__webglFramebuffer,t,36064,3553),f(t.texture,h)&&m(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&D(t)}function B(e){var t=e.texture,o=d(e)||i.isWebGL2;if(f(t,o)){var a=e.isWebGLRenderTargetCube?34067:3553,s=r.get(t).__webglTexture;n.bindTexture(a,s),m(a,t,e.width,e.height),n.bindTexture(a,null)}}function k(t){if(t.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var o=t.width,a=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function F(e){return i.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,e.samples):0}function N(e){var t=e.id,n=a.render.frame;c[t]!==n&&(c[t]=n,e.update())}this.setTexture2D=x,this.setTexture2DArray=E,this.setTexture3D=_,this.setTextureCube=M,this.setTextureCubeDynamic=T,this.setupRenderTarget=I,this.updateRenderTargetMipmap=B,this.updateMultisampleRenderTarget=k}function qa(e,t,n){function r(e){var r;if(e===ve)return 10497;if(e===ge)return 33071;if(e===ye)return 33648;if(e===be)return 9728;if(e===Ae)return 9984;if(e===we)return 9986;if(e===xe)return 9729;if(e===Ee)return 9985;if(e===_e)return 9987;if(e===Me)return 5121;if(e===De)return 32819;if(e===Ie)return 32820;if(e===Be)return 33635;if(e===Te)return 5120;if(e===Ce)return 5122;if(e===Se)return 5123;if(e===Le)return 5124;if(e===Re)return 5125;if(e===Pe)return 5126;if(e===Oe){if(n.isWebGL2)return 5131;if(r=t.get("OES_texture_half_float"),null!==r)return r.HALF_FLOAT_OES}if(e===Fe)return 6406;if(e===Ne)return 6407;if(e===Ue)return 6408;if(e===je)return 6409;if(e===He)return 6410;if(e===Ge)return 6402;if(e===Ve)return 34041;if(e===We)return 6403;if(e===L)return 32774;if(e===R)return 32778;if(e===P)return 32779;if(e===I)return 0;if(e===B)return 1;if(e===k)return 768;if(e===F)return 769;if(e===N)return 770;if(e===U)return 771;if(e===j)return 772;if(e===H)return 773;if(e===z)return 774;if(e===G)return 775;if(e===V)return 776;if((e===qe||e===Xe||e===Ye||e===Qe)&&(r=t.get("WEBGL_compressed_texture_s3tc"),null!==r)){if(e===qe)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Xe)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ye)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Qe)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Ke||e===Ze||e===$e||e===Je)&&(r=t.get("WEBGL_compressed_texture_pvrtc"),null!==r)){if(e===Ke)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ze)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===$e)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Je)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===et&&(r=t.get("WEBGL_compressed_texture_etc1"),null!==r))return r.COMPRESSED_RGB_ETC1_WEBGL;if((e===tt||e===nt||e===rt||e===it||e===ot||e===at||e===st||e===ct||e===ut||e===lt||e===ht||e===dt||e===pt||e===ft)&&(r=t.get("WEBGL_compressed_texture_astc"),null!==r))return e;if(e===O||e===D){if(n.isWebGL2){if(e===O)return 32775;if(e===D)return 32776}if(r=t.get("EXT_blend_minmax"),null!==r){if(e===O)return r.MIN_EXT;if(e===D)return r.MAX_EXT}}if(e===ke){if(n.isWebGL2)return 34042;if(r=t.get("WEBGL_depth_texture"),null!==r)return r.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:r}}function Xa(){Li.call(this),this.type="Group"}function Ya(){Li.call(this),this.type="Camera",this.matrixWorldInverse=new Ht,this.projectionMatrix=new Ht,this.projectionMatrixInverse=new Ht}function Qa(e,t,n,r){Ya.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ka(e){Qa.call(this),this.cameras=e||[]}Ha.prototype=Object.create(Zi.prototype),Ha.prototype.constructor=Ha,Ha.prototype.isMeshDepthMaterial=!0,Ha.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},za.prototype=Object.create(Zi.prototype),za.prototype.constructor=za,za.prototype.isMeshDistanceMaterial=!0,za.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Xa.prototype=Object.assign(Object.create(Li.prototype),{constructor:Xa,isGroup:!0}),Ya.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ya,isCamera:!0,copy:function(e,t){return Li.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Gt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Li.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Qa.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Qa,isPerspectiveCamera:!0,copy:function(e,t){return Ya.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ut.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ut.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ut.RAD2DEG*Math.atan(Math.tan(.5*Ut.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ut.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Li.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Ka.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Ka,isArrayCamera:!0});var Za,$a=new Gt,Ja=new Gt;function es(e,t,n){$a.setFromMatrixPosition(t.matrixWorld),Ja.setFromMatrixPosition(n.matrixWorld);var r=$a.distanceTo(Ja),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],u=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*l,p=a*h,f=r/(-l+h),m=f*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=a+f,g=s+f,y=d-m,b=p+(r-m),A=c*s/g*v,w=u*s/g*v;e.projectionMatrix.makePerspective(y,b,A,w,v,g)}function ts(e){var t=this,n=null,r=null,i=null,o=[],a=new Ht,s=new Ht,c=1,u="stage";"undefined"!==typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",b,!1));var l=new Ht,h=new zt,d=new Gt,p=new Qa;p.bounds=new Yt(0,0,.5,1),p.layers.enable(1);var f=new Qa;f.bounds=new Yt(.5,0,.5,1),f.layers.enable(2);var m=new Ka([p,f]);function v(){return null!==n&&!0===n.isPresenting}m.layers.enable(1),m.layers.enable(2);var g,y=new jt;function b(){x(),v()?_.start():_.stop()}var A=[];function w(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}function x(){if(v()){var r=n.getEyeParameters("left"),i=r.renderWidth*c,o=r.renderHeight*c;e.setDrawingBufferSize(2*i,o,1)}else t.enabled&&(g=e.getPixelRatio(),e.getSize(y),e.setDrawingBufferSize(y.width,y.height,g))}function E(){for(var e=0;e<o.length;e++){var t=o[e],n=w(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;A[e]!==n.buttons[i].pressed&&(A[e]=n.buttons[i].pressed,!0===A[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}this.enabled=!1,this.getController=function(e){var t=o[e];return void 0===t&&(t=new Xa,t.matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),_.setContext(e),x(),v()&&_.start()},this.setFramebufferScaleFactor=function(e){c=e},this.setFrameOfReferenceType=function(e){u=e},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){var t="stage"===u?1.6:0;if(!1===v())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r),"stage"===u){var o=n.stageParameters;o?a.fromArray(o.sittingToStandingTransform):a.makeTranslation(0,t,0)}var c=r.pose,g=null!==i?i:e;g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==c.orientation&&(h.fromArray(c.orientation),g.quaternion.multiply(h)),null!==c.position&&(h.setFromRotationMatrix(a),d.fromArray(c.position),d.applyQuaternion(h),g.position.add(d)),g.updateMatrixWorld(),p.near=e.near,f.near=e.near,p.far=e.far,f.far=e.far,p.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),"stage"===u&&(p.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s));var y=g.parent;null!==y&&(l.getInverse(y.matrixWorld),p.matrixWorldInverse.multiply(l),f.matrixWorldInverse.multiply(l)),p.matrixWorld.getInverse(p.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),p.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),es(m,p,f);var b=n.getLayers();if(b.length){var A=b[0];null!==A.leftBounds&&4===A.leftBounds.length&&p.bounds.fromArray(A.leftBounds),null!==A.rightBounds&&4===A.rightBounds.length&&f.bounds.fromArray(A.rightBounds)}return E(),m},this.getStandingMatrix=function(){return a},this.isPresenting=v;var _=new Ei;this.setAnimationLoop=function(e){_.setAnimationLoop(e),v()&&_.start()},this.submitFrame=function(){v()&&n.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",b)}}function ns(e){var t=e.context,n=null,r=null,i=1,o=null,a="stage",s=null,c=null,u=[],l=[];function h(){return null!==r&&null!==o}var d=new Qa;d.layers.enable(1),d.viewport=new Yt;var p=new Qa;p.layers.enable(2),p.viewport=new Yt;var f=new Ka([d,p]);function m(e){var t=u[l.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function v(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),A.stop()}function g(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=u[e];return void 0===t&&(t=new Xa,t.matrixAutoUpdate=!1,t.visible=!1,u[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){i=e},this.setFrameOfReferenceType=function(e){a=e},this.setSession=function(n){r=n,null!==r&&(r.addEventListener("select",m),r.addEventListener("selectstart",m),r.addEventListener("selectend",m),r.addEventListener("end",v),r.baseLayer=new XRWebGLLayer(r,t,{framebufferScaleFactor:i}),r.requestFrameOfReference(a).then(function(t){o=t,e.setFramebuffer(r.baseLayer.framebuffer),A.setContext(r),A.start()}),l=r.getInputSources(),r.addEventListener("inputsourceschange",function(){l=r.getInputSources(),console.log(l);for(var e=0;e<u.length;e++){var t=u[e];t.userData.inputSource=l[e]}}))},this.setPoseTarget=function(e){void 0!==e&&(c=e)},this.getCamera=function(e){if(h()){var t=e.parent,n=f.cameras,r=c||e;g(f,t);for(var i=0;i<n.length;i++)g(n[i],t);r.matrixWorld.copy(f.matrixWorld);for(var o=r.children,a=(i=0,o.length);i<a;i++)o[i].updateMatrixWorld(!0);return es(f,d,p),f}return e},this.getCameraPose=function(){return s},this.isPresenting=h;var y=null;function b(e,t){if(s=t.getDevicePose(o),null!==s)for(var n=r.baseLayer,i=t.views,a=0;a<i.length;a++){var c=i[a],h=n.getViewport(c),d=s.getViewMatrix(c),p=f.cameras[a];p.matrix.fromArray(d).getInverse(p.matrix),p.projectionMatrix.fromArray(c.projectionMatrix),p.viewport.set(h.x,h.y,h.width,h.height),0===a&&f.matrix.copy(p.matrix)}for(a=0;a<u.length;a++){var m=u[a],v=l[a];if(v){var g=t.getInputPose(v,o);if(null!==g){"targetRay"in g?m.matrix.elements=g.targetRay.transformMatrix:"pointerMatrix"in g&&(m.matrix.elements=g.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}y&&y(e,t)}var A=new Ei;A.setAnimationLoop(b),this.setAnimationLoop=function(e){y=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Ht},this.submitFrame=function(){}}function rs(e){console.log("THREE.WebGLRenderer",i),e=e||{};var t=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,o=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,c=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",h=null,d=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=re,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,m,g,y,b,A,w,x,E,_,M,T,C,S,L,R,P,O=this,D=!1,I=null,B=null,k=null,F=-1,N={geometry:null,program:null,wireframe:!1},U=null,j=null,H=new Yt,z=new Yt,G=null,V=0,W=t.width,q=t.height,X=1,Y=new Yt(0,0,W,q),Q=new Yt(0,0,W,q),K=!1,Z=new nn,$=new co,J=!1,ee=!1,te=new Ht,ne=new Gt;function ie(){return null===B?X:1}try{var oe={alpha:r,depth:o,stencil:a,antialias:s,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:l};if(t.addEventListener("webglcontextlost",ue,!1),t.addEventListener("webglcontextrestored",le,!1),p=n||t.getContext("webgl",oe)||t.getContext("experimental-webgl",oe),null===p)throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(We){throw console.error("THREE.WebGLRenderer: "+We.message),We}function ae(){f=new uo(p),m=new so(p,f,e),m.isWebGL2||(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),P=new qa(p,f,m),g=new Va(p,f,P,m),g.scissor(z.copy(Q).multiplyScalar(X)),g.viewport(H.copy(Y).multiplyScalar(X)),y=new po(p),b=new Pa,A=new Wa(p,f,g,b,m,P,y),w=new _i(p),x=new lo(p,w,y),E=new vo(x,y),S=new mo(p),_=new Ra(O,f,m),M=new Ba,T=new ja,C=new oo(O,g,E,c),L=new ao(p,f,y,m),R=new ho(p,f,y,m),y.programs=_.programs,O.context=p,O.capabilities=m,O.extensions=f,O.properties=b,O.renderLists=M,O.state=g,O.info=y}ae();var se=null;"undefined"!==typeof navigator&&(se="xr"in navigator?new ns(O):new ts(O)),this.vr=se;var ce=new Ga(O,E,m.maxTextureSize);function ue(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function le(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1,ae()}function he(e){var t=e.target;t.removeEventListener("dispose",he),de(t)}function de(e){pe(e),b.remove(e)}function pe(e){var t=b.get(e).program;e.program=void 0,void 0!==t&&_.releaseProgram(t)}function fe(e,t){e.render(function(e){O.renderBufferImmediate(e,t)})}function me(e,t,n){if(n&&n.isInstancedBufferGeometry&&!m.isWebGL2&&null===f.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{g.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var c=r[a];if(void 0!==c){var u=c.normalized,l=c.itemSize,h=w.get(c);if(void 0===h)continue;var d=h.buffer,v=h.type,y=h.bytesPerElement;if(c.isInterleavedBufferAttribute){var b=c.data,A=b.stride,x=c.offset;b&&b.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):g.enableAttribute(s),p.bindBuffer(34962,d),p.vertexAttribPointer(s,l,v,u,A*y,x*y)}else c.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):g.enableAttribute(s),p.bindBuffer(34962,d),p.vertexAttribPointer(s,l,v,u,0,0)}else if(void 0!==o){var E=o[a];if(void 0!==E)switch(E.length){case 2:p.vertexAttrib2fv(s,E);break;case 3:p.vertexAttrib3fv(s,E);break;case 4:p.vertexAttrib4fv(s,E);break;default:p.vertexAttrib1fv(s,E)}}}}g.disableUnusedAttributes()}}this.shadowMap=ce,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(e){void 0!==e&&(X=e,this.setSize(W,q,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new jt),e.set(W,q)},this.setSize=function(e,n,r){se.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,q=n,t.width=e*X,t.height=n*X,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new jt),e.set(W*X,q*X)},this.setDrawingBufferSize=function(e,n,r){W=e,q=n,X=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Yt),e.copy(H)},this.getViewport=function(e){return e.copy(Y)},this.setViewport=function(e,t,n,r){e.isVector4?Y.set(e.x,e.y,e.z,e.w):Y.set(e,t,n,r),g.viewport(H.copy(Y).multiplyScalar(X))},this.getScissor=function(e){return e.copy(Q)},this.setScissor=function(e,t,n,r){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,r),g.scissor(z.copy(Q).multiplyScalar(X))},this.getScissorTest=function(){return K},this.setScissorTest=function(e){g.setScissorTest(K=e)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ue,!1),t.removeEventListener("webglcontextrestored",le,!1),M.dispose(),T.dispose(),b.dispose(),E.dispose(),se.dispose(),ye.stop()},this.renderBufferImmediate=function(e,t){g.initAttributes();var n=b.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var r=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),g.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),g.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),g.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),g.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;g.setMaterial(r,a);var s=Ee(e,t,r,i),c=!1;N.geometry===n.id&&N.program===s.id&&N.wireframe===(!0===r.wireframe)||(N.geometry=n.id,N.program=s.id,N.wireframe=!0===r.wireframe,c=!0),i.morphTargetInfluences&&(S.update(i,n,r,s),c=!0);var u,l=n.index,h=n.attributes.position,d=1;!0===r.wireframe&&(l=x.getWireframeAttribute(n),d=2);var f=L;null!==l&&(u=w.get(l),f=R,f.setIndex(u)),c&&(me(r,s,n),null!==l&&p.bindBuffer(34963,u.buffer));var m=1/0;null!==l?m=l.count:void 0!==h&&(m=h.count);var v=n.drawRange.start*d,y=n.drawRange.count*d,b=null!==o?o.start*d:0,A=null!==o?o.count*d:1/0,E=Math.max(v,b),_=Math.min(m,v+y,b+A)-1,M=Math.max(0,_-E+1);if(0!==M){if(i.isMesh)if(!0===r.wireframe)g.setLineWidth(r.wireframeLinewidth*ie()),f.setMode(1);else switch(i.drawMode){case _t:f.setMode(4);break;case Mt:f.setMode(5);break;case Tt:f.setMode(6);break}else if(i.isLine){var T=r.linewidth;void 0===T&&(T=1),g.setLineWidth(T*ie()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&f.renderInstances(n,E,M):f.render(E,M)}},this.compile=function(e,t){d=T.get(e,t),d.init(),e.traverse(function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))}),d.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)xe(t.material[n],e.fog,t);else xe(t.material,e.fog,t)})};var ve=null;function ge(e){se.isPresenting()||ve&&ve(e)}var ye=new Ei;function be(e,t,n,r){if(!1!==e.visible){var i=e.layers.test(t.layers);if(i)if(e.isGroup)n=e.renderOrder;else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Z.intersectsSprite(e)){r&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te);var o=E.update(e),a=e.material;a.visible&&h.push(e,o,a,n,ne.z,null)}}else if(e.isImmediateRenderObject)r&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te),h.push(e,null,e.material,n,ne.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Z.intersectsObject(e))){r&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te);o=E.update(e),a=e.material;if(Array.isArray(a))for(var s=o.groups,c=0,u=s.length;c<u;c++){var l=s[c],p=a[l.materialIndex];p&&p.visible&&h.push(e,o,p,n,ne.z,l)}else a.visible&&h.push(e,o,a,n,ne.z,null)}var f=e.children;for(c=0,u=f.length;c<u;c++)be(f[c],t,n,r)}}function Ae(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){j=n;for(var h=n.cameras,p=0,f=h.length;p<f;p++){var m=h[p];if(s.layers.test(m.layers)){if("viewport"in m)g.viewport(H.copy(m.viewport));else{var v=m.bounds,y=v.x*W,b=v.y*q,A=v.z*W,w=v.w*q;g.viewport(H.set(y,b,A,w).multiplyScalar(X))}d.setupLights(m),we(s,t,m,c,u,l)}}}else j=null,we(s,t,n,c,u,l)}}function we(e,t,n,r,i,o){if(e.onBeforeRender(O,t,n,r,i,o),d=T.get(t,j||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){g.setMaterial(i);var a=Ee(n,t.fog,i,e);N.geometry=null,N.program=null,N.wireframe=!1,fe(e,a)}else O.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(O,t,n,r,i,o),d=T.get(t,j||n)}function xe(e,t,n){var r=b.get(e),i=d.state.lights,o=d.state.shadowsArray,a=r.lightsHash,s=i.state.hash,c=_.getParameters(e,i.state,o,t,$.numPlanes,$.numIntersection,n),u=_.getProgramCode(e,c),l=r.program,h=!0;if(void 0===l)e.addEventListener("dispose",he);else if(l.code!==u)pe(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,h=!1;else{if(void 0!==c.shaderID)return;h=!1}if(h){if(c.shaderID){var p=xi[c.shaderID];r.shader={name:e.type,uniforms:vi(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,O),u=_.getProgramCode(e,c),l=_.acquireProgram(e,r.shader,c,u),r.program=l,e.program=l}var f=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<O.maxMorphTargets;m++)f["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(m=0;m<O.maxMorphNormals;m++)f["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var v=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=$.numPlanes,r.numIntersection=$.numIntersection,v.clippingPlanes=$.uniform),r.fog=t,void 0===a&&(r.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(v.ambientLightColor.value=i.state.ambient,v.directionalLights.value=i.state.directional,v.spotLights.value=i.state.spot,v.rectAreaLights.value=i.state.rectArea,v.pointLights.value=i.state.point,v.hemisphereLights.value=i.state.hemi,v.directionalShadowMap.value=i.state.directionalShadowMap,v.directionalShadowMatrix.value=i.state.directionalShadowMatrix,v.spotShadowMap.value=i.state.spotShadowMap,v.spotShadowMatrix.value=i.state.spotShadowMatrix,v.pointShadowMap.value=i.state.pointShadowMap,v.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),y=pa.seqWithValue(g.seq,v);r.uniformsList=y}function Ee(e,t,n,r){V=0;var i=b.get(n),o=d.state.lights,a=i.lightsHash,s=o.state.hash;if(J&&(ee||e!==U)){var c=e===U&&n.id===F;$.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,c)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===$.numPlanes&&i.numIntersection===$.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(xe(n,t,r),n.needsUpdate=!1);var u=!1,l=!1,h=!1,f=i.program,v=f.getUniforms(),y=i.shader.uniforms;if(g.useProgram(f.program)&&(u=!0,l=!0,h=!0),n.id!==F&&(F=n.id,l=!0),u||U!==e){if(v.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&v.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),U!==e&&(U=e,l=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var A=v.map.cameraPosition;void 0!==A&&A.setValue(p,ne.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&v.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){v.setOptional(p,r,"bindMatrix"),v.setOptional(p,r,"bindMatrixInverse");var w=r.skeleton;if(w){var x=w.bones;if(m.floatVertexTextures){if(void 0===w.boneTexture){var E=Math.sqrt(4*x.length);E=Ut.ceilPowerOfTwo(E),E=Math.max(E,4);var _=new Float32Array(E*E*4);_.set(w.boneMatrices);var M=new $t(_,E,E,Ue,Pe);M.needsUpdate=!0,w.boneMatrices=_,w.boneTexture=M,w.boneTextureSize=E}v.setValue(p,"boneTexture",w.boneTexture),v.setValue(p,"boneTextureSize",w.boneTextureSize)}else v.setOptional(p,w,"boneMatrices")}}return l&&(v.setValue(p,"toneMappingExposure",O.toneMappingExposure),v.setValue(p,"toneMappingWhitePoint",O.toneMappingWhitePoint),n.lights&&Ge(y,h),t&&n.fog&&Re(y,t),n.isMeshBasicMaterial?_e(y,n):n.isMeshLambertMaterial?(_e(y,n),De(y,n)):n.isMeshPhongMaterial?(_e(y,n),n.isMeshToonMaterial?Be(y,n):Ie(y,n)):n.isMeshStandardMaterial?(_e(y,n),n.isMeshPhysicalMaterial?Fe(y,n):ke(y,n)):n.isMeshMatcapMaterial?(_e(y,n),Ne(y,n)):n.isMeshDepthMaterial?(_e(y,n),je(y,n)):n.isMeshDistanceMaterial?(_e(y,n),He(y,n)):n.isMeshNormalMaterial?(_e(y,n),ze(y,n)):n.isLineBasicMaterial?(Te(y,n),n.isLineDashedMaterial&&Ce(y,n)):n.isPointsMaterial?Se(y,n):n.isSpriteMaterial?Le(y,n):n.isShadowMaterial&&(y.color.value=n.color,y.opacity.value=n.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=wi.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=wi.LTC_2),pa.upload(p,i.uniformsList,y,O)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(pa.upload(p,i.uniformsList,y,O),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(p,"center",r.center),v.setValue(p,"modelViewMatrix",r.modelViewMatrix),v.setValue(p,"normalMatrix",r.normalMatrix),v.setValue(p,"modelMatrix",r.matrixWorld),f}function _e(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=b.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Te(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function Ce(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function Se(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*X,e.scale.value=.5*q,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}function Le(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}function Re(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function De(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function Ie(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Be(e,t){Ie(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function ke(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function Fe(e,t){ke(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}function Ne(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function je(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function He(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function ze(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ge(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Ve(){var e=V;return e>=m.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+m.maxTextures),V+=1,e}ye.setAnimationLoop(ge),"undefined"!==typeof window&&ye.setContext(window),this.setAnimationLoop=function(e){ve=e,se.setAnimationLoop(e),ye.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!D){N.geometry=null,N.program=null,N.wireframe=!1,F=-1,U=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),se.enabled&&(t=se.getCamera(t)),d=T.get(e,t),d.init(),e.onBeforeRender(O,e,t,n||B),te.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Z.setFromMatrix(te),ee=this.localClippingEnabled,J=$.init(this.clippingPlanes,ee,t),h=M.get(e,t),h.init(),be(e,t,0,O.sortObjects),!0===O.sortObjects&&h.sort(),J&&$.beginShadows();var i=d.state.shadowsArray;ce.render(i,e,t),d.setupLights(t),J&&$.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),C.render(h,e,t,r);var o=h.opaque,a=h.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&Ae(o,e,t,s),a.length&&Ae(a,e,t,s)}else o.length&&Ae(o,e,t),a.length&&Ae(a,e,t);e.onAfterRender(O,e,t),null!==B&&(A.updateRenderTargetMipmap(B),A.updateMultisampleRenderTarget(B)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),se.enabled&&se.submitFrame(),h=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=Ve,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),A.setTexture2D(t,n)}}(),this.setTexture2DArray=function(e,t){A.setTexture2DArray(e,t)},this.setTexture3D=function(e,t){A.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),A.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?A.setTextureCube(t,n):A.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){I=e},this.getRenderTarget=function(){return B},this.setRenderTarget=function(e,t,n){B=e,e&&void 0===b.get(e).__webglFramebuffer&&A.setupRenderTarget(e);var r=I,i=!1;if(e){var o=b.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=o[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?b.get(e).__webglMultisampledFramebuffer:o,H.copy(e.viewport),z.copy(e.scissor),G=e.scissorTest}else H.copy(Y).multiplyScalar(X),z.copy(Q).multiplyScalar(X),G=K;if(k!==r&&(p.bindFramebuffer(36160,r),k=r),g.viewport(H),g.scissor(z),g.setScissorTest(G),i){var a=b.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=b.get(e).__webglFramebuffer;if(a){var s=!1;a!==k&&(p.bindFramebuffer(36160,a),s=!0);try{var c=e.texture,u=c.format,l=c.type;if(u!==Ue&&P.convert(u)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(l!==Me&&P.convert(l)!==p.getParameter(35738)&&(l!==Pe||!(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float")))&&(l!==Oe||(m.isWebGL2?!f.get("EXT_color_buffer_float"):!f.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&p.readPixels(t,n,r,i,P.convert(u),P.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(36160,k)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=P.convert(t.format);this.setTexture2D(t,0),p.copyTexImage2D(3553,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=P.convert(n.format),s=P.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):p.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image)}}function is(e,t){this.name="",this.color=new Ai(e),this.density=void 0!==t?t:25e-5}function os(e,t,n){this.name="",this.color=new Ai(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function as(){Li.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ss(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function cs(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function us(e){Zi.call(this),this.type="SpriteMaterial",this.color=new Ai(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function ls(e){if(Li.call(this),this.type="Sprite",void 0===Za){Za=new Wi;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new ss(t,5);Za.setIndex([0,1,2,0,2,3]),Za.addAttribute("position",new cs(n,3,0,!1)),Za.addAttribute("uv",new cs(n,2,3,!1))}this.geometry=Za,this.material=void 0!==e?e:new us,this.center=new jt(.5,.5)}function hs(){Li.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ds(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),io.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ht,this.bindMatrixInverse=new Ht}function ps(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ht)}}function fs(){Li.call(this),this.type="Bone"}function ms(e){Zi.call(this),this.type="LineBasicMaterial",this.color=new Ai(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function vs(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Li.call(this),this.type="Line",this.geometry=void 0!==e?e:new Wi,this.material=void 0!==t?t:new ms({color:16777215*Math.random()})}function gs(e,t){vs.call(this,e,t),this.type="LineSegments"}function ys(e,t){vs.call(this,e,t),this.type="LineLoop"}function bs(e){Zi.call(this),this.type="PointsMaterial",this.color=new Ai(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function As(e,t){Li.call(this),this.type="Points",this.geometry=void 0!==e?e:new Wi,this.material=void 0!==t?t:new bs({color:16777215*Math.random()})}function ws(e,t,n,r,i,o,a,s,c){Xt.call(this,e,t,n,r,i,o,a,s,c),this.format=void 0!==a?a:Ne,this.minFilter=void 0!==o?o:xe,this.magFilter=void 0!==i?i:xe,this.generateMipmaps=!1}function xs(e,t,n,r,i,o,a,s,c,u,l,h){Xt.call(this,null,o,a,s,c,u,r,i,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Es(e,t,n,r,i,o,a,s,c){Xt.call(this,e,t,n,r,i,o,a,s,c),this.needsUpdate=!0}function _s(e,t,n,r,i,o,a,s,c,u){if(u=void 0!==u?u:Ge,u!==Ge&&u!==Ve)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ge&&(n=Se),void 0===n&&u===Ve&&(n=ke),Xt.call(this,null,r,i,o,a,s,u,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:be,this.minFilter=void 0!==s?s:be,this.flipY=!1,this.generateMipmaps=!1}function Ms(e){Wi.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,c,u,l,h=[],d=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[f[n]],c=v[f[(n+1)%3]],d[0]=Math.min(s,c),d[1]=Math.max(s,c),u=d[0]+","+d[1],void 0===p[u]&&(p[u]={index1:d[0],index2:d[1]})}for(u in p)a=p[u],l=e.vertices[a.index1],h.push(l.x,l.y,l.z),l=e.vertices[a.index2],h.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry){var g,y,b,A,w,x,E,_;if(l=new Gt,null!==e.index){for(g=e.attributes.position,y=e.index,b=e.groups,0===b.length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(A=b[i],w=A.start,x=A.count,t=w,r=w+x;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),c=y.getX(t+(n+1)%3),d[0]=Math.min(s,c),d[1]=Math.max(s,c),u=d[0]+","+d[1],void 0===p[u]&&(p[u]={index1:d[0],index2:d[1]});for(u in p)a=p[u],l.fromBufferAttribute(g,a.index1),h.push(l.x,l.y,l.z),l.fromBufferAttribute(g,a.index2),h.push(l.x,l.y,l.z)}else for(g=e.attributes.position,t=0,r=g.count/3;t<r;t++)for(n=0;n<3;n++)E=3*t+n,l.fromBufferAttribute(g,E),h.push(l.x,l.y,l.z),_=3*t+(n+1)%3,l.fromBufferAttribute(g,_),h.push(l.x,l.y,l.z)}this.addAttribute("position",new ji(h,3))}function Ts(e,t,n){Pi.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Cs(e,t,n)),this.mergeVertices()}function Cs(e,t,n){Wi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],c=[],u=1e-5,l=new Gt,h=new Gt,d=new Gt,p=new Gt,f=new Gt;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,h),a.push(h.x,h.y,h.z),g-u>=0?(e(g-u,v,d),p.subVectors(h,d)):(e(g+u,v,d),p.subVectors(d,h)),v-u>=0?(e(g,v-u,d),f.subVectors(h,d)):(e(g,v+u,d),f.subVectors(d,h)),l.crossVectors(p,f).normalize(),s.push(l.x,l.y,l.z),c.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,b=r*m+i+1,A=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,b,w),o.push(b,A,w)}this.setIndex(o),this.addAttribute("position",new ji(a,3)),this.addAttribute("normal",new ji(s,3)),this.addAttribute("uv",new ji(c,2))}function Ss(e,t,n,r){Pi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Ls(e,t,n,r)),this.mergeVertices()}function Ls(e,t,n,r){Wi.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var i=[],o=[];function a(e){for(var n=new Gt,r=new Gt,i=new Gt,o=0;o<t.length;o+=3)d(t[o+0],n),d(t[o+1],r),d(t[o+2],i),s(n,r,i,e)}function s(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var c=e.clone().lerp(n,i/a),u=t.clone().lerp(n,i/a),l=a-i;for(o=0;o<=l;o++)s[i][o]=0===o&&i===a?c:c.clone().lerp(u,o/l)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2===0?(h(s[i][d+1]),h(s[i+1][d]),h(s[i][d])):(h(s[i][d+1]),h(s[i+1][d+1]),h(s[i+1][d]))}}function c(e){for(var t=new Gt,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}function u(){for(var e=new Gt,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=m(e)/2/Math.PI+.5,r=v(e)/Math.PI+.5;o.push(n,1-r)}p(),l()}function l(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}function h(e){i.push(e.x,e.y,e.z)}function d(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function p(){for(var e=new Gt,t=new Gt,n=new Gt,r=new Gt,a=new jt,s=new jt,c=new jt,u=0,l=0;u<i.length;u+=9,l+=6){e.set(i[u+0],i[u+1],i[u+2]),t.set(i[u+3],i[u+4],i[u+5]),n.set(i[u+6],i[u+7],i[u+8]),a.set(o[l+0],o[l+1]),s.set(o[l+2],o[l+3]),c.set(o[l+4],o[l+5]),r.copy(e).add(t).add(n).divideScalar(3);var h=m(r);f(a,l+0,e,h),f(s,l+2,t,h),f(c,l+4,n,h)}}function f(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}a(r),c(n),u(),this.addAttribute("position",new ji(i,3)),this.addAttribute("normal",new ji(i.slice(),3)),this.addAttribute("uv",new ji(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Rs(e,t){Pi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ps(e,t)),this.mergeVertices()}function Ps(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ls.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Os(e,t){Pi.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ds(e,t)),this.mergeVertices()}function Ds(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ls.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Is(e,t){Pi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Bs(e,t)),this.mergeVertices()}function Bs(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ls.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ks(e,t){Pi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Fs(e,t)),this.mergeVertices()}function Fs(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ls.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ns(e,t,n,r,i,o){Pi.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Us(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Us(e,t,n,r,i){Wi.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,c=new Gt,u=new Gt,l=new jt,h=new Gt,d=[],p=[],f=[],m=[];function v(){for(a=0;a<t;a++)g(a);g(!1===i?t:0),b(),y()}function g(i){h=e.getPointAt(i/t,h);var a=o.normals[i],l=o.binormals[i];for(s=0;s<=r;s++){var f=s/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);u.x=v*a.x+m*l.x,u.y=v*a.y+m*l.y,u.z=v*a.z+m*l.z,u.normalize(),p.push(u.x,u.y,u.z),c.x=h.x+n*u.x,c.y=h.y+n*u.y,c.z=h.z+n*u.z,d.push(c.x,c.y,c.z)}}function y(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}function b(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)l.x=a/t,l.y=s/r,f.push(l.x,l.y)}v(),this.setIndex(m),this.addAttribute("position",new ji(d,3)),this.addAttribute("normal",new ji(p,3)),this.addAttribute("uv",new ji(f,2))}function js(e,t,n,r,i,o,a){Pi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Hs(e,t,n,r,i,o)),this.mergeVertices()}function Hs(e,t,n,r,i,o){Wi.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,c=[],u=[],l=[],h=[],d=new Gt,p=new Gt,f=new Gt,m=new Gt,v=new Gt,g=new Gt,y=new Gt;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(C(b,i,o,e,f),C(b+.01,i,o,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var A=s/r*Math.PI*2,w=-t*Math.cos(A),x=t*Math.sin(A);d.x=f.x+(w*y.x+x*v.x),d.y=f.y+(w*y.y+x*v.y),d.z=f.z+(w*y.z+x*v.z),u.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*(s-1)+(a-1),_=(r+1)*s+(a-1),M=(r+1)*s+a,T=(r+1)*(s-1)+a;c.push(E,_,T),c.push(_,M,T)}function C(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new ji(u,3)),this.addAttribute("normal",new ji(l,3)),this.addAttribute("uv",new ji(h,2))}function zs(e,t,n,r,i){Pi.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Gs(e,t,n,r,i)),this.mergeVertices()}function Gs(e,t,n,r,i){Wi.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],c=[],u=[],l=[],h=new Gt,d=new Gt,p=new Gt;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var f=a/r*i,m=o/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),c.push(d.x,d.y,d.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(d,h).normalize(),u.push(p.x,p.y,p.z),l.push(a/r),l.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.addAttribute("position",new ji(c,3)),this.addAttribute("normal",new ji(u,3)),this.addAttribute("uv",new ji(l,2))}Object.assign(is.prototype,{isFogExp2:!0,clone:function(){return new is(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(os.prototype,{isFog:!0,clone:function(){return new os(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),as.prototype=Object.assign(Object.create(Li.prototype),{constructor:as,isScene:!0,copy:function(e,t){return Li.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Li.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ss.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ss.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(cs.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(cs.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),us.prototype=Object.create(Zi.prototype),us.prototype.constructor=us,us.prototype.isSpriteMaterial=!0,us.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},ls.prototype=Object.assign(Object.create(Li.prototype),{constructor:ls,isSprite:!0,raycast:function(){var e=new Gt,t=new Gt,n=new Gt,r=new jt,i=new jt,o=new Ht,a=new Gt,s=new Gt,c=new Gt,u=new jt,l=new jt,h=new jt;function d(e,t,n,a,s,c){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=c*r.x-s*r.y,i.y=s*r.x+c*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var p,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),p=Math.sin(m));var v=this.center;d(a.set(-.5,-.5,0),n,v,t,p,f),d(s.set(.5,-.5,0),n,v,t,p,f),d(c.set(.5,.5,0),n,v,t,p,f),u.set(0,0),l.set(1,0),h.set(1,1);var g=r.ray.intersectTriangle(a,s,c,!1,e);if(null!==g||(d(s.set(-.5,.5,0),n,v,t,p,f),l.set(0,1),g=r.ray.intersectTriangle(a,c,s,!1,e),null!==g)){var y=r.ray.origin.distanceTo(e);y<r.near||y>r.far||i.push({distance:y,point:e.clone(),uv:no.getUV(e,a,s,c,u,l,h,new jt),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Li.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),hs.prototype=Object.assign(Object.create(Li.prototype),{constructor:hs,copy:function(e){Li.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length;r++)if(t<n[r].distance)break;n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r;n++)if(e<t[n].distance)break;return t[n-1].object},raycast:function(){var e=new Gt;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new Gt,t=new Gt;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a;o++){if(!(i>=r[o].distance))break;r[o-1].object.visible=!1,r[o].object.visible=!0}for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=Li.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),ds.prototype=Object.assign(Object.create(io.prototype),{constructor:ds,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Yt,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){io.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(ps.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Ht;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Ht,t=new Ht;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var c=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(c,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new ps(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),fs.prototype=Object.assign(Object.create(Li.prototype),{constructor:fs,isBone:!0}),ms.prototype=Object.create(Zi.prototype),ms.prototype.constructor=ms,ms.prototype.isLineBasicMaterial=!0,ms.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},vs.prototype=Object.assign(Object.create(Li.prototype),{constructor:vs,isLine:!0,computeLineDistances:function(){var e=new Gt,t=new Gt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new ji(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;i=n.lineDistances;i[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new Ht,t=new to,n=new en;return function(r,i){var o=r.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,l=new Gt,h=new Gt,d=new Gt,p=new Gt,f=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes,g=v.position.array;if(null!==m)for(var y=m.array,b=0,A=y.length-1;b<A;b+=f){var w=y[b],x=y[b+1];l.fromArray(g,3*w),h.fromArray(g,3*x);var E=t.distanceSqToSegment(l,h,p,d);if(!(E>u)){p.applyMatrix4(this.matrixWorld);var _=r.ray.origin.distanceTo(p);_<r.near||_>r.far||i.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(b=0,A=g.length/3-1;b<A;b+=f){l.fromArray(g,3*b),h.fromArray(g,3*b+3);E=t.distanceSqToSegment(l,h,p,d);if(!(E>u)){p.applyMatrix4(this.matrixWorld);_=r.ray.origin.distanceTo(p);_<r.near||_>r.far||i.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(a.isGeometry){var M=a.vertices,T=M.length;for(b=0;b<T-1;b+=f){E=t.distanceSqToSegment(M[b],M[b+1],p,d);if(!(E>u)){p.applyMatrix4(this.matrixWorld);_=r.ray.origin.distanceTo(p);_<r.near||_>r.far||i.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),gs.prototype=Object.assign(Object.create(vs.prototype),{constructor:gs,isLineSegments:!0,computeLineDistances:function(){var e=new Gt,t=new Gt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new ji(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),ys.prototype=Object.assign(Object.create(vs.prototype),{constructor:ys,isLineLoop:!0}),bs.prototype=Object.create(Zi.prototype),bs.prototype.constructor=bs,bs.prototype.isPointsMaterial=!0,bs.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},As.prototype=Object.assign(Object.create(Li.prototype),{constructor:As,isPoints:!0,raycast:function(){var e=new Ht,t=new to,n=new en;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,c=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=c,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var u=c/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,h=new Gt,d=new Gt;if(a.isBufferGeometry){var p=a.index,f=a.attributes,m=f.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length;g<y;g++){var b=v[g];h.fromArray(m,3*b),x(h,b)}else{g=0;for(var A=m.length/3;g<A;g++)h.fromArray(m,3*g),x(h,g)}}else{var w=a.vertices;for(g=0,A=w.length;g<A;g++)x(w[g],g)}}function x(e,n){var a=t.distanceSqToPoint(e);if(a<l){t.closestPointToPoint(e,d),d.applyMatrix4(s);var c=r.ray.origin.distanceTo(d);if(c<r.near||c>r.far)return;i.push({distance:c,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ws.prototype=Object.assign(Object.create(Xt.prototype),{constructor:ws,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),xs.prototype=Object.create(Xt.prototype),xs.prototype.constructor=xs,xs.prototype.isCompressedTexture=!0,Es.prototype=Object.create(Xt.prototype),Es.prototype.constructor=Es,Es.prototype.isCanvasTexture=!0,_s.prototype=Object.create(Xt.prototype),_s.prototype.constructor=_s,_s.prototype.isDepthTexture=!0,Ms.prototype=Object.create(Wi.prototype),Ms.prototype.constructor=Ms,Ts.prototype=Object.create(Pi.prototype),Ts.prototype.constructor=Ts,Cs.prototype=Object.create(Wi.prototype),Cs.prototype.constructor=Cs,Ss.prototype=Object.create(Pi.prototype),Ss.prototype.constructor=Ss,Ls.prototype=Object.create(Wi.prototype),Ls.prototype.constructor=Ls,Rs.prototype=Object.create(Pi.prototype),Rs.prototype.constructor=Rs,Ps.prototype=Object.create(Ls.prototype),Ps.prototype.constructor=Ps,Os.prototype=Object.create(Pi.prototype),Os.prototype.constructor=Os,Ds.prototype=Object.create(Ls.prototype),Ds.prototype.constructor=Ds,Is.prototype=Object.create(Pi.prototype),Is.prototype.constructor=Is,Bs.prototype=Object.create(Ls.prototype),Bs.prototype.constructor=Bs,ks.prototype=Object.create(Pi.prototype),ks.prototype.constructor=ks,Fs.prototype=Object.create(Ls.prototype),Fs.prototype.constructor=Fs,Ns.prototype=Object.create(Pi.prototype),Ns.prototype.constructor=Ns,Us.prototype=Object.create(Wi.prototype),Us.prototype.constructor=Us,Us.prototype.toJSON=function(){var e=Wi.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},js.prototype=Object.create(Pi.prototype),js.prototype.constructor=js,Hs.prototype=Object.create(Wi.prototype),Hs.prototype.constructor=Hs,zs.prototype=Object.create(Pi.prototype),zs.prototype.constructor=zs,Gs.prototype=Object.create(Wi.prototype),Gs.prototype.constructor=Gs;var Vs={triangulate:function(e,t,n){n=n||2;var r,i,o,a,s,c,u,l=t&&t.length,h=l?t[0]*n:e.length,d=Ws(e,0,h,n,!0),p=[];if(!d)return p;if(l&&(d=$s(e,t,d,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var f=n;f<h;f+=n)s=e[f],c=e[f+1],s<r&&(r=s),c<i&&(i=c),s>o&&(o=s),c>a&&(a=c);u=Math.max(o-r,a-i),u=0!==u?1/u:0}return Xs(d,p,n,r,i,u),p}};function Ws(e,t,n,r,i){var o,a;if(i===yc(e,t,n,r)>0)for(o=t;o<n;o+=r)a=mc(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=mc(o,e[o],e[o+1],a);return a&&uc(a,a.next)&&(vc(a),a=a.next),a}function qs(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!uc(r,r.next)&&0!==cc(r.prev,r,r.next))r=r.next;else{if(vc(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Xs(e,t,n,r,i,o,a){if(e){!a&&o&&nc(e,r,i,o);var s,c,u=e;while(e.prev!==e.next)if(s=e.prev,c=e.next,o?Qs(e,r,i,o):Ys(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),vc(e),e=c.next,u=c.next;else if(e=c,e===u){a?1===a?(e=Ks(e,t,n),Xs(e,t,n,r,i,o,2)):2===a&&Zs(e,t,n,r,i,o):Xs(qs(e),t,n,r,i,o,1);break}}}function Ys(e){var t=e.prev,n=e,r=e.next;if(cc(t,n,r)>=0)return!1;var i=e.next.next;while(i!==e.prev){if(ac(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&cc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Qs(e,t,n,r){var i=e.prev,o=e,a=e.next;if(cc(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=ic(s,c,t,n,r),d=ic(u,l,t,n,r),p=e.nextZ;while(p&&p.z<=d){if(p!==e.prev&&p!==e.next&&ac(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&cc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}p=e.prevZ;while(p&&p.z>=h){if(p!==e.prev&&p!==e.next&&ac(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&cc(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function Ks(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!uc(i,o)&&lc(i,r,r.next,o)&&dc(i,o)&&dc(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),vc(r),vc(r.next),r=e=o),r=r.next}while(r!==e);return r}function Zs(e,t,n,r,i,o){var a=e;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&sc(a,s)){var c=fc(a,s);return a=qs(a,a.next),c=qs(c,c.next),Xs(a,t,n,r,i,o),void Xs(c,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function $s(e,t,n,r){var i,o,a,s,c,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,c=Ws(e,a,s,r,!1),c===c.next&&(c.steiner=!0),u.push(oc(c));for(u.sort(Js),i=0;i<u.length;i++)ec(u[i],n),n=qs(n,n.next);return n}function Js(e,t){return e.x-t.x}function ec(e,t){if(t=tc(e,t),t){var n=fc(t,e);qs(n,n.next)}}function tc(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var c,u=n,l=n.x,h=n.y,d=1/0;r=n.next;while(r!==u)i>=r.x&&r.x>=l&&i!==r.x&&ac(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&(c=Math.abs(o-r.y)/(i-r.x),(c<d||c===d&&r.x>n.x)&&dc(r,e)&&(n=r,d=c)),r=r.next;return n}function nc(e,t,n,r){var i=e;do{null===i.z&&(i.z=ic(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,rc(i)}function rc(e){var t,n,r,i,o,a,s,c,u=1;do{n=e,e=null,o=null,a=0;while(n){for(a++,r=n,s=0,t=0;t<u;t++)if(s++,r=r.nextZ,!r)break;c=u;while(s>0||c>0&&r)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1);return e}function ic(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function oc(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function ac(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function sc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!hc(e,t)&&dc(e,t)&&dc(t,e)&&pc(e,t)}function cc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function uc(e,t){return e.x===t.x&&e.y===t.y}function lc(e,t,n,r){return!!(uc(e,t)&&uc(n,r)||uc(e,r)&&uc(n,t))||cc(e,t,n)>0!==cc(e,t,r)>0&&cc(n,r,e)>0!==cc(n,r,t)>0}function hc(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&lc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function dc(e,t){return cc(e.prev,e,e.next)<0?cc(e,t,e.next)>=0&&cc(e,e.prev,t)>=0:cc(e,t,e.prev)<0||cc(e,e.next,t)<0}function pc(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function fc(e,t){var n=new gc(e.i,e.x,e.y),r=new gc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function mc(e,t,n,r){var i=new gc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function vc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yc(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}var bc={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return bc.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Ac(e),wc(n,e);var o=e.length;t.forEach(Ac);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,wc(n,t[a]);var s=Vs.triangulate(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Ac(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wc(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function xc(e,t){Pi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Ec(e,t)),this.mergeVertices()}function Ec(e,t){Wi.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o];c(s)}function c(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:l-2,d=void 0!==t.bevelSegments?t.bevelSegments:3,p=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:_c;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var m,v,g,y,b,A,w,x,E=!1;p&&(m=p.getSpacedPoints(s),E=!0,u=!1,v=p.computeFrenetFrames(s,!1),g=new Gt,y=new Gt,b=new Gt),u||(d=0,l=0,h=0);var _=e.extractPoints(a),M=_.shape,T=_.holes,C=!bc.isClockWise(M);if(C)for(M=M.reverse(),w=0,x=T.length;w<x;w++)A=T[w],bc.isClockWise(A)&&(T[w]=A.reverse());var S=bc.triangulateShape(M,T),L=M;for(w=0,x=T.length;w<x;w++)A=T[w],M=M.concat(A);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var P,O,D,I,B,k,F=M.length,N=S.length;function U(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,u=n.y-e.y,l=a*a+s*s,h=a*u-s*c;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(l),p=Math.sqrt(c*c+u*u),f=t.x-s/d,m=t.y+a/d,v=n.x-u/p,g=n.y+c/p,y=((v-f)*u-(g-m)*c)/(a*u-s*c);r=f+a*y-e.x,i=m+s*y-e.y;var b=r*r+i*i;if(b<=2)return new jt(r,i);o=Math.sqrt(b/2)}else{var A=!1;a>Number.EPSILON?c>Number.EPSILON&&(A=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(A=!0):Math.sign(s)===Math.sign(u)&&(A=!0),A?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new jt(r/o,i/o)}for(var j=[],H=0,z=L.length,G=z-1,V=H+1;H<z;H++,G++,V++)G===z&&(G=0),V===z&&(V=0),j[H]=U(L[H],L[G],L[V]);var W,q,X=[],Y=j.concat();for(w=0,x=T.length;w<x;w++){for(A=T[w],W=[],H=0,z=A.length,G=z-1,V=H+1;H<z;H++,G++,V++)G===z&&(G=0),V===z&&(V=0),W[H]=U(A[H],A[G],A[V]);X.push(W),Y=Y.concat(W)}for(P=0;P<d;P++){for(D=P/d,I=l*Math.cos(D*Math.PI/2),O=h*Math.sin(D*Math.PI/2),H=0,z=L.length;H<z;H++)B=R(L[H],j[H],O),$(B.x,B.y,-I);for(w=0,x=T.length;w<x;w++)for(A=T[w],W=X[w],H=0,z=A.length;H<z;H++)B=R(A[H],W[H],O),$(B.x,B.y,-I)}for(O=h,H=0;H<F;H++)B=u?R(M[H],Y[H],O):M[H],E?(y.copy(v.normals[0]).multiplyScalar(B.x),g.copy(v.binormals[0]).multiplyScalar(B.y),b.copy(m[0]).add(y).add(g),$(b.x,b.y,b.z)):$(B.x,B.y,0);for(q=1;q<=s;q++)for(H=0;H<F;H++)B=u?R(M[H],Y[H],O):M[H],E?(y.copy(v.normals[q]).multiplyScalar(B.x),g.copy(v.binormals[q]).multiplyScalar(B.y),b.copy(m[q]).add(y).add(g),$(b.x,b.y,b.z)):$(B.x,B.y,c/s*q);for(P=d-1;P>=0;P--){for(D=P/d,I=l*Math.cos(D*Math.PI/2),O=h*Math.sin(D*Math.PI/2),H=0,z=L.length;H<z;H++)B=R(L[H],j[H],O),$(B.x,B.y,c+I);for(w=0,x=T.length;w<x;w++)for(A=T[w],W=X[w],H=0,z=A.length;H<z;H++)B=R(A[H],W[H],O),E?$(B.x,B.y+m[s-1].y,m[s-1].x+I):$(B.x,B.y,c+I)}function Q(){var e=r.length/3;if(u){var t=0,i=F*t;for(H=0;H<N;H++)k=S[H],J(k[2]+i,k[1]+i,k[0]+i);for(t=s+2*d,i=F*t,H=0;H<N;H++)k=S[H],J(k[0]+i,k[1]+i,k[2]+i)}else{for(H=0;H<N;H++)k=S[H],J(k[2],k[1],k[0]);for(H=0;H<N;H++)k=S[H],J(k[0]+F*s,k[1]+F*s,k[2]+F*s)}n.addGroup(e,r.length/3-e,0)}function K(){var e=r.length/3,t=0;for(Z(L,t),t+=L.length,w=0,x=T.length;w<x;w++)A=T[w],Z(A,t),t+=A.length;n.addGroup(e,r.length/3-e,1)}function Z(e,t){var n,r;H=e.length;while(--H>=0){n=H,r=H-1,r<0&&(r=e.length-1);var i=0,o=s+2*d;for(i=0;i<o;i++){var a=F*i,c=F*(i+1),u=t+n+a,l=t+r+a,h=t+r+c,p=t+n+c;ee(u,l,h,p)}}}function $(e,t,n){o.push(e),o.push(t),o.push(n)}function J(e,t,i){te(e),te(t),te(i);var o=r.length/3,a=f.generateTopUV(n,r,o-3,o-2,o-1);ne(a[0]),ne(a[1]),ne(a[2])}function ee(e,t,i,o){te(e),te(t),te(o),te(t),te(i),te(o);var a=r.length/3,s=f.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);ne(s[0]),ne(s[1]),ne(s[3]),ne(s[1]),ne(s[2]),ne(s[3])}function te(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function ne(e){i.push(e.x),i.push(e.y)}Q(),K()}this.addAttribute("position",new ji(r,3)),this.addAttribute("uv",new ji(i,2)),this.computeVertexNormals()}xc.prototype=Object.create(Pi.prototype),xc.prototype.constructor=xc,xc.prototype.toJSON=function(){var e=Pi.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return Mc(t,n,e)},Ec.prototype=Object.create(Wi.prototype),Ec.prototype.constructor=Ec,Ec.prototype.toJSON=function(){var e=Wi.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return Mc(t,n,e)};var _c={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],c=t[3*r+1],u=t[3*i],l=t[3*i+1];return[new jt(o,a),new jt(s,c),new jt(u,l)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],c=t[3*n+2],u=t[3*r],l=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-l)<.01?[new jt(a,1-c),new jt(u,1-h),new jt(d,1-f),new jt(m,1-g)]:[new jt(s,1-c),new jt(l,1-h),new jt(p,1-f),new jt(v,1-g)]}};function Mc(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Tc(e,t){Pi.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Cc(e,t)),this.mergeVertices()}function Cc(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Pi;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ec.call(this,r,t),this.type="TextBufferGeometry"}function Sc(e,t,n,r,i,o,a){Pi.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Lc(e,t,n,r,i,o,a)),this.mergeVertices()}function Lc(e,t,n,r,i,o,a){Wi.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,c,u=o+a,l=0,h=[],d=new Gt,p=new Gt,f=[],m=[],v=[],g=[];for(c=0;c<=n;c++){var y=[],b=c/n;for(s=0;s<=t;s++){var A=s/t;d.x=-e*Math.cos(r+A*i)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(r+A*i)*Math.sin(o+b*a),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),g.push(A,1-b),y.push(l++)}h.push(y)}for(c=0;c<n;c++)for(s=0;s<t;s++){var w=h[c][s+1],x=h[c][s],E=h[c+1][s],_=h[c+1][s+1];(0!==c||o>0)&&f.push(w,x,_),(c!==n-1||u<Math.PI)&&f.push(x,E,_)}this.setIndex(f),this.addAttribute("position",new ji(m,3)),this.addAttribute("normal",new ji(v,3)),this.addAttribute("uv",new ji(g,2))}function Rc(e,t,n,r,i,o){Pi.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Pc(e,t,n,r,i,o)),this.mergeVertices()}function Pc(e,t,n,r,i,o){Wi.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var a,s,c,u=[],l=[],h=[],d=[],p=e,f=(t-e)/r,m=new Gt,v=new jt;for(s=0;s<=r;s++){for(c=0;c<=n;c++)a=i+c/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),l.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<r;s++){var g=s*(n+1);for(c=0;c<n;c++){a=c+g;var y=a,b=a+n+1,A=a+n+2,w=a+1;u.push(y,b,w),u.push(b,A,w)}}this.setIndex(u),this.addAttribute("position",new ji(l,3)),this.addAttribute("normal",new ji(h,3)),this.addAttribute("uv",new ji(d,2))}function Oc(e,t,n,r){Pi.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Dc(e,t,n,r)),this.mergeVertices()}function Dc(e,t,n,r){Wi.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Ut.clamp(r,0,2*Math.PI);var i,o,a,s=[],c=[],u=[],l=1/t,h=new Gt,d=new jt;for(o=0;o<=t;o++){var p=n+o*l*r,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,c.push(h.x,h.y,h.z),d.x=o/t,d.y=a/(e.length-1),u.push(d.x,d.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){i=a+o*e.length;var v=i,g=i+e.length,y=i+e.length+1,b=i+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.addAttribute("position",new ji(c,3)),this.addAttribute("uv",new ji(u,2)),this.computeVertexNormals(),r===2*Math.PI){var A=this.attributes.normal.array,w=new Gt,x=new Gt,E=new Gt;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)w.x=A[a+0],w.y=A[a+1],w.z=A[a+2],x.x=A[i+a+0],x.y=A[i+a+1],x.z=A[i+a+2],E.addVectors(w,x).normalize(),A[a+0]=A[i+a+0]=E.x,A[a+1]=A[i+a+1]=E.y,A[a+2]=A[i+a+2]=E.z}}function Ic(e,t){Pi.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Bc(e,t)),this.mergeVertices()}function Bc(e,t){Wi.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var c=0;c<e.length;c++)u(e[c]),this.addGroup(a,s,c),a+=s,s=0;function u(e){var a,c,u,l=r.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;for(!1===bc.isClockWise(d)&&(d=d.reverse()),a=0,c=p.length;a<c;a++)u=p[a],!0===bc.isClockWise(u)&&(p[a]=u.reverse());var f=bc.triangulateShape(d,p);for(a=0,c=p.length;a<c;a++)u=p[a],d=d.concat(u);for(a=0,c=d.length;a<c;a++){var m=d[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,c=f.length;a<c;a++){var v=f[a],g=v[0]+l,y=v[1]+l,b=v[2]+l;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new ji(r,3)),this.addAttribute("normal",new ji(i,3)),this.addAttribute("uv",new ji(o,2))}function kc(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Fc(e,t){Wi.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Ut.DEG2RAD*t),c=[0,0],u={},l=["a","b","c"];e.isBufferGeometry?(o=new Pi,o.fromBufferGeometry(e)):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[l[v]],r=m[l[(v+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),i=c[0]+","+c[1],void 0===u[i]?u[i]={index1:c[0],index2:c[1],face1:p,face2:void 0}:u[i].face2=p;for(i in u){var g=u[i];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new ji(a,3))}function Nc(e,t,n,r,i,o,a,s){Pi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Uc(e,t,n,r,i,o,a,s)),this.mergeVertices()}function Uc(e,t,n,r,i,o,a,s){Wi.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],l=[],h=[],d=[],p=0,f=[],m=n/2,v=0;function g(){var o,g,y=new Gt,b=new Gt,A=0,w=(t-e)/n;for(g=0;g<=i;g++){var x=[],E=g/i,_=E*(t-e)+e;for(o=0;o<=r;o++){var M=o/r,T=M*s+a,C=Math.sin(T),S=Math.cos(T);b.x=_*C,b.y=-E*n+m,b.z=_*S,l.push(b.x,b.y,b.z),y.set(C,w,S).normalize(),h.push(y.x,y.y,y.z),d.push(M,1-E),x.push(p++)}f.push(x)}for(o=0;o<r;o++)for(g=0;g<i;g++){var L=f[g][o],R=f[g+1][o],P=f[g+1][o+1],O=f[g][o+1];u.push(L,R,O),u.push(R,P,O),A+=6}c.addGroup(v,A,0),v+=A}function y(n){var i,o,f,g=new jt,y=new Gt,b=0,A=!0===n?e:t,w=!0===n?1:-1;for(o=p,i=1;i<=r;i++)l.push(0,m*w,0),h.push(0,w,0),d.push(.5,.5),p++;for(f=p,i=0;i<=r;i++){var x=i/r,E=x*s+a,_=Math.cos(E),M=Math.sin(E);y.x=A*M,y.y=m*w,y.z=A*_,l.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*_+.5,g.y=.5*M*w+.5,d.push(g.x,g.y),p++}for(i=0;i<r;i++){var T=o+i,C=f+i;!0===n?u.push(C,C+1,T):u.push(C+1,C,T),b+=3}c.addGroup(v,b,!0===n?1:2),v+=b}g(),!1===o&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.addAttribute("position",new ji(l,3)),this.addAttribute("normal",new ji(h,3)),this.addAttribute("uv",new ji(d,2))}function jc(e,t,n,r,i,o,a){Nc.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Hc(e,t,n,r,i,o,a){Uc.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function zc(e,t,n,r){Pi.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Gc(e,t,n,r)),this.mergeVertices()}function Gc(e,t,n,r){Wi.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],c=[],u=[],l=new Gt,h=new jt;for(s.push(0,0,0),c.push(0,0,1),u.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var d=n+o/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),s.push(l.x,l.y,l.z),c.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,u.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new ji(s,3)),this.addAttribute("normal",new ji(c,3)),this.addAttribute("uv",new ji(u,2))}Tc.prototype=Object.create(Pi.prototype),Tc.prototype.constructor=Tc,Cc.prototype=Object.create(Ec.prototype),Cc.prototype.constructor=Cc,Sc.prototype=Object.create(Pi.prototype),Sc.prototype.constructor=Sc,Lc.prototype=Object.create(Wi.prototype),Lc.prototype.constructor=Lc,Rc.prototype=Object.create(Pi.prototype),Rc.prototype.constructor=Rc,Pc.prototype=Object.create(Wi.prototype),Pc.prototype.constructor=Pc,Oc.prototype=Object.create(Pi.prototype),Oc.prototype.constructor=Oc,Dc.prototype=Object.create(Wi.prototype),Dc.prototype.constructor=Dc,Ic.prototype=Object.create(Pi.prototype),Ic.prototype.constructor=Ic,Ic.prototype.toJSON=function(){var e=Pi.prototype.toJSON.call(this),t=this.parameters.shapes;return kc(t,e)},Bc.prototype=Object.create(Wi.prototype),Bc.prototype.constructor=Bc,Bc.prototype.toJSON=function(){var e=Wi.prototype.toJSON.call(this),t=this.parameters.shapes;return kc(t,e)},Fc.prototype=Object.create(Wi.prototype),Fc.prototype.constructor=Fc,Nc.prototype=Object.create(Pi.prototype),Nc.prototype.constructor=Nc,Uc.prototype=Object.create(Wi.prototype),Uc.prototype.constructor=Uc,jc.prototype=Object.create(Nc.prototype),jc.prototype.constructor=jc,Hc.prototype=Object.create(Uc.prototype),Hc.prototype.constructor=Hc,zc.prototype=Object.create(Pi.prototype),zc.prototype.constructor=zc,Gc.prototype=Object.create(Wi.prototype),Gc.prototype.constructor=Gc;var Vc=Object.freeze({WireframeGeometry:Ms,ParametricGeometry:Ts,ParametricBufferGeometry:Cs,TetrahedronGeometry:Rs,TetrahedronBufferGeometry:Ps,OctahedronGeometry:Os,OctahedronBufferGeometry:Ds,IcosahedronGeometry:Is,IcosahedronBufferGeometry:Bs,DodecahedronGeometry:ks,DodecahedronBufferGeometry:Fs,PolyhedronGeometry:Ss,PolyhedronBufferGeometry:Ls,TubeGeometry:Ns,TubeBufferGeometry:Us,TorusKnotGeometry:js,TorusKnotBufferGeometry:Hs,TorusGeometry:zs,TorusBufferGeometry:Gs,TextGeometry:Tc,TextBufferGeometry:Cc,SphereGeometry:Sc,SphereBufferGeometry:Lc,RingGeometry:Rc,RingBufferGeometry:Pc,PlaneGeometry:Yi,PlaneBufferGeometry:Qi,LatheGeometry:Oc,LatheBufferGeometry:Dc,ShapeGeometry:Ic,ShapeBufferGeometry:Bc,ExtrudeGeometry:xc,ExtrudeBufferGeometry:Ec,EdgesGeometry:Fc,ConeGeometry:jc,ConeBufferGeometry:Hc,CylinderGeometry:Nc,CylinderBufferGeometry:Uc,CircleGeometry:zc,CircleBufferGeometry:Gc,BoxGeometry:qi,BoxBufferGeometry:Xi});function Wc(e){Zi.call(this),this.type="ShadowMaterial",this.color=new Ai(0),this.transparent=!0,this.setValues(e)}function qc(e){eo.call(this,e),this.type="RawShaderMaterial"}function Xc(e){Zi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ai(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ft,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Yc(e){Xc.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Qc(e){Zi.call(this),this.type="MeshPhongMaterial",this.color=new Ai(16777215),this.specular=new Ai(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ft,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Kc(e){Qc.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Zc(e){Zi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ft,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $c(e){Zi.call(this),this.type="MeshLambertMaterial",this.color=new Ai(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Jc(e){Zi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ai(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ft,this.normalScale=new jt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function eu(e){ms.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Wc.prototype=Object.create(Zi.prototype),Wc.prototype.constructor=Wc,Wc.prototype.isShadowMaterial=!0,Wc.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.color.copy(e.color),this},qc.prototype=Object.create(eo.prototype),qc.prototype.constructor=qc,qc.prototype.isRawShaderMaterial=!0,Xc.prototype=Object.create(Zi.prototype),Xc.prototype.constructor=Xc,Xc.prototype.isMeshStandardMaterial=!0,Xc.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Yc.prototype=Object.create(Xc.prototype),Yc.prototype.constructor=Yc,Yc.prototype.isMeshPhysicalMaterial=!0,Yc.prototype.copy=function(e){return Xc.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Qc.prototype=Object.create(Zi.prototype),Qc.prototype.constructor=Qc,Qc.prototype.isMeshPhongMaterial=!0,Qc.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Kc.prototype=Object.create(Qc.prototype),Kc.prototype.constructor=Kc,Kc.prototype.isMeshToonMaterial=!0,Kc.prototype.copy=function(e){return Qc.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Zc.prototype=Object.create(Zi.prototype),Zc.prototype.constructor=Zc,Zc.prototype.isMeshNormalMaterial=!0,Zc.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$c.prototype=Object.create(Zi.prototype),$c.prototype.constructor=$c,$c.prototype.isMeshLambertMaterial=!0,$c.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Jc.prototype=Object.create(Zi.prototype),Jc.prototype.constructor=Jc,Jc.prototype.isMeshMatcapMaterial=!0,Jc.prototype.copy=function(e){return Zi.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},eu.prototype=Object.create(ms.prototype),eu.prototype.constructor=eu,eu.prototype.isLineDashedMaterial=!0,eu.prototype.copy=function(e){return ms.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var tu=Object.freeze({ShadowMaterial:Wc,SpriteMaterial:us,RawShaderMaterial:qc,ShaderMaterial:eo,PointsMaterial:bs,MeshPhysicalMaterial:Yc,MeshStandardMaterial:Xc,MeshPhongMaterial:Qc,MeshToonMaterial:Kc,MeshNormalMaterial:Zc,MeshLambertMaterial:$c,MeshDepthMaterial:Ha,MeshDistanceMaterial:za,MeshBasicMaterial:ro,MeshMatcapMaterial:Jc,LineDashedMaterial:eu,LineBasicMaterial:ms,Material:Zi}),nu={arraySlice:function(e,t,n){return nu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){var i=1,o=e[0];while(void 0!==o&&void 0===o[r])o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function ru(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function iu(e,t,n,r){ru.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ou(e,t,n,r){ru.call(this,e,t,n,r)}function au(e,t,n,r){ru.call(this,e,t,n,r)}function su(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nu.convertArray(t,this.TimeBufferType),this.values=nu.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function cu(e,t,n){su.call(this,e,t,n)}function uu(e,t,n,r){su.call(this,e,t,n,r)}function lu(e,t,n,r){su.call(this,e,t,n,r)}function hu(e,t,n,r){ru.call(this,e,t,n,r)}function du(e,t,n,r){su.call(this,e,t,n,r)}function pu(e,t,n,r){su.call(this,e,t,n,r)}function fu(e,t,n,r){su.call(this,e,t,n,r)}function mu(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Ut.generateUUID(),this.duration<0&&this.resetDuration()}function vu(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lu;case"vector":case"vector2":case"vector3":case"vector4":return fu;case"color":return uu;case"quaternion":return du;case"bool":case"boolean":return cu;case"string":return pu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function gu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=vu(e.type);if(void 0===e.times){var n=[],r=[];nu.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(ru.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}while(n<o){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(ru.prototype,{beforeStart_:ru.prototype.copySampleValue_,afterEnd_:ru.prototype.copySampleValue_}),iu.prototype=Object.assign(Object.create(ru.prototype),{constructor:iu,DefaultSettings_:{endingStart:wt,endingEnd:wt},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case xt:i=e,a=2*t-n;break;case Et:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case xt:o=e,s=2*n-t;break;case Et:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f,A=0;A!==a;++A)i[A]=v*o[u+A]+g*o[c+A]+y*o[s+A]+b*o[l+A];return i}}),ou.prototype=Object.assign(Object.create(ru.prototype),{constructor:ou,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=(n-t)/(r-t),l=1-u,h=0;h!==a;++h)i[h]=o[c+h]*l+o[s+h]*u;return i}}),au.prototype=Object.assign(Object.create(ru.prototype),{constructor:au,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(su,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:nu.convertArray(e.times,Array),values:nu.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(su.prototype,{constructor:su,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bt,InterpolantFactoryMethodDiscrete:function(e){return new au(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ou(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new iu(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case yt:t=this.InterpolantFactoryMethodDiscrete;break;case bt:t=this.InterpolantFactoryMethodLinear;break;case At:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return yt;case this.InterpolantFactoryMethodLinear:return bt;case this.InterpolantFactoryMethodSmooth:return At}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){var n=this.times,r=n.length,i=0,o=r-1;while(i!==r&&n[i]<e)++i;while(-1!==o&&n[o]>t)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=nu.arraySlice(n,i,o),this.values=nu.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&nu.isTypedArray(r)){a=0;for(var c=r.length;a!==c;++a){var u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===At,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a],u=e[a+1];if(c!==u&&(1!==a||c!==c[0]))if(r)s=!0;else for(var l=a*n,h=l-n,d=l+n,p=0;p!==n;++p){var f=t[l+p];if(f!==t[h+p]||f!==t[d+p]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var m=a*n,v=i*n;for(p=0;p!==n;++p)t[v+p]=t[m+p]}++i}}if(o>0){e[i]=e[o];for(m=o*n,v=i*n,p=0;p!==n;++p)t[v+p]=t[m+p];++i}return i!==e.length&&(this.times=nu.arraySlice(e,0,i),this.values=nu.arraySlice(t,0,i*n)),this},clone:function(){var e=nu.arraySlice(this.times,0),t=nu.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}),cu.prototype=Object.assign(Object.create(su.prototype),{constructor:cu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:yt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),uu.prototype=Object.assign(Object.create(su.prototype),{constructor:uu,ValueTypeName:"color"}),lu.prototype=Object.assign(Object.create(su.prototype),{constructor:lu,ValueTypeName:"number"}),hu.prototype=Object.assign(Object.create(ru.prototype),{constructor:hu,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(n-t)/(r-t),u=s+a;s!==u;s+=4)zt.slerpFlat(i,0,o,s-a,o,s,c);return i}}),du.prototype=Object.assign(Object.create(su.prototype),{constructor:du,ValueTypeName:"quaternion",DefaultInterpolation:bt,InterpolantFactoryMethodLinear:function(e){return new hu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),pu.prototype=Object.assign(Object.create(su.prototype),{constructor:pu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:yt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fu.prototype=Object.assign(Object.create(su.prototype),{constructor:fu,ValueTypeName:"vector"}),Object.assign(mu,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(gu(n[i]).scale(r));return new mu(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(su.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=nu.getKeyframeOrder(s);s=nu.sortedArray(s,1,u),c=nu.sortedArray(c,1,u),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new lu(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new mu(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var u=c[1],l=r[u];l||(r[u]=l=[]),l.push(s)}}var h=[];for(var u in r)h.push(mu.CreateFromMorphTargetSequence(u,r[u],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];nu.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var u=s[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var l={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)l[u[h].morphTargets[d]]=-1;for(var p in l){var f=[],m=[];for(d=0;d!==u[h].morphTargets.length;++d){var v=u[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new lu(".morphTargetInfluence["+p+"]",f,m))}o=l.length*(a||1)}else{var g=".bones["+t[c].name+"]";n(fu,g+".position",u,"pos",r),n(du,g+".quaternion",u,"rot",r),n(fu,g+".scale",u,"scl",r)}}if(0===r.length)return null;var y=new mu(i,o,r);return y}}),Object.assign(mu.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new mu(this.name,this.duration,e)}});var yu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function bu(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Au=new bu,wu={};function xu(e){this.manager=void 0!==e?e:Au}function Eu(e){this.manager=void 0!==e?e:Au}function _u(e){this.manager=void 0!==e?e:Au,this._parser=null}function Mu(e){this.manager=void 0!==e?e:Au,this._parser=null}function Tu(e){this.manager=void 0!==e?e:Au}function Cu(e){this.manager=void 0!==e?e:Au}function Su(e){this.manager=void 0!==e?e:Au}function Lu(){this.type="Curve",this.arcLengthDivisions=200}function Ru(e,t,n,r,i,o,a,s){Lu.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Pu(e,t,n,r,i,o){Ru.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Ou(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var c=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;c*=a,u*=a,i(t,n,c,u)},calc:function(i){var o=i*i,a=o*i;return e+t*i+n*o+r*a}}}Object.assign(xu.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===wu[e]){var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var c=s[1],u=!!s[2],l=s[3];l=decodeURIComponent(l),u&&(l=atob(l));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var p=new Uint8Array(l.length),f=0;f<l.length;f++)p[f]=l.charCodeAt(f);h="blob"===d?new Blob([p.buffer],{type:c}):p.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(l,c);break;case"json":h=JSON.parse(l);break;default:h=l;break}setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(y){setTimeout(function(){r&&r(y),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{wu[e]=[],wu[e].push({onLoad:t,onProgress:n,onError:r});var v=new XMLHttpRequest;for(var g in v.open("GET",e,!0),v.addEventListener("load",function(t){var n=this.response;yu.add(e,n);var r=wu[e];if(delete wu[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){s=r[o];s.onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),v.addEventListener("progress",function(t){for(var n=wu[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),v.addEventListener("error",function(t){var n=wu[e];delete wu[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),v.addEventListener("abort",function(t){var n=wu[e];delete wu[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return i.manager.itemStart(e),v}wu[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Eu.prototype,{load:function(e,t,n,r){var i=this,o=new xu(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=mu.parse(e[n]);t.push(r)}return t},setPath:function(e){return this.path=e,this}}),Object.assign(_u.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new xs;a.image=o;var s=new xu(this.manager);function c(c){s.load(e[c],function(e){var n=i._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(a.minFilter=xe),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,h=e.length;l<h;++l)c(l);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=xe),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Mu.prototype,{load:function(e,t,n,r){var i=this,o=new $t,a=new xu(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ge,o.wrapT=void 0!==n.wrapT?n.wrapT:ge,o.magFilter=void 0!==n.magFilter?n.magFilter:xe,o.minFilter=void 0!==n.minFilter?n.minFilter:_e,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=xe),o.needsUpdate=!0,t&&t(o,n))},n,r),o},setPath:function(e){return this.path=e,this}}),Object.assign(Tu.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),yu.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Cu.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new go,o=new Tu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Su.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new Xt,o=new Tu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ne:Ue,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Lu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];var a,s=0,c=o-1;while(s<=c)if(i=Math.floor(s+(c-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(i=c,r[i]===n)return i/(o-1);var u=r[i],l=r[i+1],h=l-u,d=(n-u)/h,p=(i+d)/(o-1);return p},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new Gt,a=[],s=[],c=[],u=new Gt,l=new Ht;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new Gt,c[0]=new Gt;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),c[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(Ut.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(u,i))),c[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(Ut.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),c[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ru.prototype=Object.create(Lu.prototype),Ru.prototype.constructor=Ru,Ru.prototype.isEllipseCurve=!0,Ru.prototype.getPoint=function(e,t){var n=t||new jt,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,d=c-this.aY;s=h*u-d*l+this.aX,c=h*l+d*u+this.aY}return n.set(s,c)},Ru.prototype.copy=function(e){return Lu.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ru.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ru.prototype.fromJSON=function(e){return Lu.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Pu.prototype=Object.create(Ru.prototype),Pu.prototype.constructor=Pu,Pu.prototype.isArcCurve=!0;var Du=new Gt,Iu=new Ou,Bu=new Ou,ku=new Ou;function Fu(e,t,n,r){Lu.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Nu(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e,c=e*s;return(2*n-2*r+o+a)*c+(-3*n+3*r-2*o-a)*s+o*e+n}function Uu(e,t){var n=1-e;return n*n*t}function ju(e,t){return 2*(1-e)*e*t}function Hu(e,t){return e*e*t}function zu(e,t,n,r){return Uu(e,t)+ju(e,n)+Hu(e,r)}function Gu(e,t){var n=1-e;return n*n*n*t}function Vu(e,t){var n=1-e;return 3*n*n*e*t}function Wu(e,t){return 3*(1-e)*e*e*t}function qu(e,t){return e*e*e*t}function Xu(e,t,n,r,i){return Gu(e,t)+Vu(e,n)+Wu(e,r)+qu(e,i)}function Yu(e,t,n,r){Lu.call(this),this.type="CubicBezierCurve",this.v0=e||new jt,this.v1=t||new jt,this.v2=n||new jt,this.v3=r||new jt}function Qu(e,t,n,r){Lu.call(this),this.type="CubicBezierCurve3",this.v0=e||new Gt,this.v1=t||new Gt,this.v2=n||new Gt,this.v3=r||new Gt}function Ku(e,t){Lu.call(this),this.type="LineCurve",this.v1=e||new jt,this.v2=t||new jt}function Zu(e,t){Lu.call(this),this.type="LineCurve3",this.v1=e||new Gt,this.v2=t||new Gt}function $u(e,t,n){Lu.call(this),this.type="QuadraticBezierCurve",this.v0=e||new jt,this.v1=t||new jt,this.v2=n||new jt}function Ju(e,t,n){Lu.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Gt,this.v1=t||new Gt,this.v2=n||new Gt}function el(e){Lu.call(this),this.type="SplineCurve",this.points=e||[]}Fu.prototype=Object.create(Lu.prototype),Fu.prototype.constructor=Fu,Fu.prototype.isCatmullRomCurve3=!0,Fu.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new Gt,s=this.points,c=s.length,u=(c-(this.closed?0:1))*e,l=Math.floor(u),h=u-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/c)+1)*c:0===h&&l===c-1&&(l=c-2,h=1),this.closed||l>0?n=s[(l-1)%c]:(Du.subVectors(s[0],s[1]).add(s[0]),n=Du),r=s[l%c],i=s[(l+1)%c],this.closed||l+2<c?o=s[(l+2)%c]:(Du.subVectors(s[c-1],s[c-2]).add(s[c-1]),o=Du),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),d),f=Math.pow(r.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Iu.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,f,m),Bu.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,f,m),ku.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(Iu.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Bu.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),ku.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Iu.calc(h),Bu.calc(h),ku.calc(h)),a},Fu.prototype.copy=function(e){Lu.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Fu.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Fu.prototype.fromJSON=function(e){Lu.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Gt).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Yu.prototype=Object.create(Lu.prototype),Yu.prototype.constructor=Yu,Yu.prototype.isCubicBezierCurve=!0,Yu.prototype.getPoint=function(e,t){var n=t||new jt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Xu(e,r.x,i.x,o.x,a.x),Xu(e,r.y,i.y,o.y,a.y)),n},Yu.prototype.copy=function(e){return Lu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Yu.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Yu.prototype.fromJSON=function(e){return Lu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Qu.prototype=Object.create(Lu.prototype),Qu.prototype.constructor=Qu,Qu.prototype.isCubicBezierCurve3=!0,Qu.prototype.getPoint=function(e,t){var n=t||new Gt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Xu(e,r.x,i.x,o.x,a.x),Xu(e,r.y,i.y,o.y,a.y),Xu(e,r.z,i.z,o.z,a.z)),n},Qu.prototype.copy=function(e){return Lu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Qu.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Qu.prototype.fromJSON=function(e){return Lu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ku.prototype=Object.create(Lu.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isLineCurve=!0,Ku.prototype.getPoint=function(e,t){var n=t||new jt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ku.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ku.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},Ku.prototype.copy=function(e){return Lu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ku.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ku.prototype.fromJSON=function(e){return Lu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Zu.prototype=Object.create(Lu.prototype),Zu.prototype.constructor=Zu,Zu.prototype.isLineCurve3=!0,Zu.prototype.getPoint=function(e,t){var n=t||new Gt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Zu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Zu.prototype.copy=function(e){return Lu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Zu.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Zu.prototype.fromJSON=function(e){return Lu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},$u.prototype=Object.create(Lu.prototype),$u.prototype.constructor=$u,$u.prototype.isQuadraticBezierCurve=!0,$u.prototype.getPoint=function(e,t){var n=t||new jt,r=this.v0,i=this.v1,o=this.v2;return n.set(zu(e,r.x,i.x,o.x),zu(e,r.y,i.y,o.y)),n},$u.prototype.copy=function(e){return Lu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$u.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$u.prototype.fromJSON=function(e){return Lu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ju.prototype=Object.create(Lu.prototype),Ju.prototype.constructor=Ju,Ju.prototype.isQuadraticBezierCurve3=!0,Ju.prototype.getPoint=function(e,t){var n=t||new Gt,r=this.v0,i=this.v1,o=this.v2;return n.set(zu(e,r.x,i.x,o.x),zu(e,r.y,i.y,o.y),zu(e,r.z,i.z,o.z)),n},Ju.prototype.copy=function(e){return Lu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ju.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ju.prototype.fromJSON=function(e){return Lu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},el.prototype=Object.create(Lu.prototype),el.prototype.constructor=el,el.prototype.isSplineCurve=!0,el.prototype.getPoint=function(e,t){var n=t||new jt,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(Nu(a,s.x,c.x,u.x,l.x),Nu(a,s.y,c.y,u.y,l.y)),n},el.prototype.copy=function(e){Lu.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},el.prototype.toJSON=function(){var e=Lu.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},el.prototype.fromJSON=function(e){Lu.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new jt).fromArray(r))}return this};var tl=Object.freeze({ArcCurve:Pu,CatmullRomCurve3:Fu,CubicBezierCurve:Yu,CubicBezierCurve3:Qu,EllipseCurve:Ru,LineCurve:Ku,LineCurve3:Zu,QuadraticBezierCurve:$u,QuadraticBezierCurve3:Ju,SplineCurve:el});function nl(){Lu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function rl(e){nl.call(this),this.type="Path",this.currentPoint=new jt,e&&this.setFromPoints(e)}function il(e){rl.call(this,e),this.uuid=Ut.generateUUID(),this.type="Shape",this.holes=[]}function ol(e,t){Li.call(this),this.type="Light",this.color=new Ai(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function al(e,t,n){ol.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Li.DefaultUp),this.updateMatrix(),this.groundColor=new Ai(t)}function sl(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new jt(512,512),this.map=null,this.matrix=new Ht}function cl(){sl.call(this,new Qa(50,1,.5,500))}function ul(e,t,n,r,i,o){ol.call(this,e,t),this.type="SpotLight",this.position.copy(Li.DefaultUp),this.updateMatrix(),this.target=new Li,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new cl}function ll(e,t,n,r){ol.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new sl(new Qa(90,1,.5,500))}function hl(e,t,n,r,i,o){Ya.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function dl(){sl.call(this,new hl(-5,5,5,-5,.5,500))}function pl(e,t){ol.call(this,e,t),this.type="DirectionalLight",this.position.copy(Li.DefaultUp),this.updateMatrix(),this.target=new Li,this.shadow=new dl}function fl(e,t){ol.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ml(e,t,n,r){ol.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function vl(e){this.manager=void 0!==e?e:Au,this.textures={}}nl.prototype=Object.assign(Object.create(Lu.prototype),{constructor:nl,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ku(t,e))},getPoint:function(e){var t=e*this.getLength(),n=this.getCurveLengths(),r=0;while(r<n.length){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var u=s[c];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Lu.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Lu.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Lu.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new tl[r.type]).fromJSON(r))}return this}}),rl.prototype=Object.assign(Object.create(nl.prototype),{constructor:rl,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Ku(this.currentPoint.clone(),new jt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new $u(this.currentPoint.clone(),new jt(e,t),new jt(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Yu(this.currentPoint.clone(),new jt(e,t),new jt(n,r),new jt(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new el(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var c=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+c,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var c=new Ru(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return nl.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=nl.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return nl.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),il.prototype=Object.assign(Object.create(rl.prototype),{constructor:il,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){rl.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=rl.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){rl.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new rl).fromJSON(r))}return this}}),ol.prototype=Object.assign(Object.create(Li.prototype),{constructor:ol,isLight:!0,copy:function(e){return Li.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Li.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),al.prototype=Object.assign(Object.create(ol.prototype),{constructor:al,isHemisphereLight:!0,copy:function(e){return ol.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(sl.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),cl.prototype=Object.assign(Object.create(sl.prototype),{constructor:cl,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Ut.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),ul.prototype=Object.assign(Object.create(ol.prototype),{constructor:ul,isSpotLight:!0,copy:function(e){return ol.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ll.prototype=Object.assign(Object.create(ol.prototype),{constructor:ll,isPointLight:!0,copy:function(e){return ol.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),hl.prototype=Object.assign(Object.create(Ya.prototype),{constructor:hl,isOrthographicCamera:!0,copy:function(e,t){return Ya.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/c),o=i+l*(this.view.width/c),a-=h*(this.view.offsetY/u),s=a-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Li.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),dl.prototype=Object.assign(Object.create(sl.prototype),{constructor:dl}),pl.prototype=Object.assign(Object.create(ol.prototype),{constructor:pl,isDirectionalLight:!0,copy:function(e){return ol.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),fl.prototype=Object.assign(Object.create(ol.prototype),{constructor:fl,isAmbientLight:!0}),ml.prototype=Object.assign(Object.create(ol.prototype),{constructor:ml,isRectAreaLight:!0,copy:function(e){return ol.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ol.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(vl.prototype,{load:function(e,t,n,r){var i=this,o=new xu(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new tu[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new Ai).setHex(o.value);break;case"v2":r.uniforms[i].value=(new jt).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new Gt).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new Yt).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new Vt).fromArray(o.value);case"m4":r.uniforms[i].value=(new Ht).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)r.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new jt).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var gl={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function yl(e){this.manager=void 0!==e?e:Au}Object.assign(yl.prototype,{load:function(e,t,n,r){var i=this,o=new xu(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Wi,n=e.data.index;if(void 0!==n){var r=new bl[n.type](n.array);t.setIndex(new Oi(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(r=new bl[a.type](a.array),new Oi(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.addAttribute(o,s)}var c=e.data.morphAttributes;if(c)for(var o in c){for(var u=c[o],l=[],h=0,d=u.length;h<d;h++){a=u[h],r=new bl[a.type](a.array),s=new Oi(r,a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),l.push(s)}t.morphAttributes[o]=l}var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){h=0;for(var f=p.length;h!==f;++h){var m=p[h];t.addGroup(m.start,m.count,m.materialIndex)}}var v=e.data.boundingSphere;if(void 0!==v){var g=new Gt;void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new en(g,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var bl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Al(e){this.manager=void 0!==e?e:Au,this.resourcePath=""}Object.assign(Al.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=void 0===this.path?gl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new xu(i.manager);a.setPath(this.path),a.load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)},n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new il).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new yl,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Vc[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Vc[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Vc[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Vc[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Vc[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Vc[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Vc[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Vc[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Vc[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Vc[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Vc[s.type]((new tl[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Vc[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Vc[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],u=0,l=s.shapes.length;u<l;u++){var h=t[s.shapes[u]];c.push(h)}a=new Vc[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],u=0,l=s.shapes.length;u<l;u++){h=t[s.shapes[u]];c.push(h)}var d=s.options.extrudePath;void 0!==d&&(s.options.extrudePath=(new tl[d.type]).fromJSON(d)),a=new Vc[s.type](c,s.options);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var p=new THREE.LegacyJSONLoader;a=p.parse(s,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new vl;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var c=[],u=0;u<s.materials.length;u++){var l=s.materials[u];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),c.push(n[l.uuid])}r[s.uuid]=c}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=mu.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var o=new bu(t),a=new Tu(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,c=e.length;s<c;s++){var u=e[s],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var h=0,d=l.length;h<d;h++){var p=l[h],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;r[u.uuid].push(i(f))}}else{f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url;r[u.uuid]=i(f)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),a=Array.isArray(t[s.image])?new go(t[s.image]):new Xt(t[s.image]),a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,xl)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],El),a.wrapT=n(s.wrap[1],El)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,_l)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,_l)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new as,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new Ai(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new os(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new is(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Qa(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new hl(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new fl(e.color,e.intensity);break;case"DirectionalLight":r=new pl(e.color,e.intensity);break;case"PointLight":r=new ll(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new ml(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new ul(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new al(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new ds(a,s):new io(a,s),void 0!==e.drawMode&&r.setDrawMode(e.drawMode);break;case"LOD":r=new hs;break;case"Line":r=new vs(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new ys(i(e.geometry),o(e.material));break;case"LineSegments":r=new gs(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new As(i(e.geometry),o(e.material));break;case"Sprite":r=new ls(o(e.material));break;case"Group":r=new Xa;break;default:r=new Li}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,u=0;u<c.length;u++)r.add(this.parseObject(c[u],t,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var d=l[h],p=r.getObjectByProperty("uuid",d.object);void 0!==p&&r.addLevel(p,d.distance)}return r}});var wl,xl={UVMapping:ce,CubeReflectionMapping:ue,CubeRefractionMapping:le,EquirectangularReflectionMapping:he,EquirectangularRefractionMapping:de,SphericalReflectionMapping:pe,CubeUVReflectionMapping:fe,CubeUVRefractionMapping:me},El={RepeatWrapping:ve,ClampToEdgeWrapping:ge,MirroredRepeatWrapping:ye},_l={NearestFilter:be,NearestMipMapNearestFilter:Ae,NearestMipMapLinearFilter:we,LinearFilter:xe,LinearMipMapNearestFilter:Ee,LinearMipMapLinearFilter:_e};function Ml(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Au,this.options=void 0}function Tl(){this.type="ShapePath",this.color=new Ai,this.subPaths=[],this.currentPath=null}function Cl(e){this.type="Font",this.data=e}function Sl(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,c=0,u=0;u<r.length;u++){var l=r[u];if("\n"===l)s=0,c-=o;else{var h=Ll(l,i,s,c,n);s+=h.offsetX,a.push(h.path)}}return a}function Ll(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,c,u,l,h,d,p,f=new Tl;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){var y=m[v++];switch(y){case"m":a=m[v++]*t+n,s=m[v++]*t+r,f.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,f.lineTo(a,s);break;case"q":c=m[v++]*t+n,u=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,f.quadraticCurveTo(l,h,c,u);break;case"b":c=m[v++]*t+n,u=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,d=m[v++]*t+n,p=m[v++]*t+r,f.bezierCurveTo(l,h,d,p,c,u);break}}return{offsetX:o.ha*t,path:f}}}function Rl(e){this.manager=void 0!==e?e:Au}function Pl(){}Ml.prototype={constructor:Ml,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)}).then(function(n){yu.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Tl.prototype,{moveTo:function(e,t){this.currentPath=new rl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new il;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],c=-c,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=u*(e.x-a.x)-c*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=bc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,c,u=[];if(1===o.length)return s=o[0],c=new il,c.curves=s.curves,u.push(c),u;var l=!i(o[0].getPoints());l=e?!l:l;var h,d,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)s=o[g],h=s.getPoints(),a=i(h),a=e?!a:a,a?(!l&&f[v]&&v++,f[v]={s:new il,p:h},f[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var b=!1,A=[],w=0,x=f.length;w<x;w++)p[w]=[];for(w=0,x=f.length;w<x;w++)for(var E=m[w],_=0;_<E.length;_++){for(var M=E[_],T=!0,C=0;C<f.length;C++)r(M.p,f[C].p)&&(w!==C&&A.push({froms:w,tos:C,hole:_}),T?(T=!1,p[C].push(M)):b=!0);T&&p[w].push(M)}A.length>0&&(b||(m=p))}g=0;for(var S=f.length;g<S;g++){c=f[g].s,u.push(c),d=m[g];for(var L=0,R=d.length;L<R;L++)c.holes.push(d[L].h)}return u}}),Object.assign(Cl.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=Sl(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(Rl.prototype,{load:function(t,n,r,i){var o=this,a=new xu(this.manager);a.setPath(this.path),a.load(t,function(t){var r;try{r=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(t.substring(65,t.length-2))}var i=o.parse(r);n&&n(i)},r,i)},parse:function(e){return new Cl(e)},setPath:function(e){return this.path=e,this}}),Pl.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(Pl.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:E,NormalBlending:_,AdditiveBlending:M,SubtractiveBlending:T,MultiplyBlending:C,CustomBlending:S},t=new Ai,n=new Su,r=new vl;return function(i,o,a){var s={};function c(e,t,r,i,c){var u,l=o+e,h=Pl.Handlers.get(l);null!==h?u=h.load(l):(n.setCrossOrigin(a),u=n.load(l)),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=ve),1!==t[1]&&(u.wrapT=ve)),void 0!==r&&u.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(u.wrapS=ve),"mirror"===i[0]&&(u.wrapS=ye),"repeat"===i[1]&&(u.wrapT=ve),"mirror"===i[1]&&(u.wrapT=ye)),void 0!==c&&(u.anisotropy=c);var d=Ut.generateUUID();return s[d]=u,d}var u={uuid:Ut.generateUUID(),type:"MeshLambertMaterial"};for(var l in i){var h=i[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=h;break;case"blending":u.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(h).getHex();break;case"colorSpecular":u.specular=t.fromArray(h).getHex();break;case"colorEmissive":u.emissive=t.fromArray(h).getHex();break;case"specularCoef":u.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=c(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=c(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=c(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=c(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=c(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=c(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=c(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=c(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=c(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=c(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=v;break;case"doubleSided":u.side=g;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[l]=h;break;case"vertexColors":!0===h&&(u.vertexColors=x),"face"===h&&(u.vertexColors=w);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h);break}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),r.setTextures(s),r.parse(u)}}()});var Ol={getContext:function(){return void 0===wl&&(wl=new(window.AudioContext||window.webkitAudioContext)),wl},setContext:function(e){wl=e}};function Dl(e){this.manager=void 0!==e?e:Au}function Il(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Bl(e,t,n,r){Li.call(this),this.type="CubeCamera";var i=90,o=1,a=new Qa(i,o,e,t);a.up.set(0,-1,0),a.lookAt(new Gt(1,0,0)),this.add(a);var s=new Qa(i,o,e,t);s.up.set(0,-1,0),s.lookAt(new Gt(-1,0,0)),this.add(s);var c=new Qa(i,o,e,t);c.up.set(0,0,1),c.lookAt(new Gt(0,1,0)),this.add(c);var u=new Qa(i,o,e,t);u.up.set(0,0,-1),u.lookAt(new Gt(0,-1,0)),this.add(u);var l=new Qa(i,o,e,t);l.up.set(0,-1,0),l.lookAt(new Gt(0,0,1)),this.add(l);var h=new Qa(i,o,e,t);h.up.set(0,-1,0),h.lookAt(new Gt(0,0,-1)),this.add(h),r=r||{format:Ne,magFilter:xe,minFilter:xe},this.renderTarget=new Zt(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,i=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,a),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,c),e.setRenderTarget(r,3),e.render(t,u),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=i,e.setRenderTarget(r,5),e.render(t,h),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function kl(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Fl(){Li.call(this),this.type="AudioListener",this.context=Ol.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Nl(e){Li.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ul(e){Nl.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function jl(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Hl(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Dl.prototype,{load:function(e,t,n,r){var i=new xu(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(e){var n=e.slice(0),r=Ol.getContext();r.decodeAudioData(n,function(e){t(e)})},n,r)},setPath:function(e){return this.path=e,this}}),Object.assign(Il.prototype,{update:function(){var e,t,n,r,i,o,a,s,c=new Ht,u=new Ht;return function(l){var h=e!==this||t!==l.focus||n!==l.fov||r!==l.aspect*this.aspect||i!==l.near||o!==l.far||a!==l.zoom||s!==this.eyeSep;if(h){e=this,t=l.focus,n=l.fov,r=l.aspect*this.aspect,i=l.near,o=l.far,a=l.zoom;var d=l.projectionMatrix.clone();s=this.eyeSep/2;var p,f,m=s*i/t,v=i*Math.tan(Ut.DEG2RAD*n*.5)/a;u.elements[12]=-s,c.elements[12]=s,p=-v*r+m,f=v*r+m,d.elements[0]=2*i/(f-p),d.elements[8]=(f+p)/(f-p),this.cameraL.projectionMatrix.copy(d),p=-v*r-m,f=v*r-m,d.elements[0]=2*i/(f-p),d.elements[8]=(f+p)/(f-p),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(c)}}()}),Bl.prototype=Object.create(Li.prototype),Bl.prototype.constructor=Bl,Object.assign(kl.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Fl.prototype=Object.assign(Object.create(Li.prototype),{constructor:Fl,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new Gt,t=new zt,n=new Gt,r=new Gt,i=new kl;return function(o){Li.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),a.positionX){var c=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(e.x,c),a.positionY.linearRampToValueAtTime(e.y,c),a.positionZ.linearRampToValueAtTime(e.z,c),a.forwardX.linearRampToValueAtTime(r.x,c),a.forwardY.linearRampToValueAtTime(r.y,c),a.forwardZ.linearRampToValueAtTime(r.z,c),a.upX.linearRampToValueAtTime(s.x,c),a.upY.linearRampToValueAtTime(s.y,c),a.upZ.linearRampToValueAtTime(s.z,c)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),Nl.prototype=Object.assign(Object.create(Li.prototype),{constructor:Nl,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Ul.prototype=Object.assign(Object.create(Nl.prototype),{constructor:Ul,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new Gt,t=new zt,n=new Gt,r=new Gt;return function(i){if(Li.prototype.updateMatrixWorld.call(this,i),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t);var o=this.panner;if(o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(e.x,a),o.positionY.linearRampToValueAtTime(e.y,a),o.positionZ.linearRampToValueAtTime(e.z,a),o.orientationX.linearRampToValueAtTime(r.x,a),o.orientationY.linearRampToValueAtTime(r.y,a),o.orientationZ.linearRampToValueAtTime(r.z,a)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}}()}),Object.assign(jl.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Hl.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){zt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var zl,Gl,Vl="\\[\\]\\.:\\/";function Wl(e,t,n){var r=n||ql.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function ql(e,t,n){this.path=t,this.parsedPath=n||ql.parseTrackName(t),this.node=ql.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Xl(){this.uuid=Ut.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Yl(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:wt,endingEnd:wt},s=0;s!==i;++s){var c=r[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ql(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Kl(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Zl(){Wi.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function $l(e,t,n){ss.call(this,e,t),this.meshPerAttribute=n||1}function Jl(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Oi.call(this,e,t,n),this.meshPerAttribute=r||1}function eh(e,t,n,r){this.ray=new to(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function th(e,t){return e.distance-t.distance}function nh(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)nh(i[o],t,n,!0)}function rh(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function ih(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function oh(e,t){this.min=void 0!==e?e:new jt(1/0,1/0),this.max=void 0!==t?t:new jt(-1/0,-1/0)}function ah(e,t){this.start=void 0!==e?e:new Gt,this.end=void 0!==t?t:new Gt}function sh(e){Li.call(this),this.material=e,this.render=function(){}}function ch(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new Wi,u=new ji(2*a*3,3);c.addAttribute("position",u),gs.call(this,c,new ms({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function uh(e,t){Li.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Wi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1,a=32;i<a;i++,o++){var s=i/a*Math.PI*2,c=o/a*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(c),Math.sin(c),1)}n.addAttribute("position",new ji(r,3));var u=new ms({fog:!1});this.cone=new gs(n,u),this.add(this.cone),this.update()}function lh(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,lh(e.children[n]));return t}function hh(e){for(var t=lh(e),n=new Wi,r=[],i=[],o=new Ai(0,0,1),a=new Ai(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new ji(r,3)),n.addAttribute("color",new ji(i,3));var u=new ms({vertexColors:x,depthTest:!1,depthWrite:!1,transparent:!0});gs.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function dh(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Lc(t,4,2),i=new ro({wireframe:!0,fog:!1});io.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ph(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new Wi;r.addAttribute("position",new ji(n,3)),r.computeBoundingSphere();var i=new ms({fog:!1});vs.call(this,r,i);var o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new Wi;a.addAttribute("position",new ji(o,3)),a.computeBoundingSphere(),this.add(new io(a,new ro({side:v,fog:!1}))),this.update()}function fh(e,t,n){Li.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Ds(t);r.rotateY(.5*Math.PI),this.material=new ro({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=x);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new Oi(o,3)),this.add(new io(r,this.material)),this.update()}function mh(e,t,n,r){e=e||10,t=t||10,n=new Ai(void 0!==n?n:4473924),r=new Ai(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],c=[],u=0,l=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=u===i?n:r;d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3}var p=new Wi;p.addAttribute("position",new ji(s,3)),p.addAttribute("color",new ji(c,3));var f=new ms({vertexColors:x});gs.call(this,p,f)}function vh(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new Ai(void 0!==i?i:4473924),o=new Ai(void 0!==o?o:8947848);var a,s,c,u,l,h,d,p=[],f=[];for(u=0;u<=t;u++)c=u/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,p.push(0,0,0),p.push(a,0,s),d=1&u?i:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?i:o,h=e-e/n*u,l=0;l<r;l++)c=l/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),c=(l+1)/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new Wi;m.addAttribute("position",new ji(p,3)),m.addAttribute("color",new ji(f,3));var v=new ms({vertexColors:x});gs.call(this,m,v)}function gh(e,t,n,r){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new Wi,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));i.addAttribute("position",new Oi(a,3));var s=new ms({color:65280}),c=new ms({color:16776960});vs.call(this,i,[c,s]),this.update()}function yh(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Wi,u=new ji(2*a*3,3);c.addAttribute("position",u),gs.call(this,c,new ms({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function bh(e,t,n){Li.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Wi;r.addAttribute("position",new ji([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new ms({fog:!1});this.lightPlane=new vs(r,i),this.add(this.lightPlane),r=new Wi,r.addAttribute("position",new ji([0,0,0,0,0,1],3)),this.targetLine=new vs(r,i),this.add(this.targetLine),this.update()}function Ah(e){var t=new Wi,n=new ms({color:16777215,vertexColors:w}),r=[],i=[],o={},a=new Ai(16755200),s=new Ai(16711680),c=new Ai(43775),u=new Ai(16777215),l=new Ai(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",u),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.addAttribute("position",new ji(r,3)),t.addAttribute("color",new ji(i,3)),gs.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function wh(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Wi;i.setIndex(new Oi(n,1)),i.addAttribute("position",new Oi(r,3)),gs.call(this,i,new ms({color:t})),this.matrixAutoUpdate=!1,this.update()}function xh(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Wi;o.setIndex(new Oi(r,1)),o.addAttribute("position",new ji(i,3)),gs.call(this,o,new ms({color:n})),this.geometry.computeBoundingSphere()}function Eh(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new Wi;o.addAttribute("position",new ji(i,3)),o.computeBoundingSphere(),vs.call(this,o,new ms({color:r}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new Wi;s.addAttribute("position",new ji(a,3)),s.computeBoundingSphere(),this.add(new io(s,new ro({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function _h(e,t,n,r,i,o){Li.call(this),void 0===e&&(e=new Gt(0,0,1)),void 0===t&&(t=new Gt(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===zl&&(zl=new Wi,zl.addAttribute("position",new ji([0,0,0,0,1,0],3)),Gl=new Uc(0,.5,1,5,1),Gl.translate(0,-.5,0)),this.position.copy(t),this.line=new vs(zl,new ms({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new io(Gl,new ro({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Mh(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Wi;r.addAttribute("position",new ji(t,3)),r.addAttribute("color",new ji(n,3));var i=new ms({vertexColors:x});gs.call(this,r,i)}function Th(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Mi(e,t,n,i,o,a)}Object.assign(Wl.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(ql,{Composite:Wl,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new ql.Composite(e,t,n):new ql(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+Vl+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Vl+"]",t="[^"+Vl.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(ql.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=ql.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(ql.prototype,{_getValue_unbound:ql.prototype.getValue,_setValue_unbound:ql.prototype.setValue}),Object.assign(Xl.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,u=0,l=arguments.length;u!==l;++u){var h=arguments[u],d=h.uuid,p=r[d];if(void 0===p){p=t++,r[d]=p,e.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new ql(h,i[f],o[f]))}else if(p<n){c=e[p];var v=--n,g=e[v];r[g.uuid]=p,e[p]=g,r[d]=v,e[v]=h;for(f=0,m=s;f!==m;++f){var y=a[f],b=y[v],A=y[p];y[p]=b,void 0===A&&(A=new ql(h,i[f],o[f])),y[v]=A}}else e[p]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,u=n[c];if(void 0!==u&&u>=t){var l=t++,h=e[l];n[h.uuid]=u,e[u]=h,n[c]=l,e[l]=s;for(var d=0,p=i;d!==p;++d){var f=r[d],m=f[l],v=f[u];f[u]=m,f[l]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a],u=c.uuid,l=r[u];if(void 0!==l)if(delete r[u],l<n){var h=--n,d=e[h],p=--t,f=e[p];r[d.uuid]=l,e[l]=d,r[f.uuid]=h,e[h]=f,e.pop();for(var m=0,v=o;m!==v;++m){var g=i[m],y=g[h],b=g[p];g[l]=y,g[h]=b,g.pop()}}else{p=--t,f=e[p];r[f.uuid]=l,e[l]=f,e.pop();for(m=0,v=o;m!==v;++m){g=i[m];g[l]=g[p],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=u,d=s.length;h!==d;++h){var p=s[h];l[h]=new ql(p,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],c=e[a];t[c]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Yl.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,u=this._propertyBindings,l=0,h=c.length;l!==h;++l)c[l].evaluate(a),u[l].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===gt;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(r===mt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=xt,r.endingEnd=xt):(r.endingStart=e?this.zeroSlopeAtStart?xt:wt:Et,r.endingEnd=t?this.zeroSlopeAtEnd?xt:wt:Et)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Ql.prototype=Object.assign(Object.create(n.prototype),{constructor:Ql,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==i;++l){var h=r[l],d=h.name,p=u[d];if(void 0!==p)o[l]=p;else{if(p=o[l],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=t&&t._propertyBindings[l].binding.parsedPath;p=new Hl(ql.create(n,d,f),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,d),o[l]=p}a[l].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null;var l=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete l[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new ou(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?mu.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[r];if(void 0!==c)return c;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new Yl(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?mu.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s._update(r,e,i,o)}var c=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)c[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var c in s){var u=s[c];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Kl.prototype.clone=function(){return new Kl(void 0===this.value.clone?this.value:this.value.clone())},Zl.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Zl,isInstancedBufferGeometry:!0,copy:function(e){return Wi.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),$l.prototype=Object.assign(Object.create(ss.prototype),{constructor:$l,isInstancedInterleavedBuffer:!0,copy:function(e){return ss.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Jl.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Jl,isInstancedBufferAttribute:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(eh.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return nh(e,this,r,t),r.sort(th),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)nh(e[i],this,r,t);return r.sort(th),r}}),Object.assign(rh.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ut.clamp(t/this.radius,-1,1))),this}}),Object.assign(ih.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(oh.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new jt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new jt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new jt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new jt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new jt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new jt;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(ah.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Gt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Gt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Gt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Gt,t=new Gt;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e),a=o/i;return r&&(a=Ut.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Gt),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),sh.prototype=Object.create(Li.prototype),sh.prototype.constructor=sh,sh.prototype.isImmediateRenderObject=!0,ch.prototype=Object.create(gs.prototype),ch.prototype.constructor=ch,ch.prototype.update=function(){var e=new Gt,t=new Gt,n=new Vt;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,u=0,l=0,h=c.length;l<h;l++)for(var d=c[l],p=0,f=d.vertexNormals.length;p<f;p++){var m=s[d[r[p]]],v=d.vertexNormals[p];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(u=0,p=0,f=g.count;p<f;p++)e.set(g.getX(p),g.getY(p),g.getZ(p)).applyMatrix4(i),t.set(y.getX(p),y.getY(p),y.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}o.needsUpdate=!0}}(),uh.prototype=Object.create(Li.prototype),uh.prototype.constructor=uh,uh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},uh.prototype.update=function(){var e=new Gt;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),hh.prototype=Object.create(gs.prototype),hh.prototype.constructor=hh,hh.prototype.updateMatrixWorld=function(){var e=new Gt,t=new Ht,n=new Ht;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var u=i[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c+1,e.x,e.y,e.z),c+=2)}o.getAttribute("position").needsUpdate=!0,Li.prototype.updateMatrixWorld.call(this,r)}}(),dh.prototype=Object.create(io.prototype),dh.prototype.constructor=dh,dh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},dh.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ph.prototype=Object.create(vs.prototype),ph.prototype.constructor=ph,ph.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},ph.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},fh.prototype=Object.create(Li.prototype),fh.prototype.constructor=fh,fh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},fh.prototype.update=function(){var e=new Gt,t=new Ai,n=new Ai;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),mh.prototype=Object.create(gs.prototype),mh.prototype.constructor=mh,vh.prototype=Object.create(gs.prototype),vh.prototype.constructor=vh,gh.prototype=Object.create(vs.prototype),gh.prototype.constructor=gh,gh.prototype.update=function(){var e,t,n=this.audio,r=this.range,i=this.divisionsInnerAngle,o=this.divisionsOuterAngle,a=Ut.degToRad(n.panner.coneInnerAngle),s=Ut.degToRad(n.panner.coneOuterAngle),c=a/2,u=s/2,l=0,h=0,d=this.geometry,p=d.attributes.position;function f(n,i,o,a){var s=(i-n)/o;for(p.setXYZ(l,0,0,0),h++,e=n;e<i;e+=s)t=l+h,p.setXYZ(t,Math.sin(e)*r,0,Math.cos(e)*r),p.setXYZ(t+1,Math.sin(Math.min(e+s,i))*r,0,Math.cos(Math.min(e+s,i))*r),p.setXYZ(t+2,0,0,0),h+=3;d.addGroup(l,h,a),l+=h,h=0}d.clearGroups(),f(-u,-c,o,0),f(-c,c,i,1),f(c,u,o,0),p.needsUpdate=!0,a===s&&(this.material[0].visible=!1)},gh.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},yh.prototype=Object.create(gs.prototype),yh.prototype.constructor=yh,yh.prototype.update=function(){var e=new Gt,t=new Gt,n=new Vt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,u=0,l=s.length;u<l;u++){var h=s[u],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}i.needsUpdate=!0}}(),bh.prototype=Object.create(Li.prototype),bh.prototype.constructor=bh,bh.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},bh.prototype.update=function(){var e=new Gt,t=new Gt,n=new Gt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=n.length()}}(),Ah.prototype=Object.create(gs.prototype),Ah.prototype.constructor=Ah,Ah.prototype.update=function(){var e,t,n=new Gt,r=new Ya;function i(i,o,a,s){n.set(o,a,s).unproject(r);var c=t[i];if(void 0!==c)for(var u=e.getAttribute("position"),l=0,h=c.length;l<h;l++)u.setXYZ(c[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;var n=1,o=1;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-n,-o,-1),i("n2",n,-o,-1),i("n3",-n,o,-1),i("n4",n,o,-1),i("f1",-n,-o,1),i("f2",n,-o,1),i("f3",-n,o,1),i("f4",n,o,1),i("u1",.7*n,1.1*o,-1),i("u2",.7*-n,1.1*o,-1),i("u3",0,2*o,-1),i("cf1",-n,0,1),i("cf2",n,0,1),i("cf3",0,-o,1),i("cf4",0,o,1),i("cn1",-n,0,-1),i("cn2",n,0,-1),i("cn3",0,-o,-1),i("cn4",0,o,-1),e.getAttribute("position").needsUpdate=!0}}(),wh.prototype=Object.create(gs.prototype),wh.prototype.constructor=wh,wh.prototype.update=function(){var e=new Jt;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),wh.prototype.setFromObject=function(e){return this.object=e,this.update(),this},wh.prototype.copy=function(e){return gs.prototype.copy.call(this,e),this.object=e.object,this},wh.prototype.clone=function(){return(new this.constructor).copy(this)},xh.prototype=Object.create(gs.prototype),xh.prototype.constructor=xh,xh.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Li.prototype.updateMatrixWorld.call(this,e))},Eh.prototype=Object.create(vs.prototype),Eh.prototype.constructor=Eh,Eh.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?v:m,this.lookAt(this.plane.normal),Li.prototype.updateMatrixWorld.call(this,e)},_h.prototype=Object.create(Li.prototype),_h.prototype.constructor=_h,_h.prototype.setDirection=function(){var e,t=new Gt;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),_h.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},_h.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},_h.prototype.copy=function(e){return Li.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},_h.prototype.clone=function(){return(new this.constructor).copy(this)},Mh.prototype=Object.create(gs.prototype),Mh.prototype.constructor=Mh;var Ch=0,Sh=1;function Lh(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Rh(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Ph(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new As(e,t)}function Oh(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ls(e)}function Dh(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new As(e,t)}function Ih(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new bs(e)}function Bh(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new bs(e)}function kh(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new bs(e)}function Fh(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Gt(e,t,n)}function Nh(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Oi(e,t).setDynamic(!0)}function Uh(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Di(e,t)}function jh(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ii(e,t)}function Hh(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Bi(e,t)}function zh(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ki(e,t)}function Gh(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Fi(e,t)}function Vh(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ni(e,t)}function Wh(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ui(e,t)}function qh(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ji(e,t)}function Xh(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Hi(e,t)}function Yh(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Fu.call(this,e),this.type="catmullrom",this.closed=!0}function Qh(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Fu.call(this,e),this.type="catmullrom"}function Kh(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Fu.call(this,e),this.type="catmullrom"}function Zh(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Mh(e)}function $h(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new wh(e,t)}function Jh(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new gs(new Fc(e.geometry),new ms({color:void 0!==t?t:16777215}))}function ed(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new gs(new Ms(e.geometry),new ms({color:void 0!==t?t:16777215}))}function td(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new xu(e)}function nd(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Mu(e)}Lu.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Lu.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(nl.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Pi,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Gt(i.x,i.y,i.z||0))}return t}}),Object.assign(rl.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Yh.prototype=Object.create(Fu.prototype),Qh.prototype=Object.create(Fu.prototype),Kh.prototype=Object.create(Fu.prototype),Object.assign(Kh.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),mh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},hh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Pl.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gl.extractUrlBase(e)}}),Object.assign(Al.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(oh.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Jt.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),ah.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Ut,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ut.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ut.ceilPowerOfTwo(e)}}),Object.assign(Vt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ht.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Gt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),tn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},zt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(to.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(no.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(no,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),no.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),no.getNormal(e,t,n,r)}}),Object.assign(il.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new xc(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ic(this,e)}}),Object.assign(jt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Gt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Yt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Li.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Li.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(hs.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ps.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ds.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Lu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Qa.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ol.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Oi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Wi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Wi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Ec.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Kl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Zi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ai}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===y}}}),Object.defineProperties(Qc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(eo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(rs.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(rs.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ga.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Zt.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Qt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(ts.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Nl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,n=new Dl;return n.load(e,function(e){t.setBuffer(e)}),this},jl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Bl.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var rd={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function id(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function od(){console.error("THREE.CanvasRenderer has been removed")}function ad(){console.error("THREE.JSONLoader has been removed.")}Wt.crossOrigin=void 0,Wt.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Su;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Wt.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Cu;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Wt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Wt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var sd={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function cd(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}t.WebGLMultisampleRenderTarget=Kt,t.WebGLRenderTargetCube=Zt,t.WebGLRenderTarget=Qt,t.WebGLRenderer=rs,t.ShaderLib=xi,t.UniformsLib=wi,t.UniformsUtils=yi,t.ShaderChunk=mi,t.FogExp2=is,t.Fog=os,t.Scene=as,t.Sprite=ls,t.LOD=hs,t.SkinnedMesh=ds,t.Skeleton=ps,t.Bone=fs,t.Mesh=io,t.LineSegments=gs,t.LineLoop=ys,t.Line=vs,t.Points=As,t.Group=Xa,t.VideoTexture=ws,t.DataTexture=$t,t.DataTexture2DArray=yo,t.DataTexture3D=bo,t.CompressedTexture=xs,t.CubeTexture=go,t.CanvasTexture=Es,t.DepthTexture=_s,t.Texture=Xt,t.AnimationLoader=Eu,t.CompressedTextureLoader=_u,t.DataTextureLoader=Mu,t.CubeTextureLoader=Cu,t.TextureLoader=Su,t.ObjectLoader=Al,t.MaterialLoader=vl,t.BufferGeometryLoader=yl,t.DefaultLoadingManager=Au,t.LoadingManager=bu,t.ImageLoader=Tu,t.ImageBitmapLoader=Ml,t.FontLoader=Rl,t.FileLoader=xu,t.Loader=Pl,t.LoaderUtils=gl,t.Cache=yu,t.AudioLoader=Dl,t.SpotLightShadow=cl,t.SpotLight=ul,t.PointLight=ll,t.RectAreaLight=ml,t.HemisphereLight=al,t.DirectionalLightShadow=dl,t.DirectionalLight=pl,t.AmbientLight=fl,t.LightShadow=sl,t.Light=ol,t.StereoCamera=Il,t.PerspectiveCamera=Qa,t.OrthographicCamera=hl,t.CubeCamera=Bl,t.ArrayCamera=Ka,t.Camera=Ya,t.AudioListener=Fl,t.PositionalAudio=Ul,t.AudioContext=Ol,t.AudioAnalyser=jl,t.Audio=Nl,t.VectorKeyframeTrack=fu,t.StringKeyframeTrack=pu,t.QuaternionKeyframeTrack=du,t.NumberKeyframeTrack=lu,t.ColorKeyframeTrack=uu,t.BooleanKeyframeTrack=cu,t.PropertyMixer=Hl,t.PropertyBinding=ql,t.KeyframeTrack=su,t.AnimationUtils=nu,t.AnimationObjectGroup=Xl,t.AnimationMixer=Ql,t.AnimationClip=mu,t.Uniform=Kl,t.InstancedBufferGeometry=Zl,t.BufferGeometry=Wi,t.Geometry=Pi,t.InterleavedBufferAttribute=cs,t.InstancedInterleavedBuffer=$l,t.InterleavedBuffer=ss,t.InstancedBufferAttribute=Jl,t.Face3=Mi,t.Object3D=Li,t.Raycaster=eh,t.Layers=Ci,t.EventDispatcher=n,t.Clock=kl,t.QuaternionLinearInterpolant=hu,t.LinearInterpolant=ou,t.DiscreteInterpolant=au,t.CubicInterpolant=iu,t.Interpolant=ru,t.Triangle=no,t.Math=Ut,t.Spherical=rh,t.Cylindrical=ih,t.Plane=tn,t.Frustum=nn,t.Sphere=en,t.Ray=to,t.Matrix4=Ht,t.Matrix3=Vt,t.Box3=Jt,t.Box2=oh,t.Line3=ah,t.Euler=Ti,t.Vector4=Yt,t.Vector3=Gt,t.Vector2=jt,t.Quaternion=zt,t.Color=Ai,t.ImmediateRenderObject=sh,t.VertexNormalsHelper=ch,t.SpotLightHelper=uh,t.SkeletonHelper=hh,t.PointLightHelper=dh,t.RectAreaLightHelper=ph,t.HemisphereLightHelper=fh,t.GridHelper=mh,t.PolarGridHelper=vh,t.PositionalAudioHelper=gh,t.FaceNormalsHelper=yh,t.DirectionalLightHelper=bh,t.CameraHelper=Ah,t.BoxHelper=wh,t.Box3Helper=xh,t.PlaneHelper=Eh,t.ArrowHelper=_h,t.AxesHelper=Mh,t.Shape=il,t.Path=rl,t.ShapePath=Tl,t.Font=Cl,t.CurvePath=nl,t.Curve=Lu,t.ImageUtils=Wt,t.ShapeUtils=bc,t.WebGLUtils=qa,t.WireframeGeometry=Ms,t.ParametricGeometry=Ts,t.ParametricBufferGeometry=Cs,t.TetrahedronGeometry=Rs,t.TetrahedronBufferGeometry=Ps,t.OctahedronGeometry=Os,t.OctahedronBufferGeometry=Ds,t.IcosahedronGeometry=Is,t.IcosahedronBufferGeometry=Bs,t.DodecahedronGeometry=ks,t.DodecahedronBufferGeometry=Fs,t.PolyhedronGeometry=Ss,t.PolyhedronBufferGeometry=Ls,t.TubeGeometry=Ns,t.TubeBufferGeometry=Us,t.TorusKnotGeometry=js,t.TorusKnotBufferGeometry=Hs,t.TorusGeometry=zs,t.TorusBufferGeometry=Gs,t.TextGeometry=Tc,t.TextBufferGeometry=Cc,t.SphereGeometry=Sc,t.SphereBufferGeometry=Lc,t.RingGeometry=Rc,t.RingBufferGeometry=Pc,t.PlaneGeometry=Yi,t.PlaneBufferGeometry=Qi,t.LatheGeometry=Oc,t.LatheBufferGeometry=Dc,t.ShapeGeometry=Ic,t.ShapeBufferGeometry=Bc,t.ExtrudeGeometry=xc,t.ExtrudeBufferGeometry=Ec,t.EdgesGeometry=Fc,t.ConeGeometry=jc,t.ConeBufferGeometry=Hc,t.CylinderGeometry=Nc,t.CylinderBufferGeometry=Uc,t.CircleGeometry=zc,t.CircleBufferGeometry=Gc,t.BoxGeometry=qi,t.CubeGeometry=qi,t.BoxBufferGeometry=Xi,t.ShadowMaterial=Wc,t.SpriteMaterial=us,t.RawShaderMaterial=qc,t.ShaderMaterial=eo,t.PointsMaterial=bs,t.MeshPhysicalMaterial=Yc,t.MeshStandardMaterial=Xc,t.MeshPhongMaterial=Qc,t.MeshToonMaterial=Kc,t.MeshNormalMaterial=Zc,t.MeshLambertMaterial=$c,t.MeshDepthMaterial=Ha,t.MeshDistanceMaterial=za,t.MeshBasicMaterial=ro,t.MeshMatcapMaterial=Jc,t.LineDashedMaterial=eu,t.LineBasicMaterial=ms,t.Material=Zi,t.Float64BufferAttribute=Hi,t.Float32BufferAttribute=ji,t.Uint32BufferAttribute=Ui,t.Int32BufferAttribute=Ni,t.Uint16BufferAttribute=Fi,t.Int16BufferAttribute=ki,t.Uint8ClampedBufferAttribute=Bi,t.Uint8BufferAttribute=Ii,t.Int8BufferAttribute=Di,t.BufferAttribute=Oi,t.ArcCurve=Pu,t.CatmullRomCurve3=Fu,t.CubicBezierCurve=Yu,t.CubicBezierCurve3=Qu,t.EllipseCurve=Ru,t.LineCurve=Ku,t.LineCurve3=Zu,t.QuadraticBezierCurve=$u,t.QuadraticBezierCurve3=Ju,t.SplineCurve=el,t.REVISION=i,t.MOUSE=o,t.CullFaceNone=a,t.CullFaceBack=s,t.CullFaceFront=c,t.CullFaceFrontBack=u,t.FrontFaceDirectionCW=l,t.FrontFaceDirectionCCW=h,t.BasicShadowMap=d,t.PCFShadowMap=p,t.PCFSoftShadowMap=f,t.FrontSide=m,t.BackSide=v,t.DoubleSide=g,t.FlatShading=y,t.SmoothShading=b,t.NoColors=A,t.FaceColors=w,t.VertexColors=x,t.NoBlending=E,t.NormalBlending=_,t.AdditiveBlending=M,t.SubtractiveBlending=T,t.MultiplyBlending=C,t.CustomBlending=S,t.AddEquation=L,t.SubtractEquation=R,t.ReverseSubtractEquation=P,t.MinEquation=O,t.MaxEquation=D,t.ZeroFactor=I,t.OneFactor=B,t.SrcColorFactor=k,t.OneMinusSrcColorFactor=F,t.SrcAlphaFactor=N,t.OneMinusSrcAlphaFactor=U,t.DstAlphaFactor=j,t.OneMinusDstAlphaFactor=H,t.DstColorFactor=z,t.OneMinusDstColorFactor=G,t.SrcAlphaSaturateFactor=V,t.NeverDepth=W,t.AlwaysDepth=q,t.LessDepth=X,t.LessEqualDepth=Y,t.EqualDepth=Q,t.GreaterEqualDepth=K,t.GreaterDepth=Z,t.NotEqualDepth=$,t.MultiplyOperation=J,t.MixOperation=ee,t.AddOperation=te,t.NoToneMapping=ne,t.LinearToneMapping=re,t.ReinhardToneMapping=ie,t.Uncharted2ToneMapping=oe,t.CineonToneMapping=ae,t.ACESFilmicToneMapping=se,t.UVMapping=ce,t.CubeReflectionMapping=ue,t.CubeRefractionMapping=le,t.EquirectangularReflectionMapping=he,t.EquirectangularRefractionMapping=de,t.SphericalReflectionMapping=pe,t.CubeUVReflectionMapping=fe,t.CubeUVRefractionMapping=me,t.RepeatWrapping=ve,t.ClampToEdgeWrapping=ge,t.MirroredRepeatWrapping=ye,t.NearestFilter=be,t.NearestMipMapNearestFilter=Ae,t.NearestMipMapLinearFilter=we,t.LinearFilter=xe,t.LinearMipMapNearestFilter=Ee,t.LinearMipMapLinearFilter=_e,t.UnsignedByteType=Me,t.ByteType=Te,t.ShortType=Ce,t.UnsignedShortType=Se,t.IntType=Le,t.UnsignedIntType=Re,t.FloatType=Pe,t.HalfFloatType=Oe,t.UnsignedShort4444Type=De,t.UnsignedShort5551Type=Ie,t.UnsignedShort565Type=Be,t.UnsignedInt248Type=ke,t.AlphaFormat=Fe,t.RGBFormat=Ne,t.RGBAFormat=Ue,t.LuminanceFormat=je,t.LuminanceAlphaFormat=He,t.RGBEFormat=ze,t.DepthFormat=Ge,t.DepthStencilFormat=Ve,t.RedFormat=We,t.RGB_S3TC_DXT1_Format=qe,t.RGBA_S3TC_DXT1_Format=Xe,t.RGBA_S3TC_DXT3_Format=Ye,t.RGBA_S3TC_DXT5_Format=Qe,t.RGB_PVRTC_4BPPV1_Format=Ke,t.RGB_PVRTC_2BPPV1_Format=Ze,t.RGBA_PVRTC_4BPPV1_Format=$e,t.RGBA_PVRTC_2BPPV1_Format=Je,t.RGB_ETC1_Format=et,t.RGBA_ASTC_4x4_Format=tt,t.RGBA_ASTC_5x4_Format=nt,t.RGBA_ASTC_5x5_Format=rt,t.RGBA_ASTC_6x5_Format=it,t.RGBA_ASTC_6x6_Format=ot,t.RGBA_ASTC_8x5_Format=at,t.RGBA_ASTC_8x6_Format=st,t.RGBA_ASTC_8x8_Format=ct,t.RGBA_ASTC_10x5_Format=ut,t.RGBA_ASTC_10x6_Format=lt,t.RGBA_ASTC_10x8_Format=ht,t.RGBA_ASTC_10x10_Format=dt,t.RGBA_ASTC_12x10_Format=pt,t.RGBA_ASTC_12x12_Format=ft,t.LoopOnce=mt,t.LoopRepeat=vt,t.LoopPingPong=gt,t.InterpolateDiscrete=yt,t.InterpolateLinear=bt,t.InterpolateSmooth=At,t.ZeroCurvatureEnding=wt,t.ZeroSlopeEnding=xt,t.WrapAroundEnding=Et,t.TrianglesDrawMode=_t,t.TriangleStripDrawMode=Mt,t.TriangleFanDrawMode=Tt,t.LinearEncoding=Ct,t.sRGBEncoding=St,t.GammaEncoding=Lt,t.RGBEEncoding=Rt,t.LogLuvEncoding=Pt,t.RGBM7Encoding=Ot,t.RGBM16Encoding=Dt,t.RGBDEncoding=It,t.BasicDepthPacking=Bt,t.RGBADepthPacking=kt,t.TangentSpaceNormalMap=Ft,t.ObjectSpaceNormalMap=Nt,t.Face4=Th,t.LineStrip=Ch,t.LinePieces=Sh,t.MeshFaceMaterial=Lh,t.MultiMaterial=Rh,t.PointCloud=Ph,t.Particle=Oh,t.ParticleSystem=Dh,t.PointCloudMaterial=Ih,t.ParticleBasicMaterial=Bh,t.ParticleSystemMaterial=kh,t.Vertex=Fh,t.DynamicBufferAttribute=Nh,t.Int8Attribute=Uh,t.Uint8Attribute=jh,t.Uint8ClampedAttribute=Hh,t.Int16Attribute=zh,t.Uint16Attribute=Gh,t.Int32Attribute=Vh,t.Uint32Attribute=Wh,t.Float32Attribute=qh,t.Float64Attribute=Xh,t.ClosedSplineCurve3=Yh,t.SplineCurve3=Qh,t.Spline=Kh,t.AxisHelper=Zh,t.BoundingBoxHelper=$h,t.EdgesHelper=Jh,t.WireframeHelper=ed,t.XHRLoader=td,t.BinaryTextureLoader=nd,t.GeometryUtils=rd,t.Projector=id,t.CanvasRenderer=od,t.JSONLoader=ad,t.SceneUtils=sd,t.LensFlare=cd,Object.defineProperty(t,"__esModule",{value:!0})})},{}],37:[function(e,t,n){"use strict";THREE.DRACOLoader=function(e){this.timeLoaded=0,this.manager=e||THREE.DefaultLoadingManager,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=THREE.TrianglesDrawMode,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"}},THREE.DRACOLoader.prototype={constructor:THREE.DRACOLoader,load:function(e,t,n,r){var i=this,o=new THREE.FileLoader(i.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(e,function(e){i.decodeDracoFile(e,t)},n,r)},setPath:function(e){return this.path=e,this},setVerbosity:function(e){return this.verbosity=e,this},setDrawMode:function(e){return this.drawMode=e,this},setSkipDequantization:function(e,t){var n=!0;return"undefined"!==typeof t&&(n=t),this.getAttributeOptions(e).skipDequantization=n,this},decodeDracoFile:function(e,t,n,r){var i=this;THREE.DRACOLoader.getDecoderModule().then(function(o){i.decodeDracoFileInternal(e,o.decoder,t,n,r)})},decodeDracoFileInternal:function(e,t,n,r,i){var o=new t.DecoderBuffer;o.Init(new Int8Array(e),e.byteLength);var a=new t.Decoder,s=a.GetEncodedGeometryType(o);if(s==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(s!=t.POINT_CLOUD){var c="THREE.DRACOLoader: Unknown geometry type.";throw console.error(c),new Error(c)}this.verbosity>0&&console.log("Loaded a point cloud.")}n(this.convertDracoGeometryTo3JS(t,a,s,o,r,i))},addAttributeToGeometry:function(e,t,n,r,i,o,a,s){if(0===o.ptr){var c="THREE.DRACOLoader: No attribute "+r;throw console.error(c),new Error(c)}var u,l,h=o.num_components(),d=n.num_points(),p=d*h;switch(i){case Float32Array:u=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,u),s[r]=new Float32Array(p),l=THREE.Float32BufferAttribute;break;case Int8Array:u=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,u),s[r]=new Int8Array(p),l=THREE.Int8BufferAttribute;break;case Int16Array:u=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,u),s[r]=new Int16Array(p),l=THREE.Int16BufferAttribute;break;case Int32Array:u=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,u),s[r]=new Int32Array(p),l=THREE.Int32BufferAttribute;break;case Uint8Array:u=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,u),s[r]=new Uint8Array(p),l=THREE.Uint8BufferAttribute;break;case Uint16Array:u=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,u),s[r]=new Uint16Array(p),l=THREE.Uint16BufferAttribute;break;case Uint32Array:u=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,u),s[r]=new Uint32Array(p),l=THREE.Uint32BufferAttribute;break;default:c="THREE.DRACOLoader: Unexpected attribute type.";throw console.error(c),new Error(c)}for(var f=0;f<p;f++)s[r][f]=u.GetValue(f);a.addAttribute(r,new l(s[r],h)),e.destroy(u)},convertDracoGeometryTo3JS:function(e,t,n,r,i,o){var a,s;!0===this.getAttributeOptions("position").skipDequantization&&t.SkipAttributeTransform(e.POSITION);var c=performance.now();if(n===e.TRIANGULAR_MESH?(a=new e.Mesh,s=t.DecodeBufferToMesh(r,a)):(a=new e.PointCloud,s=t.DecodeBufferToPointCloud(r,a)),!s.ok()||0==a.ptr){var u="THREE.DRACOLoader: Decoding failed: ";throw u+=s.error_msg(),console.error(u),e.destroy(t),e.destroy(a),new Error(u)}var l,h=performance.now();e.destroy(r),n==e.TRIANGULAR_MESH?(l=a.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+l.toString())):l=0;var d=a.num_points(),p=a.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+d.toString()),console.log("Number of attributes loaded: "+p.toString()));var f=t.GetAttributeId(a,e.POSITION);if(-1==f){u="THREE.DRACOLoader: No position attribute found.";throw console.error(u),e.destroy(t),e.destroy(a),new Error(u)}var m=t.GetAttribute(a,f),v={},g=new THREE.BufferGeometry;if(i)for(var y in i){var b=o[y],A=i[y],w=t.GetAttributeByUniqueId(a,A);this.addAttributeToGeometry(e,t,a,y,b,w,g,v)}else for(var y in this.nativeAttributeMap){var x=t.GetAttributeId(a,e[this.nativeAttributeMap[y]]);if(-1!==x){this.verbosity>0&&console.log("Loaded "+y+" attribute.");w=t.GetAttribute(a,x);this.addAttributeToGeometry(e,t,a,y,Float32Array,w,g,v)}}if(n==e.TRIANGULAR_MESH)if(this.drawMode===THREE.TriangleStripDrawMode){var E=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(a,E);v.indices=new Uint32Array(E.size());for(var _=0;_<E.size();++_)v.indices[_]=E.GetValue(_);e.destroy(E)}else{var M=3*l;v.indices=new Uint32Array(M);var T=new e.DracoInt32Array;for(_=0;_<l;++_){t.GetFaceFromMesh(a,_,T);var C=3*_;v.indices[C]=T.GetValue(0),v.indices[C+1]=T.GetValue(1),v.indices[C+2]=T.GetValue(2)}e.destroy(T)}g.drawMode=this.drawMode,n==e.TRIANGULAR_MESH&&g.setIndex(new(v.indices.length>65535?THREE.Uint32BufferAttribute:THREE.Uint16BufferAttribute)(v.indices,1));var S=new e.AttributeQuantizationTransform;if(S.InitFromAttribute(m)){g.attributes["position"].isQuantized=!0,g.attributes["position"].maxRange=S.range(),g.attributes["position"].numQuantizationBits=S.quantization_bits(),g.attributes["position"].minValues=new Float32Array(3);for(_=0;_<3;++_)g.attributes["position"].minValues[_]=S.min_value(_)}return e.destroy(S),e.destroy(t),e.destroy(a),this.decode_time=h-c,this.import_time=performance.now()-h,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),g},isVersionSupported:function(e,t){THREE.DRACOLoader.getDecoderModule().then(function(n){t(n.decoder.isVersionSupported(e))})},getAttributeOptions:function(e){return"undefined"===typeof this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},THREE.DRACOLoader.decoderPath="./",THREE.DRACOLoader.decoderConfig={},THREE.DRACOLoader.decoderModulePromise=null,THREE.DRACOLoader.setDecoderPath=function(e){THREE.DRACOLoader.decoderPath=e},THREE.DRACOLoader.setDecoderConfig=function(e){var t=THREE.DRACOLoader.decoderConfig.wasmBinary;THREE.DRACOLoader.decoderConfig=e||{},THREE.DRACOLoader.releaseDecoderModule(),t&&(THREE.DRACOLoader.decoderConfig.wasmBinary=t)},THREE.DRACOLoader.releaseDecoderModule=function(){THREE.DRACOLoader.decoderModulePromise=null},THREE.DRACOLoader.getDecoderModule=function(){var e=this,t=THREE.DRACOLoader.decoderPath,n=THREE.DRACOLoader.decoderConfig,r=THREE.DRACOLoader.decoderModulePromise;return r||("undefined"!==typeof DracoDecoderModule?r=Promise.resolve():"object"!==typeof WebAssembly||"js"===n.type?r=THREE.DRACOLoader._loadScript(t+"draco_decoder.js"):(n.wasmBinaryFile=t+"draco_decoder.wasm",r=THREE.DRACOLoader._loadScript(t+"draco_wasm_wrapper.js").then(function(){return THREE.DRACOLoader._loadArrayBuffer(n.wasmBinaryFile)}).then(function(e){n.wasmBinary=e})),r=r.then(function(){return new Promise(function(t){n.onModuleLoaded=function(n){e.timeLoaded=performance.now(),t({decoder:n})},DracoDecoderModule(n)})}),THREE.DRACOLoader.decoderModulePromise=r,r)},THREE.DRACOLoader._loadScript=function(e){var t=document.getElementById("decoder_script");null!==t&&t.parentNode.removeChild(t);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");return r.id="decoder_script",r.type="text/javascript",r.src=e,new Promise(function(e){r.onload=e,n.appendChild(r)})},THREE.DRACOLoader._loadArrayBuffer=function(e){var t=new THREE.FileLoader;return t.setResponseType("arraybuffer"),new Promise(function(n,r){t.load(e,n,void 0,r)})}},{}],38:[function(t,n,r){THREE.GLTFLoader=function(){function t(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.dracoLoader=null}function n(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}t.prototype={constructor:t,crossOrigin:"anonymous",load:function(t,n,r,i){var o,a=this;o=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(t),a.manager.itemStart(t);var s=function(e){i?i(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)},c=new THREE.FileLoader(a.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.load(t,function(r){try{a.parse(r,o,function(e){n(e),a.manager.itemEnd(t)},s)}catch(e){s(e)}},r,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,n,c){var u,f={};if("string"===typeof e)u=e;else{var m=THREE.LoaderUtils.decodeText(new Uint8Array(e,0,4));if(m===s){try{f[r.KHR_BINARY_GLTF]=new l(e)}catch(w){return void(c&&c(w))}u=f[r.KHR_BINARY_GLTF].content}else u=THREE.LoaderUtils.decodeText(new Uint8Array(e))}var v=JSON.parse(u);if(void 0===v.asset||v.asset.version[0]<2)c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(v.extensionsUsed)for(var g=0;g<v.extensionsUsed.length;++g){var y=v.extensionsUsed[g],b=v.extensionsRequired||[];switch(y){case r.KHR_LIGHTS_PUNCTUAL:f[y]=new o(v);break;case r.KHR_MATERIALS_UNLIT:f[y]=new a(v);break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:f[y]=new p(v);break;case r.KHR_DRACO_MESH_COMPRESSION:f[y]=new h(v,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:f[r.MSFT_TEXTURE_DDS]=new i;break;case r.KHR_TEXTURE_TRANSFORM:f[r.KHR_TEXTURE_TRANSFORM]=new d(v);break;default:b.indexOf(y)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}var A=new B(v,f,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});A.parse(n,c)}}};var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(){if(!THREE.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=new THREE.DDSLoader}function o(e){this.name=r.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[r.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function a(e){this.name=r.KHR_MATERIALS_UNLIT}o.prototype.loadLight=function(e){var t,n=this.lightDefs[e],r=new THREE.Color(16777215);void 0!==n.color&&r.fromArray(n.color);var i=void 0!==n.range?n.range:0;switch(n.type){case"directional":t=new THREE.DirectionalLight(r),t.target.position.set(0,0,-1),t.add(t.target);break;case"point":t=new THREE.PointLight(r),t.distance=i;break;case"spot":t=new THREE.SpotLight(r),t.distance=i,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},a.prototype.getMaterialType=function(e){return THREE.MeshBasicMaterial},a.prototype.extendParams=function(e,t,n){var r=[];e.color=new THREE.Color(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var o=i.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)};var s="glTF",c=12,u={JSON:1313821514,BIN:5130562};function l(e){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,c);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");var n=new DataView(e,c),i=0;while(i<n.byteLength){var o=n.getUint32(i,!0);i+=4;var a=n.getUint32(i,!0);if(i+=4,a===u.JSON){var l=new Uint8Array(e,c+i,o);this.content=THREE.LoaderUtils.decodeText(l)}else if(a===u.BIN){var h=c+i;this.body=e.slice(h,h+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function d(e){this.name=r.KHR_TEXTURE_TRANSFORM}function p(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(e,t,n){var r=t.extensions[this.name],i=THREE.ShaderLib["standard"],o=THREE.UniformsUtils.clone(i.uniforms),a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),h=i.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",l);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new THREE.Color).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=i.vertexShader,e.fragmentShader=h,e.uniforms=o,e.defines={STANDARD:""},e.color=new THREE.Color(1,1,1),e.opacity=1;var d=[];if(Array.isArray(r.diffuseFactor)){var p=r.diffuseFactor;e.color.fromArray(p),e.opacity=p[3]}if(void 0!==r.diffuseTexture&&d.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new THREE.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new THREE.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var f=r.specularGlossinessTexture;d.push(n.assignTexture(e,"glossinessMap",f)),d.push(n.assignTexture(e,"specularMap",f))}return Promise.all(d)},createMaterial:function(e){var t=new THREE.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++)t[n[r]]=e[n[r]];return t},refreshUniforms:function(e,t,n,r,i,o){if(!0===i.isGLTFSpecularGlossinessMaterial){var a,s=i.uniforms,c=i.defines;s.opacity.value=i.opacity,s.diffuse.value.copy(i.color),s.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),s.map.value=i.map,s.specularMap.value=i.specularMap,s.alphaMap.value=i.alphaMap,s.lightMap.value=i.lightMap,s.lightMapIntensity.value=i.lightMapIntensity,s.aoMap.value=i.aoMap,s.aoMapIntensity.value=i.aoMapIntensity,i.map?a=i.map:i.specularMap?a=i.specularMap:i.displacementMap?a=i.displacementMap:i.normalMap?a=i.normalMap:i.bumpMap?a=i.bumpMap:i.glossinessMap?a=i.glossinessMap:i.alphaMap?a=i.alphaMap:i.emissiveMap&&(a=i.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),s.uvTransform.value.copy(a.matrix)),i.envMap&&(s.envMap.value=i.envMap,s.envMapIntensity.value=i.envMapIntensity,s.flipEnvMap.value=i.envMap.isCubeTexture?-1:1,s.reflectivity.value=i.reflectivity,s.refractionRatio.value=i.refractionRatio,s.maxMipLevel.value=e.properties.get(i.envMap).__maxMipLevel),s.specular.value.copy(i.specular),s.glossiness.value=i.glossiness,s.glossinessMap.value=i.glossinessMap,s.emissiveMap.value=i.emissiveMap,s.bumpMap.value=i.bumpMap,s.normalMap.value=i.normalMap,s.displacementMap.value=i.displacementMap,s.displacementScale.value=i.displacementScale,s.displacementBias.value=i.displacementBias,null!==s.glossinessMap.value&&void 0===c.USE_GLOSSINESSMAP&&(c.USE_GLOSSINESSMAP="",c.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==c.USE_GLOSSINESSMAP&&(delete c.USE_GLOSSINESSMAP,delete c.USE_ROUGHNESSMAP)}}}}function f(e,t,n,r){THREE.Interpolant.call(this,e,t,n,r)}h.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},c={};for(var u in o){var l=w[u]||u.toLowerCase();a[l]=o[u]}for(u in e.attributes){l=w[u]||u.toLowerCase();if(void 0!==o[u]){var h=n.accessors[e.attributes[u]],d=g[h.componentType];c[l]=d,s[l]=!0===h.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)},a,c)})})},d.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},f.prototype=Object.create(THREE.Interpolant.prototype),f.prototype.constructor=f,f.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},f.prototype.beforeStart_=f.prototype.copySampleValue_,f.prototype.afterEnd_=f.prototype.copySampleValue_,f.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,u=r-t,l=(n-t)/u,h=l*l,d=h*l,p=e*c,f=p-c,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+l,b=0;b!==a;b++){var A=o[f+b+a],w=o[f+b+s]*u,x=o[p+b+a],E=o[p+b]*u;i[b]=g*A+y*w+m*x+v*E}return i};var m,v={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},g=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),y={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},b={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},A=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),w={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},x={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},E={CUBICSPLINE:void 0,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},M={"image/png":THREE.RGBAFormat,"image/jpeg":THREE.RGBFormat};function T(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function C(){return m=m||new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide}),m}function S(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function L(e,t){void 0!==t.extras&&("object"===typeof t.extras?e.userData=t.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function R(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a;o++){var s=t[o];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);var c=[],u=[];for(o=0,a=t.length;o<a;o++){s=t[o];if(r){var l=void 0!==s.POSITION?n.getDependency("accessor",s.POSITION):e.attributes.position;c.push(l)}if(i){l=void 0!==s.NORMAL?n.getDependency("accessor",s.NORMAL):e.attributes.normal;u.push(l)}}return Promise.all([Promise.all(c),Promise.all(u)]).then(function(n){for(var o=n[0],a=n[1],s=0,c=o.length;s<c;s++)e.attributes.position!==o[s]&&(o[s]=I(o[s]));for(s=0,c=a.length;s<c;s++)e.attributes.normal!==a[s]&&(a[s]=I(a[s]));for(s=0,c=t.length;s<c;s++){var u=t[s],l="morphTarget"+s;if(r&&void 0!==u.POSITION){var h=o[s];h.name=l;for(var d=e.attributes.position,p=0,f=h.count;p<f;p++)h.setXYZ(p,h.getX(p)+d.getX(p),h.getY(p)+d.getY(p),h.getZ(p)+d.getZ(p))}if(i&&void 0!==u.NORMAL){var m=a[s];m.name=l;var v=e.attributes.normal;for(p=0,f=m.count;p<f;p++)m.setXYZ(p,m.getX(p)+v.getX(p),m.getY(p)+v.getY(p),m.getZ(p)+v.getZ(p))}}return r&&(e.morphAttributes.position=o),i&&(e.morphAttributes.normal=a),e})}function P(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function O(e){var t,n=e.extensions&&e.extensions[r.KHR_DRACO_MESH_COMPRESSION];return t=n?"draco:"+n.bufferView+":"+n.indices+":"+D(n.attributes):e.indices+":"+D(e.attributes)+":"+e.mode,t}function D(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function I(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,r=e.array.slice(0,t*n),i=0,o=0;i<t;++i)r[o++]=e.getX(i),n>=2&&(r[o++]=e.getY(i)),n>=3&&(r[o++]=e.getZ(i)),n>=4&&(r[o++]=e.getW(i));return new THREE.BufferAttribute(r,n,e.normalized)}return e.clone()}function B(e,t,r){this.json=e||{},this.extensions=t||{},this.options=r||{},this.cache=new n,this.primitiveCache={},this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function k(e,t,n){var r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then(function(t){e.addAttribute(r,t)})}for(var a in r){var s=w[a]||a.toLowerCase();s in e.attributes||i.push(o(r[a],s))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});i.push(c)}return L(e,t),Promise.all(i).then(function(){return void 0!==t.targets?R(e,t.targets,n):e})}return B.prototype.parse=function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};S(i,o,r),e(o)}).catch(t)},B.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,c=0,u=s.length;c<u;c++)e[s[c]].isBone=!0;for(var l=0,h=e.length;l<h;l++){var d=e[l];void 0!==d.mesh&&(void 0===r[d.mesh]&&(r[d.mesh]=i[d.mesh]=0),r[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},B.prototype.getDependency=function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this.loadMesh(t);break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this.loadBufferView(t);break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this.loadMaterial(t);break;case"texture":i=this.loadTexture(t);break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;case"light":i=this.extensions[r.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i},B.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t},B.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(e,r){n.load(T(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},B.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})},B.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){var i,o,a=e[0],s=A[r.type],c=g[r.componentType],u=c.BYTES_PER_ELEMENT,l=u*s,h=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(d&&d!==l){var f="InterleavedBuffer:"+r.bufferView+":"+r.componentType,m=t.cache.get(f);m||(i=new c(a),m=new THREE.InterleavedBuffer(i,d/u),t.cache.add(f,m)),o=new THREE.InterleavedBufferAttribute(m,s,h/u,p)}else i=null===a?new c(r.count*s):new c(a,h,r.count*s),o=new THREE.BufferAttribute(i,s,p);if(void 0!==r.sparse){var v=A.SCALAR,y=g[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,x=new y(e[1],b,r.sparse.count*v),E=new c(e[2],w,r.sparse.count*s);null!==a&&o.setArray(o.array.slice());for(var _=0,M=x.length;_<M;_++){var T=x[_];if(o.setX(T,E[_*s]),s>=2&&o.setY(T,E[_*s+1]),s>=3&&o.setZ(T,E[_*s+2]),s>=4&&o.setW(T,E[_*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})},B.prototype.loadTexture=function(e){var t,n=this,i=this.json,o=this.options,a=this.textureLoader,s=window.URL||window.webkitURL,c=i.textures[e],u=c.extensions||{};t=u[r.MSFT_TEXTURE_DDS]?i.images[u[r.MSFT_TEXTURE_DDS].source]:i.images[c.source];var l=t.uri,h=!1;return void 0!==t.bufferView&&(l=n.getDependency("bufferView",t.bufferView).then(function(e){h=!0;var n=new Blob([e],{type:t.mimeType});return l=s.createObjectURL(n),l})),Promise.resolve(l).then(function(e){var t=THREE.Loader.Handlers.get(e);return t||(t=u[r.MSFT_TEXTURE_DDS]?n.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise(function(n,r){t.load(T(e,o.path),n,void 0,r)})}).then(function(e){!0===h&&s.revokeObjectURL(l),e.flipY=!1,void 0!==c.name&&(e.name=c.name),t.mimeType in M&&(e.format=M[t.mimeType]);var n=i.samplers||{},r=n[c.sampler]||{};return e.magFilter=y[r.magFilter]||THREE.LinearFilter,e.minFilter=y[r.minFilter]||THREE.LinearMipMapLinearFilter,e.wrapS=b[r.wrapS]||THREE.RepeatWrapping,e.wrapT=b[r.wrapT]||THREE.RepeatWrapping,e})},B.prototype.assignTexture=function(e,t,n){var i=this;return this.getDependency("texture",n.index).then(function(o){switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=THREE.RGBFormat;break}if(i.extensions[r.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;a&&(o=i.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(o,a))}e[t]=o})},B.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,i=this.extensions,o=void 0!==t.attributes.tangent,a=void 0!==t.attributes.color,s=void 0===t.attributes.normal,c=!0===e.isSkinnedMesh,u=Object.keys(t.morphAttributes).length>0,l=u&&void 0!==t.morphAttributes.normal;if(e.isPoints){var h="PointsMaterial:"+n.uuid,d=this.cache.get(h);d||(d=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.lights=!1,this.cache.add(h,d)),n=d}else if(e.isLine){h="LineBasicMaterial:"+n.uuid;var p=this.cache.get(h);p||(p=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(p,n),p.color.copy(n.color),p.lights=!1,this.cache.add(h,p)),n=p}if(o||a||s||c||u){h="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),c&&(h+="skinning:"),o&&(h+="vertex-tangents:"),a&&(h+="vertex-colors:"),s&&(h+="flat-shading:"),u&&(h+="morph-targets:"),l&&(h+="morph-normals:");var f=this.cache.get(h);f||(f=n.isGLTFSpecularGlossinessMaterial?i[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n):n.clone(),c&&(f.skinning=!0),o&&(f.vertexTangents=!0),a&&(f.vertexColors=THREE.VertexColors),s&&(f.flatShading=!0),u&&(f.morphTargets=!0),l&&(f.morphNormals=!0),this.cache.add(h,f)),n=f}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.addAttribute("uv2",new THREE.BufferAttribute(t.attributes.uv.array,2))),n.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=i[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=n},B.prototype.loadMaterial=function(e){var t,n=this,i=this.json,o=this.extensions,a=i.materials[e],s={},c=a.extensions||{},u=[];if(c[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(a),u.push(l.extendParams(s,a,n))}else if(c[r.KHR_MATERIALS_UNLIT]){var h=o[r.KHR_MATERIALS_UNLIT];t=h.getMaterialType(a),u.push(h.extendParams(s,a,n))}else{t=THREE.MeshStandardMaterial;var d=a.pbrMetallicRoughness||{};if(s.color=new THREE.Color(1,1,1),s.opacity=1,Array.isArray(d.baseColorFactor)){var p=d.baseColorFactor;s.color.fromArray(p),s.opacity=p[3]}void 0!==d.baseColorTexture&&u.push(n.assignTexture(s,"map",d.baseColorTexture)),s.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,s.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(u.push(n.assignTexture(s,"metalnessMap",d.metallicRoughnessTexture)),u.push(n.assignTexture(s,"roughnessMap",d.metallicRoughnessTexture)))}!0===a.doubleSided&&(s.side=THREE.DoubleSide);var f=a.alphaMode||_.OPAQUE;return f===_.BLEND?s.transparent=!0:(s.transparent=!1,f===_.MASK&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==THREE.MeshBasicMaterial&&(u.push(n.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new THREE.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==THREE.MeshBasicMaterial&&(u.push(n.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==THREE.MeshBasicMaterial&&(s.emissive=(new THREE.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==THREE.MeshBasicMaterial&&u.push(n.assignTexture(s,"emissiveMap",a.emissiveTexture)),Promise.all(u).then(function(){var e;return e=t===THREE.ShaderMaterial?o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==a.name&&(e.name=a.name),e.map&&(e.map.encoding=THREE.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=THREE.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=THREE.sRGBEncoding),L(e,a),a.extensions&&S(o,e,a),e})},B.prototype.loadGeometries=function(e){var t=this,n=this.extensions,i=this.primitiveCache;function o(e){return n[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return k(n,e,t)})}for(var a=[],s=0,c=e.length;s<c;s++){var u,l=e[s],h=O(l),d=i[h];if(d)a.push(d.promise);else u=l.extensions&&l.extensions[r.KHR_DRACO_MESH_COMPRESSION]?o(l):k(new THREE.BufferGeometry,l,t),i[h]={primitive:l,promise:u},a.push(u)}return Promise.all(a)},B.prototype.loadMesh=function(e){for(var t=this,n=this.json,r=(this.extensions,n.meshes[e]),i=r.primitives,o=[],a=0,s=i.length;a<s;a++){var c=void 0===i[a].material?C():this.getDependency("material",i[a].material);o.push(c)}return Promise.all(o).then(function(n){return t.loadGeometries(i).then(function(o){for(var a=[],s=0,c=o.length;s<c;s++){var u,l=o[s],h=i[s],d=n[s];if(h.mode===v.TRIANGLES||h.mode===v.TRIANGLE_STRIP||h.mode===v.TRIANGLE_FAN||void 0===h.mode)u=!0===r.isSkinnedMesh?new THREE.SkinnedMesh(l,d):new THREE.Mesh(l,d),!0===u.isSkinnedMesh&&u.normalizeSkinWeights(),h.mode===v.TRIANGLE_STRIP?u.drawMode=THREE.TriangleStripDrawMode:h.mode===v.TRIANGLE_FAN&&(u.drawMode=THREE.TriangleFanDrawMode);else if(h.mode===v.LINES)u=new THREE.LineSegments(l,d);else if(h.mode===v.LINE_STRIP)u=new THREE.Line(l,d);else if(h.mode===v.LINE_LOOP)u=new THREE.LineLoop(l,d);else{if(h.mode!==v.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);u=new THREE.Points(l,d)}Object.keys(u.geometry.morphAttributes).length>0&&P(u,r),u.name=r.name||"mesh_"+e,o.length>1&&(u.name+="_"+s),L(u,r),t.assignFinalMaterial(u),a.push(u)}if(1===a.length)return a[0];var p=new THREE.Group;for(s=0,c=a.length;s<c;s++)p.add(a[s]);return p})})},B.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new THREE.PerspectiveCamera(THREE.Math.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new THREE.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==n.name&&(t.name=n.name),L(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},B.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},B.prototype.loadAnimation=function(e){for(var t=this.json,n=t.animations[e],r=[],i=[],o=[],a=[],s=[],c=0,u=n.channels.length;c<u;c++){var l=n.channels[c],h=n.samplers[l.sampler],d=l.target,p=void 0!==d.node?d.node:d.id,m=void 0!==n.parameters?n.parameters[h.input]:h.input,v=void 0!==n.parameters?n.parameters[h.output]:h.output;r.push(this.getDependency("node",p)),i.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",v)),a.push(h),s.push(d)}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then(function(t){for(var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=[],u=0,l=r.length;u<l;u++){var h=r[u],d=i[u],p=o[u],m=a[u],v=s[u];if(void 0!==h){var g;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,x[v.path]){case x.weights:g=THREE.NumberKeyframeTrack;break;case x.rotation:g=THREE.QuaternionKeyframeTrack;break;case x.position:case x.scale:default:g=THREE.VectorKeyframeTrack;break}var y=h.name?h.name:h.uuid,b=void 0!==m.interpolation?E[m.interpolation]:THREE.InterpolateLinear,A=[];x[v.path]===x.weights?h.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&A.push(e.name?e.name:e.uuid)}):A.push(y);for(var w=0,_=A.length;w<_;w++){var M=new g(A[w]+"."+x[v.path],d.array,p.array,b);"CUBICSPLINE"===m.interpolation&&(M.createInterpolant=function(e){return new f(this.times,this.values,this.getValueSize()/3,e)},M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(M)}}}var T=void 0!==n.name?n.name:"animation_"+e;return new THREE.AnimationClip(T,void 0,c)})},B.prototype.loadNode=function(e){var t=this.json,n=this.extensions,i=this,o=t.meshReferences,a=t.meshUses,s=t.nodes[e];return function(){return!0===s.isBone?Promise.resolve(new THREE.Bone):void 0!==s.mesh?i.getDependency("mesh",s.mesh).then(function(e){var t;if(o[s.mesh]>1){var n=a[s.mesh]++;t=e.clone(),t.name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var r=0,i=t.children.length;r<i;r++)t.children[r].name+="_instance_"+n,t.children[r].onBeforeRender=e.children[r].onBeforeRender}else t=e;return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,n=s.weights.length;t<n;t++)e.morphTargetInfluences[t]=s.weights[t]}),t}):void 0!==s.camera?i.getDependency("camera",s.camera):s.extensions&&s.extensions[r.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[r.KHR_LIGHTS_PUNCTUAL].light?i.getDependency("light",s.extensions[r.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new THREE.Object3D)}().then(function(e){if(void 0!==s.name&&(e.name=THREE.PropertyBinding.sanitizeNodeName(s.name)),L(e,s),s.extensions&&S(n,e,s),void 0!==s.matrix){var t=new THREE.Matrix4;t.fromArray(s.matrix),e.applyMatrix(t)}else void 0!==s.translation&&e.position.fromArray(s.translation),void 0!==s.rotation&&e.quaternion.fromArray(s.rotation),void 0!==s.scale&&e.scale.fromArray(s.scale);return e})},B.prototype.loadScene=function(){function e(t,n,r,i){var o=r.nodes[t];return i.getDependency("node",t).then(function(e){return void 0===o.skin?e:i.getDependency("skin",o.skin).then(function(e){t=e;for(var n=[],r=0,o=t.joints.length;r<o;r++)n.push(i.getDependency("node",t.joints[r]));return Promise.all(n)}).then(function(n){for(var r=!0===e.isGroup?e.children:[e],i=0,o=r.length;i<o;i++){for(var a=r[i],s=[],c=[],u=0,l=n.length;u<l;u++){var h=n[u];if(h){s.push(h);var d=new THREE.Matrix4;void 0!==t.inverseBindMatrices&&d.fromArray(t.inverseBindMatrices.array,16*u),c.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}a.bind(new THREE.Skeleton(s,c),a.matrixWorld)}return e});var t}).then(function(t){n.add(t);var a=[];if(o.children)for(var s=o.children,c=0,u=s.length;c<u;c++){var l=s[c];a.push(e(l,t,r,i))}return Promise.all(a)})}return function(t){var n=this.json,r=this.extensions,i=this.json.scenes[t],o=this,a=new THREE.Scene;void 0!==i.name&&(a.name=i.name),L(a,i),i.extensions&&S(r,a,i);for(var s=i.nodes||[],c=[],u=0,l=s.length;u<l;u++)c.push(e(s[u],a,n,o));return Promise.all(c).then(function(){return a})}}(),t}()},{}],39:[function(e,t,n){THREE.MTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(e,t,n,r){var i=this,o=void 0===this.path?THREE.LoaderUtils.extractUrlBase(e):this.path,a=new THREE.FileLoader(this.manager);a.setPath(this.path),a.load(e,function(e){t(i.parse(e,o))},n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setTexturePath:function(e){return console.warn("THREE.MTLLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,t){for(var n=e.split("\n"),r={},i=/\s+/,o={},a=0;a<n.length;a++){var s=n[a];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var c=s.indexOf(" "),u=c>=0?s.substring(0,c):s;u=u.toLowerCase();var l=c>=0?s.substring(c+1):"";if(l=l.trim(),"newmtl"===u)r={name:l},o[l]=r;else if("ka"===u||"kd"===u||"ks"===u||"ke"===u){var h=l.split(i,3);r[u]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else r[u]=l}}var d=new THREE.MTLLoader.MaterialCreator(this.resourcePath||t,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(o),d}},THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],i={};for(var o in t[n]=i,r){var a=!0,s=r[o],c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1);break;default:break}a&&(i[c]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function i(e,t){return"string"!==typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}function o(e,n){if(!r[e]){var o=t.getTextureParams(n,r),a=t.loadTexture(i(t.baseUrl,o.url));a.repeat.copy(o.scale),a.offset.copy(o.offset),a.wrapS=t.wrap,a.wrapT=t.wrap,r[e]=a}}for(var a in n){var s,c=n[a];if(""!==c)switch(a.toLowerCase()){case"kd":r.color=(new THREE.Color).fromArray(c);break;case"ks":r.specular=(new THREE.Color).fromArray(c);break;case"ke":r.emissive=(new THREE.Color).fromArray(c);break;case"map_kd":o("map",c);break;case"map_ks":o("specularMap",c);break;case"map_ke":o("emissiveMap",c);break;case"norm":o("normalMap",c);break;case"map_bump":case"bump":o("bumpMap",c);break;case"map_d":o("alphaMap",c),r.transparent=!0;break;case"ns":r.shininess=parseFloat(c);break;case"d":s=parseFloat(c),s<1&&(r.opacity=s,r.transparent=!0);break;case"tr":s=parseFloat(c),this.options&&this.options.invertTrProperty&&(s=1-s),s>0&&(r.opacity=1-s,r.transparent=!0);break;default:break}}return this.materials[e]=new THREE.MeshPhongMaterial(r),this.materials[e]},getTextureParams:function(e,t){var n,r={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},i=e.split(/\s+/);return n=i.indexOf("-bm"),n>=0&&(t.bumpScale=parseFloat(i[n+1]),i.splice(n,2)),n=i.indexOf("-s"),n>=0&&(r.scale.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),n=i.indexOf("-o"),n>=0&&(r.offset.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),r.url=i.join(" ").trim(),r},loadTexture:function(e,t,n,r,i){var o,a=THREE.Loader.Handlers.get(e),s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===a&&(a=new THREE.TextureLoader(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),o=a.load(e,n,r,i),void 0!==t&&(o.mapping=t),o}}},{}],40:[function(e,t,n){THREE.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /;function r(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"===typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addColor:function(e,t,n){var r=this.colors,i=this.object.geometry.colors;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addUVLine:function(e){var t=this.uvs,n=this.object.geometry.uvs;n.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,o,a,s,c){var u=this.vertices.length,l=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),d=this.parseVertexIndex(n,u);if(this.addVertex(l,h,d),void 0!==r&&""!==r){var p=this.uvs.length;l=this.parseUVIndex(r,p),h=this.parseUVIndex(i,p),d=this.parseUVIndex(o,p),this.addUV(l,h,d)}if(void 0!==a&&""!==a){var f=this.normals.length;l=this.parseNormalIndex(a,f),h=a===s?l:this.parseNormalIndex(s,f),d=a===c?l:this.parseNormalIndex(c,f),this.addNormal(l,h,d)}this.colors.length>0&&this.addColor(l,h,d)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));var a=0;for(o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],r))}};return e.startObject("",!1),e}function i(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}return i.prototype={constructor:i,load:function(e,t,n,r){var i=this,o=new THREE.FileLoader(i.manager);o.setPath(this.path),o.load(e,function(e){t(i.parse(e))},n,r)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(i){console.time("OBJLoader");var o=new r;-1!==i.indexOf("\r\n")&&(i=i.replace(/\r\n/g,"\n")),-1!==i.indexOf("\\\n")&&(i=i.replace(/\\\n/g,""));for(var a=i.split("\n"),s="",c="",u=0,l=[],h="function"===typeof"".trimLeft,d=0,p=a.length;d<p;d++)if(s=a[d],s=h?s.trimLeft():s.trim(),u=s.length,0!==u&&(c=s.charAt(0),"#"!==c))if("v"===c){var f=s.split(/\s+/);switch(f[0]){case"v":o.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),8===f.length&&o.colors.push(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6]));break;case"vn":o.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":o.uvs.push(parseFloat(f[1]),parseFloat(f[2]));break}}else if("f"===c){for(var m=s.substr(1).trim(),v=m.split(/\s+/),g=[],y=0,b=v.length;y<b;y++){var A=v[y];if(A.length>0){var w=A.split("/");g.push(w)}}var x=g[0];for(y=1,b=g.length-1;y<b;y++){var E=g[y],_=g[y+1];o.addFace(x[0],E[0],_[0],x[1],E[1],_[1],x[2],E[2],_[2])}}else if("l"===c){var M=s.substring(1).trim().split(" "),T=[],C=[];if(-1===s.indexOf("/"))T=M;else for(var S=0,L=M.length;S<L;S++){var R=M[S].split("/");""!==R[0]&&T.push(R[0]),""!==R[1]&&C.push(R[1])}o.addLineGeometry(T,C)}else if("p"===c){m=s.substr(1).trim();var P=m.split(" ");o.addPointGeometry(P)}else if(null!==(l=e.exec(s))){var O=(" "+l[0].substr(1).trim()).substr(1);o.startObject(O)}else if(n.test(s))o.object.startMaterial(s.substring(7).trim(),o.materialLibraries);else if(t.test(s))o.materialLibraries.push(s.substring(7).trim());else{if("s"!==c){if("\0"===s)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+s+'"')}if(l=s.split(" "),l.length>1){var D=l[1].trim().toLowerCase();o.object.smooth="0"!==D&&"off"!==D}else o.object.smooth=!0;var I=o.object.currentMaterial();I&&(I.smooth=o.object.smooth)}o.finalize();var B=new THREE.Group;B.materialLibraries=[].concat(o.materialLibraries);for(d=0,p=o.objects.length;d<p;d++){var k=o.objects[d],F=k.geometry,N=k.materials,U="Line"===F.type,j="Points"===F.type,H=!1;if(0!==F.vertices.length){var z=new THREE.BufferGeometry;z.addAttribute("position",new THREE.Float32BufferAttribute(F.vertices,3)),F.normals.length>0?z.addAttribute("normal",new THREE.Float32BufferAttribute(F.normals,3)):z.computeVertexNormals(),F.colors.length>0&&(H=!0,z.addAttribute("color",new THREE.Float32BufferAttribute(F.colors,3))),F.uvs.length>0&&z.addAttribute("uv",new THREE.Float32BufferAttribute(F.uvs,2));for(var G,V=[],W=0,q=N.length;W<q;W++){var X=N[W];I=void 0;if(null!==this.materials)if(I=this.materials.create(X.name),!U||!I||I instanceof THREE.LineBasicMaterial){if(j&&I&&!(I instanceof THREE.PointsMaterial)){var Y=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});THREE.Material.prototype.copy.call(Y,I),Y.color.copy(I.color),Y.map=I.map,Y.lights=!1,I=Y}}else{var Q=new THREE.LineBasicMaterial;THREE.Material.prototype.copy.call(Q,I),Q.color.copy(I.color),Q.lights=!1,I=Q}I||(I=U?new THREE.LineBasicMaterial:j?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial,I.name=X.name),I.flatShading=!X.smooth,I.vertexColors=H?THREE.VertexColors:THREE.NoColors,V.push(I)}if(V.length>1){for(W=0,q=N.length;W<q;W++){X=N[W];z.addGroup(X.groupStart,X.groupCount,W)}G=U?new THREE.LineSegments(z,V):j?new THREE.Points(z,V):new THREE.Mesh(z,V)}else G=U?new THREE.LineSegments(z,V[0]):j?new THREE.Points(z,V[0]):new THREE.Mesh(z,V[0]);G.name=k.name,B.add(G)}}return console.timeEnd("OBJLoader"),B}},i}()},{}],41:[function(e,t,n){var r=e("layout-bmfont-text"),i=e("inherits"),o=e("quad-indices"),a=e("three-buffer-vertex-data"),s=e("object-assign"),c=e("./lib/vertices"),u=e("./lib/utils"),l=THREE.BufferGeometry;function h(e){l.call(this),"string"===typeof e&&(e={text:e}),this._opt=s({},e),e&&this.update(e)}t.exports=function(e){return new h(e)},i(h,l),h.prototype.update=function(e){if("string"===typeof e&&(e={text:e}),e=s({},this._opt,e),!e.font)throw new TypeError("must specify a { font } in options");this.layout=r(e);var t=!1!==e.flipY,n=e.font,i=n.common.scaleW,u=n.common.scaleH,l=this.layout.glyphs.filter(function(e){var t=e.data;return t.width*t.height>0});this.visibleGlyphs=l;var h=c.positions(l),d=c.uvs(l,i,u,t),p=o({clockwise:!0,type:"uint16",count:l.length});if(a.index(this,p,1,"uint16"),a.attr(this,"position",h,2),a.attr(this,"uv",d,2),!e.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(e.multipage){var f=c.pages(l);a.attr(this,"page",f,1)}},h.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);u.computeSphere(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},h.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.boundingBox,t=this.attributes.position.array,n=this.attributes.position.itemSize;!t||!n||t.length<2?e.makeEmpty():u.computeBox(t,e)}},{"./lib/utils":42,"./lib/vertices":43,inherits:17,"layout-bmfont-text":22,"object-assign":25,"quad-indices":34,"three-buffer-vertex-data":44}],42:[function(e,t,n){var r=2,i={min:[0,0],max:[0,0]};function o(e){var t=e.length/r;i.min[0]=e[0],i.min[1]=e[1],i.max[0]=e[0],i.max[1]=e[1];for(var n=0;n<t;n++){var o=e[n*r+0],a=e[n*r+1];i.min[0]=Math.min(o,i.min[0]),i.min[1]=Math.min(a,i.min[1]),i.max[0]=Math.max(o,i.max[0]),i.max[1]=Math.max(a,i.max[1])}}t.exports.computeBox=function(e,t){o(e),t.min.set(i.min[0],i.min[1],0),t.max.set(i.max[0],i.max[1],0)},t.exports.computeSphere=function(e,t){o(e);var n=i.min[0],r=i.min[1],a=i.max[0],s=i.max[1],c=a-n,u=s-r,l=Math.sqrt(c*c+u*u);t.center.set(n+c/2,r+u/2,0),t.radius=l/2}},{}],43:[function(e,t,n){t.exports.pages=function(e){var t=new Float32Array(4*e.length*1),n=0;return e.forEach(function(e){var r=e.data.page||0;t[n++]=r,t[n++]=r,t[n++]=r,t[n++]=r}),t},t.exports.uvs=function(e,t,n,r){var i=new Float32Array(4*e.length*2),o=0;return e.forEach(function(e){var a=e.data,s=a.x+a.width,c=a.y+a.height,u=a.x/t,l=a.y/n,h=s/t,d=c/n;r&&(l=(n-a.y)/n,d=(n-c)/n),i[o++]=u,i[o++]=l,i[o++]=u,i[o++]=d,i[o++]=h,i[o++]=d,i[o++]=h,i[o++]=l}),i},t.exports.positions=function(e){var t=new Float32Array(4*e.length*2),n=0;return e.forEach(function(e){var r=e.data,i=e.position[0]+r.xoffset,o=e.position[1]+r.yoffset,a=r.width,s=r.height;t[n++]=i,t[n++]=o,t[n++]=i,t[n++]=o+s,t[n++]=i+a,t[n++]=o+s,t[n++]=i+a,t[n++]=o}),t}},{}],44:[function(e,t,n){var r=e("flatten-vertex-data"),i=!1;function o(e,t,n,r){"number"!==typeof n&&(n=1),"string"!==typeof r&&(r="uint16");var i=!e.index&&"function"!==typeof e.setIndex,o=i?e.getAttribute("index"):e.index,a=s(o,t,n,r);a&&(i?e.addAttribute("index",a):e.index=a)}function a(e,t,n,r,i){if("number"!==typeof r&&(r=3),"string"!==typeof i&&(i="float32"),Array.isArray(n)&&Array.isArray(n[0])&&n[0].length!==r)throw new Error("Nested vertex array has unexpected size; expected "+r+" but found "+n[0].length);var o=e.getAttribute(t),a=s(o,n,r,i);a&&e.addAttribute(t,a)}function s(e,t,n,o){if(t=t||[],!e||c(e,t,n)){t=r(t,o);var a=e&&"function"!==typeof e.setArray;return e&&!a||(a&&!i&&(i=!0,console.warn(["A WebGL buffer is being updated with a new size or itemSize, ","however this version of ThreeJS only supports fixed-size buffers.","\nThe old buffer may still be kept in memory.\n","To avoid memory leaks, it is recommended that you dispose ","your geometries and create new ones, or update to ThreeJS r82 or newer.\n","See here for discussion:\n","https://github.com/mrdoob/three.js/pull/9631"].join(""))),e=new THREE.BufferAttribute(t,n)),e.itemSize=n,e.needsUpdate=!0,"function"===typeof e.setArray&&e.setArray(t),e}return r(t,e.array),e.needsUpdate=!0,null}function c(e,t,n){if(e.itemSize!==n)return!0;if(!e.array)return!0;var r=e.array.length;return Array.isArray(t)&&Array.isArray(t[0])?r!==t.length*n:r!==t.length}t.exports.attr=a,t.exports.index=o},{"flatten-vertex-data":13}],45:[function(e,t,n){function r(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=r,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],46:[function(e,r,i){(function(e){
/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function(e,n){"object"===typeof i&&"undefined"!==typeof r?r.exports=n():"function"===typeof t&&t.amd?t(n):e.WebVRPolyfill=n()})(this,function(){"use strict";var t="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}var i=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},o=function(e,t){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]},a=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s=r(function(e,n){
/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function(t,n){e.exports=n()})(0,function(){var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(c){i=!0,o=c}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=.001,o=1,a=function(e,t){return"data:"+e+","+encodeURIComponent(t)},s=function(e,t,n){return e+(t-e)*n},c=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),u=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),l=(function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}(),function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}()),h=function(){var e=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),t=e?parseInt(e[1],10):null;return function(){return t}}(),d=function(){var e=!1;if(65===h()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var n=t[1].split("."),i=r(n,4),o=(i[0],i[1],i[2]),a=i[3];e=3325===parseInt(o,10)&&parseInt(a,10)<148}}return function(){return e}}(),p=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),f=function(){var e=90==window.orientation||-90==window.orientation;return p()?!e:e},m=function(e){return!isNaN(e)&&(!(e<=i)&&!(e>o))},v=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},g=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},y=function(e){if(u())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},b=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},A=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},w=function(e,t,n,r){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,n),e.compileShader(o);var a=e.createProgram();for(var s in e.attachShader(a,i),e.attachShader(a,o),r)e.bindAttribLocation(a,r[s],s);return e.linkProgram(a),e.deleteShader(i),e.deleteShader(o),a},x=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",o=0;o<r;o++){var a=e.getActiveUniform(t,o);i=a.name.replace("[0]",""),n[i]=e.getUniformLocation(t,i)}return n},E=function(e,t,n,r,i,o,a){var s=1/(t-n),c=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=(a+o)*u,e[15]=1,e},_=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},M=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},T=function(e){if(c()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",setTimeout(function(){e.style.width=t,e.style.height=n},100)}window.canvas=e},C=function(){var e=Math.PI/180,t=.25*Math.PI;function n(n,r,i,o){var a=Math.tan(r?r.upDegrees*e:t),s=Math.tan(r?r.downDegrees*e:t),c=Math.tan(r?r.leftDegrees*e:t),u=Math.tan(r?r.rightDegrees*e:t),l=2/(c+u),h=2/(a+s);return n[0]=l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=-(c-u)*l*.5,n[9]=(a-s)*h*.5,n[10]=o/(i-o),n[11]=-1,n[12]=0,n[13]=0,n[14]=o*i/(i-o),n[15]=0,n}function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,c=i+i,u=o+o,l=r*s,h=r*c,d=r*u,p=i*c,f=i*u,m=o*u,v=a*s,g=a*c,y=a*u;return e[0]=1-(p+m),e[1]=h+y,e[2]=d-g,e[3]=0,e[4]=h-y,e[5]=1-(l+m),e[6]=f+v,e[7]=0,e[8]=d+g,e[9]=f-v,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function i(e,t,n){var r,i,o,a,s,c,u,l,h,d,p,f,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=c,e[6]=u,e[7]=l,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=r*m+s*v+h*g+t[12],e[13]=i*m+c*v+d*g+t[13],e[14]=o*m+u*v+p*g+t[14],e[15]=a*m+l*v+f*g+t[15]),e}function o(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],u=t[7],l=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],v=t[14],g=t[15],y=n*s-r*a,b=n*c-i*a,A=n*u-o*a,w=r*c-i*s,x=r*u-o*s,E=i*u-o*c,_=l*m-h*f,M=l*v-d*f,T=l*g-p*f,C=h*v-d*m,S=h*g-p*m,L=d*g-p*v,R=y*L-b*S+A*C+w*T-x*M+E*_;return R?(R=1/R,e[0]=(s*L-c*S+u*C)*R,e[1]=(i*S-r*L-o*C)*R,e[2]=(m*E-v*x+g*w)*R,e[3]=(d*x-h*E-p*w)*R,e[4]=(c*T-a*L-u*M)*R,e[5]=(n*L-i*T+o*M)*R,e[6]=(v*A-f*E-g*b)*R,e[7]=(l*E-d*A+p*b)*R,e[8]=(a*S-s*T+u*_)*R,e[9]=(r*T-n*S-o*_)*R,e[10]=(f*x-m*A+g*y)*R,e[11]=(h*A-l*x-p*y)*R,e[12]=(s*M-a*C-c*_)*R,e[13]=(n*C-r*M+i*_)*R,e[14]=(m*b-f*w-v*y)*R,e[15]=(l*w-h*b+d*y)*R,e):null}var a=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function c(e,t,c,u,l,h){n(e,u||null,h.depthNear,h.depthFar);var d=c.orientation||a,p=c.position||s;r(t,d,p),l&&i(t,t,l),o(t,t)}return function(e,t,n){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,c(e.leftProjectionMatrix,e.leftViewMatrix,t,n._getFieldOfView("left"),n._getEyeOffset("left"),n),c(e.rightProjectionMatrix,e.rightViewMatrix,t,n._getFieldOfView("right"),n._getEyeOffset("right"),n),!0)}}(),S=function(){var e=window.self!==window.top,t=L(document.referrer),n=L(window.location.href);return e&&t!==n},L=function(e){var t,n=e.indexOf("://");t=-1!==n?n+3:0;var r=e.indexOf("/",t);return-1===r&&(r=e.length),e.substring(0,r)},R=function(e){if(e.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var t=2*Math.acos(e.w);return t},P=function(){var e={};return function(t,n){void 0===e[t]&&(console.warn("webvr-polyfill: "+n),e[t]=!0)}}(),O=function(e,t){var n=t?"Please use "+t+" instead.":"";P(e,e+" has been deprecated. This may not work on native WebVR displays. "+n)};function D(e,t,n){if(t){for(var r=[],i=null,o=0;o<t.length;++o){var a=t[o];switch(a){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),r.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(a));break}}n(e);for(o=0;o<t.length;++o){a=t[o];var c=r[o];switch(a){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,c);break;case e.COLOR_CLEAR_VALUE:e.clearColor(c[0],c[1],c[2],c[3]);break;case e.COLOR_WRITEMASK:e.colorMask(c[0],c[1],c[2],c[3]);break;case e.CURRENT_PROGRAM:e.useProgram(c);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,c);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,c);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,c);break;case e.TEXTURE_BINDING_2D:s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,c);break;case e.TEXTURE_BINDING_CUBE_MAP:s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,c);break;case e.VIEWPORT:e.viewport(c[0],c[1],c[2],c[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:c?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16));break}i&&e.activeTexture(i)}}else n(e)}var I=D,B=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),k=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function F(e,t,n,r){this.gl=e,this.cardboardUI=t,this.bufferScale=n,this.dirtySubmitFrameBindings=r,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,c()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=w(e,B,k,this.attribs),this.uniforms=x(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}F.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},F.prototype.onResize=function(){var e=this.gl,t=this,n=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];I(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},F.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,n=this.gl;c()||(t.width=v()*this.bufferScale,t.height=g()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(n){e.bufferWidth=n,e.realCanvasWidth.set.call(t,n),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(n){e.bufferHeight=n,e.realCanvasHeight.set.call(t,n),e.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(n,t,e.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!0;break;case n.DEPTH_TEST:e.depthTest=!0;break;case n.BLEND:e.blend=!0;break;case n.SCISSOR_TEST:e.scissorTest=!0;break;case n.STENCIL_TEST:e.stencilTest=!0;break}e.realEnable.call(n,t)},n.disable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!1;break;case n.DEPTH_TEST:e.depthTest=!1;break;case n.BLEND:e.blend=!1;break;case n.SCISSOR_TEST:e.scissorTest=!1;break;case n.STENCIL_TEST:e.stencilTest=!1;break}e.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,i,o){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=i,e.colorMask[3]=o,e.realColorMask.call(n,t,r,i,o)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,i,o){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=i,e.clearColor[3]=o,e.realClearColor.call(n,t,r,i,o)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,i,o){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=i,e.viewport[3]=o,e.realViewport.call(n,t,r,i,o)},this.isPatched=!0,T(t)}},F.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;c()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){T(t)},1)}},F.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},F.prototype.submitFrame=function(){var e=this.gl,t=this,n=[];if(this.dirtySubmitFrameBindings||n.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),I(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||c())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),c()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},F.prototype.updateDeviceInfo=function(e){var t=this.gl,n=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];I(t,r,function(t){var r=n.computeMeshVertices_(n.meshWidth,n.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!n.indexCount){var i=n.computeMeshIndices_(n.meshWidth,n.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),n.indexCount=i.length}})},F.prototype.computeMeshVertices_=function(e,t,n){for(var r=new Float32Array(2*e*t*5),i=n.getLeftEyeVisibleTanAngles(),o=n.getLeftEyeNoLensTanAngles(),a=n.getLeftEyeVisibleScreenRect(o),c=0,u=0;u<2;u++){for(var l=0;l<t;l++)for(var h=0;h<e;h++,c++){var d=h/(e-1),p=l/(t-1),f=d,m=p,v=s(i[0],i[2],d),g=s(i[3],i[1],p),y=Math.sqrt(v*v+g*g),b=n.distortion.distortInverse(y),A=v*b/y,w=g*b/y;d=(A-o[0])/(o[2]-o[0]),p=(w-o[3])/(o[1]-o[3]),d=2*(a.x+d*a.width-.5),p=2*(a.y+p*a.height-.5),r[5*c+0]=d,r[5*c+1]=p,r[5*c+2]=f,r[5*c+3]=m,r[5*c+4]=u}var x=i[2]-i[0];i[0]=-(x+i[0]),i[2]=x-i[2],x=o[2]-o[0],o[0]=-(x+o[0]),o[2]=x-o[2],a.x=1-(a.x+a.width)}return r},F.prototype.computeMeshIndices_=function(e,t){for(var n=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,i=t/2,o=0,a=0,s=0;s<2;s++)for(var c=0;c<t;c++)for(var u=0;u<e;u++,o++)0!=u&&0!=c&&(u<=r==c<=i?(n[a++]=o,n[a++]=o-e-1,n[a++]=o-e,n[a++]=o-e-1,n[a++]=o,n[a++]=o-1):(n[a++]=o-1,n[a++]=o-e,n[a++]=o,n[a++]=o-e,n[a++]=o-1,n[a++]=o-e-1));return n},F.prototype.getOwnPropertyDescriptor_=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(t)},n.set=function(e){this.setAttribute(t,e)}),n};var N=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),U=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),j=Math.PI/180,H=60,z=12,G=20,V=1,W=.75,q=.3125,X=4,Y=28,Q=1.5;function K(e){this.gl=e,this.attribs={position:0},this.program=w(e,N,U,this.attribs),this.uniforms=x(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function Z(e){this.coefficients=e}K.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},K.prototype.listen=function(e,t){var n=this.gl.canvas;this.listener=function(r){var i=n.clientWidth/2,o=Y*Q;r.clientX>i-o&&r.clientX<i+o&&r.clientY>n.clientHeight-o?e(r):r.clientX<o&&r.clientY<o&&t(r)},n.addEventListener("click",this.listener,!1)},K.prototype.onResize=function(){var e=this.gl,t=this,n=[e.ARRAY_BUFFER_BINDING];I(e,n,function(e){var n=[],r=e.drawingBufferWidth/2,i=Math.max(screen.width,screen.height)*window.devicePixelRatio,o=e.drawingBufferWidth/i,a=o*window.devicePixelRatio,s=X*a/2,c=Y*Q*a,u=Y*a/2,l=(Y*Q-Y)*a;function h(e,t){var i=(90-e)*j,o=Math.cos(i),a=Math.sin(i);n.push(q*o*u+r,q*a*u+u),n.push(t*o*u+r,t*a*u+u)}n.push(r-s,c),n.push(r-s,e.drawingBufferHeight),n.push(r+s,c),n.push(r+s,e.drawingBufferHeight),t.gearOffset=n.length/2;for(var d=0;d<=6;d++){var p=d*H;h(p,V),h(p+z,V),h(p+G,W),h(p+(H-G),W),h(p+(H-z),V)}function f(t,r){n.push(l+t,e.drawingBufferHeight-l-r)}t.gearVertexCount=n.length/2-t.gearOffset,t.arrowOffset=n.length/2;var m=s/Math.sin(45*j);f(0,u),f(u,0),f(u+m,m),f(m,u+m),f(m,u-m),f(0,u),f(u,2*u),f(u+m,2*u-m),f(m,u-m),f(0,u),f(m,u-s),f(Y*a,u-s),f(m,u+s),f(Y*a,u+s),t.arrowVertexCount=n.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW)})},K.prototype.render=function(){var e=this.gl,t=this,n=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];I(e,n,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},K.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),E(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},Z.prototype.distortInverse=function(e){var t=0,n=1,r=e-this.distort(t);while(Math.abs(n-t)>1e-4){var i=e-this.distort(n),o=n-i*((n-t)/(i-r));t=n,n=o,r=i}return n},Z.prototype.distort=function(e){for(var t=e*e,n=0,r=0;r<this.coefficients.length;r++)n=t*(n+this.coefficients[r]);return(n+1)*e};var $=Math.PI/180,J=180/Math.PI,ee=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0};ee.prototype={constructor:ee,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,u=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+u*-a-l*-o,this.y=u*s+h*-o+l*-i-c*-a,this.z=l*s+h*-a+c*-o-u*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}};var te=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1};function ne(e){this.width=e.width||v(),this.height=e.height||g(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}te.prototype={constructor:te,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(n/2),a=Math.sin(e/2),s=Math.sin(t/2),c=Math.sin(n/2);return this.x=a*i*o+r*s*c,this.y=r*s*o-a*i*c,this.z=r*i*c+a*s*o,this.w=r*i*o-a*s*c,this},setFromEulerYXZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(n/2),a=Math.sin(e/2),s=Math.sin(t/2),c=Math.sin(n/2);return this.x=a*i*o+r*s*c,this.y=r*s*o-a*i*c,this.z=r*i*c-a*s*o,this.w=r*i*o+a*s*c,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,i=e.z,o=e.w,a=t.x,s=t.y,c=t.z,u=t.w;return this.x=n*u+o*a+r*c-i*s,this.y=r*u+o*s+i*a-n*c,this.z=i*u+o*c+n*s-r*a,this.w=o*u-n*a-r*s-i*c,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,r=this.y,i=this.z,o=this.w,a=o*e.w+n*e.x+r*e.y+i*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=o,this.x=n,this.y=r,this.z=i,this;var s=Math.acos(a),c=Math.sqrt(1-a*a);if(Math.abs(c)<.001)return this.w=.5*(o+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(i+this.z),this;var u=Math.sin((1-t)*s)/c,l=Math.sin(t*s)/c;return this.w=o*u+this.w*l,this.x=n*u+this.x*l,this.y=r*u+this.y*l,this.z=i*u+this.z*l,this},setFromUnitVectors:function(){var e,t,n=1e-6;return function(r,i){return void 0===e&&(e=new ee),t=r.dot(i)+1,t<n?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()};var re=new ne({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),ie=new ne({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),oe={CardboardV1:new se({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new se({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function ae(e,t){this.viewer=oe.CardboardV2,this.updateDeviceParams(e),this.distortion=new Z(this.viewer.distortionCoefficients);for(var n=0;n<t.length;n++){var r=t[n];oe[r.id]=new se(r)}}function se(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}ae.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},ae.prototype.getDevice=function(){return this.device},ae.prototype.setViewer=function(e){this.viewer=e,this.distortion=new Z(this.viewer.distortionCoefficients)},ae.prototype.determineDevice_=function(e){if(!e)return c()?(console.warn("Using fallback iOS device measurements."),ie):(console.warn("Using fallback Android device measurements."),re);var t=.0254,n=t/e.xdpi,r=t/e.ydpi,i=v(),o=g();return new ne({widthMeters:n*i,heightMeters:r*o,bevelMeters:.001*e.bevelMm})},ae.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,o=e.interLensDistance/2,a=e.baselineLensDistance-t.bevelMeters,s=t.heightMeters-a,c=J*Math.atan(n.distort(i/r)),u=J*Math.atan(n.distort(o/r)),l=J*Math.atan(n.distort(a/r)),h=J*Math.atan(n.distort(s/r));return{leftDegrees:Math.min(c,e.fov),rightDegrees:Math.min(u,e.fov),downDegrees:Math.min(l,e.fov),upDegrees:Math.min(h,e.fov)}},ae.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=Math.tan(-$*e.fov),i=Math.tan($*e.fov),o=Math.tan($*e.fov),a=Math.tan(-$*e.fov),s=t.widthMeters/4,c=t.heightMeters/2,u=e.baselineLensDistance-t.bevelMeters-c,l=e.interLensDistance/2-s,h=-u,d=e.screenLensDistance,p=n.distort((l-s)/d),f=n.distort((h+c)/d),m=n.distort((l+s)/d),v=n.distort((h-c)/d),g=new Float32Array(4);return g[0]=Math.max(r,p),g[1]=Math.min(i,f),g[2]=Math.min(o,m),g[3]=Math.max(a,v),g},ae.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=new Float32Array(4),i=n.distortInverse(Math.tan(-$*e.fov)),o=n.distortInverse(Math.tan($*e.fov)),a=n.distortInverse(Math.tan($*e.fov)),s=n.distortInverse(Math.tan(-$*e.fov)),c=t.widthMeters/4,u=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-u,h=e.interLensDistance/2-c,d=-l,p=e.screenLensDistance,f=(h-c)/p,m=(d+u)/p,v=(h+c)/p,g=(d-u)/p;return r[0]=Math.max(i,f),r[1]=Math.min(o,m),r[2]=Math.min(a,v),r[3]=Math.max(s,g),r},ae.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,n=this.device,r=t.screenLensDistance,i=(n.widthMeters-t.interLensDistance)/2,o=t.baselineLensDistance-n.bevelMeters,a=(e[0]*r+i)/n.widthMeters,s=(e[1]*r+o)/n.heightMeters,c=(e[2]*r+i)/n.widthMeters,u=(e[3]*r+o)/n.heightMeters;return{x:a,y:u,width:c-a,height:s-u}},ae.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},ae.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},ae.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:J*Math.atan(e.outerDist),rightDegrees:J*Math.atan(e.innerDist),downDegrees:J*Math.atan(e.bottomDist),upDegrees:J*Math.atan(e.topDist)}},ae.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,n=this.device,r=t.screenLensDistance,i=n.widthMeters/r,o=n.heightMeters/r,a=n.width/i,s=n.height/o,c=Math.round((e.eyePosX-e.outerDist)*a),u=Math.round((e.eyePosY-e.bottomDist)*s);return{x:c,y:u,width:Math.round((e.eyePosX+e.innerDist)*a)-c,height:Math.round((e.eyePosY+e.topDist)*s)-u}},ae.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=e.interLensDistance/2/r,o=t.widthMeters/r,a=t.heightMeters/r,s=o/2-i,c=(e.baselineLensDistance-t.bevelMeters)/r,u=e.fov,l=n.distortInverse(Math.tan($*u)),h=Math.min(s,l),d=Math.min(i,l),p=Math.min(c,l),f=Math.min(a-c,l);return{outerDist:h,innerDist:d,topDist:f,bottomDist:p,eyePosX:s,eyePosY:c}},ae.Viewers=oe;var ce=1,ue="2018-12-10T17:01:42Z",le=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}],he={format:ce,last_updated:ue,devices:le};function de(e,t){if(this.dpdb=he,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var n=new XMLHttpRequest,r=this;n.open("GET",e,!0),n.addEventListener("load",function(){r.loading=!1,n.status>=200&&n.status<=299?(r.dpdb=JSON.parse(n.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),n.send()}}function pe(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function fe(e,t){this.set(e,t)}function me(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new fe,this.currentGyroMeasurement=new fe,this.previousGyroMeasurement=new fe,c()?this.filterQ=new te(-1,0,0,1):this.filterQ=new te(1,0,0,1),this.previousFilterQ=new te,this.previousFilterQ.copy(this.filterQ),this.accelQ=new te,this.isOrientationInitialized=!1,this.estimatedGravity=new ee,this.measuredGravity=new ee,this.gyroIntegralQ=new te}function ve(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new te,this.previousTimestampS=null,this.deltaQ=new te,this.outQ=new te}function ge(e,t,n,r){this.yawOnly=n,this.accelerometer=new ee,this.gyroscope=new ee,this.filter=new me(e,r),this.posePredictor=new ve(t,r),this.isFirefoxAndroid=l(),this.isIOS=c();var i=h();this.isDeviceMotionInRadians=!this.isIOS&&i&&i<66,this.isWithoutDeviceMotion=d(),this.filterToWorldQ=new te,c()?this.filterToWorldQ.setFromAxisAngle(new ee(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new ee(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new te,this.worldToScreenQ=new te,this.originalPoseAdjustQ=new te,this.originalPoseAdjustQ.setFromAxisAngle(new ee(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),f()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new te,this.orientationOut_=new Float32Array(4),this.start()}de.prototype.getDeviceParams=function(){return this.deviceParams},de.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},de.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,n=v(),r=g();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var i=0;i<e.devices.length;i++){var o=e.devices[i];if(o.rules)if("ios"==o.type||"android"==o.type){if(c()==("ios"==o.type)){for(var a=!1,s=0;s<o.rules.length;s++){var u=o.rules[s];if(this.ruleMatches_(u,t,n,r)){a=!0;break}}if(a){var l=o.dpi[0]||o.dpi,h=o.dpi[1]||o.dpi;return new pe({xdpi:l,ydpi:h,bevelMm:o.bw})}}}else console.warn("Device["+i+"] has invalid type.");else console.warn("Device["+i+"] has no rules section.")}return console.warn("No DPDB device match."),null},de.prototype.ruleMatches_=function(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&"SM"===e.ua.substring(0,2)&&(e.ua=e.ua.substring(0,7)),e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],o=e.res[1];if(Math.min(n,r)!=Math.min(i,o)||Math.max(n,r)!=Math.max(i,o))return!1}return!0},fe.prototype.set=function(e,t){this.sample=e,this.timestampS=t},fe.prototype.copy=function(e){this.set(e.sample,e.timestampS)},me.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},me.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var n=t-this.previousGyroMeasurement.timestampS;m(n)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},me.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new te;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r=new te;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",J*R(r),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new te;i.copy(this.filterQ),i.multiply(r),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},me.prototype.getOrientation=function(){return this.filterQ},me.prototype.accelToQuaternion_=function(e){var t=new ee;t.copy(e),t.normalize();var n=new te;return n.setFromUnitVectors(new ee(0,0,-1),t),n.inverse(),n},me.prototype.gyroToQuaternionDelta_=function(e,t){var n=new te,r=new ee;return r.copy(e),r.normalize(),n.setFromAxisAngle(r,e.length()*t),n},ve.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var r=new ee;r.copy(t),r.normalize();var i=t.length();if(i<20*$)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(J*i).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var o=i*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(r,o),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=n,this.outQ},ge.prototype.getPosition=function(){return null},ge.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var e=(new te).setFromAxisAngle(new ee(0,0,-1),0),t=new te;return-90===window.orientation?t.setFromAxisAngle(new ee(0,1,0),Math.PI/-2):t.setFromAxisAngle(new ee(0,1,0),Math.PI/2),e.multiply(t)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var e=new te;return e.setFromAxisAngle(new ee(1,0,0),-Math.PI/2),e}(),e=this._deviceOrientationQ;var t=new te;return t.copy(e),t.multiply(this.deviceOrientationFilterToWorldQ),t.multiply(this.resetQ),t.multiply(this.worldToScreenQ),t.multiplyQuaternions(this.deviceOrientationFixQ,t),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_}var n=this.filter.getOrientation();e=this.posePredictor.getPrediction(n,this.gyroscope,this.previousTimestampS);t=new te;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),t.multiply(e),t.multiply(this.worldToScreenQ),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},ge.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),f()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ge.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new te;var t=e.alpha,n=e.beta,r=e.gamma;t=(t||0)*Math.PI/180,n=(n||0)*Math.PI/180,r=(r||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,t,-r)},ge.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},ge.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,n=e.rotationRate,r=e.timeStamp/1e3,a=r-this.previousTimestampS;return a<0?(P("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=r)):a<=i||a>o?(P("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),p()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),void(this.previousTimestampS=r))},ge.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},ge.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){var n=t.type.toLowerCase();"devicemotion"===n&&this.updateDeviceMotion_(t.deviceMotionEvent)}},ge.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new ee(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new ee(0,0,1),Math.PI/2);break;case 180:break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ge.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),c()&&S()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},ge.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var ye=60,be=new ee(1,0,0),Ae=new ee(0,0,1),we=new te;we.setFromAxisAngle(be,-Math.PI/2),we.multiply((new te).setFromAxisAngle(Ae,Math.PI/2));var xe=function(){function t(n){e(this,t),this.config=n,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new te,this._outQ=new te,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return n(t,[{key:"init",value:function(){var e=null;try{e=new RelativeOrientationSensor({frequency:ye,referenceFrame:"screen"}),e.addEventListener("error",this._onSensorError)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new ge(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(we),t.multiply(this._sensorQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),t}(),Ee="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function _e(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var n=document.createElement("img");n.src=this.icon;t=n.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(n);var r=document.createElement("div");t=r.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var i=document.createElement("div");t=i.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(i);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank";t=a.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",i.appendChild(o),i.appendChild(a),this.overlay=e,this.text=r,this.hide()}_e.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),n=t.style;f()?(n.width="20%",n.marginLeft="40%",n.marginTop="3%"):(n.width="50%",n.marginLeft="25%",n.marginTop="25%")},_e.prototype.hide=function(){this.overlay.style.display="none"},_e.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},_e.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},_e.prototype.update=function(){this.disableShowTemporarily(),!f()&&_()?this.show():this.hide()},_e.prototype.loadIcon_=function(){this.icon=a("image/svg+xml",Ee)};var Me="CardboardV1",Te="WEBVR_CARDBOARD_VIEWER",Ce="webvr-polyfill-viewer-selector";function Se(e){try{this.selectedKey=localStorage.getItem(Te)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=e||Me),this.dialog=this.createDialog_(ae.Viewers),this.root=null,this.onChangeCallbacks_=[]}Se.prototype.show=function(e){this.root=e,e.appendChild(this.dialog);var t=this.dialog.querySelector("#"+this.selectedKey);t.checked=!0,this.dialog.style.display="block"},Se.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Se.prototype.getCurrentViewer=function(){return ae.Viewers[this.selectedKey]},Se.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},Se.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},Se.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},Se.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&ae.Viewers[this.selectedKey]){this.fireOnChange_(ae.Viewers[this.selectedKey]);try{localStorage.setItem(Te,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Se.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add(Ce),t.style.display="none";var n=document.createElement("div"),r=n.style;r.position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var i=280,o=document.createElement("div");r=o.style;for(var a in r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft=-i/2+"px",r.width=i+"px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",o.appendChild(this.createH1_("Select your viewer")),e)o.appendChild(this.createChoice_(a,e[a].label));return o.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(n),t.appendChild(o),t},Se.prototype.createH1_=function(e){var t=document.createElement("h1"),n=t.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",t.innerHTML=e,t},Se.prototype.createChoice_=function(e,t){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,n.appendChild(r),n.appendChild(i),n},Se.prototype.createButton_=function(e,t){var n=document.createElement("button");n.innerHTML=e;var r=n.style;return r.float="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",n.addEventListener("click",t),n};"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function Le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function Re(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Pe=Re(function(e,t){(function(t,n){e.exports=n()})(0,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(1),a="undefined"!==typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,s=function(){function e(){i(this,e),a?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",o),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return r(e,[{key:"enable",value:function(){a?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){a?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=s},function(e,t,n){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Oe=Le(Pe),De=1e3,Ie=[0,0,.5,1],Be=[.5,0,.5,1],ke=window.requestAnimationFrame,Fe=window.cancelAnimationFrame;function Ne(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Ue(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return O("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function je(e){e=e||{};var t=!("wakelock"in e)||e.wakelock;this.isPolyfilled=!0,this.displayId=De++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return O("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Ue({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&_()&&(this.wakelock_=new Oe)}je.prototype.getFrameData=function(e){return C(e,this._getPose(),this)},je.prototype.getPose=function(){return O("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},je.prototype.resetPose=function(){return O("VRDisplay.prototype.resetPose"),this._resetPose()},je.prototype.getImmediatePose=function(){return O("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},je.prototype.requestAnimationFrame=function(e){return ke(e)},je.prototype.cancelAnimationFrame=function(e){return Fe(e)},je.prototype.wrapForFullscreen=function(e){if(c())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var r=this;function i(){if(r.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];r.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}return i(),this.fullscreenWrapper_},je.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},je.prototype.requestPresent=function(e){var t=this.isPresenting,n=this;return e instanceof Array||(O("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise(function(r,i){if(n.capabilities.canPresent)if(0==e.length||e.length>n.capabilities.maxLayers)i(new Error("Invalid number of layers."));else{var o=e[0];if(o.source){var a=o.leftBounds||Ie,s=o.rightBounds||Be;if(t){var l=n.layer_;l.source!==o.source&&(l.source=o.source);for(var h=0;h<4;h++)l.leftBounds[h]=a[h],l.rightBounds[h]=s[h];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void r()}if(n.layer_={predistorted:o.predistorted,source:o.source,leftBounds:a.slice(0),rightBounds:s.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var d=n.wrapForFullscreen(n.layer_.source),p=function(){var e=A();n.isPresenting=d===e,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),n.waitingForPresent_=!1,n.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()},f=function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,i(new Error("Unable to present.")))};n.addFullscreenListeners_(d,p,f),y(d)?(n.enableWakeLock(),n.waitingForPresent_=!0):(c()||u())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),r())}n.waitingForPresent_||c()||(b(),i(new Error("Unable to present.")))}else r()}else i(new Error("VRDisplay is not capable of presenting."))})},je.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(n,r){e?(!b()&&c()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),u()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),n()):r(new Error("Was not presenting to VRDisplay."))})},je.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},je.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},je.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},je.prototype.addFullscreenListeners_=function(e,t,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=n,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),n&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",n,!1))},je.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",n,!1),e.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),e.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},je.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},je.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},je.prototype.beginPresent_=function(){},je.prototype.endPresent_=function(){},je.prototype.submitFrame=function(e){},je.prototype.getEyeParameters=function(e){return null};var He={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},ze={LEFT:"left",RIGHT:"right"};function Ge(e){var t=M({},He);e=M(t,e||{}),je.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new Ue({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new xe(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new de(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new ae(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new Se(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new _e),c()&&window.addEventListener("resize",this.onResize_.bind(this))}return Ge.prototype=Object.create(je.prototype),Ge.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Ge.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Ge.prototype._getFieldOfView=function(e){var t;if(e==ze.LEFT)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=ze.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},Ge.prototype._getEyeOffset=function(e){var t;if(e==ze.LEFT)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=ze.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},Ge.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),n=this._getFieldOfView(e),r={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(r,"fieldOfView",{enumerable:!0,get:function(){return O("VRFieldOfView","VRFrameData's projection matrices"),n}}),r},Ge.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Ge.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Ge.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=v()*this.bufferScale_,e.canvas.height=g()*this.bufferScale_,this.cardboardUI_=new K(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new K(e)),this.distorter_=new F(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(f()&&_()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Ge.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Ge.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Ge.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},Ge.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Ge.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),n=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];t.canvas.setAttribute("style",n.join("; ")+";"),T(t.canvas)}},Ge.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Ge.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},Ge.VRFrameData=Ne,Ge.VRDisplay=je,Ge})}),c=n(s),u="0.10.10",l={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function h(e){this.config=a(a({},l),e),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&i())&&(this.enable(),this.getVRDisplays().then(function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()}))}h.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(i()){var e=new c({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},h.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var e=this.native.VRFrameData,t=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(r){r instanceof e?n.call(this,r):(n.call(this,t),r.pose=t.pose,o(t.leftProjectionMatrix,r.leftProjectionMatrix),o(t.rightProjectionMatrix,r.rightProjectionMatrix),o(t.leftViewMatrix,r.leftViewMatrix),o(t.rightViewMatrix,r.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=c.VRDisplay,window.VRFrameData=c.VRFrameData},h.prototype.getVRDisplays=function(){var e=this;this.config;return this.hasNative?this.native.getVRDisplays.call(navigator).then(function(t){return t.length>0?t:e.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},h.version=u,h.VRFrameData=c.VRFrameData,h.VRDisplay=c.VRDisplay;var d=Object.freeze({default:h}),p=d&&h||d;"undefined"!==typeof t&&t.window&&(t.document||(t.document=t.window.document),t.navigator||(t.navigator=t.window.navigator));var f=p;return f})}).call(this,"undefined"!==typeof n?n:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],47:[function(e,t,n){var r=/\n/,i="\n",o=/\s/;function a(e,t,n,r){var i=e.indexOf(t,n);return-1===i||i>r?r:i}function s(e){return o.test(e)}function c(e,t,n,i,o){for(var a=[],s=n,c=n;c<i&&c<t.length;c++){var u=t.charAt(c),l=r.test(u);if(l||c===i-1){var h=l?c:c+1,d=e(t,s,h,o);a.push(d),s=c+1}}return a}function u(e,t,n,r,o,c){var u=[],l=o;"nowrap"===c&&(l=Number.MAX_VALUE);while(n<r&&n<t.length){var h=a(t,i,n,r);while(n<h){if(!s(t.charAt(n)))break;n++}var d=e(t,n,h,l),p=n+(d.end-d.start),f=p+i.length;if(p<h){while(p>n){if(s(t.charAt(p)))break;p--}if(p===n)f>n+i.length&&f--,p=f;else{f=p;while(p>n){if(!s(t.charAt(p-i.length)))break;p--}}}if(p>=n){var m=e(t,n,p,l);u.push(m)}n=f}return u}function l(e,t,n,r){var i=Math.min(r,n-t);return{start:t,end:t+i}}t.exports=function(e,n){var r=t.exports.lines(e,n);return r.map(function(t){return e.substring(t.start,t.end)}).join("\n")},t.exports.lines=function(e,t){if(t=t||{},0===t.width&&"nowrap"!==t.mode)return[];e=e||"";var n="number"===typeof t.width?t.width:Number.MAX_VALUE,r=Math.max(0,t.start||0),i="number"===typeof t.end?t.end:e.length,o=t.mode,a=t.measure||l;return"pre"===o?c(a,e,r,i,n):u(a,e,r,i,n,o)}},{}],48:[function(t,n,r){"use strict";var i=t("global/window"),o=t("is-function"),a=t("parse-headers"),s=t("xtend");function c(e,t){for(var n=0;n<e.length;n++)t(e[n])}function u(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function l(e,t,n){var r=e;return o(t)?(n=t,"string"===typeof e&&(r={uri:e})):r=s(t,{uri:e}),r.callback=n,r}function h(e,t,n){return t=l(e,t,n),d(t)}function d(t){if("undefined"===typeof t.callback)throw new Error("callback argument missing");var n=!1,r=function(e,r,i){n||(n=!0,t.callback(e,r,i))};function i(){4===f.readyState&&setTimeout(c,0)}function o(){var t=void 0;if(t=f.response?f.response:f.responseText||p(f),w)try{t=JSON.parse(t)}catch(e){}return t}function s(e){return clearTimeout(m),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,x)}function c(){if(!d){var e;clearTimeout(m),e=t.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var n=x,i=null;return 0!==e?(n={body:o(),statusCode:e,method:g,headers:{},url:v,rawRequest:f},f.getAllResponseHeaders&&(n.headers=a(f.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,n,n.body)}}var l,d,f=t.xhr||null;f||(f=t.cors||t.useXDR?new h.XDomainRequest:new h.XMLHttpRequest);var m,v=f.url=t.uri||t.url,g=f.method=t.method||"GET",y=t.body||t.data,b=f.headers=t.headers||{},A=!!t.sync,w=!1,x={body:void 0,headers:{},statusCode:0,method:g,url:v,rawRequest:f};if("json"in t&&!1!==t.json&&(w=!0,b["accept"]||b["Accept"]||(b["Accept"]="application/json"),"GET"!==g&&"HEAD"!==g&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),y=JSON.stringify(!0===t.json?y:t.json))),f.onreadystatechange=i,f.onload=c,f.onerror=s,f.onprogress=function(){},f.onabort=function(){d=!0},f.ontimeout=s,f.open(g,v,!A,t.username,t.password),A||(f.withCredentials=!!t.withCredentials),!A&&t.timeout>0&&(m=setTimeout(function(){if(!d){d=!0,f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",s(e)}},t.timeout)),f.setRequestHeader)for(l in b)b.hasOwnProperty(l)&&f.setRequestHeader(l,b[l]);else if(t.headers&&!u(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(f.responseType=t.responseType),"beforeSend"in t&&"function"===typeof t.beforeSend&&t.beforeSend(f),f.send(y||null),f}function p(t){try{if("document"===t.responseType)return t.responseXML;var n=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!n)return t.responseXML}catch(e){}return null}function f(){}n.exports=h,h.XMLHttpRequest=i.XMLHttpRequest||f,h.XDomainRequest="withCredentials"in new h.XMLHttpRequest?h.XMLHttpRequest:i.XDomainRequest,c(["get","put","post","patch","head","delete"],function(e){h["delete"===e?"del":e]=function(t,n,r){return n=l(t,n,r),n.method=e.toUpperCase(),d(n)}})},{"global/window":15,"is-function":19,"parse-headers":30,xtend:50}],49:[function(e,t,n){t.exports=function(){return"undefined"!==typeof self.DOMParser?function(e){var t=new self.DOMParser;return t.parseFromString(e,"application/xml")}:"undefined"!==typeof self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(e){var t=new self.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}:function(e){var t=document.createElement("div");return t.innerHTML=e,t}}()},{}],50:[function(e,t,n){t.exports=i;var r=Object.prototype.hasOwnProperty;function i(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}},{}],51:[function(e,t,n){t.exports={name:"aframe",version:"0.9.2",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-master.js.map > dist/aframe-master.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe-master.min.js.map --output dist/aframe-master.min.js.map] -o dist/aframe-master.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prepush:"node scripts/testOnlyCheck.js",prerelease:"node scripts/release.js 0.9.1 0.9.2",start:"npm run dev","start:https":"cross-env SSL=true npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",files:["dist/*","docs/**/*","src/**/*","vendor/**/*"],dependencies:{"browserify-css":"^0.8.4","custom-event-polyfill":"^1.0.6",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7f3744be954574caf3072a5fd260ca90",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2","super-animejs":"^3.0.0","super-three":"^0.102.2","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.10.10"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"github:sukima/markserv#feature/fix-broken-websoketio-link",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],52:[function(e,t,n){var r=e("super-animejs"),i=e("../core/component").components,o=e("../core/component").registerComponent,a=e("../lib/three"),s=e("../utils"),c=new a.Color,u=new a.Color,l=s.entity.getComponentProperty,h=s.entity.setComponentProperty,d={},p="color",f="position",m="rotation",v="scale",g="components",y="object3D";function b(e,t){var n,r,o,a;return o=t.split("."),r=o[0],a=o[1],n=e.components[r]||i[r],n?a&&!n.schema[a]?null:a?n.schema[a].type:n.schema.type:null}function A(e){e.x=a.Math.degToRad(e.x),e.y=a.Math.degToRad(e.y),e.z=a.Math.degToRad(e.z)}function w(e,t,n){var r;for(r=0;r<t.length;r++)e.addEventListener(t[r],n)}function x(e,t,n){var r;for(r=0;r<t.length;r++)e.removeEventListener(t[r],n)}function E(e,t){var n,r,i;for(r=M(t),i=e,n=0;n<r.length;n++)i=i[r[n]];if(void 0===i)throw console.log(e),new Error("[animation] property ("+t+") could not be found");return i}function _(e,t,n,r){var i,o,s,c;for(t.startsWith("object3D.rotation")&&(n=a.Math.degToRad(n)),o=M(t),c=e,i=0;i<o.length-1;i++)c=c[o[i]];s=o[o.length-1],r!==p?c[s]=n:"r"in c[s]?(c[s].r=n.r,c[s].g=n.g,c[s].b=n.b):(c[s].x=n.r,c[s].y=n.g,c[s].z=n.b)}function M(e){return e in d?d[e]:(d[e]=e.split("."),d[e])}function T(e){return e.isRawProperty||e.property.startsWith(g)||e.property.startsWith(y)}t.exports.Component=o("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(e){return!0===e||"true"===e||!1!==e&&"false"!==e&&parseInt(e,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var e=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){e.animationIsPlaying=!1,e.el.emit("animationcomplete",e.eventDetail,!1),e.id&&e.el.emit("animationcomplete__"+e.id,e.eventDetail,!1)}}},update:function(e){var t=this.config,n=this.data;this.animationIsPlaying=!1,this.data.enabled&&n.property&&(t.autoplay=!1,t.direction=n.dir,t.duration=n.dur,t.easing=n.easing,t.elasticity=n.elasticity,t.loop=n.loop,t.round=n.round,this.createAndStartAnimation())},tick:function(e,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var e=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=r(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!e.autoplay||e.startEvents&&e.startEvents.length||(e.delay?setTimeout(this.beginAnimation,e.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=r(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var e,t,n,r=this.config,i=this.data,o=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in e=""===i.from?E(o,i.property):i.from,n=i.to,this.setColorConfig(e,n),e=this.fromColor,n=this.toColor,this.targetsArray.length=0,this.targetsArray.push(e),r.targets=this.targetsArray,n)r[t]=n[t];r.update=function(){var e={};return function(t){var n;n=t.animatables[0].target,n.r===e.r&&n.g===e.g&&n.b===e.b||_(o,i.property,n,i.type)}}()}},updateConfigForDefault:function(){var e,t,n,r,i=this.config,o=this.data,a=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(e=""===o.from?T(o)?E(a,o.property):l(a,o.property):o.from,r=o.to,n=!isNaN(e||r),n?(e=parseFloat(e),r=parseFloat(r)):(e=e?e.toString():e,r=r?r.toString():r),t="true"===o.to||"false"===o.to||!0===o.to||!1===o.to,t&&(e="true"===o.from||!0===o.from?1:0,r="true"===o.to||!0===o.to?1:0),this.targets.aframeProperty=e,i.targets=this.targets,i.aframeProperty=r,i.update=function(){var e;return function(n){var r;r=n.animatables[0].target.aframeProperty,r!==e&&(e=r,t&&(r=r>=1),T(o)?_(a,o.property,r,o.type):h(a,o.property,r))}}())},updateConfigForVector:function(){var e,t,n,r=this.config,i=this.data,o=this.el;for(e in t=""!==i.from?s.coordinates.parse(i.from):l(o,i.property),n=s.coordinates.parse(i.to),i.property===m&&(A(t),A(n)),this.targetsArray.length=0,this.targetsArray.push(t),r.targets=this.targetsArray,n)r[e]=n[e];i.property!==f&&i.property!==m&&i.property!==v?r.update=function(){var e={};return function(t){var n=t.animatables[0].target;n.x===e.x&&n.y===e.y&&n.z===e.z||(e.x=n.x,e.y=n.y,e.z=n.z,h(o,i.property,n))}}():r.update=function(){var e={};return function(t){var n=t.animatables[0].target;i.property===v&&(n.x=Math.max(1e-4,n.x),n.y=Math.max(1e-4,n.y),n.z=Math.max(1e-4,n.z)),n.x===e.x&&n.y===e.y&&n.z===e.z||(e.x=n.x,e.y=n.y,e.z=n.z,o.object3D[i.property].set(n.x,n.y,n.z))}}()},updateConfig:function(){var e;e=b(this.el,this.data.property),T(this.data)&&this.data.type===p?this.updateConfigForRawColor():"vec2"===e||"vec3"===e||"vec4"===e?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(e){var t,n=this.data,i=this.el,o=this;return""===n.from&&(!!n.property.startsWith(g)&&(t=M(n.property)[1],!i.components[t]&&(i.addEventListener("componentinitialized",function n(a){a.detail.name===t&&(e(),o.animation=r(o.config),i.removeEventListener("componentinitialized",n))}),!0)))},stopRelatedAnimations:function(){var e,t;for(t in this.el.components)e=this.el.components[t],t!==this.attrName&&"animation"===e.name&&e.animationIsPlaying&&e.data.property===this.data.property&&(e.animationIsPlaying=!1)},addEventListeners:function(){var e=this.data,t=this.el;w(t,e.startEvents,this.onStartEvent),w(t,e.pauseEvents,this.pauseAnimation),w(t,e.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var e=this.data,t=this.el;x(t,e.startEvents,this.onStartEvent),x(t,e.pauseEvents,this.pauseAnimation),x(t,e.resumeEvents,this.resumeAnimation)},setColorConfig:function(e,t){c.set(e),u.set(t),e=this.fromColor,t=this.toColor,e.r=c.r,e.g=c.g,e.b=c.b,t.r=u.r,t.g=u.g,t.b=u.b}})},{"../core/component":103,"../lib/three":151,"../utils":176,"super-animejs":35}],53:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../lib/three");t.exports.Component=r("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var e,t=this.el;e=this.camera=new i.PerspectiveCamera,t.setObject3D("camera",e)},update:function(e){var t=this.data,n=this.camera;n.aspect=t.aspect||window.innerWidth/window.innerHeight,n.far=t.far,n.fov=t.fov,n.near=t.near,n.zoom=t.zoom,n.updateProjectionMatrix(),this.updateActiveCamera(e),this.updateSpectatorCamera(e)},updateActiveCamera:function(e){var t=this.data,n=this.el,r=this.system;e&&e.active===t.active||t.spectator||(t.active&&r.activeCameraEl!==n?r.setActiveCamera(n):t.active||r.activeCameraEl!==n||r.disableActiveCamera())},updateSpectatorCamera:function(e){var t=this.data,n=this.el,r=this.system;e&&e.spectator===t.spectator||(t.spectator&&r.spectatorCameraEl!==n?r.setSpectatorCamera(n):t.spectator||r.spectatorCameraEl!==n||r.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},{"../core/component":103,"../lib/three":151}],54:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/"),o=i.bind,a={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},s={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},c={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},u="a-mouse-cursor-hover";t.exports.Component=r("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:i.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var e=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.updateCanvasBounds=i.debounce(function(){e.canvasBounds=e.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=o(this.onCursorDown,this),this.onCursorUp=o(this.onCursorUp,this),this.onIntersection=o(this.onIntersection,this),this.onIntersectionCleared=o(this.onIntersectionCleared,this),this.onMouseMove=o(this.onMouseMove,this)},update:function(e){this.data.rayOrigin!==e.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var e=this.el;e.removeState(s.HOVERING),e.removeState(s.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(s.HOVERED),this.removeEventListeners()},addEventListeners:function(){var e,t=this.data,n=this.el,r=this;function i(){e=n.sceneEl.canvas,t.downEvents.length||t.upEvents.length||(c.DOWN.forEach(function(t){e.addEventListener(t,r.onCursorDown)}),c.UP.forEach(function(t){e.addEventListener(t,r.onCursorUp)}))}e=n.sceneEl.canvas,e?i():n.sceneEl.addEventListener("render-target-loaded",i),t.downEvents.forEach(function(e){n.addEventListener(e,r.onCursorDown)}),t.upEvents.forEach(function(e){n.addEventListener(e,r.onCursorUp)}),n.addEventListener("raycaster-intersection",this.onIntersection),n.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),n.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var e,t=this.data,n=this.el,r=this;e=n.sceneEl.canvas,!e||t.downEvents.length||t.upEvents.length||(c.DOWN.forEach(function(t){e.removeEventListener(t,r.onCursorDown)}),c.UP.forEach(function(t){e.removeEventListener(t,r.onCursorUp)})),t.downEvents.forEach(function(e){n.removeEventListener(e,r.onCursorDown)}),t.upEvents.forEach(function(e){n.removeEventListener(e,r.onCursorUp)}),n.removeEventListener("raycaster-intersection",this.onIntersection),n.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchstart",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),n.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var e,t=this.el;e=t.sceneEl.canvas,e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(e.addEventListener("mousemove",this.onMouseMove,!1),e.addEventListener("touchmove",this.onMouseMove,!1),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var e=new THREE.Vector3,t=new THREE.Vector2,n=new THREE.Vector3,r={origin:n,direction:e};return function(i){var o,a,s,c=this.canvasBounds,u=this.el.sceneEl.camera;u.parent.updateMatrixWorld(),a="touchmove"===i.type||"touchstart"===i.type?i.touches.item(0):i,o=a.clientX-c.left,s=a.clientY-c.top,t.x=o/c.width*2-1,t.y=-s/c.height*2+1,n.setFromMatrixPosition(u.matrixWorld),e.set(t.x,t.y,.5).unproject(u).sub(n).normalize(),this.el.setAttribute("raycaster",r),"touchmove"===i.type&&i.preventDefault()}}(),onCursorDown:function(e){"mouse"===this.data.rayOrigin&&"touchstart"===e.type&&(this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),e.preventDefault()),this.twoWayEmit(a.MOUSEDOWN),this.cursorDownEl=this.intersectedEl},onCursorUp:function(e){var t=this.data;this.twoWayEmit(a.MOUSEUP),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(a.MOUSEUP,this.intersectedEventDetail)),t.fuse&&"mouse"!==t.rayOrigin||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(a.CLICK),this.cursorDownEl=null,"touchend"===e.type&&e.preventDefault()},onIntersection:function(e){var t,n,r,i,o=this.el;n=e.detail.els[0]===o?1:0,i=e.detail.intersections[n],r=e.detail.els[n],r&&this.intersectedEl!==r&&(this.intersectedEl&&(t=this.el.components.raycaster.getIntersection(this.intersectedEl),t&&t.distance<=i.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(r,i)))},onIntersectionCleared:function(e){var t=e.detail.clearedEls;-1!==t.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},setIntersection:function(e,t){var n=this.el,r=this.data,i=this;this.intersectedEl!==e&&(this.intersectedEl=e,n.addState(s.HOVERING),e.addState(s.HOVERED),this.twoWayEmit(a.MOUSEENTER),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.add(u),0!==r.fuseTimeout&&r.fuse&&(n.addState(s.FUSING),this.twoWayEmit(a.FUSING),this.fuseTimeout=setTimeout(function(){n.removeState(s.FUSING),i.twoWayEmit(a.CLICK)},r.fuseTimeout)))},clearCurrentIntersection:function(e){var t,n,r,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState(s.HOVERED),i.removeState(s.HOVERING),i.removeState(s.FUSING),this.twoWayEmit(a.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.remove(u),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==e&&(r=this.el.components.raycaster.intersections,0!==r.length&&(t=r[0].object.el===i?1:0,n=r[t],n&&this.setIntersection(n.object.el,n))))},twoWayEmit:function(e){var t,n=this.el,r=this.intersectedEl;t=this.el.components.raycaster.getIntersection(r),this.eventDetail.intersectedEl=r,this.eventDetail.intersection=t,n.emit(e,this.eventDetail),r&&(this.intersectedEventDetail.intersection=t,r.emit(e,this.intersectedEventDetail))}})},{"../core/component":103,"../utils/":176}],55:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent,u="https://cdn.aframe.io/controllers/google/",l=u+"vr_controller_daydream.obj",h=u+"vr_controller_daydream.mtl",d="Daydream Controller";t.exports.Component=r("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,d,{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:d,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:l,mtl:h})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.menu=n.getObjectByName("AppButton_AppButton_Cylinder.004"),t.system=n.getObjectByName("HomeButton_HomeButton_Cylinder.005"),t.trackpad=n.getObjectByName("TouchPad_TouchPad_Cylinder.003"),n.position.set(0,0,-.04))},onAxisMoved:function(e){s(this,this.mapping.axes,e)},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes;if(n&&n[e]){var r;switch(t){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor;break;default:r=this.data.buttonColor}n[e].material.color.set(r)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],56:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent,u="https://cdn.aframe.io/controllers/samsung/",l=u+"gear_vr_controller.obj",h=u+"gear_vr_controller.mtl",d="Gear VR";t.exports.Component=r("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,d,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:d,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:l,mtl:h})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.trigger=n.children[2],t.trackpad=n.children[1])},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){s(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes;if(n&&n[e]){var r;switch(t){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor;break;default:r=this.data.buttonColor}n[e].material.color.set(r)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],57:[function(e,t,n){var r=e("../core/geometry").geometries,i=e("../core/geometry").geometryNames,o=e("../core/component").registerComponent,a=e("../lib/three"),s=new a.Geometry;t.exports.Component=o("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:i,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(e){var t,n=this.data,r=this.el,i=this.system;this.geometry&&(i.unuseGeometry(e),this.geometry=null),this.geometry=i.getOrCreateGeometry(n),t=r.getObject3D("mesh"),t?t.geometry=this.geometry:(t=new a.Mesh,t.geometry=this.geometry,r.setObject3D("mesh",t))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=s,this.geometry=null},updateSchema:function(e){var t=this.oldData&&this.oldData.primitive,n=e.primitive,i=r[n]&&r[n].schema;if(!i)throw new Error("Unknown geometry schema `"+n+"`");t&&t===n||this.extendSchema(i)}})},{"../core/component":103,"../core/geometry":104,"../lib/three":151}],58:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../lib/three"),o=e("../utils/"),a=o.debug("components:gltf-model:warn");t.exports.Component=r("gltf-model",{schema:{type:"model"},init:function(){var e=this.system.getDRACOLoader();this.model=null,this.loader=new i.GLTFLoader,e&&this.loader.setDRACOLoader(e)},update:function(){var e=this,t=this.el,n=this.data;n&&(this.remove(),this.loader.load(n,function(n){e.model=n.scene||n.scenes[0],e.model.animations=n.animations,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"gltf",model:e.model})},void 0,function(e){var r=e&&e.message?e.message:"Failed to load glTF model";a(r),t.emit("model-error",{format:"gltf",src:n})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":103,"../lib/three":151,"../utils/":176}],59:[function(e,t,n){var r=e("../core/component").registerComponent,i={left:"https://cdn.aframe.io/controllers/hands/leftHand.glb",right:"https://cdn.aframe.io/controllers/hands/rightHand.glb"},o={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},a={};function s(e,t){var n;if(e)return n=a[e],"grip"===n?n+(t?"close":"open"):"point"===n||"thumb"===n?n+(t?"up":"down"):"pointing"===n||"pistol"===n?n+(t?"start":"end"):void 0}function c(e){var t=e&&e.controller&&e.controller.id;return t&&0===t.indexOf("OpenVR ")}a[o.fist]="grip",a[o.thumbUp]="pistol",a[o.point]="pointing",a[o.thumb]="thumb",t.exports.Component=r("hand-controls",{schema:{default:"left"},init:function(){var e=this,t=this.el;this.gesture=o.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){e.handleButton("grip","down")},this.onGripUp=function(){e.handleButton("grip","up")},this.onTrackpadDown=function(){e.handleButton("trackpad","down")},this.onTrackpadUp=function(){e.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){e.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){e.handleButton("trackpad","touchend")},this.onTriggerDown=function(){e.handleButton("trigger","down")},this.onTriggerUp=function(){e.handleButton("trigger","up")},this.onTriggerTouchStart=function(){e.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){e.handleButton("trigger","touchend")},this.onGripTouchStart=function(){e.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){e.handleButton("grip","touchend")},this.onThumbstickDown=function(){e.handleButton("thumbstick","down")},this.onThumbstickUp=function(){e.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){e.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){e.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){e.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){e.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){e.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){e.handleButton("surface","touchend")},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected),t.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(e,t){var n=this.el.getObject3D("mesh");n&&n.mixer&&n.mixer.update(t/1e3)},addEventListeners:function(){var e=this.el;e.addEventListener("gripdown",this.onGripDown),e.addEventListener("gripup",this.onGripUp),e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.addEventListener("triggerdown",this.onTriggerDown),e.addEventListener("triggerup",this.onTriggerUp),e.addEventListener("triggertouchstart",this.onTriggerTouchStart),e.addEventListener("triggertouchend",this.onTriggerTouchEnd),e.addEventListener("griptouchstart",this.onGripTouchStart),e.addEventListener("griptouchend",this.onGripTouchEnd),e.addEventListener("thumbstickdown",this.onThumbstickDown),e.addEventListener("thumbstickup",this.onThumbstickUp),e.addEventListener("abuttontouchstart",this.onAorXTouchStart),e.addEventListener("abuttontouchend",this.onAorXTouchEnd),e.addEventListener("bbuttontouchstart",this.onBorYTouchStart),e.addEventListener("bbuttontouchend",this.onBorYTouchEnd),e.addEventListener("xbuttontouchstart",this.onAorXTouchStart),e.addEventListener("xbuttontouchend",this.onAorXTouchEnd),e.addEventListener("ybuttontouchstart",this.onBorYTouchStart),e.addEventListener("ybuttontouchend",this.onBorYTouchEnd),e.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var e=this.el;e.removeEventListener("gripdown",this.onGripDown),e.removeEventListener("gripup",this.onGripUp),e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.removeEventListener("triggerdown",this.onTriggerDown),e.removeEventListener("triggerup",this.onTriggerUp),e.removeEventListener("triggertouchstart",this.onTriggerTouchStart),e.removeEventListener("triggertouchend",this.onTriggerTouchEnd),e.removeEventListener("griptouchstart",this.onGripTouchStart),e.removeEventListener("griptouchend",this.onGripTouchEnd),e.removeEventListener("thumbstickdown",this.onThumbstickDown),e.removeEventListener("thumbstickup",this.onThumbstickUp),e.removeEventListener("abuttontouchstart",this.onAorXTouchStart),e.removeEventListener("abuttontouchend",this.onAorXTouchEnd),e.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),e.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),e.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),e.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),e.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),e.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),e.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(e){var t,n=this.el,r=this.data,o=this;t={hand:r,model:!1,orientationOffset:{x:0,y:0,z:"left"===r?90:-90}},r!==e&&this.loader.load(i[r],function(e){var r=e.scene.children[0];r.mixer=new THREE.AnimationMixer(r),o.clips=e.animations,n.setObject3D("mesh",r),r.position.set(0,0,0),r.rotation.set(0,0,0),n.setAttribute("vive-controls",t),n.setAttribute("oculus-touch-controls",t),n.setAttribute("windows-motion-controls",t)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(e,t){var n,r="down"===t,i="touchstart"===t;if(0===t.indexOf("touch")){if(i===this.touchedButtons[e])return;this.touchedButtons[e]=i}else{if(r===this.pressedButtons[e])return;this.pressedButtons[e]=r}n=this.gesture,this.gesture=this.determineGesture(),this.gesture!==n&&(this.animateGesture(this.gesture,n),this.emitGestureEvents(this.gesture,n))},determineGesture:function(){var e,t=this.pressedButtons["grip"],n=this.pressedButtons["surface"]||this.touchedButtons["surface"],r=this.pressedButtons["trackpad"]||this.touchedButtons["trackpad"],i=this.pressedButtons["trigger"]||this.touchedButtons["trigger"],a=this.touchedButtons["AorX"]||this.touchedButtons["BorY"],s=c(this.el.components["tracked-controls"]);return s?t||i?e=o.fist:r&&(e=o.point):t?e=n||a||r?i?o.fist:o.point:i?o.thumbUp:o.pointThumb:i&&(e=o.hold),e},getClip:function(e){var t,n;for(n=0;n<this.clips.length;n++)if(t=this.clips[n],t.name===e)return t},animateGesture:function(e,t){e?this.playAnimation(e||o.open,t,!1):this.playAnimation(t,t,!0)},emitGestureEvents:function(e,t){var n,r=this.el;t!==e&&(n=s(t,!1),n&&r.emit(n),n=s(e,!0),n&&r.emit(n))},playAnimation:function(e,t,n){var r,i,o,a=this.el.getObject3D("mesh");if(a){if(a.mixer.stopAllAction(),r=this.getClip(e),o=a.mixer.clipAction(r),o.clampWhenFinished=!0,o.loop=THREE.LoopRepeat,o.repetitions=0,o.timeScale=n?-1:1,o.time=n?r.duration:0,o.weight=1,!t||e===t)return a.mixer.stopAllAction(),void o.play();r=this.getClip(t),i=a.mixer.clipAction(r),i.weight=.15,i.play(),o.play(),i.crossFadeTo(o,.15,!0)}}})},{"../core/component":103}],60:[function(e,t,n){e("./animation"),e("./camera"),e("./cursor"),e("./daydream-controls"),e("./gearvr-controls"),e("./geometry"),e("./gltf-model"),e("./hand-controls"),e("./laser-controls"),e("./light"),e("./line"),e("./link"),e("./look-controls"),e("./material"),e("./obj-model"),e("./oculus-go-controls"),e("./oculus-touch-controls"),e("./position"),e("./raycaster"),e("./rotation"),e("./scale"),e("./shadow"),e("./sound"),e("./text"),e("./tracked-controls"),e("./tracked-controls-webvr"),e("./tracked-controls-webxr"),e("./visible"),e("./vive-controls"),e("./vive-focus-controls"),e("./wasd-controls"),e("./windows-motion-controls"),e("./scene/background"),e("./scene/debug"),e("./scene/embedded"),e("./scene/inspector"),e("./scene/fog"),e("./scene/keyboard-shortcuts"),e("./scene/pool"),e("./scene/screenshot"),e("./scene/stats"),e("./scene/vr-mode-ui")},{"./animation":52,"./camera":53,"./cursor":54,"./daydream-controls":55,"./gearvr-controls":56,"./geometry":57,"./gltf-model":58,"./hand-controls":59,"./laser-controls":61,"./light":62,"./line":63,"./link":64,"./look-controls":65,"./material":66,"./obj-model":67,"./oculus-go-controls":68,"./oculus-touch-controls":69,"./position":70,"./raycaster":71,"./rotation":72,"./scale":73,"./scene/background":74,"./scene/debug":75,"./scene/embedded":76,"./scene/fog":77,"./scene/inspector":78,"./scene/keyboard-shortcuts":79,"./scene/pool":80,"./scene/screenshot":81,"./scene/stats":82,"./scene/vr-mode-ui":83,"./shadow":84,"./sound":85,"./text":86,"./tracked-controls":89,"./tracked-controls-webvr":87,"./tracked-controls-webxr":88,"./visible":90,"./vive-controls":91,"./vive-focus-controls":92,"./wasd-controls":93,"./windows-motion-controls":94}],61:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/");r("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var e=this.config,t=this.data,n=this.el,r=this,o=this.data.model&&!this.el.sceneEl.hasWebXR,a={hand:t.hand,model:o};function s(t){var o=e[t.detail.name];if(o){var a=i.extend({showLine:!0},o.raycaster||{});t.detail.rayOrigin&&(a.origin=t.detail.rayOrigin.origin,a.direction=t.detail.rayOrigin.direction,a.showLine=!0),t.detail.rayOrigin||!r.modelReady?n.setAttribute("raycaster",a):n.setAttribute("raycaster","showLine",!0),n.setAttribute("cursor",i.extend({fuse:!1},o.cursor))}}function c(){n.setAttribute("raycaster","showLine",!1)}n.setAttribute("daydream-controls",a),n.setAttribute("gearvr-controls",a),n.setAttribute("oculus-go-controls",a),n.setAttribute("oculus-touch-controls",a),n.setAttribute("vive-controls",a),n.setAttribute("vive-focus-controls",a),n.setAttribute("windows-motion-controls",a),this.data.model&&this.el.sceneEl.hasWebXR&&this.initDefaultModel(),n.addEventListener("controllerconnected",s),n.addEventListener("controllerdisconnected",c),n.addEventListener("controllermodelready",function(e){s(e),r.modelReady=!0})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}},initDefaultModel:function(){var e=this.modelEl=document.createElement("a-entity");e.setAttribute("geometry",{primitive:"sphere",radius:.03}),e.setAttribute("material",{color:this.data.color}),this.el.appendChild(e)}})},{"../core/component":103,"../utils/":176}],62:[function(e,t,n){var r=e("../utils/bind"),i=e("../utils").diff,o=e("../utils/debug"),a=e("../core/component").registerComponent,s=e("../lib/three"),c=s.Math.degToRad,u=o("components:light:warn");t.exports.Component=a("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var e=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(e)},update:function(e){var t=this.data,n=i(t,e),o=this.light,a=this.rendererSystem,s=this;if(!o||"type"in n)this.setLight(this.data),this.updateShadow();else{var u=!1;Object.keys(n).forEach(function(e){var n=t[e];switch(e){case"color":o.color.set(n),a.applyColorCorrection(o.color);break;case"groundColor":o.groundColor.set(n),a.applyColorCorrection(o.groundColor);break;case"angle":o.angle=c(n);break;case"target":null===n?"spot"!==t.type&&"directional"!==t.type||(o.target=s.defaultTarget):n.hasLoaded?s.onSetTarget(n,o):n.addEventListener("loaded",r(s.onSetTarget,s,n,o));break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":u||(s.updateShadow(),u=!0);break;default:o[e]=n}})}},setLight:function(e){var t=this.el,n=this.getLight(e);n&&(this.light&&t.removeObject3D("light"),this.light=n,this.light.el=t,t.setObject3D("light",this.light),"spot"!==e.type&&"directional"!==e.type&&"hemisphere"!==e.type||t.getObject3D("light").translateY(-1),"spot"===e.type&&(t.setObject3D("light-target",this.defaultTarget),t.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var e=this.el,t=this.data,n=this.light;n.castShadow=t.castShadow;var r=e.getObject3D("cameraHelper");if(t.shadowCameraVisible&&!r?e.setObject3D("cameraHelper",new s.CameraHelper(n.shadow.camera)):!t.shadowCameraVisible&&r&&e.removeObject3D("cameraHelper"),!t.castShadow)return n;n.shadow.bias=t.shadowBias,n.shadow.radius=t.shadowRadius,n.shadow.mapSize.height=t.shadowMapHeight,n.shadow.mapSize.width=t.shadowMapWidth,n.shadow.camera.near=t.shadowCameraNear,n.shadow.camera.far=t.shadowCameraFar,n.shadow.camera instanceof s.OrthographicCamera?(n.shadow.camera.top=t.shadowCameraTop,n.shadow.camera.right=t.shadowCameraRight,n.shadow.camera.bottom=t.shadowCameraBottom,n.shadow.camera.left=t.shadowCameraLeft):n.shadow.camera.fov=t.shadowCameraFov,n.shadow.camera.updateProjectionMatrix(),r&&r.update()},getLight:function(e){var t=e.angle,n=new s.Color(e.color);this.rendererSystem.applyColorCorrection(n),n=n.getHex();var i=e.decay,o=e.distance,a=new s.Color(e.groundColor);this.rendererSystem.applyColorCorrection(a),a=a.getHex();var l=e.intensity,h=e.type,d=e.target,p=null;switch(h.toLowerCase()){case"ambient":return new s.AmbientLight(n,l);case"directional":return p=new s.DirectionalLight(n,l),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",r(this.onSetTarget,this,d,p))),p;case"hemisphere":return new s.HemisphereLight(n,a,l);case"point":return new s.PointLight(n,l,o,i);case"spot":return p=new s.SpotLight(n,l,o,c(t),e.penumbra,i),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",r(this.onSetTarget,this,d,p))),p;default:u("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",h)}},onSetTarget:function(e,t){t.target=e.object3D},remove:function(){var e=this.el;e.removeObject3D("light"),e.getObject3D("cameraHelper")&&e.removeObject3D("cameraHelper")}})},{"../core/component":103,"../lib/three":151,"../utils":176,"../utils/bind":170,"../utils/debug":172}],63:[function(e,t,n){var r=e("../core/component").registerComponent;function i(e,t){return!(!e||!t)&&(e.x===t.x&&e.y===t.y&&e.z===t.z)}t.exports.Component=r("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var e,t,n=this.data;this.rendererSystem=this.el.sceneEl.systems.renderer,t=this.material=new THREE.LineBasicMaterial({color:n.color,opacity:n.opacity,transparent:n.opacity<1,visible:n.visible}),e=this.geometry=new THREE.BufferGeometry,e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.rendererSystem.applyColorCorrection(t.color),this.line=new THREE.Line(e,t),this.el.setObject3D(this.attrName,this.line)},update:function(e){var t=this.data,n=this.geometry,r=!1,o=this.material,a=n.attributes.position.array;i(t.start,e.start)||(a[0]=t.start.x,a[1]=t.start.y,a[2]=t.start.z,r=!0),i(t.end,e.end)||(a[3]=t.end.x,a[4]=t.end.y,a[5]=t.end.z,r=!0),r&&(n.attributes.position.needsUpdate=!0,n.computeBoundingSphere()),o.color.setStyle(t.color),this.rendererSystem.applyColorCorrection(o.color),o.opacity=t.opacity,o.transparent=t.opacity<1,o.visible=t.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":103}],64:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../core/shader").registerShader,o=e("../lib/three");t.exports.Component=r("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new o.Quaternion,this.hiddenEls=[]},update:function(e){var t,n,r=this.data,i=this.el;r.visualAspectEnabled&&(this.initVisualAspect(),t=r.highlighted?r.highlightedColor:r.backgroundColor,n=r.highlighted?r.highlightedColor:r.borderColor,i.setAttribute("material","backgroundColor",t),i.setAttribute("material","strokeColor",n),r.on!==e.on&&this.updateEventListener(),void 0!==e.peekMode&&r.peekMode!==e.peekMode&&this.updatePeekMode(),r.image&&e.image!==r.image&&i.setAttribute("material","pano","string"===typeof r.image?r.image:r.image.src))},updatePeekMode:function(){var e=this.el,t=this.sphereEl;this.data.peekMode?(this.hideAll(),e.getObject3D("mesh").visible=!1,t.setAttribute("visible",!0)):(this.showAll(),e.getObject3D("mesh").visible=!0,t.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var e=this.el;e.isPlaying&&(this.removeEventListener(),e.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var e=this.data.on;e&&this.el.removeEventListener(e,this.navigate)},initVisualAspect:function(){var e,t,n,r=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(n=this.textEl=this.textEl||document.createElement("a-entity"),t=this.sphereEl=this.sphereEl||document.createElement("a-entity"),e=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),r.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),r.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),n.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),n.setAttribute("position","0 1.5 0"),r.appendChild(n),e.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),e.setAttribute("rotation","0 180 0"),e.setAttribute("position","0 0 0"),e.setAttribute("visible",!1),r.appendChild(e),t.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),t.setAttribute("visible",!1),r.appendChild(t),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Quaternion,r=new o.Vector3;return function(){var i,o,a=this.el,s=a.object3D,c=a.sceneEl.camera,u=this.textEl;if(this.data.visualAspectEnabled)if(s.updateMatrixWorld(),c.parent.updateMatrixWorld(),c.updateMatrixWorld(),s.matrix.decompose(t,n,r),t.setFromMatrixPosition(s.matrixWorld),e.setFromMatrixPosition(c.matrixWorld),o=t.distanceTo(e),o>20)this.previousQuaternion||(this.quaternionClone.copy(n),this.previousQuaternion=this.quaternionClone),s.lookAt(e);else{if(i=this.calculateCameraPortalOrientation(),o<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;u.setAttribute("text","width",1.5),i<=0?(u.setAttribute("position","0 0 0.75"),u.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(u.setAttribute("position","0 0 -0.75"),u.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),a.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=i}else i<=0?u.setAttribute("rotation","0 180 0"):u.setAttribute("rotation","0 0 0"),u.setAttribute("text","width",5),u.setAttribute("position","0 1.5 0"),a.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(s.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var e=this.el,t=this.hiddenEls,n=this;t.length>0||e.sceneEl.object3D.traverse(function(r){r&&r.el&&r.el.hasAttribute("link-controls")||r.el&&r!==e.sceneEl.object3D&&r.el!==e&&r.el!==n.sphereEl&&r.el!==e.sceneEl.cameraEl&&!1!==r.el.getAttribute("visible")&&r.el!==n.textEl&&r.el!==n.semiSphereEl&&(r.el.setAttribute("visible",!1),t.push(r.el))})},showAll:function(){this.hiddenEls.forEach(function(e){e.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var e=new o.Matrix4,t=new o.Vector3,n=new o.Vector3(0,0,1),r=new o.Vector3(0,0,0);return function(){var i=this.el,o=i.sceneEl.camera;return t.set(0,0,0),n.set(0,0,1),r.set(0,0,0),i.object3D.matrixWorld.extractRotation(e),n.applyMatrix4(e),i.object3D.updateMatrixWorld(),i.object3D.localToWorld(r),o.parent.parent.updateMatrixWorld(),o.parent.updateMatrixWorld(),o.updateMatrixWorld(),o.localToWorld(t),t.sub(r).normalize(),n.normalize(),Math.sign(n.dot(t))}}(),remove:function(){this.removeEventListener()}}),i("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = saturate(direction.y * 0.5  + 0.5);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join("\n")})},{"../core/component":103,"../core/shader":113,"../lib/three":151}],65:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../lib/three"),o=e("../utils/"),a=o.bind,s=e("../utils").device.PolyfillControls,c=Math.PI/2;t.exports.Component=r("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},hmdEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0}},init:function(){this.previousHMDPosition=new i.Vector3,this.hmdQuaternion=new i.Quaternion,this.hmdEuler=new i.Euler,this.position=new i.Vector3,this.savedRotation=new i.Vector3,this.savedPosition=new i.Vector3,this.polyfillObject=new i.Object3D,this.polyfillControls=new s(this.polyfillObject),this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix(),this.savedPose={position:new i.Vector3,rotation:new i.Euler},this.el.sceneEl.is("vr-mode")&&this.onEnterVR()},update:function(e){var t=this.data;t.enabled!==e.enabled&&this.updateGrabCursor(t.enabled),!e||t.hmdEnabled||e.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0)),e&&!t.pointerLockEnabled!==e.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(e){var t=this.data;t.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=a(this.onMouseDown,this),this.onMouseMove=a(this.onMouseMove,this),this.onMouseUp=a(this.onMouseUp,this),this.onTouchStart=a(this.onTouchStart,this),this.onTouchMove=a(this.onTouchMove,this),this.onTouchEnd=a(this.onTouchEnd,this),this.onEnterVR=a(this.onEnterVR,this),this.onExitVR=a(this.onExitVR,this),this.onPointerLockChange=a(this.onPointerLockChange,this),this.onPointerLockError=a(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new i.Object3D,this.yawObject=new i.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var e=this.el.sceneEl,t=e.canvas;t?(t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),e.addEventListener("enter-vr",this.onEnterVR),e.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):e.addEventListener("render-target-loaded",a(this.addEventListeners,this))},removeEventListeners:function(){var e=this.el.sceneEl,t=e&&e.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("enter-vr",this.onEnterVR),e.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var e=new i.Matrix4;return function(){var t,n=this.hmdEuler,r=this.el.object3D,i=this.pitchObject,o=this.yawObject,a=this.el.sceneEl;a.is("vr-mode")&&a.hasWebXR?(t=a.renderer.vr.getCameraPose(),t&&(e.elements=t.poseModelMatrix,e.decompose(r.position,r.rotation,r.scale))):r.updateMatrix(),a.is("vr-mode")&&a.checkHeadsetConnected()||(this.polyfillControls.update(),n.setFromQuaternion(this.polyfillObject.quaternion,"YXZ"),r.rotation.x=n.x+i.rotation.x,r.rotation.y=n.y+o.rotation.y)}}(),onMouseMove:function(e){var t,n,r,i=this.pitchObject,o=this.previousMouseEvent,a=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(n=e.movementX||e.mozMovementX||0,r=e.movementY||e.mozMovementY||0):(n=e.screenX-o.screenX,r=e.screenY-o.screenY),this.previousMouseEvent=e,t=this.data.reverseMouseDrag?1:-1,a.rotation.y+=.002*n*t,i.rotation.x+=.002*r*t,i.rotation.x=Math.max(-c,Math.min(c,i.rotation.x)))},onMouseDown:function(e){if(this.data.enabled&&0===e.button){var t=this.el.sceneEl,n=t&&t.canvas;this.mouseDown=!0,this.previousMouseEvent=e,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(n.requestPointerLock?n.requestPointerLock():n.mozRequestPointerLock&&n.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(e){1===e.touches.length&&this.data.touchEnabled&&(this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(e){var t,n,r=this.el.sceneEl.canvas,i=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(n=2*Math.PI*(e.touches[0].pageX-this.touchStart.x)/r.clientWidth,t=this.data.reverseTouchDrag?1:-1,i.rotation.y-=.5*n*t,this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.updateMatrix())},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0))},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(e){var t=this.el.sceneEl;function n(){t.canvas.classList.add("a-grab-cursor")}function r(){t.canvas.classList.remove("a-grab-cursor")}t.canvas?e?n():r():e?t.addEventListener("render-target-loaded",n):t.addEventListener("render-target-loaded",r)},saveCameraPose:function(){var e=this.el;this.savedPose.position.copy(e.object3D.position),this.savedPose.rotation.copy(e.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var e=this.el,t=this.savedPose;this.hasSavedPose&&(e.object3D.position.copy(t.position),e.object3D.rotation.copy(t.rotation),this.hasSavedPose=!1)}})},{"../core/component":103,"../lib/three":151,"../utils":176,"../utils/":176}],66:[function(e,t,n){var r=e("../utils/"),i=e("../core/component"),o=e("../lib/three"),a=e("../core/shader"),s=r.debug("components:material:error"),c=i.registerComponent,u=a.shaders,l=a.shaderNames;function h(e){switch(e){case"back":return o.BackSide;case"double":return o.DoubleSide;default:return o.FrontSide}}function d(e){switch(e){case"face":return o.FaceColors;case"vertex":return o.VertexColors;default:return o.NoColors}}function p(e){switch(e){case"none":return o.NoBlending;case"additive":return o.AdditiveBlending;case"subtractive":return o.SubtractiveBlending;case"multiply":return o.MultiplyBlending;default:return o.NormalBlending}}function f(e,t){e.dispose(),t.unregisterMaterial(e)}t.exports.Component=c("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:l,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]}},init:function(){this.material=null},update:function(e){var t=this.data;this.shader&&t.shader===e.shader||this.updateShader(t.shader),this.shader.update(this.data),this.updateMaterial(e)},updateSchema:function(e){var t,n,r,i;n=e&&e.shader,t=this.oldData&&this.oldData.shader,i=n||t,r=u[i]&&u[i].schema,r||s("Unknown shader schema "+i),t&&n===t||(this.extendSchema(r),this.updateBehavior())},updateBehavior:function(){var e,t,n=this.el.sceneEl,r=this.schema,i=this;function o(e,n){var r;for(r in t)t[r]=e;i.shader.update(t)}for(e in this.tick=void 0,t={},r)"time"===r[e].type&&(this.tick=o,t[e]=!0);n&&(this.tick?n.addBehavior(this):n.removeBehavior(this))},updateShader:function(e){var t,n=this.data,r=u[e]&&u[e].Shader;if(!r)throw new Error("Unknown shader "+e);t=this.shader=new r,t.el=this.el,t.init(n),this.setMaterial(t.material),this.updateSchema(n)},updateMaterial:function(e){var t,n=this.data,r=this.material;for(t in r.alphaTest=n.alphaTest,r.depthTest=!1!==n.depthTest,r.depthWrite=!1!==n.depthWrite,r.opacity=n.opacity,r.flatShading=n.flatShading,r.side=h(n.side),r.transparent=!1!==n.transparent||n.opacity<1,r.vertexColors=d(n.vertexColors),r.visible=n.visible,r.blending=p(n.blending),e)break;!t||e.alphaTest===n.alphaTest&&e.side===n.side&&e.vertexColors===n.vertexColors||(r.needsUpdate=!0)},remove:function(){var e=new o.MeshBasicMaterial,t=this.material,n=this.el.getObject3D("mesh");n&&(n.material=e),f(t,this.system)},setMaterial:function(e){var t,n=this.el,r=this.system;this.material&&f(this.material,r),this.material=e,r.registerMaterial(e),t=n.getObject3D("mesh"),t?t.material=e:n.addEventListener("object3dset",function t(r){"mesh"===r.detail.type&&r.target===n&&(n.getObject3D("mesh").material=e,n.removeEventListener("object3dset",t))})}})},{"../core/component":103,"../core/shader":113,"../lib/three":151,"../utils/":176}],67:[function(e,t,n){var r=e("../utils/debug"),i=e("../core/component").registerComponent,o=e("../lib/three"),a=r("components:obj-model:warn");t.exports.Component=i("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var e=this;this.model=null,this.objLoader=new o.OBJLoader,this.mtlLoader=new o.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(t){e.model&&"material"===t.detail.name&&e.applyMaterial()})},update:function(){var e=this.data;e.obj&&(this.resetMesh(),this.loadObj(e.obj,e.mtl))},remove:function(){this.model&&this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(e,t){var n=this,r=this.el,i=this.mtlLoader,o=this.objLoader,s=this.el.sceneEl.systems.renderer,c=t.substr(0,t.lastIndexOf("/")+1);if(t)return r.hasAttribute("material")&&a("Material component properties are ignored when a .MTL is provided"),i.setResourcePath(c),void i.load(t,function(t){t.preload(),o.setMaterials(t),o.load(e,function(e){n.model=e,n.model.traverse(function(e){if(e.isMesh){var t=e.material;t.color&&s.applyColorCorrection(t.color),t.map&&s.applyColorCorrection(t.map),t.emissive&&s.applyColorCorrection(t.emissive),t.emissiveMap&&s.applyColorCorrection(t.emissiveMap)}}),r.setObject3D("mesh",e),r.emit("model-loaded",{format:"obj",model:e})})});o.load(e,function(e){n.model=e,n.applyMaterial(),r.setObject3D("mesh",e),r.emit("model-loaded",{format:"obj",model:e})})},applyMaterial:function(){var e=this.el.components.material;e&&this.model.traverse(function(t){t instanceof o.Mesh&&(t.material=e.material)})}})},{"../core/component":103,"../lib/three":151,"../utils/debug":172}],68:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent,u="Oculus Go",l="https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf";t.exports.Component=r("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,u,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:u,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",l)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.trigger=n.getObjectByName("oculus_go_button_trigger"),t.trackpad=n.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){s(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes;if(n&&n[e]){var r,i;switch(t){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor;break;default:r=this.data.buttonColor}i=n[e],i.material.color.set(r),this.rendererSystem.applyColorCorrection(i.material.color)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],69:[function(e,t,n){var r=e("../utils/bind"),i=e("../core/component").registerComponent,o=e("../lib/three"),a=e("../utils/tracked-controls"),s=a.checkControllerPresentAndSetup,c=a.emitIfAxesChanged,u=a.onButtonEvent,l="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",h={left:l+"left.gltf",right:l+"right.gltf"},d="Oculus Touch",p=new o.Vector3(0,0,-.053),f={left:{origin:{x:.008,y:-.004,z:0},direction:{x:0,y:-.8,z:-1}},right:{origin:{x:-.008,y:-.004,z:0},direction:{x:0,y:-.8,z:-1}}};t.exports.Component=i("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var e=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(t){u(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){u(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchStart=function(t){u(t.detail.id,"touchstart",e,e.data.hand)},this.onButtonTouchEnd=function(t){u(t.detail.id,"touchend",e,e.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){s(this,d,{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(){var e=this.data;e.model&&this.el.setAttribute("gltf-model","url("+h[e.hand]+")")},injectTrackedControls:function(){var e=this.data;this.el.setAttribute("tracked-controls",{id:"right"===e.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,hand:e.hand,orientationOffset:e.orientationOffset}),this.loadModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping[this.data.hand].buttons[e.detail.id],r=this.buttonMeshes;n&&("trigger"!==n&&"grip"!==n||(t=e.detail.state.value),r&&("trigger"===n&&r.trigger&&(r.trigger.rotation.x=this.originalXRotationTrigger-t*(Math.PI/26)),"grip"===n&&r.grip&&(r.grip.position.x=this.originalXPositionGrip+("left"===this.data.hand?-1:1)*t*.004)),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t,n=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.grip=n.getObjectByName("buttonHand"),this.originalXPositionGrip=t.grip.position.x,t.thumbstick=n.getObjectByName("stick"),t.trigger=n.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=t.trigger.rotation.x,t.xbutton=n.getObjectByName("buttonX"),t.abutton=n.getObjectByName("buttonA"),t.ybutton=n.getObjectByName("buttonY"),t.bbutton=n.getObjectByName("buttonB"),n.position.copy(p),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:f[this.data.hand]}))},onAxisMoved:function(e){c(this,this.mapping[this.data.hand].axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n,r="up"===t||"touchend"===t?this.data.buttonColor:"touchstart"===t?this.data.buttonTouchColor:this.data.buttonHighlightColor,i=this.buttonMeshes;this.data.model&&i&&i[e]&&(n=i[e],n.material.color.set(r),this.rendererSystem.applyColorCorrection(n.material.color))}})},{"../core/component":103,"../lib/three":151,"../utils/bind":170,"../utils/tracked-controls":184}],70:[function(e,t,n){var r=e("../core/component").registerComponent;t.exports.Component=r("position",{schema:{type:"vec3"},update:function(){var e=this.el.object3D,t=this.data;e.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},{"../core/component":103}],71:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../lib/three"),o=e("../utils/"),a=o.debug("components:raycaster:warn"),s=/^[\w\s-.,[\]#]*$/,c={childList:!0,attributes:!0,subtree:!0},u={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared"};function l(e,t){var n;for(e.length=t.length,n=0;n<t.length;n++)e[n]=t[n]}t.exports.Component=r("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new i.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new i.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new i.Vector3,this.otherLineEndVec3=new i.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(e){var t=this.data,n=this.el,r=this.raycaster;r.far=t.far,r.near=t.near,!t.showLine||t.far===e.far&&t.origin===e.origin&&t.direction===e.direction&&e.showLine||(this.unitLineEndVec3.copy(t.origin).add(t.direction).normalize(),this.drawLine()),!t.showLine&&e.showLine&&n.removeAttribute("line"),t.objects===e.objects||s.test(t.objects)||a('[raycaster] Selector "'+t.objects+'" may not update automatically with DOM changes.'),t.objects||a('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),t.autoRefresh!==e.autoRefresh&&n.isPlaying&&(t.autoRefresh?this.addEventListeners():this.removeEventListeners()),e.enabled&&!t.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,c),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var e,t=this.data;e=t.objects?this.el.sceneEl.querySelectorAll(t.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(e),this.dirty=!1},tick:function(e){var t=this.data,n=this.prevCheckTime;t.enabled&&(n&&e-n<t.interval||(this.prevCheckTime=e,this.checkIntersections()))},checkIntersections:function(){var e,t,n=this.clearedIntersectedEls,r=this.el,i=this.data,o=this.intersectedEls,a=this.intersections,s=this.newIntersectedEls,c=this.newIntersections,h=this.prevIntersectedEls,d=this.rawIntersections;for(this.dirty&&this.refreshObjects(),l(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),d.length=0,this.raycaster.intersectObjects(this.objects,!0,d),a.length=0,o.length=0,e=0;e<d.length;e++)t=d[e],i.showLine&&t.object===r.getObject3D("line")||t.object.el&&(a.push(t),o.push(t.object.el));for(c.length=0,s.length=0,e=0;e<a.length;e++)-1===h.indexOf(a[e].object.el)&&(c.push(a[e]),s.push(a[e].object.el));for(n.length=0,e=0;e<h.length;e++)-1===o.indexOf(h[e])&&(h[e].emit(u.INTERSECT_CLEAR,this.intersectedClearedDetail),n.push(h[e]));for(n.length&&r.emit(u.INTERSECTION_CLEAR,this.intersectionClearedDetail),e=0;e<s.length;e++)s[e].emit(u.INTERSECT,this.intersectedDetail);c.length&&(this.intersectionDetail.els=s,this.intersectionDetail.intersections=c,r.emit(u.INTERSECTION,this.intersectionDetail)),setTimeout(this.updateLine)},updateLine:function(){var e,t=this.el,n=this.intersections;this.data.showLine&&(n.length&&(e=n[0].object.el===t&&n[1]?n[1].distance:n[0].distance),this.drawLine(e))},getIntersection:function(e){var t,n;for(t=0;t<this.intersections.length;t++)if(n=this.intersections[t],n.object.el===e)return n;return null},updateOriginDirection:function(){var e=new i.Vector3,t=new i.Vector3;return function(){var n=this.el,r=this.data;r.useWorldCoordinates?this.raycaster.set(r.origin,r.direction):(n.object3D.getWorldPosition(t),0===r.origin.x&&0===r.origin.y&&0===r.origin.z||(t=n.object3D.localToWorld(t.copy(r.origin))),e.copy(r.direction).transformDirection(n.object3D.matrixWorld).normalize(),this.raycaster.set(t,e))}}(),drawLine:function(e){var t,n=this.data,r=this.el;t=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===e&&(e=n.far===1/0?1e3:n.far),this.lineData.start=n.origin,this.lineData.end=t.copy(this.unitLineEndVec3).multiplyScalar(e),r.setAttribute("line",this.lineData)},flattenObject3DMaps:function(e){var t,n,r=this.objects;for(r.length=0,n=0;n<e.length;n++)if(e[n].isEntity&&e[n].object3D)for(t in e[n].object3DMap)r.push(e[n].getObject3D(t));return r},clearAllIntersections:function(){var e;for(e=0;e<this.intersectedEls.length;e++)this.intersectedEls[e].emit(u.INTERSECT_CLEAR,this.intersectedClearedDetail);l(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(u.INTERSECTION_CLEAR,this.intersectionClearedDetail)}})},{"../core/component":103,"../lib/three":151,"../utils/":176}],72:[function(e,t,n){var r=e("../lib/three").Math.degToRad,i=e("../core/component").registerComponent;t.exports.Component=i("rotation",{schema:{type:"vec3"},update:function(){var e=this.data,t=this.el.object3D;t.rotation.set(r(e.x),r(e.y),r(e.z)),t.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},{"../core/component":103,"../lib/three":151}],73:[function(e,t,n){var r=e("../core/component").registerComponent,i=1e-5;t.exports.Component=r("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var e=this.data,t=this.el.object3D,n=0===e.x?i:e.x,r=0===e.y?i:e.y,o=0===e.z?i:e.z;t.scale.set(n,r,o)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},{"../core/component":103}],74:[function(e,t,n){var r=e("../../core/component").registerComponent;t.exports.Component=r("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var e=this.data,t=this.el.object3D;e.transparent?t.background=null:t.background=new THREE.Color(e.color)}})},{"../../core/component":103}],75:[function(e,t,n){var r=e("../../core/component").registerComponent;t.exports.Component=r("debug",{schema:{default:!0}})},{"../../core/component":103}],76:[function(e,t,n){var r=e("../../core/component").registerComponent;t.exports.Component=r("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var e=this.el,t=e.querySelector(".a-enter-vr");!0===this.data?(t&&t.classList.add("embedded"),e.removeFullScreenStyles()):(t&&t.classList.remove("embedded"),e.addFullScreenStyles())}})},{"../../core/component":103}],77:[function(e,t,n){var r=e("../../core/component").registerComponent,i=e("../../lib/three"),o=e("../../utils/debug"),a=o("components:fog:warn");function s(e){var t;return t="exponential"===e.type?new i.FogExp2(e.color,e.density):new i.Fog(e.color,e.near,e.far),t.name=e.type,t}t.exports.Component=r("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var e=this.data,t=this.el,n=this.el.object3D.fog;if(t.isScene)return n&&e.type===n.name?void Object.keys(this.schema).forEach(function(t){var r=e[t];"color"===t&&(r=new i.Color(r)),n[t]=r}):(t.object3D.fog=s(e),void t.systems.material.updateMaterials());a("Fog component can only be applied to <a-scene>")},remove:function(){var e=this.el.object3D.fog;e&&(e.far=0,e.near=.1)}})},{"../../core/component":103,"../../lib/three":151,"../../utils/debug":172}],78:[function(e,t,n){(function(n){var r=e("../../constants").AFRAME_INJECTED,i=e("../../../package"),o=e("../../core/component").registerComponent,a=e("../../utils/");function s(e){var t=e.split(".");return t[2]="x",t.join(".")}var c="https://aframe.io/aframe-inspector/dist/aframe-inspector.js",u="https://unpkg.com/aframe-inspector@"+s(i.version)+"/dist/aframe-inspector.min.js",l="dev"===n.env.INSPECTOR_VERSION?c:u,h="Loading Inspector",d="Error loading Inspector";t.exports.Component=o("inspector",{schema:{url:{default:l}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var e;this.firstPlay&&(e=a.getUrlParameter("inspector"),"false"!==e&&e&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var e='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=h+e},remove:function(){this.removeEventListeners()},onKeydown:function(e){var t=73===e.keyCode&&e.ctrlKey&&e.altKey;t&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(e){"INJECT_AFRAME_INSPECTOR"===e.data&&this.openInspector()},openInspector:function(e){var t,n=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(e):(this.showLoader(),t=document.createElement("script"),t.src=this.data.url,t.setAttribute("data-name","aframe-inspector"),t.setAttribute(r,""),t.onload=function(){AFRAME.INSPECTOR.open(e),n.hideLoader(),n.removeEventListeners()},t.onerror=function(){n.loadingMessageEl.innerHTML=d},document.head.appendChild(t),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,e("_process"))},{"../../../package":51,"../../constants":95,"../../core/component":103,"../../utils/":176,_process:32}],79:[function(e,t,n){var r=e("../../core/component").registerComponent,i=e("../../utils/").shouldCaptureKeyEvent;t.exports.Component=r("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(e){var t=this.data;this.enterVREnabled=t.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(e){var t=this.el;i(e)&&(this.enterVREnabled&&70===e.keyCode&&t.enterVR(),this.enterVREnabled&&27===e.keyCode&&t.exitVR())}})},{"../../core/component":103,"../../utils/":176}],80:[function(e,t,n){var r=e("../../utils/debug"),i=e("../../core/component").registerComponent,o=r("components:pool:warn");t.exports.Component=i("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var e;for(this.availableEls=[],this.usedEls=[],this.data.mixin||o("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||o("Container "+this.data.container+" not found.")),this.container=this.container||this.el,e=0;e<this.data.size;++e)this.createEntity()},update:function(e){var t=this.data;e.mixin===t.mixin&&e.size===t.size||this.initPool()},createEntity:function(){var e;e=document.createElement("a-entity"),e.play=this.wrapPlay(e.play),e.setAttribute("mixin",this.data.mixin),e.object3D.visible=!1,e.pause(),this.container.appendChild(e),this.availableEls.push(e)},wrapPlay:function(e){var t=this.usedEls;return function(){-1!==t.indexOf(this)&&e.call(this)}},requestEntity:function(){var e;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void o("Requested entity from empty pool: "+this.attrName);o("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return e=this.availableEls.shift(),this.usedEls.push(e),e.object3D.visible=!0,e},returnEntity:function(e){var t=this.usedEls.indexOf(e);if(-1!==t)return this.usedEls.splice(t,1),this.availableEls.push(e),e.object3D.visible=!1,e.pause(),e;o("The returned entity was not previously pooled from "+this.attrName)}})},{"../../core/component":103,"../../utils/debug":172}],81:[function(e,t,n){var r=e("../../core/component").registerComponent,i=e("../../lib/three"),o=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),a=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join("\n");t.exports.Component=r("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var e=this.el,t=this;function n(){var n=e.renderer.getContext();n&&(t.cubeMapSize=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),t.material=new i.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:o,fragmentShader:a,side:i.DoubleSide}),t.quad=new i.Mesh(new i.PlaneBufferGeometry(1,1),t.material),t.quad.visible=!1,t.camera=new i.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),t.canvas=document.createElement("canvas"),t.ctx=t.canvas.getContext("2d"),e.object3D.add(t.quad),t.onKeyDown=t.onKeyDown.bind(t))}e.renderer?n():e.addEventListener("render-target-loaded",n)},getRenderTarget:function(e,t){return new i.WebGLRenderTarget(e,t,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,wrapS:i.ClampToEdgeWrapping,wrapT:i.ClampToEdgeWrapping,format:i.RGBAFormat,type:i.UnsignedByteType})},resize:function(e,t){this.quad.scale.set(e,t,1),this.camera.left=-1*e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix(),this.canvas.width=e,this.canvas.height=t},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(e){var t=83===e.keyCode&&e.ctrlKey&&e.altKey;if(this.data&&t){var n=e.shiftKey?"equirectangular":"perspective";this.capture(n)}},setCapture:function(e){var t,n,r,o=this.el;return"perspective"===e?(this.quad.visible=!1,n=this.data.camera&&this.data.camera.components.camera.camera||o.camera,t={width:this.data.width,height:this.data.height}):(n=this.camera,r=new i.CubeCamera(o.camera.near,o.camera.far,Math.min(this.cubeMapSize,2048)),o.camera.getWorldPosition(r.position),o.camera.getWorldQuaternion(r.quaternion),r.update(o.renderer,o.object3D),this.quad.material.uniforms.map.value=r.renderTarget.texture,t={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:n,size:t,projection:e}},capture:function(e){var t,n=this.el.renderer.vr.enabled,r=this.el.renderer;r.vr.enabled=!1,t=this.setCapture(e),this.renderCapture(t.camera,t.size,t.projection),this.saveCapture(),r.vr.enabled=n},getCanvas:function(e){var t=this.setCapture(e);return this.renderCapture(t.camera,t.size,t.projection),this.canvas},renderCapture:function(e,t,n){var r,i,o,a=this.el.renderer.autoClear,s=this.el,c=s.renderer;i=this.getRenderTarget(t.width,t.height),o=new Uint8Array(4*t.width*t.height),this.resize(t.width,t.height),c.autoClear=!0,c.render(s.object3D,e,i,!0),c.autoClear=a,c.readRenderTargetPixels(i,0,0,t.width,t.height,o),"perspective"===n&&(o=this.flipPixelsVertically(o,t.width,t.height)),r=new ImageData(new Uint8ClampedArray(o),t.width,t.height),this.quad.visible=!1,this.ctx.putImageData(r,0,0)},flipPixelsVertically:function(e,t,n){for(var r=e.slice(0),i=0;i<t;++i)for(var o=0;o<n;++o)r[4*i+o*t*4]=e[4*i+(n-o)*t*4],r[4*i+1+o*t*4]=e[4*i+1+(n-o)*t*4],r[4*i+2+o*t*4]=e[4*i+2+(n-o)*t*4],r[4*i+3+o*t*4]=e[4*i+3+(n-o)*t*4];return r},saveCapture:function(){this.canvas.toBlob(function(e){var t="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",n=document.createElement("a"),r=URL.createObjectURL(e);n.href=r,n.setAttribute("download",t),n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n)},1)},"image/png")}})},{"../../core/component":103,"../../lib/three":151}],82:[function(e,t,n){var r=e("../../core/component").registerComponent,i=e("../../../vendor/rStats"),o=e("../../utils");e("../../../vendor/rStats.extras"),e("../../lib/rStatsAframe");var a=window.aframeStats,s=o.bind,c="a-hidden",u=window.threeStats;function l(e){var t=new u(e.renderer),n=new a(e),r=e.isMobile?[]:[t,n];return new i({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:r})}t.exports.Component=r("stats",{schema:{default:!0},init:function(){var e=this.el;"false"!==o.getUrlParameter("stats")&&(this.stats=l(e),this.statsEl=document.querySelector(".rs-base"),this.hideBound=s(this.hide,this),this.showBound=s(this.show,this),e.addEventListener("enter-vr",this.hideBound),e.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var e=this.stats;e&&(e("rAF").tick(),e("FPS").frame(),e().update())},hide:function(){this.statsEl.classList.add(c)},show:function(){this.statsEl.classList.remove(c)}})},{"../../../vendor/rStats":186,"../../../vendor/rStats.extras":185,"../../core/component":103,"../../lib/rStatsAframe":150,"../../utils":176}],83:[function(e,t,n){var r=e("../../core/component").registerComponent,i=e("../../constants/"),o=e("../../utils/"),a=o.bind,s="a-enter-vr",c="a-enter-vr-button",u="a-hidden",l="a-orientation-modal";function h(e){var t,n;return n=document.createElement("div"),n.classList.add(s),n.setAttribute(i.AFRAME_INJECTED,""),t=document.createElement("button"),t.className=c,t.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),t.setAttribute(i.AFRAME_INJECTED,""),n.appendChild(t),t.addEventListener("click",function(t){e(),t.stopPropagation()}),n}function d(e){var t=document.createElement("div");t.className=l,t.classList.add(u),t.setAttribute(i.AFRAME_INJECTED,"");var n=document.createElement("button");return n.setAttribute(i.AFRAME_INJECTED,""),n.innerHTML="Exit VR",n.addEventListener("click",e),t.appendChild(n),t}t.exports.Component=r("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""}},init:function(){var e=this,t=this.el;"false"!==o.getUrlParameter("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,this.bindMethods(),t.addEventListener("enter-vr",this.updateEnterVRInterface),t.addEventListener("exit-vr",this.updateEnterVRInterface),window.addEventListener("message",function(t){"loaderReady"===t.data.type&&(e.insideLoader=!0,e.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=a(this.onEnterVRButtonClick,this),this.onModalClick=a(this.onModalClick,this),this.toggleOrientationModalIfNeeded=a(this.toggleOrientationModalIfNeeded,this),this.updateEnterVRInterface=a(this.updateEnterVRInterface,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},update:function(){var e=this.data,t=this.el;if(!e.enabled||this.insideLoader||"false"===o.getUrlParameter("ui"))return this.remove();this.enterVREl||this.orientationModalEl||(e.enterVRButton?(this.enterVREl=document.querySelector(e.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=h(this.onEnterVRButtonClick),t.appendChild(this.enterVREl)),this.orientationModalEl=d(this.onModalClick),t.appendChild(this.orientationModalEl),this.updateEnterVRInterface())},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var e=this.el;this.enterVREl&&(e.is("vr-mode")?this.enterVREl.classList.add(u):this.enterVREl.classList.remove(u))},toggleOrientationModalIfNeeded:function(){var e=this.el,t=this.orientationModalEl;t&&e.isMobile&&(!o.device.isLandscape()&&e.is("vr-mode")?t.classList.remove(u):t.classList.add(u))}})},{"../../constants/":95,"../../core/component":103,"../../utils/":176}],84:[function(e,t,n){var r=e("../core/component"),i=e("../lib/three"),o=e("../utils/bind"),a=r.registerComponent;t.exports.Component=a("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=o(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var e=this.data;this.updateDescendants(e.cast,e.receive)},remove:function(){var e=this.el;e.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(e,t){var n=this.el.sceneEl;this.el.object3D.traverse(function(r){if(r instanceof i.Mesh&&(r.castShadow=e,r.receiveShadow=t,n.hasLoaded&&r.material))for(var o=Array.isArray(r.material)?r.material:[r.material],a=0;a<o.length;a++)o[a].needsUpdate=!0})}})},{"../core/component":103,"../lib/three":151,"../utils/bind":170}],85:[function(t,n,r){var i=t("../core/component").registerComponent,o=t("../utils/debug"),a=t("../lib/three"),s=o("components:sound:warn");n.exports.Component=i("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var e=this;this.listener=null,this.audioLoader=new a.AudioLoader,this.pool=new a.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){e.playSound()}},update:function(e){var t,n,r=this.data,i=r.src!==e.src;if(i){if(!r.src)return;this.setupSound()}for(t=0;t<this.pool.children.length;t++)n=this.pool.children[t],r.positional&&(n.setDistanceModel(r.distanceModel),n.setMaxDistance(r.maxDistance),n.setRefDistance(r.refDistance),n.setRolloffFactor(r.rolloffFactor)),n.setLoop(r.loop),n.setVolume(r.volume),n.isPaused=!1;if(r.on!==e.on&&this.updateEventListener(e.on),i){var o=this;this.loaded=!1,this.audioLoader.load(r.src,function(e){for(t=0;t<o.pool.children.length;t++)n=o.pool.children[t],n.setBuffer(e);o.loaded=!0,a.Cache.remove(r.src),(o.data.autoplay||o.mustPlay)&&o.playSound(),o.el.emit("sound-loaded",o.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var t,n;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(t=0;t<this.pool.children.length;t++)n=this.pool.children[t],n.disconnect()}catch(e){s("Audio source not properly disconnected")}},updateEventListener:function(e){var t=this.el;e&&t.removeEventListener(e,this.playSoundBound),t.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var e,t,n=this.el,r=n.sceneEl,i=this;this.pool.children.length>0&&(this.stopSound(),n.removeObject3D("sound"));var o=this.listener=r.audioListener||new a.AudioListener;for(r.audioListener=o,r.camera&&r.camera.add(o),r.addEventListener("camera-set-active",function(e){e.detail.cameraEl.getObject3D("camera").add(o)}),this.pool=new a.Group,e=0;e<this.data.poolSize;e++)t=this.data.positional?new a.PositionalAudio(o):new a.Audio(o),this.pool.add(t);for(n.setObject3D(this.attrName,this.pool),e=0;e<this.pool.children.length;e++)t=this.pool.children[e],t.onEnded=function(){this.isPlaying=!1,i.el.emit("sound-ended",i.evtDetail,!1)}},pauseSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++)t=this.pool.children[e],t.source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())},playSound:function(e){var t,n,r;if(!this.loaded)return s("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);for(t=!1,this.isPlaying=!0,n=0;n<this.pool.children.length;n++)r=this.pool.children[n],r.isPlaying||!r.buffer||t||(e&&e(r),r.play(),r.isPaused=!1,t=!0);t?this.mustPlay=!1:s("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var e,t;for(this.isPlaying=!1,e=0;e<this.pool.children.length;e++){if(t=this.pool.children[e],!t.source||!t.source.buffer)return;t.stop()}}})},{"../core/component":103,"../lib/three":151,"../utils/debug":172}],86:[function(e,t,n){var r=e("three-bmfont-text"),i=e("load-bmfont"),o=e("../core/component").registerComponent,a=e("../core/shader"),s=e("../lib/three"),c=e("../utils/"),u=c.debug("components:text:error"),l=a.shaders,h=c.debug("components:text:warn"),d=1,p=16,f="https://cdn.aframe.io/fonts/",m={aileronsemibold:f+"Aileron-Semibold.fnt",dejavu:f+"DejaVu-sdf.fnt",exo2bold:f+"Exo2Bold.fnt",exo2semibold:f+"Exo2SemiBold.fnt",kelsonsans:f+"KelsonSans.fnt",monoid:f+"Monoid.fnt",mozillavr:f+"mozillavr.fnt",roboto:f+"Roboto-msdf.json",sourcecodepro:f+"SourceCodePro.fnt"},v=["roboto"],g="roboto";t.exports.FONTS=m;var y=new S,b={},A={},w=/^\w+:/;function x(e){switch(e){case"back":return s.FrontSide;case"double":return s.DoubleSide;default:return s.BackSide}}function E(e,t){return new Promise(function(n,r){i(e,function(i,o){if(i)return u("Error loading font",e),void r(i);e.indexOf("/Roboto-msdf.json")>=0&&(t=30),t&&o.chars.map(function(e){e.yoffset+=t}),n(o)})})}function _(e){return new Promise(function(t,n){(new s.ImageLoader).load(e,function(e){t(e)},void 0,function(){u("Error loading font image",e),n(null)})})}function M(e,t,n){var r,i;return i=new l[t].Shader,i.el=e,i.init(n),i.update(n),r=i.material,r.transparent=n.transparent,{material:r,shader:i}}function T(e,t,n){return e||(.5+t)*n}function C(e){var t=0,n=0,r=0;return e.chars.map(function(e){t+=e.xadvance,e.id>=48&&e.id<=57&&(r++,n+=e.xadvance)}),r?n/r:t/e.chars.length}function S(){var e=this.cache={};this.get=function(t,n){return t in e?e[t]:(e[t]=n(),e[t])}}t.exports.Component=o("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:g},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:l},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=r(),this.createOrUpdateMaterial(),this.mesh=new s.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(e){var t=this.data,n=this.currentFont;A[t.font]?this.texture=A[t.font]:(this.texture=A[t.font]=new s.Texture,this.texture.anisotropy=p),this.createOrUpdateMaterial(),e.font===t.font?n&&(this.updateGeometry(this.geometry,n),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var e,t,n,r=this.data,i=this.material,o=this.shaderData;if(n=r.shader,-1!==v.indexOf(r.font)||r.font.indexOf("-msdf.")>=0?n="msdf":r.font in m&&-1===v.indexOf(r.font)&&(n="sdf"),e=(this.shaderObject&&this.shaderObject.name)!==n,o.alphaTest=r.alphaTest,o.color=r.color,o.map=this.texture,o.opacity=r.opacity,o.side=x(r.side),o.transparent=r.transparent,o.negate=r.negate,!e)return this.shaderObject.update(o),i.transparent=o.transparent,void(i.side=o.side);t=M(this.el,n,o),this.material=t.material,this.shaderObject=t.shader,this.material.side=o.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var e,t=this.data,n=this.el,r=this.geometry,i=this;t.font||h("No font specified. Using the default font."),this.mesh.visible=!1,e=this.lookupFont(t.font||g)||t.font,y.get(e,function(){return E(e,t.yOffset)}).then(function(o){var a;if(1!==o.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");b[e]||(o.widthFactor=b[o]=C(o)),i.updateGeometry(r,o),i.currentFont=o,i.updateLayout(),a=i.getFontImageSrc(),y.get(a,function(){return _(a)}).then(function(e){var r=i.texture;r.image=e,r.needsUpdate=!0,A[t.font]=r,i.texture=r,i.mesh.visible=!0,n.emit("textfontset",{font:t.font,fontObj:o})}).catch(function(e){u(e.message),u(e.stack)})}).catch(function(e){u(e.message),u(e.stack)})},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var e=this.lookupFont(this.data.font||g)||this.data.font,t=this.currentFont.pages[0];return t.match(w)&&0!==t.indexOf("http")?e.replace(/(\.fnt)|(\.json)/,".png"):s.LoaderUtils.extractUrlBase(e)+t},updateLayout:function(){var e,t,n,r,i,o,a,s,c,u,l=this.el,h=this.data,p=this.geometry,f=this.mesh;if(p.layout){if(n=l.getAttribute("geometry"),s=h.width||n&&n.width||d,o=T(h.wrapPixels,h.wrapCount,this.currentFont.widthFactor),a=s/o,i=p.layout,r=a*(i.height+i.descender),n&&"plane"===n.primitive&&(n.width||l.setAttribute("geometry","width",s),n.height||l.setAttribute("geometry","height",r)),e="align"===h.anchor?h.align:h.anchor,"left"===e)c=0;else if("right"===e)c=-1*i.width;else{if("center"!==e)throw new TypeError("Invalid text.anchor property value",e);c=-1*i.width/2}if(t=h.baseline,"bottom"===t)u=0;else if("top"===t)u=-1*i.height+i.ascender;else{if("center"!==t)throw new TypeError("Invalid text.baseline property value",t);u=-1*i.height/2}f.position.x=c*a+h.xOffset,f.position.y=u*a,f.position.z=h.zOffset,f.scale.set(a,-1*a,a)}},lookupFont:function(e){return m[e]},updateGeometry:function(){var e={},t={},n=/\\n/g,r=/\\t/g;return function(i,o){var a=this.data;t.font=o,t.lineHeight=a.lineHeight&&isFinite(a.lineHeight)?a.lineHeight:o.common.lineHeight,t.text=a.value.toString().replace(n,"\n").replace(r,"\t"),t.width=T(a.wrapPixels,a.wrapCount,o.widthFactor),i.update(c.extend(e,a,t))}}()})},{"../core/component":103,"../core/shader":113,"../lib/three":151,"../utils/":176,"load-bmfont":23,"three-bmfont-text":41}],87:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/tracked-controls"),o=e("../constants").DEFAULT_CAMERA_HEIGHT,a=e("../lib/three"),s=e("../constants").DEFAULT_HANDEDNESS,c={x:.175,y:-.3,z:-.03},u={x:0,y:0,z:-.175},l={touches:[]},h={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};t.exports.Component=r("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new a.Vector3,this.controllerQuaternion=new a.Quaternion,this.controllerEuler=new a.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(e,t){var n=this.el.getObject3D("mesh");n&&n.update&&n.update(t/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return o},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var e=this.data,t=i.findMatchingControllerWebVR(this.system.controllers,e.id,e.idPrefix,e.hand,e.controller);this.controller=t,this.el.components["tracked-controls"].controller=t,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(e){var t,n,r,i,o,a=this.controller,l=this.controllerEuler,h=this.controllerQuaternion,d=this.deltaControllerPosition;n=this.getHeadElement(),r=n.object3D,o=this.defaultUserHeight(),i=a.pose,t=(a?a.hand:void 0)||s,e.copy(r.position),d.set(c.x*("left"===t?-1:"right"===t?1:0),c.y,c.z),d.multiplyScalar(o),d.applyAxisAngle(r.up,r.rotation.y),e.add(d),d.set(u.x,u.y,u.z),d.multiplyScalar(o),i.orientation?h.fromArray(i.orientation):h.copy(r.quaternion),l.setFromQuaternion(h),l.set(l.x,l.y,0),d.applyEuler(l),e.add(d)},updatePose:function(){var e,t,n=this.controller,r=this.data,i=this.el.object3D,o=this.system.vrDisplay;n&&(e=n.pose,e.position?i.position.fromArray(e.position):r.armModel&&this.applyArmModel(i.position),e.orientation&&i.quaternion.fromArray(e.orientation),o&&e.position&&(t=this.el.sceneEl.renderer.vr.getStandingMatrix(),i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.multiplyMatrices(t,i.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale)),i.rotateX(this.data.orientationOffset.x*a.Math.DEG2RAD),i.rotateY(this.data.orientationOffset.y*a.Math.DEG2RAD),i.rotateZ(this.data.orientationOffset.z*a.Math.DEG2RAD))},updateButtons:function(){var e,t,n=this.controller;if(n){for(t=0;t<n.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),e=n.buttons[t],this.handleButton(t,e);this.handleAxes()}},handleButton:function(e,t){var n;return n=this.handlePress(e,t)|this.handleTouch(e,t)|this.handleValue(e,t),!!n&&(this.el.emit(h.BUTTONCHANGED,this.buttonEventDetails[e],!1),!0)},handleAxes:function(){var e,t=!1,n=this.controller.axes,r=this.axis,i=this.changedAxes;for(this.changedAxes.length=0,e=0;e<n.length;++e)i.push(r[e]!==n[e]),i[e]&&(t=!0);if(!t)return!1;for(this.axis.length=0,e=0;e<n.length;e++)this.axis.push(n[e]);return this.el.emit(h.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(e,t){var n,r=this.buttonStates[e];return t.pressed!==r.pressed&&(n=t.pressed?h.BUTTONDOWN:h.BUTTONUP,this.el.emit(n,this.buttonEventDetails[e],!1),r.pressed=t.pressed,!0)},handleTouch:function(e,t){var n,r=this.buttonStates[e];return t.touched!==r.touched&&(n=t.touched?h.TOUCHSTART:h.TOUCHEND,this.el.emit(n,this.buttonEventDetails[e],!1,l),r.touched=t.touched,!0)},handleValue:function(e,t){var n=this.buttonStates[e];return t.value!==n.value&&(n.value=t.value,!0)}})},{"../constants":95,"../core/component":103,"../lib/three":151,"../utils/tracked-controls":184}],88:[function(e,t,n){var r=e("../utils/tracked-controls"),i=e("../core/component").registerComponent;t.exports.Component=i("tracked-controls-webxr",{schema:{hand:{type:"string",default:""}},init:function(){this.addSessionEventListeners=this.addSessionEventListeners.bind(this),this.updateController=this.updateController.bind(this),this.emitButtonUpEvent=this.emitButtonUpEvent.bind(this),this.emitButtonDownEvent=this.emitButtonDownEvent.bind(this),this.buttonEventDetails={id:"trigger",state:{pressed:!1}}},play:function(){var e=this.el.sceneEl;this.updateController(),this.addSessionEventListeners(),e.addEventListener("enter-vr",this.addSessionEventListeners),e.addEventListener("controllersupdated",this.updateController)},pause:function(){var e=this.el.sceneEl;this.removeSessionEventListeners(),e.removeEventListener("enter-vr",this.addSessionEventListeners),e.removeEventListener("controllersupdated",this.updateController)},addSessionEventListeners:function(){var e=this.el.sceneEl;e.xrSession&&(e.xrSession.addEventListener("selectstart",this.emitButtonDownEvent),e.xrSession.addEventListener("selectend",this.emitButtonUpEvent))},removeSessionEventListeners:function(){var e=this.el.sceneEl;e.xrSession&&(e.xrSession.addEventListener("selectstart",this.emitButtonDownEvent),e.xrSession.addEventListener("selectend",this.emitButtonUpEvent))},emitButtonDownEvent:function(e){this.controller&&e.inputSource.handedness===this.data.hand&&(this.buttonEventDetails.state.pressed=!0,this.el.emit("buttondown",this.buttonEventDetails),this.el.emit("buttonchanged",this.buttonEventDetails),this.el.emit("triggerdown"))},emitButtonUpEvent:function(e){this.controller&&e.inputSource.handedness===this.data.hand&&(this.buttonEventDetails.state.pressed=!1,this.el.emit("buttonup",this.buttonEventDetails),this.el.emit("buttonchanged",this.buttonEventDetails),this.el.emit("triggerup"))},updateController:function(){this.controller=r.findMatchingControllerWebXR(this.system.controllers,this.data.hand),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var e,t=this.el.sceneEl,n=this.el.object3D;this.controller&&t.frame&&(e=t.frame.getInputPose(this.controller,t.frameOfReference),e&&(n.matrix.elements=e.targetRay.transformMatrix,n.matrix.decompose(n.position,n.rotation,n.scale)))}})},{"../core/component":103,"../utils/tracked-controls":184}],89:[function(e,t,n){var r=e("../core/component").registerComponent;t.exports.Component=r("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!0},headElement:{type:"selector"}},update:function(){var e=this.data,t=this.el;t.sceneEl.hasWebXR?t.setAttribute("tracked-controls-webxr",e):t.setAttribute("tracked-controls-webvr",e)}})},{"../core/component":103}],90:[function(e,t,n){var r=e("../core/component").registerComponent;t.exports.Component=r("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":103}],91:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent,u="https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",l="https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl",h="OpenVR ";t.exports.Component=r("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var e=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t="right"===e.hand?0:"left"===e.hand?1:2;a(this,h,{index:t})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:h,controller:"right"===t.hand?1:"left"===t.hand?0:2,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:u,mtl:l})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,n=this.mapping.buttons[e.detail.id],r=this.buttonMeshes;n&&("trigger"===n&&(t=e.detail.state.value,r&&r.trigger&&(r.trigger.rotation.x=-t*(Math.PI/12))),this.el.emit(n+"changed",e.detail.state))},onModelLoaded:function(e){var t,n=e.detail.model,r=this;this.data.model&&(t=this.buttonMeshes={},t.grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},t.menu=n.getObjectByName("menubutton"),t.system=n.getObjectByName("systembutton"),t.trackpad=n.getObjectByName("touchpad"),t.trigger=n.getObjectByName("trigger"),Object.keys(t).forEach(function(e){r.setButtonColor(e,r.data.buttonColor)}),n.position.set(0,-.015,.04))},onAxisMoved:function(e){s(this,this.mapping.axes,e)},updateModel:function(e,t){var n,r;this.data.model&&(r=-1!==t.indexOf("touch"),r||(n="up"===t?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,n)))},setButtonColor:function(e,t){var n=this.buttonMeshes,r=this.rendererSystem;if(n){if("grip"===e)return n.grip.left.material.color.set(t),n.grip.right.material.color.set(t),r.applyColorCorrection(n.grip.left.material.color),void r.applyColorCorrection(n.grip.right.material.color);n[e].material.color.set(t),r.applyColorCorrection(n[e].material.color)}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],92:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent,u="HTC Vive Focus",l="https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf";t.exports.Component=r("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trigger","trackpad"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){a(this,u,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:u,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",l)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,n=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.trigger=n.getObjectByName("BumperKey"),t.triggerPressed=n.getObjectByName("BumperKey_Press"),t.triggerPressed&&(t.triggerPressed.visible=!1),t.trackpad=n.getObjectByName("TouchPad"),t.trackpadPressed=n.getObjectByName("TouchPad_Press"),t.trackpadPressed&&(t.trackpadPressed.visible=!1))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){s(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var n=this.buttonMeshes,r=e+"Pressed";if(n&&n[e]&&n[r]){var i;switch(t){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break}i&&n[r].material.color.set(i),n[r].visible=!!i,n[e].visible=!i}}})},{"../core/component":103,"../utils/bind":170,"../utils/tracked-controls":184}],93:[function(e,t,n){var r=e("../constants").keyboardevent.KEYCODE_TO_CODE,i=e("../core/component").registerComponent,o=e("../lib/three"),a=e("../utils/"),s=a.bind,c=a.shouldCaptureKeyEvent,u=1e-5,l=.2,h=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];function d(e){var t;for(t in e)return!1;return!0}t.exports.Component=i("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new o.Vector3,this.onBlur=s(this.onBlur,this),this.onFocus=s(this.onFocus,this),this.onKeyDown=s(this.onKeyDown,this),this.onKeyUp=s(this.onKeyUp,this),this.onVisibilityChange=s(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(e,t){var n=this.data,r=this.el,i=this.velocity;(i[n.adAxis]||i[n.wsAxis]||!d(this.keys))&&(t/=1e3,this.updateVelocity(t),(i[n.adAxis]||i[n.wsAxis])&&r.object3D.position.add(this.getMovementVector(t)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(e){var t,n,r,i,o,a=this.data,s=this.keys,c=this.velocity;if(n=a.adAxis,i=a.wsAxis,e>l)return c[n]=0,void(c[i]=0);var h=Math.pow(1/this.easing,60*e);0!==c[n]&&(c[n]-=c[n]*h),0!==c[i]&&(c[i]-=c[i]*h),Math.abs(c[n])<u&&(c[n]=0),Math.abs(c[i])<u&&(c[i]=0),a.enabled&&(t=a.acceleration,a.adEnabled&&(r=a.adInverted?-1:1,(s.KeyA||s.ArrowLeft)&&(c[n]-=r*t*e),(s.KeyD||s.ArrowRight)&&(c[n]+=r*t*e)),a.wsEnabled&&(o=a.wsInverted?-1:1,(s.KeyW||s.ArrowUp)&&(c[i]-=o*t*e),(s.KeyS||s.ArrowDown)&&(c[i]+=o*t*e)))},getMovementVector:function(){var e=new o.Vector3(0,0,0),t=new o.Euler(0,0,0,"YXZ");return function(n){var r,i=this.el.getAttribute("rotation"),a=this.velocity;return e.copy(a),e.multiplyScalar(n),i?(r=this.data.fly?i.x:0,t.set(o.Math.degToRad(r),o.Math.degToRad(i.y),0),e.applyEuler(t),e):e}}(),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(e){var t;c(e)&&(t=e.code||r[e.keyCode],-1!==h.indexOf(t)&&(this.keys[t]=!0))},onKeyUp:function(e){var t;t=e.code||r[e.keyCode],delete this.keys[t]}})},{"../constants":95,"../core/component":103,"../lib/three":151,"../utils/":176}],94:[function(e,t,n){var r=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent,u=e("../utils/"),l=u.debug("components:windows-motion-controls:debug"),h=u.debug("components:windows-motion-controls:warn"),d=e("../constants").DEFAULT_HANDEDNESS,p="https://cdn.aframe.io/controllers/microsoft/",f={left:"left.glb",right:"right.glb",default:"universal.glb"},m="Spatial Controller (Spatial Interaction Source) ",v=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/;t.exports.Component=r("windows-motion-controls",{schema:{hand:{default:d},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=i(this.onModelError,this),this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this,t=this.el;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.onControllerConnected=function(){e.setModelVisibility(!0)},this.onControllerDisconnected=function(){e.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-error",this.onModelError),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-error",this.onModelError),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,m,{hand:this.data.hand,index:this.data.pair})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var e=this.createControllerModelUrl();this.loadModel(e)}else this.modelReady()},createControllerModelUrl:function(e){var t,n=this.el.components["tracked-controls"],r=n?n.controller:null,i="default",o=this.data.hand;if(r&&(o=r.hand,!e)){var a=r.id.match(v);i=a&&a[0]||i}return t=f[o]||f.default,p+i+"/"+t},injectTrackedControls:function(){var e=this.data;this.el.setAttribute("tracked-controls",{idPrefix:m,controller:e.pair,hand:e.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(e){var t=this.createControllerModelUrl(!0);e.detail.src!==t?(h("Failed to load controller model for device, attempting to load default."),this.loadModel(t)):h("Failed to load default controller model.")},loadModel:function(e){this.el.setAttribute("gltf-model","url("+e+")")},onModelLoaded:function(e){var t,n,r,i,o=this.controllerModel=e.detail.model,a=this.loadedMeshInfo;if(l("Processing model"),a.buttonMeshes={},a.axisMeshes={},o){for(t=0;t<this.mapping.buttons.length;t++)n=this.mapping.buttonMeshNames[this.mapping.buttons[t]],n?(r=o.getObjectByName(n),r?(i={index:t,value:s(r,"VALUE"),pressed:s(r,"PRESSED"),unpressed:s(r,"UNPRESSED")},i.value&&i.pressed&&i.unpressed?a.buttonMeshes[this.mapping.buttons[t]]=i:h("Missing button submesh under mesh with name: "+n+"(VALUE: "+!!i.value+", PRESSED: "+!!i.pressed+", UNPRESSED:"+!!i.unpressed+")")):h("Missing button mesh with name: "+n)):l("Skipping unknown button at index: "+t+" with mapped name: "+this.mapping.buttons[t]);for(t=0;t<this.mapping.axisMeshNames.length;t++)n=this.mapping.axisMeshNames[t],n?(r=o.getObjectByName(n),r?(i={index:t,value:s(r,"VALUE"),min:s(r,"MIN"),max:s(r,"MAX")},i.value&&i.min&&i.max?a.axisMeshes[t]=i:h("Missing axis submesh under mesh with name: "+n+"(VALUE: "+!!i.value+", MIN: "+!!i.min+", MAX:"+!!i.max+")")):h("Missing axis mesh with name: "+n)):l("Skipping unknown axis at index: "+t);this.calculateRayOriginFromMesh(o),this.setModelVisibility()}function s(e,t){for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];if(i&&i["name"]===t)return i}}l("Model load complete.")},calculateRayOriginFromMesh:function(){var e=new THREE.Quaternion;return function(t){var n;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,n=t.getObjectByName(this.mapping.pointingPoseMeshName),n){var r=t.parent;r&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=r),n.getWorldPosition(this.rayOrigin.origin),n.getWorldQuaternion(e),this.rayOrigin.direction.applyQuaternion(e),r&&t.updateMatrixWorld(!0)}else l("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var e=new THREE.Quaternion;return function(t,n){var r=this.loadedMeshInfo.axisMeshes[t];if(r){var i=r.min,o=r.max,a=r.value,s=.5*n+.5;a.setRotationFromQuaternion(e.copy(i.quaternion).slerp(o.quaternion,s)),a.position.lerpVectors(i.position,o.position,s)}}}(),lerpButtonTransform:function(){var e=new THREE.Quaternion;return function(t,n){var r=this.loadedMeshInfo.buttonMeshes[t];if(r){var i=r.unpressed,o=r.pressed,a=r.value;a.setRotationFromQuaternion(e.copy(i.quaternion).slerp(o.quaternion,n)),a.position.lerpVectors(i.position,o.position,n)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,e.detail.state.value),this.el.emit(t+"changed",e.detail.state))},onAxisMoved:function(e){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var n=0;n<t;n++)this.lerpAxisTransform(n,e.detail.axis[n]||0);s(this,this.mapping.axes,e)},setModelVisibility:function(e){var t=this.el.getObject3D("mesh");e=void 0!==e?e:this.modelVisible,this.modelVisible=e,t&&(t.visible=e)}})},{"../constants":95,"../core/component":103,"../utils/":176,"../utils/bind":170,"../utils/tracked-controls":184}],95:[function(e,t,n){t.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:e("./keyboardevent")}},{"./keyboardevent":96}],96:[function(e,t,n){t.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},{}],97:[function(e,t,n){var r=e("./a-node"),i=e("../utils/bind"),o=e("../utils/debug"),a=e("./a-register-element").registerElement,s=e("../lib/three"),c=new s.FileLoader,u=o("core:a-assets:warn");function l(e){if(e.hasAttribute("autoplay")||"auto"===e.getAttribute("preload"))return new Promise(function(t,n){if(4===e.readyState)return t();if(e.error)return n();function r(){for(var n=0,r=0;r<e.buffered.length;r++)n+=e.buffered.end(r)-e.buffered.start(r);n>=e.duration&&("VIDEO"===e.tagName&&(s.Cache.files[e.getAttribute("src")]=e),t())}e.addEventListener("loadeddata",r,!1),e.addEventListener("progress",r,!1),e.addEventListener("error",n,!1)})}function h(e){var t=d(e);return t.tagName&&"video"===t.tagName.toLowerCase()&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")),t!==e&&(e.parentNode.appendChild(t),e.parentNode.removeChild(e)),t}function d(e){var t,n;if(e.hasAttribute("crossorigin"))return e;if(n=e.getAttribute("src"),null!==n){if(-1===n.indexOf("://"))return e;if(p(n)===window.location.host)return e}return u('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',n),e.crossOrigin="anonymous",t=e.cloneNode(!0),t}function p(e){var t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0];return t.substring(0,t.indexOf(":"))}function f(e){var t=e.lastIndexOf(".");if(t>=0){var n=e.slice(t,e.length);if(".gltf"===n||".glb"===n)return"arraybuffer"}return"text"}t.exports=a("a-assets",{prototype:Object.create(r.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=c,this.timeout=null}},attachedCallback:{value:function(){var e,t,n,r,o,a,c=this,d=[];if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(o=this.querySelectorAll("img"),e=0;e<o.length;e++)r=h(o[e]),d.push(new Promise(function(t,n){s.Cache.files[o[e].getAttribute("src")]=r,r.onload=t,r.onerror=n}));for(n=this.querySelectorAll("audio, video"),e=0;e<n.length;e++)t=h(n[e]),t.src||t.srcObject||u("Audio/video asset has neither `src` nor `srcObject` attributes."),d.push(l(t));Promise.all(d).then(i(this.load,this)),a=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){c.hasLoaded||(u("Asset loading timed out in ",a,"ms"),c.emit("timeout"),c.load())},a)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){r.prototype.load.call(this,null,function(e){return e.isAssetItem&&e.hasAttribute("src")})}}})}),a("a-asset-item",{prototype:Object.create(r.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var e=this,t=this.getAttribute("src");c.setResponseType(this.getAttribute("response-type")||f(t)),c.load(t,function(t){e.data=t,setTimeout(function(){r.prototype.load.call(e)})},function(t){e.emit("progress",{loadedBytes:t.loaded,totalBytes:t.total,xhr:t})},function(t){e.emit("error",{xhr:t})})}}})}),t.exports.inferResponseType=f},{"../lib/three":151,"../utils/bind":170,"../utils/debug":172,"./a-node":101,"./a-register-element":102}],98:[function(e,t,n){var r=e("../utils/debug"),i=e("./a-register-element").registerElement,o=r("core:cubemap:warn");t.exports=i("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var e,t=this.querySelectorAll("[src]"),n=[];if(6===t.length){for(e=0;e<t.length;e++)n.push(t[e].getAttribute("src"));return n}o("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":172,"./a-register-element":102}],99:[function(e,t,n){var r,i=e("./a-node"),o=e("./component").components,a=e("./a-register-element").registerElement,s=e("../lib/three"),c=e("../utils/"),u=c.debug("core:a-entity:debug"),l=c.debug("core:a-entity:warn"),h="__",d=["position","rotation","scale","visible"],p={once:!0},f=Object.create(i.prototype,{createdCallback:{value:function(){this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new s.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}},attributeChangedCallback:{value:function(e,t,n){var r=this.components[e];r&&r.justInitialized&&""===n?delete r.justInitialized:(r||null!==n)&&this.setEntityAttribute(e,t,n)}},attachedCallback:{value:function(){var e,t=this.sceneEl,n=this;this.addToParent(),this.isScene||(t?(e=t.querySelector("a-assets"),!e||e.hasLoaded?this.load():e.addEventListener("loaded",function(){n.load()})):this.load())}},detachedCallback:{value:function(){var e;if(this.parentEl){for(e in this.components)this.removeComponent(e,!1);this.isScene||(this.removeFromParent(),i.prototype.detachedCallback.call(this),this.object3D.el=null)}}},getObject3D:{value:function(e){return this.object3DMap[e]}},setObject3D:{value:function(e,t){var n,r=this;if(!(t instanceof s.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");n=this.getObject3D(e),n&&this.object3D.remove(n),t.el=this,t.children.length&&t.traverse(function(e){e.el=r}),this.object3D.add(t),this.object3DMap[e]=t,this.emit("object3dset",{object:t,type:e})}},removeObject3D:{value:function(e){var t=this.getObject3D(e);t?(this.object3D.remove(t),delete this.object3DMap[e],this.emit("object3dremove",{type:e})):l("Tried to remove `Object3D` of type:",e,"which was not defined.")}},getOrCreateObject3D:{value:function(e,t){var n=this.getObject3D(e);return!n&&t&&(n=new t,this.setObject3D(e,n)),l("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),n}},add:{value:function(e){if(!e.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(e.object3D),this.emit("child-attached",{el:e})}},addToParent:{value:function(){var e=this.parentEl=this.parentNode;e&&e.add&&!this.attachedToParent&&(e.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var e=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,e.emit("child-detached",{el:this})}},load:{value:function(){var e=this;!this.hasLoaded&&this.parentEl&&i.prototype.load.call(this,function(){e.parentEl&&(e.updateComponents(),(e.isScene||e.parentEl.isPlaying)&&e.play())})},writable:window.debug},remove:{value:function(e){e?this.object3D.remove(e.object3D):this.parentNode.removeChild(this)}},getChildEntities:{value:function(){for(var e=this.children,t=[],n=0;n<e.length;n++){var i=e[n];i instanceof r&&t.push(i)}return t}},initComponent:{value:function(e,t,n){var r,i,a,s,l;if(a=c.split(e,h),s=a[0],i=a.length>2?a.slice(1).join("__"):a[1],o[s]&&(l=m(this,e)||void 0!==t,(l||n)&&!(e in this.components))){if(this.initComponentDependencies(s),i&&!o[s].multiple)throw new Error("Trying to initialize multiple components of type `"+s+"`. There can only be one component of this type per entity.");r=new o[s].Component(this,t,i),this.isPlaying&&r.play(),this.hasAttribute(e)||(r.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,e,"")),u("Component initialized: %s",e)}},writable:window.debug},initComponentDependencies:{value:function(e){var t,n,r=this,i=o[e];if(i&&(t=o[e].dependencies,t))for(n=0;n<t.length;n++)r.initComponent(t[n],window.HTMLElement.prototype.getAttribute.call(r,t[n])||void 0,!0)}},removeComponent:{value:function(e,t){var n;n=this.components[e],n&&(n.initialized?(n.pause(),n.remove(),t&&(n.destroy(),delete this.components[e]),this.emit("componentremoved",n.evtDetail,!1)):this.addEventListener("componentinitialized",function n(r){r.detail.name===e&&(this.removeComponent(e,t),this.removeEventListener("componentinitialized",n))}))},writable:window.debug},updateComponents:{value:function(){var e,t,n,r,i=this.componentsToUpdate;if(this.hasLoaded){for(n=0;n<this.mixinEls.length;n++)for(r in this.mixinEls[n].componentCache)y(r)&&(i[r]=!0);if(this.getExtraComponents)for(r in t=this.getExtraComponents(),t)y(r)&&(i[r]=!0);for(n=0;n<this.attributes.length;++n)r=this.attributes[n].name,-1===d.indexOf(r)&&y(r)&&(i[r]=!0);for(n=0;n<d.length;n++)r=d[n],this.hasAttribute(r)&&this.updateComponent(r,this.getDOMAttribute(r));for(r in i)e=g(this.getDOMAttribute(r),t&&t[r]),this.updateComponent(r,e),delete i[r]}},writable:window.debug},updateComponent:{value:function(e,t,n){var r=this.components[e];if(r)return null!==t||m(this,e)?void r.updateProperties(t,n):void this.removeComponent(e,!0);this.initComponent(e,t,!1)}},removeAttribute:{value:function(e,t){var n=this.components[e];n&&void 0===t&&this.removeComponent(e,!0),n&&void 0!==t?n.resetProperty(t):("mixin"===e&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,e))}},play:{value:function(){var e,t,n;if(!this.isPlaying&&this.hasLoaded){for(n in this.isPlaying=!0,this.components)this.components[n].play();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].play();this.emit("play")}},writable:!0},pause:{value:function(){var e,t,n;if(this.isPlaying){for(n in this.isPlaying=!1,this.components)this.components[n].pause();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(e,t,n){if(o[e]||this.components[e])this.updateComponent(e,n);else if("mixin"===e){if(n===this.computedMixinStr)return;this.mixinUpdate(n,t)}}},mixinUpdate:{value:function(){var e=[];return function(t,n){var r,i,o,a,s=this;if(this.hasLoaded){for(n=n||this.getAttribute("mixin"),o=this.updateMixins(t,n),e.length=0,a=0;a<this.mixinEls.length;a++)for(r in this.mixinEls[a].componentCache)-1===e.indexOf(r)&&(this.components[r]?this.components[r].handleMixinUpdate():this.initComponent(r,null),e.push(r));for(a=0;a<o.oldMixinIds.length;a++)if(i=document.getElementById(o.oldMixinIds[a]),i)for(r in i.componentCache)-1===e.indexOf(r)&&this.components[r]&&(this.getDOMAttribute(r)?this.components[r].handleMixinUpdate():this.removeComponent(r,!0))}else this.addEventListener("loaded",function(){s.mixinUpdate(t,n)},p)}}()},setAttribute:{value:function(){var e={};return function(t,n,r){var a,s,u,l,d,p;if(l=t.indexOf(h),u=l>0?t.substring(0,l):t,!o[u])return"mixin"===t&&this.mixinUpdate(n),void i.prototype.setAttribute.call(this,t,n);if(!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),"undefined"!==typeof r&&"string"===typeof n&&n.length>0&&"string"===typeof c.styleParser.parse(n)){for(p in e)delete e[p];a=e,a[n]=r,s=!1}else a=n,s=!0===r;this.updateComponent(t,a,s),d=this.sceneEl&&this.sceneEl.getAttribute("debug"),d&&this.components[t].flushToDOM()}}(),writable:window.debug},flushToDOM:{value:function(e){var t,n,r,i=this.components,o=this.children;for(r in i)i[r].flushToDOM();if(e)for(n=0;n<o.length;++n)t=o[n],t.flushToDOM&&t.flushToDOM(e)}},getAttribute:{value:function(e){var t;return"position"===e?this.object3D.position:"rotation"===e?b(this):"scale"===e?this.object3D.scale:"visible"===e?this.object3D.visible:(t=this.components[e],t?t.data:window.HTMLElement.prototype.getAttribute.call(this,e))},writable:window.debug},getDOMAttribute:{value:function(e){var t=this.components[e];return t?t.attrValue:window.HTMLElement.prototype.getAttribute.call(this,e)},writable:window.debug},addState:{value:function(e){this.is(e)||(this.states.push(e),this.emit("stateadded",e))}},removeState:{value:function(e){var t=this.states.indexOf(e);-1!==t&&(this.states.splice(t,1),this.emit("stateremoved",e))}},is:{value:function(e){return-1!==this.states.indexOf(e)}},inspect:{value:function(){this.sceneEl.components.inspector.openInspector(this)}},destroy:{value:function(){var e;if(this.parentNode)l("Entity can only be destroyed if detached from scenegraph.");else for(e in this.components)this.components[e].destroy()}}});function m(e,t){return!(!e.components[t]||!e.components[t].attrValue)||v(t,e.mixinEls)}function v(e,t){var n,r=!1;for(n=0;n<t.length;++n)if(r=t[n].hasAttribute(e),r)break;return r}function g(e,t){return t?t.constructor===Object?c.extend(t,c.styleParser.parse(e||{})):e||t:e}function y(e){return-1!==e.indexOf(h)&&(e=c.split(e,h)[0]),!!o[e]}function b(e){var t=s.Math.radToDeg,n=e.object3D.rotation,r=e.rotationObj;return r.x=t(n.x),r.y=t(n.y),r.z=t(n.z),r}r=a("a-entity",{prototype:f}),t.exports=r},{"../lib/three":151,"../utils/":176,"./a-node":101,"./a-register-element":102,"./component":103}],100:[function(e,t,n){var r=e("./a-node"),i=e("./a-register-element").registerElement,o=e("./component").components,a=e("../utils"),s="__";t.exports=i("a-mixin",{prototype:Object.create(r.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id"),this.isMixin=!0}},attributeChangedCallback:{value:function(e,t,n){this.cacheAttribute(e,n),this.updateEntities()}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(e,t){window.HTMLElement.prototype.setAttribute.call(this,e,t),this.cacheAttribute(e,t)}},cacheAttribute:{value:function(e,t){var n,r;r=a.split(e,s)[0],n=o[r],n&&(void 0===t&&(t=window.HTMLElement.prototype.getAttribute.call(this,e)),this.componentCache[e]=n.parseAttrValueForCache(t))}},getAttribute:{value:function(e){return this.componentCache[e]||window.HTMLElement.prototype.getAttribute.call(this,e)}},cacheAttributes:{value:function(){var e,t,n=this.attributes;for(t=0;t<n.length;t++)e=n[t].name,this.cacheAttribute(e)}},updateEntities:{value:function(){var e,t,n;if(this.sceneEl)for(t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),n=0;n<t.length;n++)e=t[n],e.hasLoaded&&!e.isMixin&&e.mixinUpdate(this.id)}}})})},{"../utils":176,"./a-node":101,"./a-register-element":102,"./component":103}],101:[function(e,t,n){var r=e("./a-register-element").registerElement,i=e("./a-register-element").isNode,o=e("../utils/"),a=o.debug("core:a-node:warn"),s=o.debug("core:a-node:error");t.exports=r("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]},writable:window.debug},attachedCallback:{value:function(){var e;this.sceneEl=this.closestScene(),this.sceneEl||a("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(e=this.getAttribute("mixin"),e&&this.updateMixins(e))},writable:window.debug},attributeChangedCallback:{value:function(e,t,n){n!==this.computedMixinStr&&("mixin"!==e||this.isMixin||this.updateMixins(n,t))}},closestScene:{value:function(){var e=this;while(e){if(e.isScene)break;e=e.parentElement}return e}},closest:{value:function(e){var t=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,n=this;while(n){if(t.call(n,e))break;n=n.parentElement}return n}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(e,t){var n,r,o=this;this.hasLoaded||(t=t||i,n=this.getChildren(),r=n.filter(t).map(function(e){return new Promise(function(t){if(e.hasLoaded)return t();e.addEventListener("loaded",t)})}),Promise.all(r).then(function(){o.hasLoaded=!0,e&&e(),o.emit("loaded",void 0,!1)}).catch(function(e){s("Failure loading node: ",e)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:function(){var e=[],t=[],n={};return function(r,i){var a,s,c;for(e.length=0,t.length=0,s=r?o.split(r.trim(),/\s+/):e,c=i?o.split(i.trim(),/\s+/):t,n.newMixinIds=s,n.oldMixinIds=c,a=0;a<c.length;a++)-1===s.indexOf(c[a])&&this.unregisterMixin(c[a]);for(this.computedMixinStr="",this.mixinEls.length=0,a=0;a<s.length;a++)this.registerMixin(document.getElementById(s[a]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),n}}()},registerMixin:{value:function(e){var t,n,r;if(e){if(r=e.getAttribute("mixin"),r)for(t=o.split(r.trim(),/\s+/),n=0;n<t.length;n++)this.registerMixin(document.getElementById(t[n]));this.computedMixinStr=this.computedMixinStr+" "+e.id,this.mixinEls.push(e)}}},setAttribute:{value:function(e,t){"mixin"===e&&this.updateMixins(t),window.HTMLElement.prototype.setAttribute.call(this,e,t)}},unregisterMixin:{value:function(e){var t,n,r=this.mixinEls;for(t=0;t<r.length;++t)if(n=r[t],e===n.id){r.splice(t,1);break}}},emit:{value:function(){var e={};return function(t,n,r,i){void 0===r&&(r=!0),e.bubbles=!!r,e.detail=n,i&&(e=o.extend({},i,e)),this.dispatchEvent(new CustomEvent(t,e))}}(),writable:window.debug}})})},{"../utils/":176,"./a-register-element":102}],102:[function(e,t,n){var r,i;e("document-register-element");var o=t.exports.knownTags={};function a(e){o[e.toLowerCase()]=!0}function s(e){var t={},n=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"];return u(t,n,e,r.prototype),h(e,t),t}function c(e){var t={},n=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],o=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"];return u(t,n,e,r.prototype),u(t,o,e,i.prototype),h(e,t),t}function u(e,t,n,r){t.forEach(function(t){l(e,t,n,r)})}function l(e,t,n,r){var i=n[t],o=r[t];i&&o&&i!==o&&(e[t]={value:function(){return o.apply(this,arguments),i.apply(this,arguments)},writable:window.debug})}function h(e,t){var n=Object.getOwnPropertyNames(e);n.forEach(function(n){var r;t[n]||(r=Object.getOwnPropertyDescriptor(e,n),t[n]={value:e[n],writable:r.writable})})}t.exports.isNode=function(e){return e.tagName.toLowerCase()in o||e.isNode},t.exports.registerElement=function(e,t){var n=Object.getPrototypeOf(t.prototype),o=t,u=r&&n===r.prototype,l=i&&n===i.prototype;return(u||l)&&a(e),u&&(o=s(t.prototype),o={prototype:Object.create(n,o)}),l&&(o=c(t.prototype),o={prototype:Object.create(n,o)}),Object.getOwnPropertyNames(o.prototype).forEach(function(e){var t=o.prototype[e];"function"===typeof t&&(t.displayName=e)}),document.registerElement(e,o)},t.exports.wrapMethods=u,r=e("./a-node"),i=e("./a-entity")},{"./a-entity":99,"./a-node":101,"document-register-element":11}],103:[function(e,t,n){var r=e("./schema"),i=e("./scene/scenes"),o=e("./system"),a=e("../utils/"),s=t.exports.components={},c=r.parseProperties,u=r.parseProperty,l=r.process,h=r.isSingleProperty,d=r.stringifyProperties,p=r.stringifyProperty,f=a.styleParser,m=a.debug("core:component:warn"),v=document.currentScript,g=new RegExp("[A-Z]+"),y={},b=t.exports.Component=function(e,t,n){var r=this;this.el=e,this.id=n,this.attrName=this.name+(n?"__"+n:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.isSingleProperty=h(this.schema),this.isSinglePropertyObject=this.isSingleProperty&&C(u(void 0,this.schema))&&!(this.schema.default instanceof window.HTMLElement),this.isObjectBased=!this.isSingleProperty||this.isSinglePropertyObject,this.el.components[this.attrName]=this,this.objectPool=y[this.name],A(this,this.events),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),a.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),a.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),a.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),a.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=a.throttle(function(){e.emit("componentchanged",r.evtDetail,!1)},200),this.updateProperties(t)};function A(e,t){var n;for(n in t)t[n]=t[n].bind(e)}if(b.prototype={schema:{},init:function(){},events:{},update:function(e){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(e,t){var n=this.schema;return this.isSingleProperty?u(e,n):c(f.parse(e),n,!0,this.name,t)},stringify:function(e){var t=this.schema;return"string"===typeof e?e:this.isSingleProperty?p(e,t):(e=d(e,t),f.stringify(e))},updateCachedAttrValue:function(e,t){var n,r,i;if(void 0!==e){if(null===e)return this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),void(this.attrValue=void 0);if(e instanceof Object&&!(e instanceof window.HTMLElement)?(r=this.objectPool.use(),n=a.extend(r,e)):n=this.parseAttrValueForCache(e),this.isObjectBased&&!t&&this.attrValue)for(i in this.attrValue)void 0===n[i]&&(n[i]=this.attrValue[i]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),a.objectPool.clearObject(this.attrValue),this.attrValue=E(this.attrValue,n,this.isObjectBased),a.objectPool.clearObject(r)}},parseAttrValueForCache:function(e){var t;return"string"!==typeof e?e:(this.isSingleProperty?(t=this.schema.parse(e),"string"===typeof t&&(t=e)):(a.objectPool.clearObject(this.parsingAttrValue),t=f.parse(e,this.parsingAttrValue)),t)},flushToDOM:function(e){var t=e?this.data:this.attrValue;null!==t&&void 0!==t&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(t))},updateProperties:function(e,t){var n=this.el;n.hasLoaded?(null!==e&&(e=this.parseAttrValueForCache(e)),this.updateCachedAttrValue(e,t),this.initialized?(this.updateComponent(e,t),this.callUpdateHandler()):this.initComponent()):this.updateCachedAttrValue(e)},initComponent:function(){var e,t=this.el;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),t.initializingComponents[this.name]||(t.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete t.initializingComponents[this.name],this.oldData=E(this.oldData,this.data,this.isObjectBased),e=this.isObjectBased?this.objectPool.use():void 0,this.update(e),this.isObjectBased&&this.objectPool.recycle(e),t.isPlaying&&this.play(),t.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(e,t){var n,r;if(t)return this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),void(this.data=this.buildData(this.attrValue,!0,!1));if(this.isSingleProperty)return this.isObjectBased&&u(e,this.schema),void(this.data=e);if(c(e,this.schema,!0,this.name),this.schemaChangeKeys.length)for(n in e)if(this.schema[n].schemaChange){r=!0;break}if(r)return this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),void(this.data=this.buildData(this.attrValue,!0,!1));for(n in e)void 0!==e[n]&&(this.data[n]=e[n])},callUpdateHandler:function(){var e;this.previousOldData instanceof Object&&a.objectPool.clearObject(this.previousOldData),this.isObjectBased?x(this.previousOldData,this.oldData):this.previousOldData=this.oldData,e=!a.deepEqual(this.oldData,this.data),(this.isPositionRotationScale||e)&&(this.oldData instanceof Object&&a.objectPool.clearObject(this.oldData),this.oldData=E(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(e){if(this.isObjectBased){if(!(e in this.attrValue))return;delete this.attrValue[e],this.data[e]=this.schema[e].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(e){var t;t=a.extend({},s[this.name].schema),a.extend(t,e),this.schema=l(t),this.el.emit("schemachanged",this.evtDetail)},buildData:function(e,t,n){var r,i,o,s,l,h,d,p=this.nextData,f=this.schema,m=this.el.mixinEls;if(r=e&&e.constructor===Array?e.length:void 0!==e&&null!==e,this.isObjectBased&&a.objectPool.clearObject(p),this.isSingleProperty)i=this.isObjectBased?x(p,f.default):S(f.default)?a.clone(f.default):f.default;else for(s in d=!t&&this.attrValue,i=d instanceof Object?x(p,d):p,f)o=f[s].default,void 0===i[s]&&(i[s]=S(o)?a.clone(o):o);for(h=0;h<m.length;h++)l=m[h].getAttribute(this.attrName),l&&(i=E(i,l,this.isObjectBased));if(r){if(this.isSingleProperty)return C(e)?(x(this.parsingAttrValue,e),u(this.parsingAttrValue,f)):u(e,f);i=E(i,e,this.isObjectBased)}else if(this.isSingleProperty)return u(i,f);return c(i,f,void 0,this.name,n)},eventsAttach:function(){var e;for(e in this.eventsDetach(),this.events)this.el.addEventListener(e,this.events[e])},eventsDetach:function(){var e;for(e in this.events)this.el.removeEventListener(e,this.events[e])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}},window.debug)var w=t.exports.registrationOrderWarnings={};function x(e,t){var n,r;for(r in t)void 0!==t[r]&&(n=t[r],e[r]=S(n)?a.clone(n):n);return e}function E(e,t,n){var r;if(n&&t.constructor===Object){for(r in t)void 0!==t[r]&&(t[r]&&t[r].constructor===Object?e[r]=a.clone(t[r]):e[r]=t[r]);return e}return t}function _(e){return e.tick||e.tock}function M(e){return function(){var t=this.el.sceneEl;this.isPlaying&&(e.call(this),this.isPlaying=!1,this.eventsDetach(),_(this)&&t.removeBehavior(this))}}function T(e){return function(){var t=this.el.sceneEl,n=this.el.isPlaying&&!this.isPlaying;this.initialized&&n&&(e.call(this),this.isPlaying=!0,this.eventsAttach(),_(this)&&t.addBehavior(this))}}function C(e){return e&&e.constructor===Object&&!(e instanceof window.HTMLElement)}function S(e){return e&&(e.constructor===Object||e.constructor===Array)&&!(e instanceof window.HTMLElement)}t.exports.registerComponent=function(e,t){var n,r,c,u,d={};if(document.currentScript&&document.currentScript!==v&&i.forEach(function(t){t.hasLoaded||document.currentScript.compareDocumentPosition(t)!==Node.DOCUMENT_POSITION_FOLLOWING&&(m("The component `"+e+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(w[e]=!0))}),!0===g.test(e)&&m("The component name `"+e+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+e.toLowerCase()+"`"),-1!==e.indexOf("__"))throw new Error("The component name `"+e+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(t).forEach(function(e){d[e]={value:t[e],writable:!0}}),s[e])throw new Error("The component `"+e+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(n=function(e,t,n){b.call(this,e,t,n)},n.prototype=Object.create(b.prototype,d),n.prototype.name=e,n.prototype.isPositionRotationScale="position"===e||"rotation"===e||"scale"===e,n.prototype.constructor=n,n.prototype.system=o&&o.systems[e],n.prototype.play=T(n.prototype.play),n.prototype.pause=M(n.prototype.pause),c=a.extend(l(n.prototype.schema,n.prototype.name)),u=h(n.prototype.schema),!u)for(r in n.prototype.schemaChangeKeys=[],c)c[r].schemaChange&&n.prototype.schemaChangeKeys.push(r);return y[e]=a.objectPool.createPool(),s[e]={Component:n,dependencies:n.prototype.dependencies,isSingleProp:u,multiple:n.prototype.multiple,name:e,parse:n.prototype.parse,parseAttrValueForCache:n.prototype.parseAttrValueForCache,schema:c,stringify:n.prototype.stringify,type:n.prototype.type},n}},{"../utils/":176,"./scene/scenes":110,"./schema":112,"./system":114}],104:[function(e,t,n){var r=e("./schema"),i=r.process,o=t.exports.geometries={},a=t.exports.geometryNames=[],s=e("../lib/three"),c=t.exports.Geometry=function(){};c.prototype={schema:{},init:function(e){return this.geometry=new s.Geometry,this.geometry},update:function(e){}},t.exports.registerGeometry=function(e,t){var n,r={};if(Object.keys(t).forEach(function(e){r[e]={value:t[e],writable:!0}}),o[e])throw new Error("The geometry `"+e+"` has been already registered");return n=function(){c.call(this)},n.prototype=Object.create(c.prototype,r),n.prototype.name=e,n.prototype.constructor=n,o[e]={Geometry:n,schema:i(n.prototype.schema)},a.push(e),n}},{"../lib/three":151,"./schema":112}],105:[function(e,t,n){var r=e("../utils/coordinates"),i=e("debug"),o=i("core:propertyTypes:warn"),a=i("core:propertyTypes:warn"),s=t.exports.propertyTypes={},c=/[,> .[\]:]/,u=/\url\((.+)\)/;function l(e,t,n,r){"type"in s?o("Property type "+e+" is already registered."):s[e]={default:t,parse:n||f,stringify:r||m}}function h(e){return Array.isArray(e)?e:e&&"string"===typeof e?e.split(",").map(t):[];function t(e){return e.trim()}}function d(e){return e.join(", ")}function p(e){var t,n;return"string"!==typeof e?e:(n=e.match(u),n?n[1]:"#"===e.charAt(0)?(t=document.getElementById(e.substring(1)),t?"CANVAS"===t.tagName||"VIDEO"===t.tagName||"IMG"===t.tagName?t:t.getAttribute("src"):void a('"'+e+'" asset not found.')):e)}function f(e){return e}function m(e){return null===e?"null":e.toString()}function v(e){return"false"!==e&&!1!==e}function g(e){return parseInt(e,10)}function y(e){return parseFloat(e,10)}function b(e){return e?"string"!==typeof e?e:"#"!==e[0]||c.test(e)?document.querySelector(e):document.getElementById(e.substring(1)):null}function A(e){return e?"string"!==typeof e?e:Array.prototype.slice.call(document.querySelectorAll(e),0):null}function w(e){return e.getAttribute?"#"+e.getAttribute("id"):m(e)}function x(e){return e instanceof Array?e.map(function(e){return"#"+e.getAttribute("id")}).join(", "):m(e)}function E(e){return a("`src` property type is deprecated. Use `asset` instead."),p(e)}function _(e){return r.parse(e,this.default)}function M(e,t){return("audio"!==e||"string"===typeof t)&&(!("array"===e&&!Array.isArray(t))&&(("asset"!==e||"string"===typeof t)&&(("boolean"!==e||"boolean"===typeof t)&&(("color"!==e||"string"===typeof t)&&(("int"!==e||"number"===typeof t)&&(("number"!==e||"number"===typeof t)&&(("map"!==e||"string"===typeof t)&&(("model"!==e||"string"===typeof t)&&(("selector"!==e||"string"===typeof t||null===t)&&(("selectorAll"!==e||"string"===typeof t||null===t)&&(("src"!==e||"string"===typeof t)&&(("string"!==e||"string"===typeof t)&&(("time"!==e||"number"===typeof t)&&("vec2"===e?T(t,2):"vec3"===e?T(t,3):"vec4"!==e||T(t,4)))))))))))))))}function T(e,t){if(null===e)return!0;if("object"!==typeof e)return!1;if(Object.keys(e).length!==t)return!1;var n=e.x,r=e.y,i=e.z,o=e.w;return"number"===typeof n&&"number"===typeof r&&(!(t>2&&"number"!==typeof i)&&!(t>3&&"number"!==typeof o))}l("audio","",p),l("array",[],h,d),l("asset","",p),l("boolean",!1,v),l("color","#FFF",f,m),l("int",0,g),l("number",0,y),l("map","",p),l("model","",p),l("selector",null,b,w),l("selectorAll",null,A,x),l("src","",E),l("string","",f,m),l("time",0,g),l("vec2",{x:0,y:0},_,r.stringify),l("vec3",{x:0,y:0,z:0},_,r.stringify),l("vec4",{x:0,y:0,z:0,w:1},_,r.stringify),t.exports.registerPropertyType=l,t.exports.isValidDefaultValue=M,t.exports.isValidDefaultCoordinate=T},{"../utils/coordinates":171,debug:8}],106:[function(e,t,n){var r=e("./metaTags").inject,i=e("./wakelock"),o=e("./loadingScreen"),a=e("../a-register-element"),s=e("./scenes"),c=e("../system").systems,u=e("../../lib/three"),l=e("../../utils/"),h=e("../a-entity"),d=e("../a-node"),p=e("./postMessage"),f=l.bind,m=l.device.isIOS(),v=l.device.isMobile(),g=l.device.isWebXRAvailable,y=a.registerElement,b=l.debug("core:a-scene:warn");function A(e,t,n,r){return t?{height:e.parentElement.offsetHeight,width:e.parentElement.offsetWidth}:w(n,r)}function w(e,t){var n,r,i=window.devicePixelRatio;return r={height:document.body.offsetHeight,width:document.body.offsetWidth},!e||t||-1===e.width&&-1===e.height?r:r.width*i<e.width&&r.height*i<e.height?r:(n=r.width/r.height,r.width*i>e.width&&-1!==e.width&&(r.width=Math.round(e.width/i),r.height=Math.round(e.width/n/i)),r.height*i>e.height&&-1!==e.height&&(r.height=Math.round(e.height/i),r.width=Math.round(e.height*n/i)),r)}function x(e){var t=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen;t.apply(e,[{navigationUI:"hide"}])}function E(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;e&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function _(e){var t;function n(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;t||e.exitVR(),document.activeElement.blur(),document.body.focus()}t=document.createElement("canvas"),t.classList.add("a-canvas"),t.dataset.aframeCanvas=!0,e.appendChild(t),document.addEventListener("fullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),t.addEventListener("touchmove",function(e){e.preventDefault()}),e.canvas=t,e.emit("render-target-loaded",{target:t}),setTimeout(f(e.resize,e),0)}t.exports.AScene=y("a-scene",{prototype:Object.create(h.prototype,{createdCallback:{value:function(){this.clock=new u.Clock,this.isIOS=m,this.isMobile=v,this.hasWebXR=g,this.isScene=!0,this.object3D=new u.Scene;var e=this;this.object3D.onAfterRender=function(t,n,r){e.isPlaying&&e.tock(e.time,e.delta,r)},this.render=f(this.render,this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui","")}},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-fullscreen")}},attachedCallback:{value:function(){var e=this;_(this),this.setupRenderer(),this.resize(),this.addFullScreenStyles(),p(this),r(this),i(this),this.onVRPresentChangeBound=f(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){e.enterVR()},this.exitVRBound=function(){e.exitVR()},this.exitVRTrueBound=function(){e.exitVR(!0)},this.pointerRestrictedBound=function(){e.pointerRestricted()},this.pointerUnrestrictedBound=function(){e.pointerUnrestricted()},g||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),this.addEventListener("cameraready",function(){e.attachedCallbackPostCamera()}),this.initSystems()}},attachedCallbackPostCamera:{value:function(){var e,t=this;e=f(this.resize,this),window.addEventListener("load",e),window.addEventListener("resize",function(){t.isIOS?setTimeout(e,100):e()}),this.play(),s.push(this)},writable:window.debug},initSystems:{value:function(){var e;for(e in this.initSystem("camera"),c)"camera"!==e&&this.initSystem(e)}},initSystem:{value:function(e){this.systems[e]||(this.systems[e]=new c[e](this),this.systemNames.push(e))}},detachedCallback:{value:function(){var e=s.indexOf(this);s.splice(e,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)}},addBehavior:{value:function(e){var t,n,r=this.behaviors;for(n in r)e[n]&&(t=this.behaviors[n],-1===t.indexOf(e)&&t.push(e))}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:l.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(){var e,t=this,n=t.renderer.vr;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){if(e=l.device.getVRDisplay(),n.enabled=!0,n.setDevice(e),!this.hasWebXR){if(e.isPresenting&&!window.hasNativeWebVRImplementation)return o(),Promise.resolve();var r=this.getAttribute("renderer"),i={highRefreshRate:r.highRefreshRate,foveationLevel:r.foveationLevel};return e.requestPresent([{source:this.canvas,attributes:i}]).then(o,a)}return this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound),e.requestSession({immersive:!0,exclusive:!0}).then(function(e){t.xrSession=e,n.setSession(e),e.addEventListener("end",t.exitVRBound),e.requestFrameOfReference("stage").then(function(e){t.frameOfReference=e}),o()}),Promise.resolve()}return o(),Promise.resolve();function o(){t.addState("vr-mode"),t.emit("enter-vr",{target:t}),t.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),t.addFullScreenStyles(),t.isMobile||t.checkHeadsetConnected()||x(t.canvas),t.renderer.setAnimationLoop(t.render),t.resize()}function a(e){throw e&&e.message?new Error("Failed to enter VR mode (`requestPresent`): "+e.message):new Error("Failed to enter VR mode (`requestPresent`).")}},writable:!0},exitVR:{value:function(){var e,t=this,n=this.renderer.vr;if(!this.is("vr-mode"))return Promise.resolve("Not in VR.");if(this.checkHeadsetConnected()||this.isMobile){if(n.enabled=!1,e=l.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end(),n.setSession(null);else if(e.isPresenting)return e.exitPresent().then(r,i)}else E();return r(),Promise.resolve();function r(){t.removeState("vr-mode"),t.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),t.hasAttribute("embedded")&&t.removeFullScreenStyles(),t.resize(),t.isIOS&&l.forceCanvasResizeSafariMobile(t.canvas),t.emit("exit-vr",{target:t})}function i(e){throw e&&e.message?new Error("Failed to exit VR mode (`exitPresent`): "+e.message):new Error("Failed to exit VR mode (`exitPresent`).")}},writable:!0},pointerRestricted:{value:function(){if(this.canvas){var e=this.getPointerLockElement();e&&e!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var e=this.getPointerLockElement();e&&e===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(e){var t=e.display||e.detail.display;t.isPresenting?this.enterVR():this.exitVR()}},getAttribute:{value:function(e){var t=this.systems[e];return t?t.data:h.prototype.getAttribute.call(this,e)}},getComputedAttribute:{value:function(e){b("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(e)}},getDOMAttribute:{value:function(e){var t=this.systems[e];return t?t.data:h.prototype.getDOMAttribute.call(this,e)}},setAttribute:{value:function(e,t,n){var r=this.systems[e];if(r)return d.prototype.setAttribute.call(this,e,t),void r.updateProperties(t);h.prototype.setAttribute.call(this,e,t,n)}},removeBehavior:{value:function(e){var t,n,r,i=this.behaviors;for(n in i)e[n]&&(t=this.behaviors[n],r=t.indexOf(e),-1!==r&&t.splice(r,1))}},resize:{value:function(){var e,t,n,r,i=this.camera,o=this.canvas;r=this.renderer.vr.getDevice(),t=this.renderer.vr.enabled&&r&&r.isPresenting,!i||!o||this.is("vr-mode")&&(this.isMobile||t)||(e=this.getAttribute("embedded")&&!this.is("vr-mode"),n=A(o,e,this.maxCanvasSize,this.is("vr-mode")),i.aspect=n.width/n.height,i.updateProjectionMatrix(),this.renderer.setSize(n.width,n.height,!1),this.emit("rendererresize",null,!1))},writable:!0},setupRenderer:{value:function(){var e,t,n,r,i=this;r={alpha:!0,antialias:!v,canvas:this.canvas,logarithmicDepthBuffer:!1},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(n=this.getAttribute("renderer"),t=l.styleParser.parse(n),t.precision&&(r.precision=t.precision+"p"),t.antialias&&"auto"!==t.antialias&&(r.antialias="true"===t.antialias),t.logarithmicDepthBuffer&&"auto"!==t.logarithmicDepthBuffer&&(r.logarithmicDepthBuffer="true"===t.logarithmicDepthBuffer),t.alpha&&(r.alpha="true"===t.alpha),this.maxCanvasSize={width:t.maxCanvasWidth?parseInt(t.maxCanvasWidth):this.maxCanvasSize.width,height:t.maxCanvasHeight?parseInt(t.maxCanvasHeight):this.maxCanvasSize.height}),e=this.renderer=new u.WebGLRenderer(r),e.setPixelRatio(window.devicePixelRatio),e.sortObjects=!1,this.camera&&e.vr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){e.vr.setPoseTarget(i.camera.el.object3D)}),o.setup(this,A)},writable:window.debug},play:{value:function(){var e=this,t=this;this.renderStarted?h.prototype.play.call(this):(this.addEventListener("loaded",function(){var e,n=this.renderer,r=this.renderer.vr;h.prototype.play.call(this),t.renderStarted||(t.resize(),t.renderer&&(window.performance&&window.performance.mark("render-started"),o.remove(),e=l.device.getVRDisplay(),e&&e.isPresenting&&(r.setDevice(e),r.enabled=!0,t.enterVR()),n.setAnimationLoop(this.render),t.renderStarted=!0,t.emit("renderstart")))}),setTimeout(function(){h.prototype.load.call(e)}))}},updateComponent:{value:function(e){e in c||h.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(e,t){var n,r=this.systems;for(n=0;n<this.behaviors.tick.length;n++)this.behaviors.tick[n].el.isPlaying&&this.behaviors.tick[n].tick(e,t);for(n=0;n<this.systemNames.length;n++)r[this.systemNames[n]].tick&&r[this.systemNames[n]].tick(e,t)}},tock:{value:function(e,t,n){var r,i=this.systems;for(r=0;r<this.behaviors.tock.length;r++)this.behaviors.tock[r].el.isPlaying&&this.behaviors.tock[r].tock(e,t,n);for(r=0;r<this.systemNames.length;r++)i[this.systemNames[r]].tock&&i[this.systemNames[r]].tock(e,t,n)}},render:{value:function(e,t){var n=this.renderer;this.frame=t,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta),n.render(this.object3D,this.camera)},writable:!0}})}),t.exports.setupCanvas=_},{"../../lib/three":151,"../../utils/":176,"../a-entity":99,"../a-node":101,"../a-register-element":102,"../system":114,"./loadingScreen":107,"./metaTags":108,"./postMessage":109,"./scenes":110,"./wakelock":111}],107:[function(e,t,n){var r,i,o,a=e("../../utils/"),s=a.styleParser,c="loading-screen",u="a-loader-title";function l(e){var t=o(r.canvas,!1,r.maxCanvasSize,r.is("vr-mode"));e.aspect=t.width/t.height,e.updateProjectionMatrix(),r.renderer.setSize(t.width,t.height,!1)}function h(){i=document.createElement("div"),i.className=u,i.innerHTML=document.title,i.style.display="none",r.appendChild(i)}t.exports.setup=function(e,t){r=e,o=t;var n,a,u,d,p,f,m,v,g,y,b=r.hasAttribute(c)?s.parse(r.getAttribute(c)):void 0,A=b&&b.dotsColor||"white",w=b&&b.backgroundColor||"#24CAFF",x=void 0===b||!0===b.enabled||void 0===b.enabled;x&&(n=new THREE.Scene,a=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),u=new THREE.MeshBasicMaterial({color:A}),d=new THREE.Mesh(a,u),p=d.clone(),f=d.clone(),m=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),v=new THREE.Clock,g=0,y=function(){r.renderer.render(n,m),g=v.getElapsedTime()%4,d.visible=g>=1,p.visible=g>=2,f.visible=g>=3},n.background=new THREE.Color(w),n.add(m),d.position.set(-1,0,-15),p.position.set(0,0,-15),f.position.set(1,0,-15),m.add(d),m.add(p),m.add(f),h(),setTimeout(function(){r.hasLoaded||(l(m),i.style.display="block",window.addEventListener("resize",function(){l(m)}),r.renderer.setAnimationLoop(y))},200))},t.exports.remove=function(){window.removeEventListener("resize",l),i&&(i.style.display="none")}},{"../../utils/":176}],108:[function(e,t,n){var r=e("../../constants/"),i=e("../../utils").extend,o=t.exports.MOBILE_HEAD_TAGS=[s({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),s({name:"mobile-web-app-capable",content:"yes"}),s({name:"theme-color",content:"black"})],a=[s({name:"apple-mobile-web-app-capable",content:"yes"}),s({name:"apple-mobile-web-app-status-bar-style",content:"black"}),c({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function s(e){return{tagName:"meta",attributes:e,exists:function(){return document.querySelector('meta[name="'+e.name+'"]')}}}function c(e){return{tagName:"link",attributes:e,exists:function(){return document.querySelector('link[rel="'+e.rel+'"]')}}}function u(e){if(e&&e.tagName){var t=document.createElement(e.tagName);return t.setAttribute(r.AFRAME_INJECTED,""),i(t,e.attributes)}}t.exports.inject=function(e){var t,n=document.head,r=n.querySelector("script"),i=[];return o.forEach(s),e.isIOS&&a.forEach(s),i;function s(e){e&&!e.exists()&&(t=u(e),t&&(r?r.parentNode.insertBefore(t,r):n.appendChild(t),i.push(t)))}}},{"../../constants/":95,"../../utils":176}],109:[function(e,t,n){var r=e("../../utils/bind"),i=e("../../utils/").isIframed;function o(e){var t=this;if(e.data)switch(e.data.type){case"vr":switch(e.data.data){case"enter":t.enterVR();break;case"exit":t.exitVR();break}}}t.exports=function(e){i()&&window.addEventListener("message",r(o,e))}},{"../../utils/":176,"../../utils/bind":170}],110:[function(e,t,n){t.exports=[]},{}],111:[function(e,t,n){var r=e("../../../vendor/wakelock/wakelock");t.exports=function(e){if(e.isMobile){var t=e.wakelock=new r;e.addEventListener("enter-vr",function(){t.request()}),e.addEventListener("exit-vr",function(){t.release()})}}},{"../../../vendor/wakelock/wakelock":189}],112:[function(e,t,n){var r=e("../utils/"),i=e("./propertyTypes"),o=r.debug,a=i.isValidDefaultValue,s=i.propertyTypes,c=o("core:schema:warn");function u(e){return"type"in e?"string"===typeof e.type:"default"in e}function l(e,t){var n,r,i=e.default,o=e.type;return e.type?"bool"===e.type?o="boolean":"float"===e.type&&(o="number"):o=void 0===i||"boolean"!==typeof i&&"number"!==typeof i?Array.isArray(i)?"array":"string":typeof i,r=s[o],r||c("Unknown property type for component `"+t+"`: "+o),n=!!e.parse,e.parse=e.parse||r.parse,e.stringify=e.stringify||r.stringify,e.type=o,"default"in e?n||a(o,i)||c("Default value `"+i+"` does not match type `"+o+"` in component `"+t+"`"):e.default=r.default,e}function h(e,t){return void 0!==e&&null!==e&&""!==e||(e=t.default,Array.isArray(e)&&(e=e.slice())),t.parse(e,t.default)}function d(e,t){return"object"!==typeof e?e:t&&null!==e?t.stringify(e):JSON.stringify(e)}t.exports.isSingleProperty=u,t.exports.process=function(e,t){var n;if(u(e))return l(e,t);for(n in e)e[n]=l(e[n],t);return e},t.exports.processPropertyDefinition=l,t.exports.parseProperties=function(){var e=[];return function(t,n,r,i,o){var a,s,u,l;for(s in e.length=0,r?t:n)r&&void 0===t[s]||e.push(s);if(null===t||"object"!==typeof t)return t;for(s in t)void 0===t[s]||n[s]||o||c("Unknown property `"+s+"` for component/system `"+i+"`.");for(a=0;a<e.length;a++){if(s=e[a],u=n[s],l=t[s],!n[s])return;t[s]=h(l,u)}return t}}(),t.exports.parseProperty=h,t.exports.stringifyProperties=function(e,t){var n,r,i,o,a={};for(n in e)r=t[n],i=e[n],o=i,"object"===typeof o&&(o=d(i,r),r||c("Unknown component property: "+n)),a[n]=o;return a},t.exports.stringifyProperty=d},{"../utils/":176,"./propertyTypes":105}],113:[function(e,t,n){var r=e("./schema"),i=r.process,o=t.exports.shaders={},a=t.exports.shaderNames=[],s=e("../lib/three"),c=e("../utils"),u={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},l=t.exports.Shader=function(){};l.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(e){return this.attributes=this.initVariables(e,"attribute"),this.uniforms=this.initVariables(e,"uniform"),this.material=new(this.raw?s.RawShaderMaterial:s.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(e,t){var n,r,i=this.schema,o={};for(n in i)i[n].is===t&&(r=u[i[n].type],o[n]={type:r,value:void 0});return o},update:function(e){this.updateVariables(e,"attribute"),this.updateVariables(e,"uniform")},updateVariables:function(e,t){var n,r,i,o=this.schema;for(n in i="uniform"===t?this.uniforms:this.attributes,e)if(o[n]&&o[n].is===t)if("map"!==o[n].type)i[n].value=this.parseValue(o[n].type,e[n]),i[n].needsUpdate=!0;else{if(!i[n]||i[n].value===e[n])continue;r="_texture_"+n,this.setMapOnTextureLoad(i,n,r),c.material.updateMapMaterialFromData(r,n,this,e)}},parseValue:function(e,t){var n;switch(e){case"vec2":return new s.Vector2(t.x,t.y);case"vec3":return new s.Vector3(t.x,t.y,t.z);case"vec4":return new s.Vector4(t.x,t.y,t.z,t.w);case"color":return n=new s.Color(t),new s.Vector3(n.r,n.g,n.b);case"map":return s.ImageUtils.loadTexture(t);default:return t}},setMapOnTextureLoad:function(e,t,n){var r=this;this.el.addEventListener("materialtextureloaded",function(){e[t].value=r.material[n],e[t].needsUpdate=!0})}},t.exports.registerShader=function(e,t){var n,r={};if(Object.keys(t).forEach(function(e){r[e]={value:t[e],writable:!0}}),o[e])throw new Error("The shader "+e+" has been already registered");return n=function(){l.call(this)},n.prototype=Object.create(l.prototype,r),n.prototype.name=e,n.prototype.constructor=n,o[e]={Shader:n,schema:i(n.prototype.schema)},a.push(e),n}},{"../lib/three":151,"../utils":176,"./schema":112}],114:[function(e,t,n){var r=e("./component"),i=e("./schema"),o=e("../utils/"),a=i.parseProperties,s=i.parseProperty,c=i.process,u=i.isSingleProperty,l=o.styleParser,h=t.exports.systems={},d=t.exports.System=function(e){var t=r&&r.components[this.name];this.el=e,this.sceneEl=e,t&&(t.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};d.prototype={schema:{},init:function(){},update:function(e){},updateProperties:function(e){var t=this.data;Object.keys(i).length&&(this.buildData(e),this.update(t))},buildData:function(e){var t=this.schema;Object.keys(t).length&&(e=e||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),u(t)?this.data=s(e,t):this.data=a(l.parse(e)||{},t))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},t.exports.registerSystem=function(e,t){var n,r,i={},a=o.findAllScenes(document);if(Object.keys(t).forEach(function(e){i[e]={value:t[e],writable:!0}}),h[e])throw new Error("The system `"+e+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(r=function(e){d.call(this,e)},r.prototype=Object.create(d.prototype,i),r.prototype.name=e,r.prototype.constructor=r,r.prototype.schema=o.extend(c(r.prototype.schema)),h[e]=r,n=0;n<a.length;n++)a[n].initSystem(e)}},{"../utils/":176,"./component":103,"./schema":112}],115:[function(e,t,n){e("./pivot")},{"./pivot":116}],116:[function(e,t,n){var r=e("../../core/component").registerComponent,i=e("../../lib/three"),o=new i.Vector3,a=new i.Vector3;r("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var e=this.data,t=this.el,n=t.object3D.parent,r=t.object3D,s=new i.Group;o.copy(r.position),a.copy(r.rotation),n.remove(r),s.add(r),n.add(s),t.object3D=s,r.position.set(-1*e.x,-1*e.y,-1*e.z),s.position.set(e.x+o.x,e.y+o.y,e.z+o.z),s.rotation.copy(r.rotation),r.rotation.set(0,0,0)}})},{"../../core/component":103,"../../lib/three":151}],117:[function(e,t,n){var r=e("../../core/component").components,i=e("../../core/shader").shaders,o=e("../../utils/"),a={};function s(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===e&&(t="material-fog"),"visible"===e&&(t="material-visible"),a[t]="material."+e}Object.keys(r.material.schema).forEach(s),Object.keys(i.standard.schema).forEach(s),t.exports=function(){return{defaultComponents:{material:{}},mappings:o.extend({},a)}}},{"../../core/component":103,"../../core/shader":113,"../../utils/":176}],118:[function(e,t,n){e("./primitives/a-camera"),e("./primitives/a-cursor"),e("./primitives/a-curvedimage"),e("./primitives/a-gltf-model"),e("./primitives/a-image"),e("./primitives/a-light"),e("./primitives/a-link"),e("./primitives/a-obj-model"),e("./primitives/a-sky"),e("./primitives/a-sound"),e("./primitives/a-text"),e("./primitives/a-video"),e("./primitives/a-videosphere"),e("./primitives/meshPrimitives")},{"./primitives/a-camera":120,"./primitives/a-cursor":121,"./primitives/a-curvedimage":122,"./primitives/a-gltf-model":123,"./primitives/a-image":124,"./primitives/a-light":125,"./primitives/a-link":126,"./primitives/a-obj-model":127,"./primitives/a-sky":128,"./primitives/a-sound":129,"./primitives/a-text":130,"./primitives/a-video":131,"./primitives/a-videosphere":132,"./primitives/meshPrimitives":133}],119:[function(e,t,n){var r=e("../../core/a-entity"),i=e("../../core/component").components,o=e("../../core/a-register-element").registerElement,a=e("../../utils/"),s=a.debug,c=a.entity.setComponentProperty,u=s("extras:primitives:debug"),l=s("extras:primitives:warn"),h=t.exports.primitives={};function d(e,t){var n=i[e].schema;Object.keys(n).map(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==t[r]&&(r=e+"-"+n),t[r]=e+"."+n})}function p(e,n,r){r=r||{},Object.keys(n).map(function(e){d(e,r)}),t.exports.registerPrimitive(e,a.extendDeep({},null,{defaultComponents:n,mappings:r}))}t.exports.registerPrimitive=function(e,t){e=e.toLowerCase(),u("Registering <%s>",e),t.defaultAttributes&&l("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var n=o(e,{prototype:Object.create(r.prototype,{defaultComponentsFromPrimitive:{value:t.defaultComponents||t.defaultAttributes||{}},deprecated:{value:t.deprecated||null},deprecatedMappings:{value:t.deprecatedMappings||{}},mappings:{value:t.mappings||{}},createdCallback:{value:function(){t.deprecated&&console.warn(t.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var e=this.mappings,t=this;Object.keys(e).forEach(function(n){var r;n!==n.toLowerCase()&&l("Mapping keys should be specified in lower case. The mapping key "+n+" may not be recognized"),i[n]&&(r=e[n].replace(".","-"),e[r]=e[n],delete e[n],console.warn("The primitive "+t.tagName.toLowerCase()+" has a mapping collision. The attribute "+n+" has the same name as a registered component and has been renamed to "+r))})}},getExtraComponents:{value:function(){var e,t,n,r,i,o,s=this;for(t=a.clone(this.defaultComponentsFromPrimitive),i=this.getAttribute("mixin"),i&&(i=i.trim().split(" "),i.forEach(function(e){var n=s.sceneEl.querySelector("#"+e).componentCache;Object.keys(n).forEach(function(e){t[e]=c(t[e],n[e])})})),n=0;n<this.attributes.length;n++)e=this.attributes[n],r=this.mappings[e.name],r&&(o=a.entity.getComponentPropertyPath(r),o.constructor===Array?(t[o[0]]=t[o[0]]||{},t[o[0]][o[1]]=e.value.trim()):t[o]=e.value.trim());return t;function c(e,t){return u(e)?l(t):u(t)?l(e):h(e)&&h(t)?a.extendDeep(e,t):l(t)}function u(e){return"undefined"===typeof e}function l(e){return h(e)?a.extendDeep({},e):e}function h(e){return null!==e&&e.constructor===Object}}},attributeChangedCallback:{value:function(e,t,n){var r=this.mappings[e];e in this.deprecatedMappings&&console.warn(this.deprecatedMappings[e]),e&&r&&c(this,r,n)}}})});return h[e]=n,n},t.exports.definePrimitive=p},{"../../core/a-entity":99,"../../core/a-register-element":102,"../../core/component":103,"../../utils/":176}],120:[function(e,t,n){var r=e("../primitives").registerPrimitive;r("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},{"../primitives":119}],121:[function(e,t,n){var r=e("../getMeshMixin"),i=e("../primitives").registerPrimitive,o=e("../../../utils/");i("a-cursor",o.extendDeep({},r(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],122:[function(e,t,n){var r=e("../getMeshMixin"),i=e("../primitives").registerPrimitive,o=e("../../../utils/");i("a-curvedimage",o.extendDeep({},r(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],123:[function(e,t,n){var r=e("../primitives").registerPrimitive;r("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":119}],124:[function(e,t,n){var r=e("../getMeshMixin"),i=e("../primitives").registerPrimitive,o=e("../../../utils/");i("a-image",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],125:[function(e,t,n){var r=e("../primitives").registerPrimitive;r("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":119}],126:[function(e,t,n){var r=e("../primitives").registerPrimitive;r("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":119}],127:[function(e,t,n){var r=e("../getMeshMixin")(),i=e("../primitives").registerPrimitive,o=e("../../../utils/");i("a-obj-model",o.extendDeep({},r,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],128:[function(e,t,n){var r=e("../getMeshMixin"),i=e("../primitives").registerPrimitive,o=e("../../../utils/"),a=e("./meshPrimitives");i("a-sky",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:o.extendDeep({},a["a-sphere"].prototype.mappings)}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119,"./meshPrimitives":133}],129:[function(e,t,n){var r=e("../primitives").registerPrimitive;r("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":119}],130:[function(e,t,n){var r=e("../primitives").definePrimitive;r("a-text",{text:{anchor:"align",width:5}})},{"../primitives":119}],131:[function(e,t,n){var r=e("../getMeshMixin"),i=e("../primitives").registerPrimitive,o=e("../../../utils/");i("a-video",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],132:[function(e,t,n){var r=e("../getMeshMixin"),i=e("../primitives").registerPrimitive,o=e("../../../utils/");i("a-videosphere",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],133:[function(e,t,n){var r=e("../getMeshMixin"),i=e("../../../core/geometry").geometries,o=e("../../../core/geometry").geometryNames,a=e("../primitives").registerPrimitive,s=e("../../../utils/"),c=t.exports={};function u(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}o.forEach(function(e){var t=i[e],n=u(e),o={};Object.keys(t.schema).forEach(function(e){o[u(e)]="geometry."+e});var l="a-"+n,h=a(l,s.extendDeep({},r(),{defaultComponents:{geometry:{primitive:e}},mappings:o}));c[l]=h})},{"../../../core/geometry":104,"../../../utils/":176,"../getMeshMixin":117,"../primitives":119}],134:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three");r("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new i.BoxGeometry(e.width,e.height,e.depth,e.segmentsWidth,e.segmentsHeight,e.segmentsDepth)}})},{"../core/geometry":104,"../lib/three":151}],135:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;r("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.CircleGeometry(e.radius,e.segments,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],136:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;r("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],137:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;r("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.CylinderGeometry(e.radius,e.radius,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],138:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three");r("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.DodecahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":104,"../lib/three":151}],139:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three");r("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.IcosahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":104,"../lib/three":151}],140:[function(e,t,n){e("./box.js"),e("./circle.js"),e("./cone.js"),e("./cylinder.js"),e("./dodecahedron.js"),e("./icosahedron.js"),e("./octahedron.js"),e("./plane.js"),e("./ring.js"),e("./sphere.js"),e("./tetrahedron.js"),e("./torus.js"),e("./torusKnot.js"),e("./triangle.js")},{"./box.js":134,"./circle.js":135,"./cone.js":136,"./cylinder.js":137,"./dodecahedron.js":138,"./icosahedron.js":139,"./octahedron.js":141,"./plane.js":142,"./ring.js":143,"./sphere.js":144,"./tetrahedron.js":145,"./torus.js":146,"./torusKnot.js":147,"./triangle.js":148}],141:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three");r("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.OctahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":104,"../lib/three":151}],142:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three");r("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new i.PlaneGeometry(e.width,e.height,e.segmentsWidth,e.segmentsHeight)}})},{"../core/geometry":104,"../lib/three":151}],143:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;r("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.RingGeometry(e.radiusInner,e.radiusOuter,e.segmentsTheta,e.segmentsPhi,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],144:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;r("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(e){this.geometry=new i.SphereGeometry(e.radius,e.segmentsWidth,e.segmentsHeight,o(e.phiStart),o(e.phiLength),o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":104,"../lib/three":151}],145:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three");r("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.TetrahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":104,"../lib/three":151}],146:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;r("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(e){this.geometry=new i.TorusGeometry(e.radius,2*e.radiusTubular,e.segmentsRadial,e.segmentsTubular,o(e.arc))}})},{"../core/geometry":104,"../lib/three":151}],147:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three");r("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(e){this.geometry=new i.TorusKnotGeometry(e.radius,2*e.radiusTubular,e.segmentsTubular,e.segmentsRadial,e.p,e.q)}})},{"../core/geometry":104,"../lib/three":151}],148:[function(e,t,n){var r=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=new i.Quaternion,a=new i.Vector3(0,0,1),s=new i.Vector2,c=new i.Vector2,u=new i.Vector2;r("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(e){var t,n,r,l,h,d;r=new i.Triangle,r.a.set(e.vertexA.x,e.vertexA.y,e.vertexA.z),r.b.set(e.vertexB.x,e.vertexB.y,e.vertexB.z),r.c.set(e.vertexC.x,e.vertexC.y,e.vertexC.z),n=r.getNormal(new i.Vector3),o.setFromUnitVectors(n,a),l=r.a.clone().applyQuaternion(o),h=r.b.clone().applyQuaternion(o),d=r.c.clone().applyQuaternion(o),s.set(Math.min(l.x,h.x,d.x),Math.min(l.y,h.y,d.y)),c.set(Math.max(l.x,h.x,d.x),Math.max(l.y,h.y,d.y)),u.set(0,0).subVectors(c,s),l=(new i.Vector2).subVectors(l,s).divide(u),h=(new i.Vector2).subVectors(h,s).divide(u),d=(new i.Vector2).subVectors(d,s).divide(u),t=this.geometry=new i.Geometry,t.vertices.push(r.a),t.vertices.push(r.b),t.vertices.push(r.c),t.faces.push(new i.Face3(0,1,2,n)),t.faceVertexUvs[0]=[[l,h,d]]}})},{"../core/geometry":104,"../lib/three":151}],149:[function(e,t,n){if(window.Promise=window.Promise||e("promise-polyfill"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=void 0!==navigator.xr,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var r=e("./utils/isIOSOlderThan10"),i=r(window.navigator.userAgent)?1/window.devicePixelRatio:1,o=e("webvr-polyfill"),a={BUFFER_SCALE:i,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0};window.webvrpolyfill=new o(a)}var s=e("./utils/"),c=s.debug;s.isIE11&&(e("custom-event-polyfill"),e("../vendor/starts-with-polyfill"));var u=c("A-Frame:error"),l=c("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&l("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&u("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),e("present"),s.device.isBrowserEnvironment&&(e("./style/aframe.css"),e("./style/rStats.css"));var h=e("./core/scene/a-scene").AScene,d=e("./core/component").components,p=e("./core/component").registerComponent,f=e("./core/geometry").registerGeometry,m=e("./extras/primitives/primitives").registerPrimitive,v=e("./core/shader").registerShader,g=e("./core/system").registerSystem,y=e("./core/shader").shaders,b=e("./core/system").systems,A=window.THREE=e("./lib/three"),w=e("../package");e("./components/index"),e("./geometries/index"),e("./shaders/index"),e("./systems/index");var x=e("./core/a-node"),E=e("./core/a-entity");e("./core/a-assets"),e("./core/a-cubemap"),e("./core/a-mixin"),e("./extras/components/"),e("./extras/primitives/"),console.log("A-Frame Version: 0.9.2 (Date 2019-05-06, Commit #f57a1fa)"),console.log("three Version (https://github.com/supermedium/three.js):",w.dependencies["super-three"]),console.log("WebVR Polyfill Version:",w.dependencies["webvr-polyfill"]),t.exports=window.AFRAME={AComponent:e("./core/component").Component,AEntity:E,ANode:x,ANIME:e("super-animejs"),AScene:h,components:d,coreComponents:Object.keys(d),geometries:e("./core/geometry").geometries,registerComponent:p,registerElement:e("./core/a-register-element").registerElement,registerGeometry:f,registerPrimitive:m,registerShader:v,registerSystem:g,primitives:{getMeshMixin:e("./extras/primitives/getMeshMixin"),primitives:e("./extras/primitives/primitives").primitives},scenes:e("./core/scene/scenes"),schema:e("./core/schema"),shaders:y,systems:b,THREE:A,utils:s,version:w.version}},{"../package":51,"../vendor/starts-with-polyfill":187,"./components/index":60,"./core/a-assets":97,"./core/a-cubemap":98,"./core/a-entity":99,"./core/a-mixin":100,"./core/a-node":101,"./core/a-register-element":102,"./core/component":103,"./core/geometry":104,"./core/scene/a-scene":106,"./core/scene/scenes":110,"./core/schema":112,"./core/shader":113,"./core/system":114,"./extras/components/":115,"./extras/primitives/":118,"./extras/primitives/getMeshMixin":117,"./extras/primitives/primitives":119,"./geometries/index":140,"./lib/three":151,"./shaders/index":153,"./style/aframe.css":158,"./style/rStats.css":159,"./systems/index":163,"./utils/":176,"./utils/isIOSOlderThan10":178,"custom-event-polyfill":7,present:31,"promise-polyfill":33,"super-animejs":35,"webvr-polyfill":46}],150:[function(e,t,n){window.aframeStats=function(e){var t=null,n=e,r={te:{caption:"Entities"},lt:{caption:"Load Time"}},i=[{caption:"A-Frame",values:["te","lt"]}];function o(){t("te").set(a()),window.performance.getEntriesByName&&t("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function a(){var e=n.querySelectorAll("*");return Array.prototype.slice.call(e).filter(function(e){return e.isEntity}),e.length}function s(){}function c(){}function u(e){t=e}return{update:o,start:s,end:c,attach:u,values:r,groups:i,fractions:[]}},"object"===typeof t&&(t.exports={aframeStats:window.aframeStats})},{}],151:[function(e,t,r){(function(n){var r=n.THREE=e("super-three");r.TextureLoader&&(r.TextureLoader.prototype.crossOrigin="anonymous"),r.ImageLoader&&(r.ImageLoader.prototype.crossOrigin="anonymous"),r.Cache&&(r.Cache.enabled=!0),e("super-three/examples/js/loaders/DRACOLoader"),e("super-three/examples/js/loaders/GLTFLoader"),e("super-three/examples/js/loaders/OBJLoader"),e("super-three/examples/js/loaders/MTLLoader"),r.DRACOLoader.prototype.crossOrigin="anonymous",r.GLTFLoader.prototype.crossOrigin="anonymous",r.MTLLoader.prototype.crossOrigin="anonymous",r.OBJLoader.prototype.crossOrigin="anonymous",t.exports=r}).call(this,"undefined"!==typeof n?n:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"super-three":36,"super-three/examples/js/loaders/DRACOLoader":37,"super-three/examples/js/loaders/GLTFLoader":38,"super-three/examples/js/loaders/MTLLoader":39,"super-three/examples/js/loaders/OBJLoader":40}],152:[function(e,t,n){var r=e("../core/shader").registerShader,i=e("../lib/three"),o=e("../utils/");function a(e,t){return t.color.set(e.color),t.fog=e.fog,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,t}t.exports.Shader=r("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new i.Color},this.textureSrc=null,a(e,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new i.MeshBasicMaterial(this.materialData),o.material.updateMap(this,e)},update:function(e){this.updateMaterial(e),o.material.updateMap(this,e)},updateMaterial:function(e){var t;for(t in a(e,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.materialData)this.material[t]=this.materialData[t]}})},{"../core/shader":113,"../lib/three":151,"../utils/":176}],153:[function(e,t,n){e("./flat"),e("./standard"),e("./sdf"),e("./msdf"),e("./ios10hls")},{"./flat":152,"./ios10hls":154,"./msdf":155,"./sdf":156,"./standard":157}],154:[function(e,t,n){var r=e("../core/shader").registerShader;t.exports.Shader=r("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join("\n")})},{"../core/shader":113}],155:[function(e,t,n){var r=e("../core/shader").registerShader;t.exports.Shader=r("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sample = texture2D(map, vUV).rgb;","  if (negate) { sample = 1.0 - sample; }","  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join("\n")})},{"../core/shader":113}],156:[function(e,t,n){var r=e("../core/shader").registerShader;t.exports.Shader=r("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture2D(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture2D(map, box.xy).a, width)","        + contour(texture2D(map, box.zw).a, width)","        + contour(texture2D(map, box.xw).a, width)","        + contour(texture2D(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture2D(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join("\n")})},{"../core/shader":113}],157:[function(e,t,n){var r=e("../core/shader").registerShader,i=e("../lib/three"),o=e("../utils/"),a=new i.CubeTextureLoader,s={};function c(e,t){return t.color.set(e.color),t.emissive.set(e.emissive),t.emissiveIntensity=e.emissiveIntensity,t.fog=e.fog,t.metalness=e.metalness,t.roughness=e.roughness,t.wireframe=e.wireframe,t.wireframeLinewidth=e.wireframeLinewidth,e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}t.exports.Shader=r("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new i.Color,emissive:new i.Color},c(e,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new i.MeshStandardMaterial(this.materialData),o.material.updateMap(this,e),e.normalMap&&o.material.updateDistortionMap("normal",this,e),e.displacementMap&&o.material.updateDistortionMap("displacement",this,e),e.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,e),e.metalnessMap&&o.material.updateDistortionMap("metalness",this,e),e.roughnessMap&&o.material.updateDistortionMap("roughness",this,e),this.updateEnvMap(e)},update:function(e){this.updateMaterial(e),o.material.updateMap(this,e),e.normalMap&&o.material.updateDistortionMap("normal",this,e),e.displacementMap&&o.material.updateDistortionMap("displacement",this,e),e.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,e),e.metalnessMap&&o.material.updateDistortionMap("metalness",this,e),e.roughnessMap&&o.material.updateDistortionMap("roughness",this,e),this.updateEnvMap(e)},updateMaterial:function(e){var t,n=this.material;for(t in c(e,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.materialData)n[t]=this.materialData[t]},updateEnvMap:function(e){var t=this,n=this.material,r=e.envMap,c=e.sphericalEnvMap;if(!r&&!c||this.isLoadingEnvMap)return n.envMap=null,void(n.needsUpdate=!0);this.isLoadingEnvMap=!0,c?this.el.sceneEl.systems.material.loadTexture(c,{src:c},function(e){t.isLoadingEnvMap=!1,e.mapping=i.SphericalReflectionMapping,n.envMap=e,o.material.handleTextureEvents(t.el,e),n.needsUpdate=!0}):s[r]?s[r].then(function(e){t.isLoadingEnvMap=!1,n.envMap=e,o.material.handleTextureEvents(t.el,e),n.needsUpdate=!0}):s[r]=new Promise(function(e){o.srcLoader.validateCubemapSrc(r,function(r){a.load(r,function(r){t.isLoadingEnvMap=!1,n.envMap=r,o.material.handleTextureEvents(t.el,r),e(r)})})})}})},{"../core/shader":113,"../lib/three":151,"../utils/":176}],158:[function(e,t,n){var r="html.a-fullscreen{bottom:0;left:0;position:fixed;right:0;top:0}html.a-fullscreen body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}html.a-fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;position:fixed!important}html:not(.a-fullscreen) .a-enter-vr{right:5px;bottom:5px}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}canvas.a-canvas.a-mouse-cursor-hover:hover{cursor:pointer}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}.a-loader-title{background-color:rgba(0,0,0,.6);font-family:sans-serif,monospace;text-align:center;font-size:20px;height:50px;font-weight:300;line-height:50px;position:absolute;right:0;left:0;top:0;color:#fff}";e("browserify-css").createStyle(r,{href:"src/style/aframe.css"}),t.exports=r},{"browserify-css":4}],159:[function(e,t,n){var r=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";e("browserify-css").createStyle(r,{href:"src/style/rStats.css"}),t.exports=r},{"browserify-css":4}],160:[function(e,t,n){var r=e("../constants/"),i=e("../core/system").registerSystem,o="data-aframe-default-camera";function a(e){var t,n=e.camera;n&&(t=e.querySelector("["+o+"]"),t&&e.removeChild(t))}t.exports.System=i("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var e,t,n=this.sceneEl,r=this;if(!n.camera||n.camera.el.getAttribute("camera").spectator)if(e=n.querySelectorAll("a-camera, [camera]"),e.length)for(this.numUserCameras=e.length,t=0;t<e.length;t++)e[t].addEventListener("object3dset",function(e){"camera"===e.detail.type&&r.checkUserCamera(this)}),e[t].isNode?e[t].load():e[t].addEventListener("nodeready",function(){this.load()});else this.createDefaultCamera();else n.emit("cameraready",{cameraEl:n.camera.el})},checkUserCamera:function(e){var t,n=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||(t=e.getAttribute("camera"),t.active&&!t.spectator?(this.initialCameraFound=!0,n.camera=e.getObject3D("camera"),n.emit("cameraready",{cameraEl:e})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var e,t=this.sceneEl;e=document.createElement("a-entity"),e.setAttribute("camera",{active:!0}),e.setAttribute("position",{x:0,y:r.DEFAULT_CAMERA_HEIGHT,z:0}),e.setAttribute("wasd-controls",""),e.setAttribute("look-controls",""),e.setAttribute(r.AFRAME_INJECTED,""),e.addEventListener("object3dset",function(n){"camera"===n.detail.type&&(t.camera=n.detail.object,t.emit("cameraready",{cameraEl:e}))}),t.appendChild(e)},disableActiveCamera:function(){var e,t;e=this.sceneEl.querySelectorAll("[camera]"),t=e[e.length-1],t.setAttribute("camera","active",!0)},setActiveCamera:function(e){var t,n,r,i,s=this.activeCameraEl,c=this.sceneEl;if(i=e.getObject3D("camera"),i&&e!==this.activeCameraEl){var u=c.querySelector("["+o+"]"),l=u&&u.querySelector("[camera]");for(e!==l&&a(c),this.activeCameraEl=e,this.activeCameraEl.play(),c.camera=i,s&&s.setAttribute("camera","active",!1),n=c.querySelectorAll("[camera]"),r=0;r<n.length;r++)t=n[r],t.isEntity&&e!==t&&(t.setAttribute("camera","active",!1),t.pause());c.emit("camera-set-active",{cameraEl:e})}},setSpectatorCamera:function(e){var t,n,r=this.spectatorCameraEl,i=this.sceneEl;t=e.getObject3D("camera"),t&&e!==this.spectatorCameraEl&&(r&&r.setAttribute("camera","spectator",!1),n=this.spectatorCameraEl=e,i.addEventListener("enter-vr",this.wrapRender),i.addEventListener("exit-vr",this.unwrapRender),n.setAttribute("camera","active",!1),n.play(),i.emit("camera-set-spectator",{cameraEl:e}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(e,t){var n,r,i=this.sceneEl;n=i.renderer.vr.enabled,this.originalRender.call(i.renderer,e,t),this.spectatorCameraEl&&!i.isMobile&&n&&(r=this.spectatorCameraEl.components.camera.camera,i.renderer.vr.enabled=!1,this.originalRender.call(i.renderer,e,r),i.renderer.vr.enabled=n)}})},{"../constants/":95,"../core/system":114}],161:[function(e,t,n){var r=e("../core/geometry").geometries,i=e("../core/system").registerSystem,o=e("../lib/three");function a(e){var t=e.primitive,n=r[t]&&r[t].Geometry,i=new n;if(!n)throw new Error("Unknown geometry `"+t+"`");return i.init(e),u(i.geometry,e.buffer)}function s(e,t){e[t]--}function c(e,t){e[t]=void 0===e[t]?1:e[t]+1}function u(e,t){var n;return t?(n=(new o.BufferGeometry).fromGeometry(e),n.metadata={type:e.type,parameters:e.parameters||{}},e.dispose(),n):e}t.exports.System=i("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(e){var t,n,r=this.cache;return e.skipCache?a(e):(n=this.hash(e),t=r[n],c(this.cacheCount,n),t||(t=a(e),r[n]=t,t))},unuseGeometry:function(e){var t,n,r=this.cache,i=this.cacheCount;e.skipCache||(n=this.hash(e),r[n]&&(s(i,n),i[n]>0||(t=r[n],t.dispose(),delete r[n],delete i[n])))},hash:function(e){return JSON.stringify(e)}})},{"../core/geometry":104,"../core/system":114,"../lib/three":151}],162:[function(e,t,n){var r=e("../core/system").registerSystem,i=e("../lib/three");t.exports.System=r("gltf-model",{schema:{dracoDecoderPath:{default:""}},init:function(){var e=this.data.dracoDecoderPath;i.DRACOLoader.setDecoderPath(e),this.dracoLoader=e?new i.DRACOLoader:null},update:function(){var e;this.dracoLoader||(e=this.data.dracoDecoderPath,i.DRACOLoader.setDecoderPath(e),this.dracoLoader=e?new i.DRACOLoader:null)},getDRACOLoader:function(){return this.dracoLoader}})},{"../core/system":114,"../lib/three":151}],163:[function(e,t,n){e("./camera"),e("./geometry"),e("./gltf-model"),e("./light"),e("./material"),e("./renderer"),e("./shadow"),e("./tracked-controls-webvr"),e("./tracked-controls-webxr")},{"./camera":160,"./geometry":161,"./gltf-model":162,"./light":164,"./material":165,"./renderer":166,"./shadow":167,"./tracked-controls-webvr":168,"./tracked-controls-webxr":169}],164:[function(e,t,n){var r=e("../core/system").registerSystem,i=e("../utils/bind"),o=e("../constants/"),a="data-aframe-default-light";t.exports.System=r("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",i(this.setupDefaultLights,this))},registerLight:function(e){e.hasAttribute(a)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var e,t=this.sceneEl;if(this.defaultLights){e=document.querySelectorAll("["+a+"]");for(var n=0;n<e.length;n++)t.removeChild(e[n]);this.defaultLights=!1}},setupDefaultLights:function(){var e,t,n=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(e=document.createElement("a-entity"),e.setAttribute("light",{color:"#BBB",type:"ambient"}),e.setAttribute(a,""),e.setAttribute(o.AFRAME_INJECTED,""),n.appendChild(e),t=document.createElement("a-entity"),t.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute(a,""),t.setAttribute(o.AFRAME_INJECTED,""),n.appendChild(t),this.defaultLights=!0)}})},{"../constants/":95,"../core/system":114,"../utils/bind":170}],165:[function(e,t,n){var r=e("../core/system").registerSystem,i=e("../lib/three"),o=e("../utils/"),a=e("../utils/material").isHLS,s=o.bind,c=o.debug,u=c("components:texture:error"),l=new i.TextureLoader,h=c("components:texture:warn");function d(e,t){var n,r,i,o=t.getAttribute("id");if(o)return o;for(r="",i=e||{},n=0;n<t.attributes.length;n++)i[t.attributes[n].name]=t.attributes[n].value;return Object.keys(i).sort().forEach(function(e){r+=e+":"+i[e]+";"}),r}function p(e,t){return new Promise(n);function n(n,r){var o="string"!==typeof e;function a(e){f(e,t),e.needsUpdate=!0,n(e)}o?a(new i.Texture(e)):l.load(e,a,function(){},function(e){u("`$s` could not be fetched (Error code: %s; Response: %s)",e.status,e.statusText)})}}function f(e,t){var n=t.offset||{x:0,y:0},r=t.repeat||{x:1,y:1},o=t.npot||!1;o&&(e.wrapS=i.ClampToEdgeWrapping,e.wrapT=i.ClampToEdgeWrapping,e.magFilter=i.LinearFilter,e.minFilter=i.LinearFilter),1===r.x&&1===r.y||(e.wrapS=i.RepeatWrapping,e.wrapT=i.RepeatWrapping,e.repeat.set(r.x,r.y)),0===n.x&&0===n.y||e.offset.set(n.x,n.y)}function m(e,t,n){var r=document.createElement("video");return r.width=t,r.height=n,r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.autoplay=!0,r.loop=!0,r.crossOrigin="anonymous",r.addEventListener("error",function(){h("`$s` is not a valid video",e)},!0),r.src=e,r}function v(e){return e.autoplay=e.hasAttribute("autoplay")&&"false"!==e.getAttribute("autoplay"),e.controls=e.hasAttribute("controls")&&"false"!==e.getAttribute("controls"),"false"===e.getAttribute("loop")&&e.removeAttribute("loop"),"false"===e.getAttribute("preload")&&(e.preload="none"),e.crossOrigin=e.crossOrigin||"anonymous",e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e}l.setCrossOrigin("anonymous"),t.exports.System=r("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",s(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(e,t,n){var r=this;if("CANVAS"!==e.tagName){if("VIDEO"===e.tagName)return e.src||e.srcObject||e.childElementCount||h("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),void this.loadVideo(e,t,n);o.srcLoader.validateSrc(e,i,a)}else this.loadCanvas(e,t,n);function i(e){r.loadImage(e,t,n)}function a(e){r.loadVideo(e,t,n)}},loadImage:function(e,t,n){var r=this.hash(t),i=this.textureCache;i[r]?i[r].then(n):(i[r]=p(e,t),i[r].then(n))},loadCanvas:function(e,t,n){var r;r=new i.CanvasTexture(e),f(r,t),n(r)},loadVideo:function(e,t,n){var r,o,s,c,u=this.textureCache;function l(e){e.texture.needsUpdate=!0,n(e.texture,e.videoEl)}if("string"!==typeof e){if(s=e,r=this.hashVideo(t,s),u[r])return void u[r].then(l);v(s)}s=s||m(e,t.width,t.height),r=this.hashVideo(t,s),u[r]?u[r].then(l):(o=new i.VideoTexture(s),o.minFilter=i.LinearFilter,f(o,t),this.sceneEl.isIOS&&a(s.src||s.getAttribute("src"),s.type||s.getAttribute("type"))&&(o.format=i.RGBAFormat,o.needsCorrectionBGRA=!0,o.flipY=!1,o.needsCorrectionFlipY=!0),c={texture:o,videoEl:s},u[r]=Promise.resolve(c),l(c))},hash:function(e){return e.src.tagName&&(e=o.extendDeep({},e),e.src=e.src.src),JSON.stringify(e)},hashVideo:function(e,t){return d(e,t)},registerMaterial:function(e){this.materials[e.uuid]=e},unregisterMaterial:function(e){delete this.materials[e.uuid];var t=this.textureCounts;Object.keys(e).filter(function(t){return e[t]&&e[t].isTexture}).forEach(function(n){t[e[n].uuid]--,t[e[n].uuid]<=0&&e[n].dispose()})},updateMaterials:function(e){var t=this.materials;Object.keys(t).forEach(function(e){t[e].needsUpdate=!0})},onMaterialTextureLoaded:function(e){this.textureCounts[e.detail.texture.uuid]||(this.textureCounts[e.detail.texture.uuid]=0),this.textureCounts[e.detail.texture.uuid]++}})},{"../core/system":114,"../lib/three":151,"../utils/":176,"../utils/material":179}],166:[function(e,t,n){var r=e("../core/system").registerSystem,i=e("../utils/"),o=e("../lib/three"),a=i.debug,s=a("components:renderer:warn");t.exports.System=r("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:!1},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:0}},init:function(){var e=this.data,t=this.el,n=t.renderer;n.sortObjects=e.sortObjects,n.physicallyCorrectLights=e.physicallyCorrectLights,(e.colorManagement||e.gammaOutput)&&(n.gammaOutput=!0,n.gammaFactor=2.2,e.gammaOutput&&s('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),t.hasAttribute("antialias")&&s('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),t.hasAttribute("logarithmicDepthBuffer")&&s('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},applyColorCorrection:function(e){this.data.colorManagement&&e&&(e.isColor?e.convertSRGBToLinear():e.isTexture&&(e.encoding=o.sRGBEncoding))}})},{"../core/system":114,"../lib/three":151,"../utils/":176}],167:[function(e,t,n){var r=e("../core/system").registerSystem,i=e("../lib/three"),o={basic:i.BasicShadowMap,pcf:i.PCFShadowMap,pcfsoft:i.PCFSoftShadowMap};t.exports.System=r("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var e=this.sceneEl,t=this.data;this.shadowMapEnabled=!1,e.renderer&&(e.renderer.shadowMap.type=o[t.type],e.renderer.shadowMap.autoUpdate=t.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(e){e.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(e){var t=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&e,t&&(t.shadowMap.enabled=this.shadowMapEnabled)}})},{"../core/system":114,"../lib/three":151}],168:[function(e,t,n){var r=e("../core/system").registerSystem,i=e("../utils");t.exports.System=r("tracked-controls-webvr",{init:function(){var e=this;this.controllers=[],this.isChrome=-1!==navigator.userAgent.indexOf("Chrome"),this.updateControllerList(),this.throttledUpdateControllerList=i.throttle(this.updateControllerList,500,this),navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(t){t.length&&(e.vrDisplay=t[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var e,t,n,r,i=this.controllers;if(t=navigator.getGamepads&&navigator.getGamepads(),t){for(r=i.length,i.length=0,n=0;n<t.length;++n)e=t[n],e&&e.pose&&i.push(e);i.length!==r&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":114,"../utils":176}],169:[function(e,t,n){var r=e("../core/system").registerSystem,i=e("../utils");t.exports.System=r("tracked-controls-webxr",{init:function(){this.controllers=[],this.throttledUpdateControllerList=i.throttle(this.updateControllerList,500,this)},tick:function(){this.throttledUpdateControllerList()},updateControllerList:function(){var e=this.controllers.length;this.el.xrSession&&(this.controllers=this.el.xrSession.getInputSources(),e!==this.controllers.length&&this.el.emit("controllersupdated",void 0,!1))}})},{"../core/system":114,"../utils":176}],170:[function(e,t,n){t.exports=function(e,t){return function(n){return function(){var r=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,r)}}(Array.prototype.slice.call(arguments,2))}},{}],171:[function(e,t,n){var r=e("./debug"),i=e("object-assign"),o=r("utils:coordinates:warn"),a=["x","y","z","w"],s=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;t.exports.regex=s;var c="object",u=/\s+/g;function l(e,t){var n,r,o,s,l,h,d,f,m;if(e&&e instanceof Object)return h=void 0===e.x?t&&t.x:e.x,d=void 0===e.y?t&&t.y:e.y,f=void 0===e.z?t&&t.z:e.z,m=void 0===e.w?t&&t.w:e.w,void 0!==h&&null!==h&&(e.x=p(h)),void 0!==d&&null!==d&&(e.y=p(d)),void 0!==f&&null!==f&&(e.z=p(f)),void 0!==m&&null!==m&&(e.w=p(m)),e;if(null===e||void 0===e)return typeof t===c?i({},t):t;for(n=e.trim().split(u),l={},s=0;s<a.length;s++)if(o=a[s],n[s])l[o]=parseFloat(n[s],10);else{if(r=t&&t[o],void 0===r)continue;l[o]=p(r)}return l}function h(e){var t;return typeof e!==c?e:(t=e.x+" "+e.y,null!=e.z&&(t+=" "+e.z),null!=e.w&&(t+=" "+e.w),t)}function d(e){return s.test(e)}function p(e){return null!==e&&void 0!==e&&e.constructor===String?parseFloat(e,10):e}t.exports.parse=l,t.exports.stringify=h,t.exports.isCoordinates=d,t.exports.isCoordinate=function(e){return o("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),d(e)},t.exports.toVector3=function(e){return new THREE.Vector3(e.x,e.y,e.z)}},{"./debug":172,"object-assign":25}],172:[function(t,n,r){(function(r){var i=t("debug"),o=t("object-assign"),a={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},s=function(e){var t=i(e);return t.color=u(e),t};function c(e){var t=e.split(":");return t[t.length-1]}function u(e){var t=c(e),n=a.colors&&a.colors[t];return n||null}function l(){try{return window.localStorage}catch(e){}}o(s,i);var h=l();h&&(parseInt(h.logs,10)||"true"===h.logs)?s.enable("*"):s.enable("*:error,*:info,*:warn"),r.browser&&(window.logs=s),n.exports=s}).call(this,t("_process"))},{_process:32,debug:8,"object-assign":25}],173:[function(e,t,n){(function(n){var r,i=e("debug")("device:error");function o(){return r}function a(){return!!o()}window.addEventListener("vrdisplayactivate",function(e){var t;navigator.xr||(t=document.createElement("canvas"),r=e.display,r.requestPresent([{source:t}]).then(function(){},function(){}))}),navigator.xr?navigator.xr.requestDevice().then(function(e){e&&e.supportsSession({immersive:!0,exclusive:!0}).then(function(){var t=document.querySelector("a-scene");r=e,t&&t.emit("displayconnected",{vrDisplay:r})})}).catch(function(e){i("WebXR Request Device: "+e.message)}):navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){var t=document.querySelector("a-scene");r=e.length&&e[0],t&&t.emit("displayconnected",{vrDisplay:r})}),t.exports.isWebXRAvailable=void 0!==navigator.xr,t.exports.getVRDisplay=o,t.exports.checkHeadsetConnected=a;var s=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),(u()||c()||h())&&(e=!0),l()&&(e=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return e}}();function c(e){var t=e||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(t)}function u(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function l(){return/(OculusBrowser)|(SamsungBrowser)|(Mobile VR)/i.test(window.navigator.userAgent)}function h(){return/R7 Build/.test(window.navigator.userAgent)}t.exports.isMobile=s,t.exports.isTablet=c,t.exports.isIOS=u,t.exports.isMobileVR=l,t.exports.isR7=h,t.exports.isLandscape=function(){var e=window.orientation;return h()&&(e+=90),90===e||-90===e},t.exports.isBrowserEnvironment=!(n&&!n.browser),t.exports.isNodeEnvironment=!t.exports.isBrowserEnvironment,t.exports.PolyfillControls=function(e){var t,n=window.webvrpolyfill&&window.webvrpolyfill.getPolyfillDisplays()[0];window.VRFrameData&&(t=new window.VRFrameData),this.update=function(){var r;n&&(n.getFrameData(t),r=t.pose,null!==r.orientation&&e.quaternion.fromArray(r.orientation),null!==r.position?e.position.fromArray(r.position):e.position.set(0,0,0))}}}).call(this,e("_process"))},{_process:32,debug:8}],174:[function(e,t,n){var r={};function i(e,t){return t=t||".",r[t]||(r[t]={}),-1!==e.indexOf(t)?r[t][e]=e.split(t):r[t][e]=e,r[t][e]}t.exports.getComponentPropertyPath=i,t.exports.propertyPathCache=r,t.exports.getComponentProperty=function(e,t,n){var r;return n=n||".",-1!==t.indexOf(n)?(r=i(t,n),r.constructor===String?e.getAttribute(r):e.getAttribute(r[0])[r[1]]):e.getAttribute(t)},t.exports.setComponentProperty=function(e,t,n,r){var o;if(r=r||".",-1!==t.indexOf(r))return o=i(t,r),void(o.constructor===String?e.setAttribute(o,n):e.setAttribute(o[0],o[1],n));e.setAttribute(t,n)}},{}],175:[function(e,t,n){t.exports=function(e){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t,10)+1+"px",e.style.height=parseInt(n,10)+1+"px",setTimeout(function(){e.style.width=t,e.style.height=n},200)}},{}],176:[function(e,t,n){var r=e("./debug"),i=e("deep-assign"),o=e("./device"),a=e("object-assign"),s=e("./object-pool"),c=r("utils:warn");t.exports.bind=e("./bind"),t.exports.coordinates=e("./coordinates"),t.exports.debug=r,t.exports.device=o,t.exports.entity=e("./entity"),t.exports.forceCanvasResizeSafariMobile=e("./forceCanvasResizeSafariMobile"),t.exports.isIE11=e("./is-ie11"),t.exports.material=e("./material"),t.exports.objectPool=s,t.exports.split=e("./split").split,t.exports.styleParser=e("./styleParser"),t.exports.trackedControls=e("./tracked-controls"),t.exports.checkHeadsetConnected=function(){return c("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),o.checkHeadsetConnected(arguments)},t.exports.isGearVR=t.exports.device.isGearVR=function(){c("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},t.exports.isIOS=function(){return c("`utils.isIOS` has moved to `utils.device.isIOS`"),o.isIOS(arguments)},t.exports.isOculusGo=t.exports.device.isOculusGo=function(){c("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},t.exports.isMobile=function(){return c("`utils.isMobile has moved to `utils.device.isMobile`"),o.isMobile(arguments)},t.exports.throttle=function(e,n,r){var i;return r&&(e=t.exports.bind(e,r)),function(){var t=Date.now(),r="undefined"===typeof i?n:t-i;("undefined"===typeof i||r>=n)&&(i=t,e.apply(null,arguments))}},t.exports.throttleTick=function(e,n,r){var i;return r&&(e=t.exports.bind(e,r)),function(t,r){var o="undefined"===typeof i?r:t-i;("undefined"===typeof i||o>=n)&&(i=t,e(t,o))}},t.exports.debounce=function(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},t.exports.extend=a,t.exports.extendDeep=i,t.exports.clone=function(e){return JSON.parse(JSON.stringify(e))};var u=function(){var e=s.createPool(function(){return[]});return function(t,n){var r,i,o,a,s,c;if(void 0===t||void 0===n||null===t||null===n||!(t&&n&&t.constructor===Object&&n.constructor===Object||t.constructor===Array&&n.constructor===Array))return t===n;for(r in i=e.use(),o=e.use(),i.length=0,o.length=0,t)i.push(r);for(r in n)o.push(r);if(i.length!==o.length)return e.recycle(i),e.recycle(o),!1;for(a=0;a<i.length;++a)if(s=t[i[a]],c=n[i[a]],"object"===typeof s||"object"===typeof c||Array.isArray(s)&&Array.isArray(c)){if(s===c)continue;if(!u(s,c))return e.recycle(i),e.recycle(o),!1}else if(s!==c)return e.recycle(i),e.recycle(o),!1;return e.recycle(i),e.recycle(o),!0}}();t.exports.deepEqual=u,t.exports.diff=function(){var e=[];return function(t,n,r){var i,o,a,s,c,l,h;for(c in s=r||{},e.length=0,t)e.push(c);if(!n)return s;for(a in n)-1===e.indexOf(a)&&e.push(a);for(l=0;l<e.length;l++)c=e[l],i=t[c],o=n[c],h=i&&o&&i.constructor===Object&&o.constructor===Object,(h&&!u(i,o)||!h&&i!==o)&&(s[c]=o);return s}}(),t.exports.shouldCaptureKeyEvent=function(e){return!e.metaKey&&document.activeElement===document.body},t.exports.splitString=function(e,t){"undefined"===typeof t&&(t=" ");var n=new RegExp(t,"g");return e=(e||"").replace(n,t),e.split(t)},t.exports.getElData=function(e,t){t=t||{};var n={};function r(t){e.hasAttribute(t)&&(n[t]=e.getAttribute(t))}return Object.keys(t).forEach(r),n},t.exports.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},t.exports.isIframed=function(){return window.top!==window.self},t.exports.findAllScenes=function(e){for(var t=[],n=e.getElementsByTagName("*"),r=0,i=n.length;r<i;r++)n[r].isScene&&t.push(n[r]);return t},t.exports.srcLoader=e("./src-loader")},{"./bind":170,"./coordinates":171,"./debug":172,"./device":173,"./entity":174,"./forceCanvasResizeSafariMobile":175,"./is-ie11":177,"./material":179,"./object-pool":180,"./split":181,"./src-loader":182,"./styleParser":183,"./tracked-controls":184,"deep-assign":10,"object-assign":25}],177:[function(e,t,n){function r(){var e,t=-1,n=navigator.userAgent;return"Microsoft Internet Explorer"===navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!=e.exec(n)&&(t=parseFloat(RegExp.$1))):"Netscape"===navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!=e.exec(n)&&(t=parseFloat(RegExp.$1))),t}t.exports=11===r()},{}],178:[function(e,t,n){t.exports=function(e){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(e)}},{}],179:[function(e,t,n){var r=e("../lib/three"),i=["application/x-mpegurl","application/vnd.apple.mpegurl"],o=new Set(["emissiveMap","envMap","map","specularMap"]);function a(e,t){t&&(e.emit("materialtextureloaded",{src:t.image,texture:t}),t.image&&"VIDEO"===t.image.tagName&&(t.image.addEventListener("loadeddata",function(){e.components&&e.components.material&&(t.needsCorrectionBGRA&&t.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(e.components.material.data.shader)&&e.setAttribute("material","shader","ios10hls"),e.emit("materialvideoloadeddata",{src:t.image,texture:t}))}),t.image.addEventListener("ended",function(){e.emit("materialvideoended",{src:t.image,texture:t})})))}t.exports.updateMapMaterialFromData=function(e,t,n,i){var s=n.el,c=n.material,u=s.sceneEl.systems.renderer,l=i[t];if(n.materialSrcs||(n.materialSrcs={}),!l)return delete n.materialSrcs[e],void d(null);function h(t){n.materialSrcs[e]===l&&d(t)}function d(t){c[e]=t,t&&o.has(e)&&u.applyColorCorrection(t),c.needsUpdate=!0,a(s,t)}l!==n.materialSrcs[e]&&(n.materialSrcs[e]=l,l instanceof r.Texture?d(l):s.sceneEl.systems.material.loadTexture(l,{src:l,repeat:i.repeat,offset:i.offset,npot:i.npot},h))},t.exports.updateMap=function(e,n){return t.exports.updateMapMaterialFromData("map","src",e,n)},t.exports.updateDistortionMap=function(e,t,n){var r=e;"ambientOcclusion"===e&&(r="ao");var i=t.el,s=t.material,c=i.sceneEl.systems.renderer,u=n[e+"Map"],l={};if(l.src=u,l.offset=n[e+"TextureOffset"],l.repeat=n[e+"TextureRepeat"],l.wrap=n[e+"TextureWrap"],u){if(u===t[e+"TextureSrc"])return;return t[e+"TextureSrc"]=u,void i.sceneEl.systems.material.loadTexture(u,l,h)}function h(e){var t=r+"Map";s[t]=e,e&&o.has(t)&&c.applyColorCorrection(e),s.needsUpdate=!0,a(i,e)}s.map&&h(null)},t.exports.handleTextureEvents=a,t.exports.isHLS=function(e,t){return!(!t||!i.includes(t.toLowerCase()))||!!(e&&e.toLowerCase().indexOf(".m3u8")>0)}},{"../lib/three":151}],180:[function(e,t,n){var r=Object.freeze(Object.create(null));function i(){return{}}function o(e){var t;if(e&&e.constructor===Object)for(t in e)e[t]=void 0}function a(e,t){var n;if(e&&e.constructor===Object)for(n in e)n in t||delete e[n]}t.exports.createPool=function(e){var t=[],n=null;function a(){var e;return null!==n&&n!==t.length||c(t.length||5),e=t[n],t[n++]=r,o(e),e}function s(e){e instanceof Object&&(null!==n&&-1!==n?t[--n]=e:t[t.length]=e)}function c(r){var i,o;if(r=void 0===r?t.length:r,r>0&&null==n&&(n=0),r>0)for(i=t.length,t.length+=Number(r),o=i;o<t.length;o++)t[o]=e();return t.length}function u(){return t.length}return e=e||i,{grow:c,pool:t,recycle:s,size:u,use:a}},t.exports.clearObject=o,t.exports.removeUnusedKeys=a},{}],181:[function(e,t,n){t.exports.split=function(){var e={};return function(t,n){return n in e||(e[n]={}),t in e[n]?e[n][t]:(e[n][t]=t.split(n),e[n][t])}}()},{}],182:[function(t,n,r){var i=t("./debug"),o=i("utils:src-loader:warn");function a(e,t,n){u(e,function(r){r?t(e):n(e)})}function s(e,t){var n,r,i,s="",u=[];for(r=0;r<5;r++)s+="(url\\((?:[^\\)]+)\\),\\s*)";function l(e){u.push(e),6===u.length&&t(u)}if(s+="(url\\((?:[^\\)]+)\\)\\s*)",i=e.match(new RegExp(s)),i)for(r=1;r<7;r++)a(c(i[r]),l);else if(n=h(e),n)return"A-CUBEMAP"===n.tagName&&n.srcs?t(n.srcs):void o('Selector "%s" does not point to <a-cubemap>',e)}function c(e){var t=e.match(/\url\((.+)\)/);if(t)return t[1]}function u(e,t){var n;e.tagName?t("IMG"===e.tagName):(n=new XMLHttpRequest,n.open("HEAD",e),n.addEventListener("load",function(r){var i;n.status>=200&&n.status<300?(i=n.getResponseHeader("Content-Type"),null==i?l(e,t):i.startsWith("image")?t(!0):t(!1)):l(e,t),n.abort()}),n.send())}function l(e,t){var n=new Image;function r(){t(!0)}function i(){t(!1)}n.addEventListener("load",r),n.addEventListener("error",i),n.src=e}function h(t){try{var n=document.querySelector(t);return n||o('No element was found matching the selector: "%s"',t),n}catch(e){return void o('"%s" is not a valid selector',t)}}n.exports={parseUrl:c,validateSrc:a,validateCubemapSrc:s}},{"./debug":172}],183:[function(e,t,n){var r=/-([a-z])/g;function i(e){return e.replace(r,u)}function o(e){var t,n;for(n in e)t=i(n),n!==t&&(e[t]=e[n],delete e[n]);return e}t.exports.parse=function(e,t){var n;return"string"!==typeof e?e:(n=s(e,t),n[""]?e:o(n))},t.exports.stringify=function(e){return"string"===typeof e?e:c(e)},t.exports.toCamelCase=i,t.exports.transformKeysToCamelCase=o;var a=function(){var e=[],t=/url\([^)]+$/;return function(n){var r,i="",o=0,a=";";e.length=0;while(o<n.length)r=n.indexOf(a,o),-1===r&&(r=n.length),i+=n.substring(o,r),t.test(i)?(i+=";",o=r+1):(e.push(i.trim()),i="",o=r+1);return e}}();function s(e,t){var n,r,i,o,s,c;for(t=t||{},n=a(e),r=0;r<n.length;r++)i=n[r],i&&(o=i.indexOf(":"),s=i.substr(0,o).trim(),c=i.substr(o+1).trim(),t[s]=c);return t}function c(e){var t,n=0,r=0,i="";for(t in e)n++;for(t in e)i+=t+": "+e[t],r<n-1&&(i+="; "),r++;return i}function u(e){return e[1].toUpperCase()}},{}],184:[function(e,t,n){var r=e("../constants").DEFAULT_HANDEDNESS,i=["x","y","z","w"],o=2;function a(e,t,n){var r,i,o=e.el.sceneEl,a=n.index||0;return!!t&&(i=o&&o.systems["tracked-controls-webvr"],!!i&&(r=i.controllers,!!r.length&&!!c(r,null,t,n.hand,a)))}function s(e,t,n){var r,i=e.el.sceneEl,o=i&&i.systems["tracked-controls-webxr"];return!!o&&(r=o.controllers,!(!r||!r.length)&&u(r,n.hand))}function c(e,t,n,i,a){var s,c,u=0,l=a||0;for(c=0;c<e.length;c++)if(s=e[c],(!n||s.id.startsWith(n))&&(n||s.id===t)&&(!i||!s.hand||i===s.hand)){if(i&&!s.hand&&(l=o*a+(i===r?0:1)),u===l)return s;++u}}function u(e,t){var n,r;for(n=0;n<e.length;n++)if(r=e[n].handedness,!t||""===r&&"right"===t||e[n].handedness===t)return e[n]}t.exports.checkControllerPresentAndSetup=function(e,t,n){var r,i,o=e.el,c=o.sceneEl.hasWebXR,u=c?s:a;if(r=u(e,t,n),i=!!r,!e.controllerPresent||e.controllerEventsActive||c||e.addEventListeners(),i===e.controllerPresent)return i;e.controllerPresent=i,i?(e.injectTrackedControls(),c||e.addEventListeners(),o.emit("controllerconnected",{name:e.name,component:e})):(e.removeEventListeners(),o.emit("controllerdisconnected",{name:e.name,component:e}))},t.exports.isControllerPresentWebVR=a,t.exports.isControllerPresentWebXR=s,t.exports.findMatchingControllerWebVR=c,t.exports.findMatchingControllerWebXR=u,t.exports.emitIfAxesChanged=function(e,t,n){var r,o,a,s,c;for(o in t){for(r=t[o],a=!1,c=0;c<r.length;c++)n.detail.changed[r[c]]&&(a=!0);if(a){for(s={},c=0;c<r.length;c++)s[i[c]]=n.detail.axis[r[c]];e.el.emit(o+"moved",s)}}},t.exports.onButtonEvent=function(e,t,n,r){var i=r?n.mapping[r]:n.mapping,o=i.buttons[e];n.el.emit(o+t),n.updateModel&&n.updateModel(o,t)}},{"../constants":95}],185:[function(e,t,n){window.glStats=function(){var e=null,t=0,n=0,r=0,i=0,o=0,a=0,s=0;function c(e,t){return function(){t.apply(this,arguments),e.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=c(WebGLRenderingContext.prototype.drawArrays,function(){t++,arguments[0]==this.POINTS?a+=arguments[2]:o+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=c(WebGLRenderingContext.prototype.drawElements,function(){n++,i+=arguments[1]/3,o+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=c(WebGLRenderingContext.prototype.useProgram,function(){r++}),WebGLRenderingContext.prototype.bindTexture=c(WebGLRenderingContext.prototype.bindTexture,function(){s++});var u={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},l=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],h=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function d(){e("allcalls").set(t+n),e("drawElements").set(n),e("drawArrays").set(t),e("bindTexture").set(s),e("useProgram").set(r),e("glfaces").set(i),e("glvertices").set(o),e("glpoints").set(a)}function p(){t=0,n=0,r=0,i=0,o=0,a=0,s=0}function f(){}function m(t){e=t}return{update:d,start:p,end:f,attach:m,values:u,groups:l,fractions:h}},window.threeStats=function(e){var t=null,n={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},r=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],i=[];function o(){t("renderer.info.memory.geometries").set(e.info.memory.geometries),t("renderer.info.programs").set(e.info.programs.length),t("renderer.info.memory.textures").set(e.info.memory.textures),t("renderer.info.render.calls").set(e.info.render.calls),t("renderer.info.render.triangles").set(e.info.render.triangles),t("renderer.info.render.points").set(e.info.render.points)}function a(){}function s(){}function c(e){t=e}return{update:o,start:a,end:s,attach:c,values:n,groups:r,fractions:i}},window.BrowserStats=function(){var e=null,t=0,n=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var r={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},i=[{caption:"Browser",values:["memory","total"]}],o=[{base:"total",steps:["memory"]}],a=Math.log(1024);function s(e){var t=100,n=Math.floor(Math.log(e)/a);return Math.round(e*t/Math.pow(1024,n))/t}function c(){t=s(performance.memory.usedJSHeapSize),n=s(performance.memory.totalJSHeapSize),e("memory").set(t),e("total").set(n)}function u(){t=0}function l(){}function h(t){e=t}return{update:c,start:u,end:l,attach:h,values:r,groups:i,fractions:o}},"object"===typeof t&&(t.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],186:[function(e,t,n){"use strict";(function(){"performance"in window==0&&(window.performance={});var e=window.performance;if("now"in e==0){var t=Date.now();e.timing&&e.timing.navigationStart&&(t=e.timing.navigationStart),e.now=function(){return Date.now()-t}}e.mark||(e.mark=function(){}),e.measure||(e.measure=function(){})})(),window.rStats=function(e){function t(e,t){for(var n=Object.keys(e),r=0,i=n.length;r<i;r++)t(n[r])}function n(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t)}var r=e||{},i=r.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],o="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",a=(r.CSSPath?r.CSSPath:"")+"rStats.css",s=r.css||[o,a];s.forEach(function(e){n(e)}),r.values||(r.values={});var c,u,l=10,h=200,d={};function p(e,t,n){var r=n||{},i=document.createElement("canvas"),o=i.getContext("2d"),a=0,s=0,c=r.color?r.color:"#666666",u=document.createElement("canvas"),d=u.getContext("2d");u.width=1,u.height=2*l,d.fillStyle="#444444",d.fillRect(0,0,1,2*l),d.fillStyle=c,d.fillRect(0,l,1,l),d.fillStyle="#ffffff",d.globalAlpha=.5,d.fillRect(0,l,1,1),d.globalAlpha=1;var p=document.createElement("canvas"),f=p.getContext("2d");function m(){i.width=h,i.height=l,i.style.width=i.width+"px",i.style.height=i.height+"px",i.className="rs-canvas",e.appendChild(i),o.fillStyle="#444444",o.fillRect(0,0,i.width,i.height)}function v(e,t){s+=.1*(e-s),a*=.99,s>a&&(a=s),o.drawImage(i,1,0,i.width-1,i.height,0,0,i.width-1,i.height),t?o.drawImage(p,i.width-1,i.height-s*i.height/a-l):o.drawImage(u,i.width-1,i.height-s*i.height/a-l)}return p.width=1,p.height=2*l,f.fillStyle="#444444",f.fillRect(0,0,1,2*l),f.fillStyle="#b70000",f.fillRect(0,l,1,l),f.globalAlpha=.5,f.fillStyle="#ffffff",f.fillRect(0,l,1,1),f.globalAlpha=1,m(),{draw:v}}function f(e,n){var r=document.createElement("canvas"),o=r.getContext("2d");function a(){r.width=h,r.height=l*n,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",e.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height)}function s(e){o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height);var n=0;t(e,function(t){var a=e[t]*r.height;o.fillStyle=i[t],o.fillRect(r.width-1,n,1,a),n+=a})}return a(),{draw:s}}function m(e,t){var n,i=e,o=0,a=0,s=0,c=0,l=performance.now(),h=0,d=document.createElement("div"),f=document.createElement("span"),m=document.createElement("div"),v=document.createTextNode(""),g=r?r.values[i.toLowerCase()]:null,y=new p(d,i,g),b=!1;function A(e){if(g&&g.average){c+=e,h++;var t=performance.now();t-l>=(g.avgMs||1e3)&&(s=c/h,c=0,l=t,h=0)}}function w(){n=performance.now(),r.userTimingAPI&&performance.mark(i+"-start"),b=!0}function x(){o=performance.now()-n,r.userTimingAPI&&(performance.mark(i+"-end"),b&&performance.measure(i,i+"-start",i+"-end")),A(o)}function E(){x(),w()}function _(){var e=g&&g.average?s:o;v.nodeValue=Math.round(100*e)/100;var t=g&&(g.below&&o<g.below||g.over&&o>g.over);y.draw(o,t),d.className=t?"rs-counter-base alarm":"rs-counter-base"}function M(){var e=performance.now(),t=e-n;a++,t>1e3&&(o=g&&!1===g.interpolate?a:1e3*a/t,a=0,n=e,A(o))}function T(e){o=e,A(o)}return f.className="rs-counter-id",f.textContent=g&&g.caption?g.caption:i,m.className="rs-counter-value",m.appendChild(v),d.appendChild(f),d.appendChild(m),t?t.div.appendChild(d):u.appendChild(d),n=performance.now(),{set:T,start:w,tick:E,end:x,frame:M,value:function(){return o},draw:_}}function v(e){var n=e.toLowerCase();if(void 0===n&&(n="default"),d[n])return d[n];var i=null;r&&r.groups&&t(r.groups,function(e){var t=r.groups[parseInt(e,10)];i||-1===t.values.indexOf(n.toLowerCase())||(i=t)});var o=new m(n,i);return d[n]=o,o}function g(){if(r.plugins){r.values||(r.values={}),r.groups||(r.groups=[]),r.fractions||(r.fractions=[]);for(var e=0;e<r.plugins.length;e++)r.plugins[e].attach(v),t(r.plugins[e].values,function(t){r.values[t]=r.plugins[e].values[t]}),r.groups=r.groups.concat(r.plugins[e].groups),r.fractions=r.fractions.concat(r.plugins[e].fractions)}else r.plugins={};c=document.createElement("div"),c.className="rs-base",u=document.createElement("div"),u.className="rs-container",u.style.height="auto",c.appendChild(u),document.body.appendChild(c),r&&(r.groups&&t(r.groups,function(e){var t=r.groups[parseInt(e,10)],n=document.createElement("div");n.className="rs-group",t.div=n;var i=document.createElement("h1");i.textContent=t.caption,i.addEventListener("click",function(e){this.classList.toggle("hidden"),e.preventDefault()}.bind(n)),u.appendChild(i),u.appendChild(n)}),r.fractions&&t(r.fractions,function(e){var n=r.fractions[parseInt(e,10)],o=document.createElement("div");o.className="rs-fraction";var a=document.createElement("div");a.className="rs-legend";var s=0;t(r.fractions[e].steps,function(t){var n=document.createElement("p");n.textContent=r.fractions[e].steps[t],n.style.color=i[s],a.appendChild(n),s++}),o.appendChild(a),o.style.height=s*l+"px",n.div=o;var c=new f(o,s);n.graph=c,u.appendChild(o)}))}function y(){t(r.plugins,function(e){r.plugins[e].update()}),t(d,function(e){d[e].draw()}),r&&r.fractions&&t(r.fractions,function(e){var n=r.fractions[parseInt(e,10)],i=[],o=d[n.base.toLowerCase()];o&&(o=o.value(),t(r.fractions[e].steps,function(t){var n=r.fractions[e].steps[parseInt(t,10)].toLowerCase(),a=d[n];a&&i.push(a.value()/o)})),n.graph.draw(i)})}return g(),function(e){return e?v(e):{element:c,update:y}}},"object"===typeof t&&(t.exports=window.rStats)},{}],187:[function(e,t,n){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e})},{}],188:[function(t,n,r){var i={base64:function(e,t){return"data:"+e+";base64,"+t},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch(e){return!0}},appendQueryParameter:function(e,t,n){var r=e.indexOf("?")<0?"?":"&";return e+=r+t+"="+n,e},getQueryParameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},isLandscapeMode:function(){return 90==window.orientation||-90==window.orientation}};n.exports=i},{}],189:[function(e,t,n){var r=e("./util.js");function i(){var e=document.createElement("video");e.addEventListener("ended",function(){e.play()}),this.request=function(){e.paused&&(e.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),e.play())},this.release=function(){e.pause(),e.src=""}}function o(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){e&&(clearInterval(e),e=null)}}function a(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?o:i}t.exports=a()},{"./util.js":188}]},{},[149])(149)})}).call(this,r("c8ba"))},b0b4:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("85f2"),i=n.n(r);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i()(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}},b447:function(e,t,n){var r=n("3a38"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},b8e3:function(e,t){e.exports=!0},bcaa:function(e,t,n){var r=n("cb7c"),i=n("d3f4"),o=n("a5b8");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},bf0b:function(t,n,r){var i=r("355d"),o=r("aebd"),a=r("36c3"),s=r("1bc3"),c=r("07e3"),u=r("794b"),l=Object.getOwnPropertyDescriptor;n.f=r("8e60")?l:function(t,n){if(t=a(t),n=s(n,!0),u)try{return l(t,n)}catch(e){}if(c(t,n))return o(!i.f.call(t,n),t[n])}},c207:function(e,t){},c366:function(e,t,n){var r=n("6821"),i=n("9def"),o=n("77f1");e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},c367:function(e,t,n){"use strict";var r=n("8436"),i=n("50ed"),o=n("481b"),a=n("36c3");e.exports=n("30f1")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},c3a1:function(e,t,n){var r=n("e6f3"),i=n("1691");e.exports=Object.keys||function(e){return r(e,i)}},c69a:function(e,t,n){e.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===typeof window&&(r=window)}t.exports=r},ca5a:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},cadf:function(e,t,n){"use strict";var r=n("9c6c"),i=n("d53b"),o=n("84f2"),a=n("6821");e.exports=n("01f9")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},cb7c:function(e,t,n){var r=n("d3f4");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},ccb9:function(e,t,n){t.f=n("5168")},ce10:function(e,t,n){var r=n("69a8"),i=n("6821"),o=n("c366")(!1),a=n("613b")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);while(t.length>c)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},ce7e:function(e,t,n){var r=n("63b6"),i=n("584a"),o=n("294c");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},d225:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d864:function(e,t,n){var r=n("79aa");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},d8d6:function(e,t,n){n("1654"),n("6c1c"),e.exports=n("ccb9").f("iterator")},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},d9f6:function(t,n,r){var i=r("e4ae"),o=r("794b"),a=r("1bc3"),s=Object.defineProperty;n.f=r("8e60")?Object.defineProperty:function(t,n,r){if(i(t),n=a(n,!0),i(r),o)try{return s(t,n,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},dbdb:function(e,t,n){var r=n("584a"),i=n("e53d"),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("b8e3")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},dc62:function(e,t,n){n("9427");var r=n("584a").Object;e.exports=function(e,t){return r.create(e,t)}},dcbc:function(e,t,n){var r=n("2aba");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e4ae:function(e,t,n){var r=n("f772");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},e53d:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e6f3:function(e,t,n){var r=n("07e3"),i=n("36c3"),o=n("5b4e")(!1),a=n("5559")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);while(t.length>c)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},e6fa:function(e,t){if("undefined"===typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("environment",{schema:{active:{default:!1},preset:{default:"default",oneOf:["none","default","contact","egypt","checkerboard","forest","goaland","yavapai","goldmine","arches","threetowers","poison","tron","japan","dream","volcano","starry","osiris"]},seed:{type:"int",default:1,min:0,max:1e3},skyType:{default:"color",oneOf:["none","color","gradient","atmosphere"]},skyColor:{type:"color"},horizonColor:{type:"color"},lighting:{default:"distant",oneOf:["none","distant","point"]},shadow:{default:!1},shadowSize:{default:10},lightPosition:{type:"vec3",default:{x:0,y:1,z:-.2}},fog:{type:"float",default:0,min:0,max:1},flatShading:{default:!1},playArea:{type:"float",default:1,min:.5,max:10},ground:{default:"hills",oneOf:["none","flat","hills","canyon","spikes","noise"]},groundYScale:{type:"float",default:3,min:0,max:50},groundTexture:{default:"none",oneOf:["none","checkerboard","squares","walkernoise"]},groundColor:{type:"color",default:"#553e35"},groundColor2:{type:"color",default:"#694439"},dressing:{default:"none",oneOf:["none","cubes","pyramids","cylinders","hexagons","stones","trees","mushrooms","towers","apparatus","arches","torii"]},dressingAmount:{type:"int",default:10,min:0,max:1e3},dressingColor:{type:"color",default:"#795449"},dressingScale:{type:"float",default:5,min:0,max:100},dressingVariance:{type:"vec3",default:{x:1,y:1,z:1}},dressingUniformScale:{default:!0},dressingOnPlayArea:{type:"float",default:0,min:0,max:1},grid:{default:"none",oneOf:["none","1x1","2x2","crosses","dots","xlines","ylines"]},gridColor:{type:"color",default:"#ccc"}},multiple:!1,presets:{none:{},default:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:1,z:.33},fog:.78,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"checkerboard",groundColor:"#454545",groundColor2:"#5d5d5d",dressing:"none",dressingAmount:10,dressingColor:"#795449",dressingScale:1,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#ccc",shadow:!1},contact:{active:!0,seed:14,skyType:"gradient",skyColor:"#478d54",horizonColor:"#b696cb",lighting:"distant",lightPosition:{x:0,y:2.01,z:-1},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#2e455f",groundColor2:"#694439",dressing:"apparatus",dressingAmount:7,dressingColor:"#657067",dressingScale:20,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#478d54",shadow:!1},egypt:{active:!0,seed:26,skyType:"gradient",skyColor:"#1b7660",horizonColor:"#e4b676",lighting:"distant",lightPosition:{x:0,y:1.65,z:-1},fog:.75,flatShading:!1,playArea:1,ground:"hills",groundYScale:5,groundTexture:"walkernoise",groundColor:"#664735",groundColor2:"#6c4b39",dressing:"pyramids",dressingAmount:10,dressingColor:"#7c5c45",dressingScale:5,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},checkerboard:{active:!0,seed:1,skyType:"gradient",skyColor:"#0d0d0d",horizonColor:"#404040",lighting:"distant",lightPosition:{x:0,y:1,z:-.2},fog:.81,flatShading:!0,playArea:1,ground:"hills",groundYScale:4.81,groundTexture:"checkerboard",groundColor:"#252525",groundColor2:"#111111",dressing:"cubes",dressingAmount:10,dressingColor:"#9f9f9f",dressingScale:1.51,dressingVariance:{x:5,y:20,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#ccc",shadow:!1},forest:{active:!0,seed:8,skyType:"gradient",skyColor:"#24b59f",horizonColor:"#eff9b7",lighting:"distant",lightPosition:{x:-1.2,y:.88,z:-.55},fog:.8,flatShading:!1,playArea:1,ground:"noise",groundYScale:4.18,groundTexture:"squares",groundColor:"#937a24",groundColor2:"#987d2e",dressing:"trees",dressingAmount:500,dressingColor:"#888b1d",dressingScale:1,dressingVariance:{x:10,y:10,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#c5a543",shadow:!1},goaland:{active:!0,seed:17,skyType:"gradient",skyColor:"#14645f",horizonColor:"#a3dab8",lighting:"point",lightPosition:{x:.1,y:4,z:.56},fog:.73,flatShading:!1,playArea:1,ground:"noise",groundYScale:.81,groundTexture:"none",groundColor:"#ae3241",groundColor2:"#db4453",dressing:"mushrooms",dressingAmount:150,dressingColor:"#a9313d",dressingScale:5,dressingVariance:{x:5,y:10,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#239893",shadow:!1},yavapai:{active:!0,seed:11,skyType:"gradient",skyColor:"#239849",horizonColor:"#cfe0af",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!0,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#C66344",groundColor2:"#c96b4b",dressing:"stones",dressingAmount:500,dressingColor:"#C66344",dressingScale:.06,dressingVariance:{x:.2,y:.1,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},goldmine:{active:!0,seed:53,skyType:"gradient",skyColor:"#1e1c1a",horizonColor:"#8c7964",lighting:"point",lightPosition:{x:-.09,y:3,z:.33},fog:.43,flatShading:!0,playArea:1.08,ground:"canyon",groundYScale:50,groundTexture:"none",groundColor:"#353535",groundColor2:"#454545",dressing:"hexagons",dressingAmount:300,dressingColor:"#fe921b",dressingScale:.5,dressingVariance:{x:2,y:8,z:2},dressingUniformScale:!0,dressingOnPlayArea:.03,grid:"none",gridColor:"#ccc",shadow:!1},threetowers:{active:!0,seed:5,skyType:"gradient",skyColor:"#23a06b",horizonColor:"#f5e170",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.26,groundTexture:"walkernoise",groundColor:"#273a49",groundColor2:"#2b464f",dressing:"towers",dressingAmount:3,dressingColor:"#5f6d94",dressingScale:50,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#239893",shadow:!1},poison:{active:!0,seed:92,skyType:"gradient",skyColor:"#1ea84a",horizonColor:"#177132",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"none",groundColor:"#851f31",groundColor2:"#912235",dressing:"hexagons",dressingAmount:20,dressingColor:"#c7415b",dressingScale:20,dressingVariance:{x:20,y:200,z:20},dressingUniformScale:!1,dressingOnPlayArea:0,grid:"crosses",gridColor:"#1ea84a",shadow:!1},arches:{active:!0,seed:19,skyType:"atmosphere",skyColor:"#8cbdc8",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:.16,z:.33},fog:.67,flatShading:!0,playArea:1,ground:"canyon",groundYScale:10,groundTexture:"walkernoise",groundColor:"#a87d6f",groundColor2:"#795449",dressing:"arches",dressingAmount:6,dressingColor:"#795449",dressingScale:26,dressingVariance:{x:20,y:40,z:20},dressingUniformScale:!0,dressingOnPlayArea:.04,grid:"none",gridColor:"#ccc",shadow:!1},tron:{active:!0,seed:14,skyType:"gradient",skyColor:"#091b39",horizonColor:"#284a9e",lighting:"distant",lightPosition:{x:-.72,y:.62,z:.4},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#061123",groundColor2:"#694439",dressing:"towers",dressingAmount:5,dressingColor:"#fb000e",dressingScale:15,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#fb000e",shadow:!1},japan:{active:!0,seed:14,skyType:"gradient",skyColor:"#7e5db5",horizonColor:"#b4adda",lighting:"distant",lightPosition:{x:1.33,y:1,z:.24},fog:.9,flatShading:!1,playArea:1,ground:"hills",groundYScale:25,groundTexture:"walkernoise",groundColor:"#7e5db5",groundColor2:"#cabdf5",dressing:"torii",dressingAmount:4,dressingColor:"#bc5e7c",dressingScale:15,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},dream:{active:!0,seed:17,skyType:"gradient",skyColor:"#87faf4",horizonColor:"#b34093",lighting:"distant",lightPosition:{x:-.72,y:.53,z:.97},fog:.8,flatShading:!1,playArea:1,ground:"hills",groundYScale:20,groundTexture:"checkerboard",groundColor:"#b34093",groundColor2:"#c050a2",dressing:"mushrooms",dressingAmount:300,dressingColor:"#3cf7ed",dressingScale:.2,dressingVariance:{x:.2,y:.2,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},volcano:{active:!0,seed:92,skyType:"gradient",skyColor:"#4a070f",horizonColor:"#f62300",lighting:"point",lightPosition:{x:.5,y:2.25,z:0},fog:.87,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#fb0803",groundColor2:"#510000",dressing:"arches",dressingAmount:15,dressingColor:"#fb0803",dressingScale:3,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!1,dressingOnPlayArea:.2,grid:"none",gridColor:"#fa0e00",shadow:!1},starry:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:-.01,z:-.46},fog:.7,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#553e35",groundColor2:"#694439",dressing:"none",dressingAmount:100,dressingColor:"#795449",dressingScale:5,dressingVariance:{x:1,y:1,z:1},dressingUniformScale:!0,grid:"1x1",dressingOnPlayArea:0,gridColor:"#39d2f2",shadow:!1},osiris:{active:!0,seed:46,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:.02,z:-.46},fog:0,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#9e7b47",groundColor2:"#9e7b47",dressing:"pyramids",dressingAmount:7,dressingColor:"#9e7b47",dressingScale:5,dressingVariance:{x:30,y:30,z:30},dressingUniformScale:!0,grid:"dots",dressingOnPlayArea:0,gridColor:"#daa452",shadow:!1}},init:function(){for(var e in this.environmentData={},this.STAGE_SIZE=200,this.assets={arches:[{type:"mesh",vertices:[409,268,4,351,228,36,336,236,-57,-152,391,69,-135,358,88,-119,330,43,-20,358,-35,-153,357,-47,37,413,-26,-20,411,-14,-302,148,154,-339,121,-126,-389,200,-88,-477,193,-76,-314,346,-19,-314,306,-30,-250,296,-73,-267,237,-82,-212,303,-68,-245,200,-67,-223,304,108,-329,299,107,-289,350,76,-320,342,69,119,373,-39,38,370,8,113,367,52,492,202,-31,462,83,-104,447,71,-80,426,112,25,482,189,-7,222,372,6,121,402,41,87,382,67,221,346,55,559,93,-13,528,47,39,505,21,-111,528,54,-101,616,31,-53,442,256,-15,300,338,19,257,308,-79,408,256,-74,312,352,-26,384,297,-31,437,257,-47,-29,415,53,-232,377,59,-139,335,77,-132,344,2,-18,377,-37,-171,387,-28,-254,384,18,-651,-27,27,-435,-28,179,-345,149,165,-272,-28,23,-215,146,-2,-279,-29,-59,-211,145,-55,-337,-28,-128,-413,247,0,-293,363,24,-214,254,-36,-164,290,33,-284,150,94,-218,362,105,75,369,29,518,147,-63,447,190,-70,445,56,-105,391,185,-60,431,49,-33,459,83,26,470,162,42,130,390,53,167,341,-30,125,394,-45,239,368,-17,91,414,10,450,18,2,449,-27,-9,436,-28,-58,496,-27,-110,582,-28,-140,647,-27,-56,325,325,-45,-307,297,-56,-647,-28,-45,-188,310,-54,-264,197,113,-367,175,139,8,387,82,426,45,-55,114,359,-28,500,27,44,461,-29,13,-512,-27,-151,-152,376,-38,-490,-28,148,12,370,-28,442,160,42,465,194,32,381,183,-33,649,-27,-34,444,16,29,616,-28,25,417,267,-66,-132,352,-34,-322,-27,130,-271,86,-115,-635,-28,-121,-291,203,-99,176,405,-10,561,52,-93,371,305,9,311,237,-22,377,200,-81,-129,406,46,-154,371,99,-82,361,71,-21,354,26,-91,363,-27,-165,413,-12,-414,215,110,-238,127,26,-408,-28,-128,-674,-28,-94,-446,232,-39,-311,226,-90,-255,210,-61,-235,192,-11,-217,218,58,-269,299,124,-386,276,78,-399,281,42,15,373,58,16,393,75,549,107,-46,481,188,-68,409,120,-41,541,81,12,230,368,41,194,350,-50,224,361,-50,604,-28,-10,602,-27,35,486,56,-121,502,69,-120,457,-27,-110,226,317,-40,-584,-28,-124,439,-26,-30,467,-26,39,547,-27,-146,21,368,14,466,229,-29,578,-27,44,609,-27,-96,291,356,-15,290,306,34,255,321,28,231,311,-5,-251,386,50,-183,307,87,-152,307,24,-264,373,-12,-392,-27,190,-333,-28,84,-281,-27,54,-270,-28,-23,-308,-28,-101,-687,-27,-59,39,418,39,413,163,25,404,206,-90,54,400,-31,121,352,8,-454,41,148,-426,9,182,-564,115,3,-427,27,-107,-548,118,-32,-556,122,-53,-517,91,-101,-475,54,140,-461,52,-134,-558,119,-71,-434,286,59,-687,-31,52,-595,146,22,-670,-28,164,-537,166,122,-575,-28,217,-566,159,65,-470,152,136,-712,-29,102,-639,-29,211,-532,-30,181,-442,-30,-100],faces:[76,104,162,1,176,103,103,76,1,2,119,73,73,105,2,2,118,152,45,161,46,46,109,45,3,120,49,49,68,3,3,121,139,139,48,3,4,122,94,94,121,4,6,123,124,9,175,81,10,169,111,10,67,92,88,43,146,11,131,114,11,128,183,13,130,15,90,184,174,90,182,184,130,184,63,14,130,63,15,130,14,16,131,12,15,168,53,18,91,17,131,16,17,65,133,132,65,132,91,67,134,166,166,92,67,20,135,92,20,166,4,4,121,20,22,135,68,25,102,96,25,157,102,69,138,157,69,157,25,39,150,71,71,141,39,28,150,149,149,72,28,142,176,105,36,140,27,27,143,36,32,115,81,32,144,161,161,80,32,77,35,144,34,26,77,78,179,96,145,152,78,178,79,145,80,146,79,147,140,36,143,108,36,143,37,148,74,95,154,154,83,74,72,149,151,151,95,72,38,150,156,40,147,106,70,140,40,40,116,70,42,162,0,35,163,162,43,145,146,46,117,41,47,158,27,48,139,175,122,138,94,157,138,123,52,178,102,52,102,6,52,124,7,7,100,52,53,125,8,57,93,181,56,169,181,59,127,58,60,173,61,62,128,11,11,112,62,65,91,167,65,167,66,126,93,21,22,68,49,72,95,29,142,29,74,74,82,142,75,107,97,75,97,103,76,97,37,104,143,31,78,152,164,78,164,179,79,178,8,97,155,159,107,98,155,83,98,82,154,95,84,39,116,86,86,156,39,87,160,116,24,145,96,162,104,0,105,118,2,43,177,119,44,177,43,91,51,167,44,88,109,46,161,117,3,68,121,3,48,120,4,166,50,50,122,4,5,123,122,123,138,122,110,124,51,170,10,111,110,91,7,7,124,110,8,125,9,9,81,8,186,12,188,92,135,10,11,114,112,64,63,137,13,15,89,89,53,100,64,168,14,14,168,15,89,100,16,16,12,89,100,18,16,17,91,132,112,19,61,18,7,91,19,17,132,133,127,59,133,59,61,136,21,22,134,127,133,20,92,166,121,135,20,158,31,27,21,135,22,23,137,136,24,102,178,178,145,24,25,179,69,26,94,138,27,140,70,27,70,141,150,177,71,28,177,150,29,142,73,73,119,29,142,82,30,30,176,142,107,75,82,31,143,27,33,81,175,31,41,104,115,79,8,32,33,144,80,115,32,33,175,139,35,162,42,77,139,34,163,26,179,163,179,164,78,96,145,177,29,119,108,143,148,148,37,159,97,159,37,74,83,82,38,149,150,156,150,39,40,106,87,87,116,40,140,147,40,161,144,42,42,117,161,41,0,104,41,117,0,0,117,42,164,118,163,1,163,118,118,176,1,118,105,176,152,118,164,43,152,145,43,119,2,71,109,141,47,41,158,44,71,177,45,109,88,45,88,146,46,47,109,141,47,27,167,50,166,49,120,165,139,121,94,5,122,50,123,51,124,157,6,102,157,123,6,100,8,178,5,167,51,6,124,52,100,178,52,53,168,125,125,165,120,54,125,168,9,48,175,120,9,125,93,10,135,181,101,56,57,169,10,59,172,61,67,170,171,67,171,127,58,127,171,129,186,113,60,61,172,61,173,112,62,112,173,174,189,129,165,64,23,64,137,23,165,22,49,64,54,168,17,114,131,17,112,114,66,133,65,19,132,133,19,133,61,134,133,66,166,134,66,166,66,167,93,135,21,68,135,121,23,136,22,94,34,139,25,96,179,26,138,69,69,179,26,30,103,176,116,141,70,39,141,116,73,142,105,143,76,37,26,35,77,103,97,76,77,144,33,33,139,77,38,151,149,80,161,45,80,45,146,81,115,8,107,155,97,82,98,107,95,151,84,38,156,85,86,116,160,96,102,24,72,29,28,29,95,74,75,30,82,108,147,36,88,44,43,91,110,51,170,67,10,11,183,131,64,14,63,89,15,53,100,7,18,112,17,19,127,134,67,136,126,21,158,41,31,33,32,81,115,80,79,177,28,29,43,2,152,71,44,109,47,46,41,141,109,47,167,5,50,123,5,51,100,53,8,125,54,165,9,120,48,93,57,10,59,58,172,174,185,189,165,54,64,165,23,22,94,26,34,30,75,103,143,104,76,26,163,35,38,85,151,192,182,191,183,128,201,12,13,89,181,169,57,186,153,113,188,183,99,184,182,63,185,13,189,180,181,93,186,99,153,189,186,129,185,184,130,186,13,12,187,93,126,193,199,194,194,196,193,200,187,195,187,197,195,187,126,197,197,190,194,190,136,137,190,196,194,63,182,192,63,192,196,192,198,196,191,182,55,193,196,198,194,199,197,195,197,199,136,197,126,190,137,63,190,63,196,197,136,190,192,191,198,201,99,183,90,55,182,181,180,101,185,130,13,186,188,99,186,189,13,187,180,93,200,101,187,183,188,131,184,185,174,180,187,101,16,18,17,12,131,188,35,42,144,163,1,162,76,162,1,79,146,145]}],stones:[{type:"mesh",vertices:[-376,189,42,230,223,-310,353,162,-62,414,-23,-67,256,90,-475,24,85,-526,-418,-16,57,-432,66,-40,-199,151,-376,-155,49,467,-91,289,201,293,197,91,81,-17,-480,42,108,431,-359,-17,-250,383,-19,-243,194,-15,270,-272,180,293,-86,212,262,234,54,297,395,97,-302,-123,-21,-444,-416,-19,-123,-323,-18,267,-100,-16,429,-300,96,-361,163,-19,409,118,201,-431,-241,-18,391,-130,274,-309,306,-19,-399,-221,96,404],faces:[31,18,17,0,17,18,3,20,2,18,11,10,29,27,8,27,29,1,0,18,10,10,29,0,16,19,26,11,2,1,20,30,4,20,3,15,30,12,4,4,12,5,5,27,4,4,27,20,21,25,5,7,8,25,22,7,14,7,25,14,23,28,31,0,7,17,24,26,9,31,28,9,8,27,5,2,20,1,13,19,18,10,11,1,19,13,26,3,11,19,19,16,3,11,3,2,11,18,19,20,15,30,29,10,1,25,21,14,8,5,25,5,12,21,6,7,22,7,6,23,8,0,29,8,7,0,23,31,7,13,31,9,18,31,13,9,28,24,26,13,9,27,1,20,7,31,17]},{type:"mesh",vertices:[-217,34,-153,198,90,20,212,85,169,-131,93,171,197,113,30,173,121,164,315,29,-16,219,24,189,282,50,-102,232,38,-181,-195,-9,-166,-156,30,-207,-51,-9,-231,-180,91,-173,-19,73,-204,-280,23,96,-242,100,107,3,158,-82,109,88,221,275,-10,-40,236,-10,-135,-178,49,184,-1,-10,-243,265,-11,109,-12,-9,237,-36,46,251,-233,86,-81,93,77,-171,-163,133,69,18,16,263,296,44,93,131,-12,-226,-89,-10,-201,-273,-10,-51,-240,-9,110,190,-12,192,-253,-11,-92,42,43,-258,-115,-11,238,168,99,-88,-285,-10,24,71,124,-158,298,-10,10,116,150,-24,-282,44,39],faces:[44,16,26,13,26,16,0,26,13,27,14,41,4,5,1,7,30,2,28,5,43,41,39,27,17,43,41,43,4,39,13,28,17,17,41,13,28,43,17,24,29,38,29,35,7,18,25,29,5,18,2,18,5,3,30,42,6,30,35,23,19,20,8,8,20,9,9,39,8,1,30,8,31,37,9,11,14,37,14,27,37,32,11,12,11,37,12,11,0,13,33,40,44,44,26,33,33,0,36,34,38,15,44,40,15,21,3,16,27,39,9,2,30,1,21,25,3,16,3,28,28,3,5,4,43,5,41,43,39,13,16,28,25,21,38,38,29,25,7,18,29,29,24,35,18,7,2,18,3,25,30,23,42,30,7,35,8,30,6,6,19,8,6,42,19,8,39,1,37,31,22,27,9,37,9,20,31,10,11,32,11,10,0,12,37,22,14,13,41,14,11,13,33,26,0,36,0,10,21,44,15,16,44,21,15,40,34,38,21,15,4,1,39,5,2,1]},{type:"mesh",vertices:[-101,102,57,99,35,102,40,72,80,59,14,-168,-186,22,45,-176,25,-30,66,-7,146,153,-7,53,-110,47,-96,-90,-8,-146,150,-7,-12,-200,-7,8,-173,-7,-55,55,46,-60,125,-7,110,136,30,-10,-149,58,68,-15,82,-71,98,-7,-86,-34,-6,-194,-33,-7,171,-36,65,137,38,-8,-192,-103,-9,147,-12,62,-152],faces:[2,17,0,17,8,0,17,24,8,19,24,22,5,11,4,2,13,17,17,13,24,21,23,20,1,2,21,7,15,1,7,10,15,5,9,12,15,18,13,0,5,16,0,8,5,1,15,2,10,18,15,3,13,18,24,3,22,11,23,4,4,16,5,16,4,23,24,13,3,15,13,2,6,1,21,6,21,20,6,14,1,2,0,21,1,14,7,3,18,22,8,24,19,8,19,9,12,11,5,5,8,9,16,23,21,16,21,0]},{type:"mesh",vertices:[86,55,-18,58,38,73,97,-12,79,135,7,10,-93,-11,-72,-133,5,33,13,68,-32,94,-11,-57,-90,52,53,-24,-11,-106,-13,-10,104,-75,49,-69,-12,18,114,49,-12,-96,-46,-11,-85,-119,-11,-26,48,5,-111,-58,-11,105,-117,-12,52,-5,35,-93,123,-11,7],faces:[5,8,11,2,3,1,8,1,6,11,8,6,6,19,11,10,12,17,20,7,3,3,7,16,16,0,3,16,9,19,14,4,9,15,18,5,5,11,15,18,17,5,19,0,16,1,3,0,0,6,1,19,6,0,12,8,17,2,1,12,12,10,2,1,8,12,3,2,20,16,13,9,16,7,13,19,4,11,15,11,4,17,8,5,9,4,19]}],torii:[{type:"mesh",mirror:!0,flatShading:!0,vertices:[692,966,-52,661,834,-52,692,966,52,661,834,52,0,894,-52,0,776,-52,0,894,52,0,776,52,518,935,52,345,913,52,170,899,52,162,779,52,328,790,52,494,808,52,170,899,-52,345,913,-52,518,935,-52,494,808,-52,328,790,-52,162,779,-52,0,618,16,0,697,16,0,618,-16,0,697,-16,586,618,16,586,697,16,586,618,-16,586,697,-16,331,-29,-75,331,766,-52,369,-29,-65,357,766,-45,396,-29,-37,377,766,-26,406,-29,0,384,766,0,396,-29,37,377,766,26,369,-29,65,357,766,45,331,-29,75,331,766,52,294,-29,65,305,766,45,267,-29,37,286,766,26,257,-29,0,279,766,0,267,-29,-37,286,766,-26,294,-29,-65,305,766,-45,0,777,85,0,681,33,333,762,-75,333,806,-75,371,762,-65,371,806,-65,398,762,-37,398,806,-37,408,762,0,408,806,0,398,762,37,398,806,37,371,762,65,371,806,65,333,762,75,333,806,75,296,762,65,296,806,65,268,762,37,268,806,37,258,762,0,258,806,0,268,762,-37,268,806,-37,296,762,-65,296,806,-65,0,681,-33,0,777,-85,52,681,33,52,777,85,52,681,-33,52,777,-85],faces:[4,10,14,1,13,17,11,6,7,0,3,1,16,1,17,4,19,5,14,18,19,15,17,18,3,8,13,13,9,12,12,10,11,19,7,5,19,12,11,18,13,12,16,2,0,15,8,16,14,9,15,23,26,22,27,24,26,25,20,24,26,20,22,23,25,27,29,30,28,31,32,30,33,34,32,35,36,34,37,38,36,39,40,38,41,42,40,43,44,42,45,46,44,47,48,46,49,50,48,51,28,50,55,56,54,57,58,56,59,60,58,61,62,60,63,64,62,79,81,83,65,66,64,82,53,78,67,68,66,81,53,80,69,70,68,83,80,82,71,72,70,79,82,78,73,74,72,75,63,59,75,76,74,77,54,76,60,68,76,4,6,10,1,3,13,11,10,6,0,2,3,16,0,1,4,14,19,14,15,18,15,16,17,3,2,8,13,8,9,12,9,10,19,11,7,19,18,12,18,17,13,16,8,2,15,9,8,14,10,9,23,27,26,27,25,24,25,21,20,26,24,20,23,21,25,29,31,30,31,33,32,33,35,34,35,37,36,37,39,38,39,41,40,41,43,42,43,45,44,45,47,46,47,49,48,49,51,50,51,29,28,55,57,56,57,59,58,59,61,60,61,63,62,63,65,64,79,52,81,65,67,66,82,80,53,67,69,68,81,52,53,69,71,70,83,81,80,71,73,72,79,83,82,73,75,74,59,57,55,55,77,75,75,73,71,71,69,75,67,65,63,63,61,59,59,55,75,75,69,67,67,63,75,75,77,76,77,55,54,76,54,56,56,58,76,60,62,68,64,66,68,68,70,72,72,74,68,76,58,60,62,64,68,68,74,76]}],hexagons:[{type:"extrude",vertices:[-.198,-.302,.197,-.3,.372,0,.199,.298,-.202,.298,-.368,0]}],towers:[{type:"extrude",vertices:[-.054,-.178,-.007,-.182,.069,-.027,.189,.079,.178,.124,-.007,.097,-.145,.182,-.178,.144,-.079,-.021]},{type:"lathe",segments:4,vertices:[.004,.02,.012,.092,.042,.166,.067,.55,.101,.594,.105,.838,.193,.934,.18,.994]},{type:"lathe",segments:5,vertices:[.069,.216,.067,.562,.126,.562,.128,.774,.191,.774,.193,.986]}],trees:[{type:"lathe",noise:.015,segments:6,vertices:[1e-6,.826,.054,.832,.105,.854,.136,.9,.136,.958,.118,.994]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.01,.069,.022,.13,.068,.178,.18,.189,.32,.191,.59,.193,.75,.138,.79,.018,.808,.018,.996]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.436,.126,.46,.201,.57,.219,.72,.154,.846,.028,.884,.034,.996]}],apparatus:[{type:"lathe",segments:10,vertices:[1e-6,.23,.042,.23,.069,.36,.038,.362,.038,.372,.06,.372,.073,.572,.024,.572,.024,.67,.069,.67,.075,.722,.097,.724,.105,.852,.083,.902,.065,.902,.065,.924,.128,.924,.146,.996]},{type:"lathe",segments:16,vertices:[1e-6,.232,.229,.182,.486,.07,.356,.182,.213,.242,.154,.242,.144,.262,.178,.262,.126,.314,.04,.328,.038,.374,.058,.374,.071,.408,.026,.406,.03,.42,.091,.418,.034,.496,.01,.498,.03,.506,.014,.998]}],mushrooms:[{type:"lathe",noise:.02,segments:14,vertices:[1e-6,.006,.13,.018,.341,.084,.437,.144,.492,.234,.484,.246,.276,.232,.107,.284,.046,.346,.062,.852,.097,.956,.166,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.562,.091,.572,.172,.61,.223,.666,.256,.74,.258,.806,.246,.824,.062,.826,.065,.948,.097,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.768,.099,.772,.219,.802,.306,.844,.352,.886,.352,.908,.118,.904,.107,.93,.115,.966,.14,.996]}]},this.assets)for(var t=0;t<this.assets[e].length;t++){var n=this.assets[e][t];if("mesh"==n.type)for(var r=0,i=n.vertices.length;r<i;r++)n.vertices[r]/=1e3}this.userFog=this.el.sceneEl.getAttribute("fog"),this.sky=document.createElement("a-sky"),this.sky.setAttribute("radius",this.STAGE_SIZE),this.sky.setAttribute("theta-length",110),this.sky.classList.add("environment"),this.stars=null,this.groundMaterial=null,this.ground=document.createElement("a-entity"),this.ground.setAttribute("rotation","-90 0 0"),this.ground.classList.add("environmentGround"),this.ground.classList.add("environment"),this.groundCanvas=null,this.groundTexture=null,this.groundMaterial=null,this.groundGeometry=null,this.dressing=document.createElement("a-entity"),this.dressing.classList.add("environmentDressing"),this.dressing.classList.add("environment"),this.gridCanvas=null,this.gridTexture=null,this.hemilight=document.createElement("a-entity"),this.hemilight.classList.add("environment"),this.hemilight.setAttribute("position","0 50 0"),this.hemilight.setAttribute("light",{type:"hemisphere",color:"#CEE4F0",intensity:.4}),this.sunlight=document.createElement("a-entity"),this.sunlight.classList.add("environment"),this.sunlight.setAttribute("position",this.data.lightPosition),this.sunlight.setAttribute("light",{intensity:.6}),this.el.appendChild(this.hemilight),this.el.appendChild(this.sunlight),this.el.appendChild(this.ground),this.el.appendChild(this.dressing),this.el.appendChild(this.sky)},getFogColor:function(e,t){var n;if("color"==e||"none"==e)n=new THREE.Color(this.environmentData.skyColor);else if("gradient"==e)n=new THREE.Color(this.environmentData.horizonColor);else if("atmosphere"==e){var r=[1,.5,.22,.1,.05,0],i=["#C0CDCF","#81ADC5","#525e62","#2a2d2d","#141616","#000"];if(t<=0)return"#000";t=Math.min(1,t);for(var o=0;o<r.length;o++)if(t>r[o]){var a=new THREE.Color(i[o-1]),s=new THREE.Color(i[o]),c=(t-r[o])/(r[o-1]-r[o]);s.lerp(a,c),n=s;break}}return n.multiplyScalar(.9),n.lerp(new THREE.Color(this.data.groundColor),.3),"#"+n.getHexString()},update:function(e){var t;this.data.preset?(t=AFRAME.utils.clone(this.environmentData),this.environmentData={},Object.assign(this.environmentData,this.data),Object.assign(this.environmentData,this.presets[this.data.preset]),Object.assign(this.environmentData,this.el.components.environment.attrValue)):(t=e,this.environmentData=AFRAME.utils.clone(this.data));var n=this.environmentData.skyType,r=new THREE.Vector3(this.environmentData.lightPosition.x,this.environmentData.lightPosition.y,this.environmentData.lightPosition.z);if(r.normalize(),this.sunlight){if(this.sunlight.setAttribute("position",this.environmentData.lightPosition),"atmosphere"!=n){var i=new THREE.Color(this.environmentData.skyColor);i.r=(i.r+1)/2,i.g=(i.g+1)/2,i.b=(i.b+1)/2,this.hemilight.setAttribute("light",{color:"#"+i.getHexString()}),this.sunlight.setAttribute("light",{intensity:.6}),this.hemilight.setAttribute("light",{intensity:.6})}else this.sunlight.setAttribute("light",{intensity:.1+.5*r.y}),this.hemilight.setAttribute("light",{intensity:.1+.5*r.y});this.sunlight.setAttribute("light",{castShadow:this.environmentData.shadow,shadowCameraLeft:-this.environmentData.shadowSize,shadowCameraBottom:-this.environmentData.shadowSize,shadowCameraRight:this.environmentData.shadowSize,shadowCameraTop:this.environmentData.shadowSize})}if(n!==t.skyType||this.environmentData.skyColor!=t.skyColor||this.environmentData.horizonColor!=t.horizonColor){var o={};o.shader={none:"flat",color:"flat",gradient:"gradientshader",atmosphere:"skyshader"}[n],this.stars&&this.stars.setAttribute("visible","atmosphere"==n),"color"==n?(o.color=this.environmentData.skyColor,o.fog=!1):"gradient"==n&&(o.topColor=this.environmentData.skyColor,o.bottomColor=this.environmentData.horizonColor),this.sky.setAttribute("material",o)}"atmosphere"==n&&(this.sky.setAttribute("material",{sunPosition:r}),this.setStars(2e3*(1-Math.max(0,8*(r.y+.08))))),this.environmentData.fog>0?this.el.sceneEl.setAttribute("fog",{color:this.getFogColor(n,r.y),far:(1.01-this.environmentData.fog)*this.STAGE_SIZE*2}):this.el.sceneEl.removeAttribute("fog"),this.sunlight.setAttribute("light",{type:"point"==this.environmentData.lighting?"point":"directional"}),this.sunlight.setAttribute("visible","none"!==this.environmentData.lighting),this.hemilight.setAttribute("visible","none"!==this.environmentData.lighting);var a=!this.groundGeometry||this.environmentData.seed!=t.seed||this.environmentData.ground!=t.ground||this.environmentData.playArea!=t.playArea||this.environmentData.flatShading!=t.flatShading;(a||this.environmentData.groundColor!=t.groundColor||this.environmentData.groundColor2!=t.groundColor2||this.environmentData.groundYScale!=t.groundYScale||this.environmentData.groundTexture!=t.groundTexture||this.environmentData.gridColor!=t.gridColor||this.environmentData.grid!=t.grid)&&(this.updateGround(a),this.hemilight&&this.hemilight.setAttribute("light",{groundColor:this.environmentData.groundColor})),this.environmentData.seed==t.seed&&this.environmentData.dressingOnPlayArea==t.dressingOnPlayArea&&this.environmentData.dressing==t.dressing&&this.environmentData.flatShading==t.flatShading&&this.environmentData.dressingAmount==t.dressingAmount&&this.environmentData.dressingScale==t.dressingScale&&this.environmentData.dressingColor==t.dressingColor&&this.environmentData.dressingVariance.x==t.dressingVariance.x&&this.environmentData.dressingVariance.y==t.dressingVariance.y&&this.environmentData.dressingVariance.z==t.dressingVariance.z&&this.environmentData.dressingUniformScale==t.dressingUniformScale||this.updateDressing(),this.sky.setAttribute("visible","none"!==n),this.el.setAttribute("visible",this.environmentData.active),this.environmentData.active||(this.userFog?this.el.sceneEl.setAttribute("fog",this.userFog):this.el.sceneEl.removeAttribute("fog")),this.dumpParametersDiff()},logPreset:function(){var e="{";for(var t in this.schema)if("preset"!=t){e+=t+": ";var n=this.schema[t].type;e+="vec3"==n?"{ x: "+this.environmentData[t].x+", y: "+this.environmentData[t].y+", z: "+this.environmentData[t].z+"}":"string"==n||"color"==n?'"'+this.environmentData[t]+'"':this.environmentData[t],e+=", "}e+="}",console.log(e)},dumpParametersDiff:function(){function e(e){return Math.floor(1e3*e)/1e3}var t=[],n="none"!=this.data.preset&&this.presets[this.data.preset];for(var r in n&&t.push("preset: "+this.data.preset),this.schema)if(!("preset"==r||n&&void 0===n[r])){var i=n?n[r]:this.schema[r].default,o=this.environmentData[r],a=this.schema[r].type;if("vec3"==a){var s=i;"string"==typeof i&&(i=i.split(" "),s={x:i[0],y:i[1],z:i[2]}),e(s.x)==e(o.x)&&e(s.y)==e(o.y)&&e(s.z)==e(o.z)||t.push(r+": "+e(o.x)+" "+e(o.y)+" "+e(o.z))}else i!=o&&("number"==this.schema[r].type&&(o=e(o)),t.push(r+": "+o))}console.log("%c"+t.join("; "),"color: #f48;font-weight:bold")},random:function(e){return parseFloat("0."+Math.sin(9999*this.environmentData.seed*e).toString().substr(7))},updateGround:function(e){var t=64;if(e){var r="none"!=this.environmentData.ground;if(this.ground.setAttribute("visible",r),!r)return;this.groundGeometry||(this.groundGeometry=new THREE.PlaneGeometry(this.STAGE_SIZE+2,this.STAGE_SIZE+2,t-1,t-1));for(var i=new n,o=this.groundGeometry.vertices,a=this.groundGeometry.vertices.length,s=10,c=s/t,u=0,l=0,h=0;u<a;u++)if("flat"!=this.environmentData.ground){var d;switch(this.environmentData.ground){case"hills":d=Math.max(0,i.noise(l,h,0));break;case"canyon":d=.2+.8*i.noise(l,h,0),d=Math.min(1,10*Math.pow(d,2));break;case"spikes":d=this.random(u)<.02?this.random(u+1):0;break;case"noise":d=this.random(u)<.35?this.random(u+1):0;break}d+=.1*this.random(u+2);var p=2*l/s-1,f=2*h/s-1,m=this.environmentData.playArea;p=Math.max(0,Math.min(1,(Math.abs(p)-(m-.9))*(1/m))),f=Math.max(0,Math.min(1,(Math.abs(f)-(m-.9))*(1/m))),d*=p>f?p:f,d<.01&&(d=0),o[u].z=d,l+=c,l>=10&&(l=0,h+=c)}else o[u].z=0;this.groundGeometry.computeFaceNormals(),this.environmentData.flatShading?this.groundGeometry.computeFlatVertexNormals():this.groundGeometry.computeVertexNormals(),this.groundGeometry.verticesNeedUpdate=!0,this.groundGeometry.normalsNeedUpdate=!0}this.ground.setAttribute("scale",{z:this.environmentData.groundYScale});var v=2048,g=20,y=this.STAGE_SIZE/g;this.groundCanvas&&this.groundCanvas.width==v||(this.gridCanvas=document.createElement("canvas"),this.gridCanvas.width=v,this.gridCanvas.height=v,this.gridTexture=new THREE.Texture(this.gridCanvas),this.gridTexture.wrapS=THREE.RepeatWrapping,this.gridTexture.wrapT=THREE.RepeatWrapping,this.gridTexture.repeat.set(y,y),this.groundCanvas=document.createElement("canvas"),this.groundCanvas.width=v,this.groundCanvas.height=v,this.groundTexture=new THREE.Texture(this.groundCanvas),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(y,y),this.groundMaterialProps={map:this.groundTexture,emissive:new THREE.Color(16777215),emissiveMap:this.gridTexture},(new THREE.Material).hasOwnProperty("shading")?this.groundMaterialProps.shading=this.environmentData.flatShading?THREE.FlatShading:THREE.SmoothShading:this.groundMaterialProps.flatShading=this.environmentData.flatShading,this.groundMaterial=new THREE.MeshLambertMaterial(this.groundMaterialProps));var b=this.groundCanvas.getContext("2d"),A=this.gridCanvas.getContext("2d");if(this.drawTexture(b,v,g),A.fillStyle="#000000",A.fillRect(0,0,v,v),this.drawGrid(A,v,g),this.groundTexture.needsUpdate=!0,this.gridTexture.needsUpdate=!0,e){var w=new THREE.Mesh(this.groundGeometry,this.groundMaterial);this.ground.setObject3D("mesh",w)}else this.ground.getObject3D("mesh").material=this.groundMaterial;this.ground.setAttribute("shadow",{cast:!1,receive:this.environmentData.shadow})},drawGrid:function(e,t,n){if("none"!=this.environmentData.grid){var r,i,o,a=Math.floor(n/2),s=t/(n/2);switch(e.fillStyle=this.environmentData.gridColor,this.environmentData.grid){case"1x1":case"2x2":for("1x1"==this.environmentData.grid&&(a*=2,s=t/n),r=0;r<a;r++)o=Math.floor(r*s),e.fillRect(0,o,t,1),e.fillRect(o,0,1,t);break;case"crosses":var c=Math.floor(s/20);for(r=0;r<a+1;r++)for(o=Math.floor(r*s),i=0;i<a+1;i++){var u=Math.floor(i*s-c);e.fillRect(u,o,2*c,1),e.fillRect(o,u,1,2*c)}break;case"dots":for(r=0;r<a+1;r++)for(i=0;i<a+1;i++)e.beginPath(),e.arc(Math.floor(i*s),Math.floor(r*s),4,0,2*Math.PI),e.fill();break;case"xlines":for(r=0;r<a;r++)e.fillRect(Math.floor(r*s),0,1,t);break;case"ylines":for(r=0;r<a;r++)e.fillRect(0,Math.floor(r*s),t,1);break}}},drawTexture:function(e,t,r){var i,o,a,s,c,u,l;if(e.fillStyle=this.environmentData.groundColor,e.fillRect(0,0,t,t),"none"!=this.environmentData.groundTexture)switch(this.environmentData.groundTexture){case"checkerboard":e.fillStyle=this.environmentData.groundColor2;var h=Math.floor(r/2),d=t/(r/2);for(i=0;i<h+1;i+=2)for(var p=0;p<h+1;p++)e.fillRect(Math.floor((i+p%2)*d),Math.floor(p*d),Math.floor(d),Math.floor(d));break;case"squares":var f=16,m=t/f;for(a=new THREE.Color(this.environmentData.groundColor),s=new THREE.Color(this.environmentData.groundColor2),i=0;i<f*f;i++)o=this.random(i+3)>.5?a.clone():s.clone(),o.addScalar(.1*this.random(i+3)-.05),e.fillStyle="#"+o.getHexString(),e.fillRect(i%f*m,Math.floor(i/f)*m,m,m);break;case"noise":u=e.getImageData(0,0,t,t),c=u.data,a=new THREE.Color(this.environmentData.groundColor),s=new THREE.Color(this.environmentData.groundColor2);var v=new THREE.Color(s.r-a.r,s.g-a.g,s.b-a.b),g=new n;for(i=0,p=0,l=c.length;i<l;i+=4,p++){var y=g.noise(p%t/t*3,p/t/t*3,0);c[i+0]=Math.floor(255*(a.r+v.r*y)),c[i+1]=Math.floor(255*(a.g+v.g*y)),c[i+2]=Math.floor(255*(a.b+v.b*y))}e.putImageData(u,0,0);break;case"walkernoise":var b=Math.floor(t/2),A=document.createElement("canvas");A.width=b,A.height=b;var w=A.getContext("2d");w.fillStyle=this.environmentData.groundColor,w.fillRect(0,0,b,b),u=w.getImageData(0,0,b,b),c=u.data,a=new THREE.Color(this.environmentData.groundColor),s=new THREE.Color(this.environmentData.groundColor2);var x=[],E=1e3;for(i=0;i<E;i++)o=a.clone().lerp(s,Math.random()),x.push({x:Math.random()*b,y:Math.random()*b,r:Math.floor(255*o.r),g:Math.floor(255*o.g),b:Math.floor(255*o.b)});for(var _=5e3,M=0;M<_;M++)for(i=0;i<E;i++){var T=x[i],C=4*Math.floor(T.y*b+T.x);c[C+0]=T.r,c[C+1]=T.g,c[C+2]=T.b,T.x+=Math.floor(3*Math.random())-1,T.y+=Math.floor(3*Math.random())-1,T.x>=b&&(T.x=T.x-b),T.y>=b&&(T.y=T.y-b),T.x<0&&(T.x=b+T.x),T.y<0&&(T.y=b+T.y)}w.putImageData(u,0,0),e.drawImage(A,0,0,t,t);break}},getAssetGeometry:function(e){if(!e)return null;var t,n,r,i=[],o=this;function a(e,t){for(var n=new THREE.Vector3,r=0,i=e.vertices.length;r<i;r++)n.x=(o.random(r)-.5)*t,n.y=(o.random(r+i)-.5)*t,n.z=(o.random(r+2*i)-.5)*t,e.vertices[r].add(n)}for(var s=0;s<e.length;s++)if("lathe"==e[s].type){var c=-99999,u=[];for(r=e[s].vertices,t=0;t<r.length;t+=2)u.push(new THREE.Vector2(r[t],r[t+1])),r[t+1]>c&&(c=r[t+1]);n=new THREE.LatheGeometry(u,e[s]["segments"]||8),n.applyMatrix((new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(-Math.PI,0,0))),n.applyMatrix((new THREE.Matrix4).makeTranslation(0,c,0)),e[s]["noise"]&&a(n,e[s].noise),i.push(n)}else if("extrude"==e[s].type){var l=new THREE.Shape;for(r=e[s].vertices,t=0;t<r.length;t+=2)0==t?l.moveTo(r[t],r[t+1]):l.lineTo(r[t],r[t+1]);n=new THREE.ExtrudeGeometry(l,{depth:1,bevelEnabled:!1}),n.applyMatrix((new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(-Math.PI/2,0,0))),e[s]["noise"]&&a(n,e[s].noise),i.push(n)}else if("mesh"==e[s].type){n=new THREE.Geometry,r=e[s].vertices;for(var h=e[s].faces,d=0;d<r.length;d+=3)n.vertices.push(new THREE.Vector3(r[d],r[d+1],r[d+2]));for(var p=0;p<h.length;p+=3)n.faces.push(new THREE.Face3(h[p],h[p+1],h[p+2]));this.environmentData.flatShading||e[s]["flatShading"]?n.computeFaceNormals():n.computeVertexNormals(),e[s]["mirror"]&&n.merge(n,(new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(0,Math.PI,0))),e[s]["noise"]&&a(n,e[s].noise),i.push(n)}return i},updateDressing:function(){var e=new THREE.Object3D;if(this.dressing.setAttribute("visible","none"!=this.environmentData.dressing),"none"!=this.environmentData.dressing){var t,n=new THREE.Geometry;switch(this.environmentData.dressing){case"cubes":t=[new THREE.BoxGeometry(1,1,1)],t[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;case"pyramids":t=[new THREE.ConeGeometry(1,1,4,1,!0)],t[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;case"cylinders":t=[new THREE.CylinderGeometry(.5,.5,1,8,1,!0)],t[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;default:if(t=this.getAssetGeometry(this.assets[this.environmentData.dressing]),!t)return;break}for(var r=0,i=88343;r<this.environmentData.dressingAmount;r++,i++){var o,a=t[Math.floor(this.random(33+r)*t.length)],s=this.environmentData.dressingScale,c=new THREE.Vector3(this.environmentData.dressingVariance.x,this.environmentData.dressingVariance.y,this.environmentData.dressingVariance.z),u=this.random(i)<this.environmentData.dressingOnPlayArea;o=u?15*this.random(i+1):10+Math.max(c.x,c.z)+10*this.random(i+1)+this.random(i+2)*this.STAGE_SIZE/3;var l=this.random(i+3)*Math.PI*2,h=new THREE.Matrix4,d=this.random(i+4),p=this.environmentData.dressingUniformScale;h.compose(new THREE.Vector3(Math.cos(l)*o,0,Math.sin(l)*o),(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),(this.random(i+5)-.5)*c.length()*Math.PI*2),new THREE.Vector3(s+(p?d:this.random(i+6))*c.x,s+(p?d:this.random(i+7))*c.y,s+(p?d:this.random(i+8))*c.z)),n.merge(a,h)}var f=new THREE.BufferGeometry;f.fromGeometry(n);var m=new THREE.MeshLambertMaterial({color:new THREE.Color(this.environmentData.dressingColor),vertexColors:THREE.VertexColors});this.environmentData.flatShading&&f.computeVertexNormals();var v=new THREE.Mesh(f,m);e.add(v),this.dressing.setObject3D("mesh",e)}},createStars:function(){for(var e=2e3,t=new THREE.BufferGeometry,n=new Float32Array(3*e),r=this.STAGE_SIZE-1,i=new THREE.Vector3,o=0;o<n.length;o+=3)i.set(this.random(o+23)-.5,this.random(o+24),this.random(o+25)-.5),i.normalize(),i.multiplyScalar(r),n[o]=i.x,n[o+1]=i.y,n[o+2]=i.z;t.addAttribute("position",new THREE.BufferAttribute(n,3)),t.setDrawRange(0,0);var a=new THREE.PointsMaterial({size:.01,color:13421772,fog:!1});this.stars.setObject3D("mesh",new THREE.Points(t,a))},setStars:function(e){this.stars||(this.stars=document.createElement("a-entity"),this.stars.id="stars",this.createStars(),this.el.appendChild(this.stars)),e=Math.floor(Math.min(2e3,Math.max(0,e))),this.stars.getObject3D("mesh").geometry.setDrawRange(0,e)}}),AFRAME.registerShader("skyshader",{schema:{luminance:{type:"number",default:1,min:0,max:2,is:"uniform"},turbidity:{type:"number",default:2,min:0,max:20,is:"uniform"},reileigh:{type:"number",default:1,min:0,max:4,is:"uniform"},mieCoefficient:{type:"number",default:.005,min:0,max:.1,is:"uniform"},mieDirectionalG:{type:"number",default:.8,min:0,max:1,is:"uniform"},sunPosition:{type:"vec3",default:{x:0,y:0,z:-1},is:"uniform"},color:{type:"color",default:"#fff"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D skySampler;","uniform vec3 sunPosition;","varying vec3 vWorldPosition;","vec3 cameraPos = vec3(0., 0., 0.);","uniform float luminance;","uniform float turbidity;","uniform float reileigh;","uniform float mieCoefficient;","uniform float mieDirectionalG;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float pn = 0.035;","const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);","const vec3 K = vec3(0.686, 0.678, 0.666);","const float v = 4.0;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3(0.0, 1.0, 0.0);","const float EE = 1000.0;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float cutoffAngle = pi/1.95;","const float steepness = 1.5;","vec3 totalRayleigh(vec3 lambda)","{","return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));","}","vec3 simplifiedRayleigh()","{","return 0.0005 / vec3(94, 40, 18);","}","float rayleighPhase(float cosTheta)","{   ","return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));","}","vec3 totalMie(vec3 lambda, vec3 K, float T)","{","float c = (0.2 * T ) * 10E-18;","return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;","}","float hgPhase(float cosTheta, float g)","{","return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));","}","float sunIntensity(float zenithAngleCos)","{","return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));","}","// Filmic ToneMapping http://filmicgames.com/archives/75","float A = 0.15;","float B = 0.50;","float C = 0.10;","float D = 0.20;","float E = 0.02;","float F = 0.30;","float W = 1000.0;","vec3 Uncharted2Tonemap(vec3 x)","{","return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;","}","void main() ","{","float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);","float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));","vec3 sunDirection = normalize(sunPosition);","float sunE = sunIntensity(dot(sunDirection, up));","vec3 betaR = simplifiedRayleigh() * reileighCoefficient;","vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;","float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));","float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","vec3 Fex = exp(-(betaR * sR + betaM * sM));","float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);","float rPhase = rayleighPhase(cosTheta*0.5+0.5);","vec3 betaRTheta = betaR * rPhase;","float mPhase = hgPhase(cosTheta, mieDirectionalG);","vec3 betaMTheta = betaM * mPhase;","vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));","Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));","vec3 direction = normalize(vWorldPosition - cameraPos);","float theta = acos(direction.y); // elevation --\x3e y-axis, [-pi/2, pi/2]","float phi = atan(direction.z, direction.x); // azimuth --\x3e x-axis [-pi/2, pi/2]","vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);","vec3 L0 = vec3(0.1) * Fex;","float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);","L0 += (sunE * 19000.0 * Fex)*sundisk;","vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));","vec3 texColor = (Lin+L0);   ","texColor *= 0.04 ;","texColor += vec3(0.0,0.001,0.0025)*0.3;","float g_fMaxLuminance = 1.0;","float fLumScaled = 0.1 / luminance;     ","float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (g_fMaxLuminance * g_fMaxLuminance)))) / (1.0 + fLumScaled); ","float ExposureBias = fLumCompressed;","vec3 curr = Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);","vec3 color = curr*whiteScale;","vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));","gl_FragColor.rgb = retColor;","gl_FragColor.a = 1.0;","}"].join("\n")}),AFRAME.registerShader("gradientshader",{schema:{topColor:{type:"color",default:"1 0 0",is:"uniform"},bottomColor:{type:"color",default:"0 0 1",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {"," vec4 worldPosition = modelMatrix * vec4( position, 1.0 );"," vWorldPosition = worldPosition.xyz;"," gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 bottomColor;","uniform vec3 topColor;","uniform float offset;","varying vec3 vWorldPosition;","void main() {"," float h = normalize( vWorldPosition ).y;"," gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max(h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );","}"].join("\n")});var n=function(e){var t;for(void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[],t=0;t<256;t++)this.p[t]=Math.floor(256*e.random(666));for(this.perm=[],t=0;t<512;t++)this.perm[t]=this.p[255&t]};n.prototype.dot=function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r},n.prototype.mix=function(e,t,n){return(1-n)*e+n*t},n.prototype.fade=function(e){return e*e*e*(e*(6*e-15)+10)},n.prototype.noise=function(e,t,n){var r=Math.floor(e),i=Math.floor(t),o=Math.floor(n);e-=r,t-=i,n-=o,r&=255,i&=255,o&=255;var a=this.perm[r+this.perm[i+this.perm[o]]]%12,s=this.perm[r+this.perm[i+this.perm[o+1]]]%12,c=this.perm[r+this.perm[i+1+this.perm[o]]]%12,u=this.perm[r+this.perm[i+1+this.perm[o+1]]]%12,l=this.perm[r+1+this.perm[i+this.perm[o]]]%12,h=this.perm[r+1+this.perm[i+this.perm[o+1]]]%12,d=this.perm[r+1+this.perm[i+1+this.perm[o]]]%12,p=this.perm[r+1+this.perm[i+1+this.perm[o+1]]]%12,f=this.dot(this.grad3[a],e,t,n),m=this.dot(this.grad3[l],e-1,t,n),v=this.dot(this.grad3[c],e,t-1,n),g=this.dot(this.grad3[d],e-1,t-1,n),y=this.dot(this.grad3[s],e,t,n-1),b=this.dot(this.grad3[h],e-1,t,n-1),A=this.dot(this.grad3[u],e,t-1,n-1),w=this.dot(this.grad3[p],e-1,t-1,n-1),x=this.fade(e),E=this.fade(t),_=this.fade(n),M=this.mix(f,m,x),T=this.mix(y,b,x),C=this.mix(v,g,x),S=this.mix(A,w,x),L=this.mix(M,C,E),R=this.mix(T,S,E),P=this.mix(L,R,_);return P}},ead6:function(t,n,r){var i=r("f772"),o=r("e4ae"),a=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,i){try{i=r("d864")(Function.call,r("bf0b").f(Object.prototype,"__proto__").set,2),i(t,[]),n=!(t instanceof Array)}catch(e){n=!0}return function(e,t){return a(e,t),n?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:a}},ebd6:function(e,t,n){var r=n("cb7c"),i=n("d8e8"),o=n("2b4c")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},ebfd:function(e,t,n){var r=n("62a0")("meta"),i=n("f772"),o=n("07e3"),a=n("d9f6").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("294c")(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return u&&f.NEED&&c(e)&&!o(e,r)&&l(e),e},f=e.exports={KEY:r,NEED:!1,fastKey:h,getWeak:d,onFreeze:p}},f605:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},f751:function(e,t,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},f772:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},f921:function(e,t,n){n("014b"),n("c207"),n("69d3"),n("765d"),e.exports=n("584a").Symbol},fa5b:function(e,t,n){e.exports=n("5537")("native-function-to-string",Function.toString)},fa99:function(e,t,n){n("0293"),e.exports=n("584a").Object.getPrototypeOf},fab2:function(e,t,n){var r=n("7726").document;e.exports=r&&r.documentElement}}]);
//# sourceMappingURL=chunk-vendors.d8069004.js.map